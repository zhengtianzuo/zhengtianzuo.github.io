<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="tianzuo.Qiankun" />
<meta property="og:image" content="" />
<meta property="og:description" content="基于抽屉式文件存储的NoSql数据库，可用于文件打包，数据整合，加密存放等多种用途。可以方便快捷的搭建和部署存储应用的系统。" />
<meta property="og:url" content="https://github.com/zhengtianzuo/tianzuo.Qiankun" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="" />
<meta name="twitter:title" content="tianzuo.Qiankun" />
<meta name="twitter:description" content="基于抽屉式文件存储的NoSql数据库，可用于文件打包，数据整合，加密存放等多种用途。可以方便快捷的搭建和部署存储应用的系统。" />
<!-- END twitter metadata -->
<title>天佐.乾坤袋: 天佐.乾坤袋</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="tianzuo.Qiankun.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/zhengtianzuo/tianzuo.Qiankun" class="github-corner" title="view sdk on GitHub" target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tianzuo.Qiankun.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">天佐.乾坤袋
   &#160;<span id="projectnumber">tianzuo.Qiankun</span>
   </div>
   <div id="projectbrief">NoSql数据库 NoSql database</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">天佐.乾坤袋 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a><img src="logo.png" alt="" class="inline"/>    </p>
<h3><a class="anchor" id="autotoc_md0"></a>
tianzuo.Qiankun</h3>
<p><img src="https://img.shields.io/badge/release-1.0.0.0-blue.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/date-24.1.1-orange.svg" alt="" style="pointer-events: none;" class="inline"/></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="3"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">operating system   </td><td class="markdownTableBodyNone" colspan="2"><img src="https://img.shields.io/badge/os-windows_7+-blue.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/os-macos_10.14+-lightgrey.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/os-ubuntu_20.04+-orange.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/os-android_5.0+-green.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/os-ios_12.0+-lightgrey.svg" alt="" style="pointer-events: none;" class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">compiler   </td><td class="markdownTableBodyNone" colspan="2"><img src="https://img.shields.io/badge/c++-11-blue.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/msvc-14.0-blue.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/msvc-14.1-blue.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/msvc-14.2-blue.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/msvc-14.3-blue.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/ndk-21.3-green.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/llvm-10.0-lightgrey.svg" alt="" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/gcc-9.4-orange.svg" alt="" style="pointer-events: none;" class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">programming language   </td><td class="markdownTableBodyNone" colspan="2"><p class="starttd"><img src="C.png" alt="" class="inline"/>     <img src="C__.png" alt="" class="inline"/>     <img src="Python.png" alt="" class="inline"/>     <img src="Java.png" alt="" class="inline"/>     <img src="C_.png" alt="" class="inline"/>     <img src="JavaScript.png" alt="" class="inline"/>     <img src="PHP.png" alt="" class="inline"/>     <img src="Visual_Basic.png" alt="" class="inline"/>     <img src="Go.png" alt="" class="inline"/>     <img src="Rust.png" alt="" class="inline"/>     <img src="Ruby.png" alt="" class="inline"/>    </p>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1"></a>
introduction</h1>
<div class="image">
<img src="alchemy_tianzuo.Qiankun.jpg" alt=""/>
</div>
    <p><b>tianzuo.Qiankun</b> NoSql database based on drawer file storage can be used for file packaging, data integration, encryption storage and other purposes. The storage system can be easily and quickly built and deployed.</p>
<p><b>legend:</b> It's owned by Maitreya. It's for storage purposes. With incredible power, there is a strange space inside, a space so large that it seems to contain heaven and earth. There's more in the bag. There's more than enough.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
motivation</h1>
<p>Build a NoSql database that can manage data with simple interface calls.</p>
<div class="image">
<img src="tianzuo.Qiankun.png" alt=""/>
</div>
    <h1><a class="anchor" id="autotoc_md3"></a>
features</h1>
<ul>
<li>🧩 simple integration</li>
<li>📦 integrated simple storage files can be compressed freely</li>
<li>🪢 the data is encrypted by 256-bit AES algorithm</li>
<li>📒 data can be added, deleted, modified, or queried in batches</li>
<li>📃 supports direct access to raw data streams</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
screenshot</h1>
<p><b>tianzuo.Qiankun Test:</b> <img src="screenshot.png" alt="" class="inline"/>    </p>
<h1><a class="anchor" id="autotoc_md5"></a>
example</h1>
<details >
<summary >
cpp</summary>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="tianzuo_8_qiankun_interface_8h.html">tianzuo.QiankunInterface.h</a>&quot;</span> <span class="comment">// 接口头文件 interface heaher file</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// 准备数据 prepare data</span></div>
<div class="line">    <a class="code hl_struct" href="struct_qiankun__db__verify.html">Qiankun_db_verify_struct</a> db_verify(<span class="stringliteral">&quot;qiankunDataBase.Ztz&quot;</span>, <span class="stringliteral">&quot;password&quot;</span>);</div>
<div class="line">    <span class="keywordtype">int</span> integer = 12345678;</div>
<div class="line">    <a class="code hl_struct" href="struct_qiankun__data__type__tag.html">Qiankun_data_type_struct</a> data_type(<a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3066d7fb736b23b5889e2adf2529d462a36191d41cbaacabffaf05dac0eae429a">Qiankun_data_type_integer</a>, -1, <span class="stringliteral">&quot;integer&quot;</span>);</div>
<div class="line">    <a class="code hl_struct" href="struct_qiankun__user__data__tag.html">Qiankun_user_data_struct</a> user_data(&amp;integer, 0);</div>
<div class="line">    <span class="keywordtype">int</span> data_size = 0;</div>
<div class="line">    <a class="code hl_struct" href="struct_qiankun__get__user__data__tag.html">Qiankun_get_user_data_struct</a> get_user_data(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*&amp;<span class="keyword">&gt;</span>(integer), &amp;data_size);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 初始化接口 initialize the interface</span></div>
<div class="line">    std::unique_ptr&lt;tianzuo_QiankunInterface&gt; qiankun_interface(<span class="keyword">new</span> <a class="code hl_class" href="classtianzuo___qiankun_interface.html">tianzuo_QiankunInterface</a>());</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 创建实例 create an instance</span></div>
<div class="line">    <a class="code hl_class" href="classtianzuo___qiankun_int.html">tianzuo_QiankunInt</a>* qiankun = qiankun_interface-&gt;<a class="code hl_function" href="classtianzuo___qiankun_int.html#a0a37140668515bc4afe1f75cc9fc05bb">initialize</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 初始化实例 initialize the instance</span></div>
<div class="line">    <span class="keywordtype">int</span> error_code = qiankun-&gt;<a class="code hl_function" href="classtianzuo___qiankun_int.html#a0a37140668515bc4afe1f75cc9fc05bb">initialize</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;initialize error: &quot;</span> &lt;&lt; error_code;</div>
<div class="line">        <span class="keywordflow">goto</span> return_error;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// 创建数据库 create database</span></div>
<div class="line">    error_code = qiankun-&gt;<a class="code hl_function" href="classtianzuo___qiankun_int.html#aeb6af70eb67396bf7d36e4db750e8c1f">db_create_database</a>(&amp;db_verify, <span class="stringliteral">&quot;qiankunDataBase&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;db_create_database error: &quot;</span> &lt;&lt; error_code;</div>
<div class="line">        <span class="keywordflow">goto</span> return_error;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 打开数据库 open database</span></div>
<div class="line">    error_code = qiankun-&gt;<a class="code hl_function" href="classtianzuo___qiankun_int.html#a6cb1c5d564cac9f9ae90d6f92c6efc62">db_open_database</a>(&amp;db_verify);</div>
<div class="line">    <span class="keywordflow">if</span> (error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;db_open_database error: &quot;</span> &lt;&lt; error_code;</div>
<div class="line">        <span class="keywordflow">goto</span> return_error;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 向数据库写入一个整型数据 writes an integer to the database</span></div>
<div class="line">    error_code = qiankun-&gt;<a class="code hl_function" href="classtianzuo___qiankun_int.html#af36dc384837a430d15b4d1cb38f3f0f7">data_combine</a>(&amp;db_verify, &amp;data_type, <span class="keyword">nullptr</span>, &amp;user_data, <span class="keyword">false</span>, -1);</div>
<div class="line">    <span class="keywordflow">if</span> (error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;data_combine error: &quot;</span> &lt;&lt; error_code;</div>
<div class="line">        <span class="keywordflow">goto</span> return_error;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 读取刚写入的数据 read the data just written</span></div>
<div class="line">    integer = -1;</div>
<div class="line">    error_code = qiankun-&gt;<a class="code hl_function" href="classtianzuo___qiankun_int.html#a0ee590107bd7f857c05d8e781a67fc18">data_extract</a>(&amp;db_verify, &amp;data_type, <span class="keyword">nullptr</span>, &amp;get_user_data);</div>
<div class="line">    <span class="keywordflow">if</span> (error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;data_extract error: &quot;</span> &lt;&lt; error_code;</div>
<div class="line">        <span class="keywordflow">goto</span> return_error;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;get integer data: &quot;</span> &lt;&lt; integer;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 关闭数据库 close database</span></div>
<div class="line">    error_code = qiankun-&gt;<a class="code hl_function" href="classtianzuo___qiankun_int.html#a0bc0238fa948f6bcaf24072cb3862806">db_close_database</a>(&amp;db_verify);</div>
<div class="line">    <span class="keywordflow">if</span> (error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;db_close_database error: &quot;</span> &lt;&lt; error_code;</div>
<div class="line">        <span class="keywordflow">goto</span> return_error;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">return_error:</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 释放接口 terminate the interface</span></div>
<div class="line">    <span class="keywordflow">if</span> (qiankun_interface != <span class="keyword">nullptr</span> &amp;&amp; qiankun != <span class="keyword">nullptr</span>) {</div>
<div class="line">        qiankun_interface-&gt;terminate(&amp;qiankun);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;test done -------------------&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclasstianzuo___qiankun_int_html"><div class="ttname"><a href="classtianzuo___qiankun_int.html">tianzuo_QiankunInt</a></div><div class="ttdoc">乾坤袋模块类 for c++</div><div class="ttdef"><b>Definition</b> tianzuo.QiankunInterface.h:98</div></div>
<div class="ttc" id="aclasstianzuo___qiankun_int_html_a0a37140668515bc4afe1f75cc9fc05bb"><div class="ttname"><a href="classtianzuo___qiankun_int.html#a0a37140668515bc4afe1f75cc9fc05bb">tianzuo_QiankunInt::initialize</a></div><div class="ttdeci">virtual int initialize()=0</div></div>
<div class="ttc" id="aclasstianzuo___qiankun_int_html_a0bc0238fa948f6bcaf24072cb3862806"><div class="ttname"><a href="classtianzuo___qiankun_int.html#a0bc0238fa948f6bcaf24072cb3862806">tianzuo_QiankunInt::db_close_database</a></div><div class="ttdeci">virtual int db_close_database(Qiankun_db_verify_pointer db_verify)=0</div></div>
<div class="ttc" id="aclasstianzuo___qiankun_int_html_a0ee590107bd7f857c05d8e781a67fc18"><div class="ttname"><a href="classtianzuo___qiankun_int.html#a0ee590107bd7f857c05d8e781a67fc18">tianzuo_QiankunInt::data_extract</a></div><div class="ttdeci">virtual int data_extract(Qiankun_db_verify_pointer db_verify, Qiankun_data_type_pointer data_type, Qiankun_function_pointer function, Qiankun_get_user_data_pointer get_user_data)=0</div></div>
<div class="ttc" id="aclasstianzuo___qiankun_int_html_a6cb1c5d564cac9f9ae90d6f92c6efc62"><div class="ttname"><a href="classtianzuo___qiankun_int.html#a6cb1c5d564cac9f9ae90d6f92c6efc62">tianzuo_QiankunInt::db_open_database</a></div><div class="ttdeci">virtual int db_open_database(Qiankun_db_verify_pointer db_verify)=0</div></div>
<div class="ttc" id="aclasstianzuo___qiankun_int_html_aeb6af70eb67396bf7d36e4db750e8c1f"><div class="ttname"><a href="classtianzuo___qiankun_int.html#aeb6af70eb67396bf7d36e4db750e8c1f">tianzuo_QiankunInt::db_create_database</a></div><div class="ttdeci">virtual int db_create_database(Qiankun_db_verify_pointer db_verify, const char *db_name, bool const over_write)=0</div></div>
<div class="ttc" id="aclasstianzuo___qiankun_int_html_af36dc384837a430d15b4d1cb38f3f0f7"><div class="ttname"><a href="classtianzuo___qiankun_int.html#af36dc384837a430d15b4d1cb38f3f0f7">tianzuo_QiankunInt::data_combine</a></div><div class="ttdeci">virtual int data_combine(Qiankun_db_verify_pointer db_verify, Qiankun_data_type_pointer data_type, const char *remark, Qiankun_user_data_pointer user_data, bool const compress, int const data_index)=0</div></div>
<div class="ttc" id="aclasstianzuo___qiankun_interface_html"><div class="ttname"><a href="classtianzuo___qiankun_interface.html">tianzuo_QiankunInterface</a></div><div class="ttdoc">乾坤袋接口 for c++</div><div class="ttdef"><b>Definition</b> tianzuo.QiankunInterface.h:583</div></div>
<div class="ttc" id="astruct_qiankun__data__type__tag_html"><div class="ttname"><a href="struct_qiankun__data__type__tag.html">Qiankun_data_type_tag</a></div><div class="ttdoc">数据类型</div><div class="ttdef"><b>Definition</b> tianzuo.QiankunInterface.h:38</div></div>
<div class="ttc" id="astruct_qiankun__db__verify_html"><div class="ttname"><a href="struct_qiankun__db__verify.html">Qiankun_db_verify</a></div><div class="ttdoc">数据库验证</div><div class="ttdef"><b>Definition</b> tianzuo.QiankunInterface.h:27</div></div>
<div class="ttc" id="astruct_qiankun__get__user__data__tag_html"><div class="ttname"><a href="struct_qiankun__get__user__data__tag.html">Qiankun_get_user_data_tag</a></div><div class="ttdoc">返回用户数据</div><div class="ttdef"><b>Definition</b> tianzuo.QiankunInterface.h:76</div></div>
<div class="ttc" id="astruct_qiankun__user__data__tag_html"><div class="ttname"><a href="struct_qiankun__user__data__tag.html">Qiankun_user_data_tag</a></div><div class="ttdoc">用户数据</div><div class="ttdef"><b>Definition</b> tianzuo.QiankunInterface.h:65</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3066d7fb736b23b5889e2adf2529d462a36191d41cbaacabffaf05dac0eae429a"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3066d7fb736b23b5889e2adf2529d462a36191d41cbaacabffaf05dac0eae429a">Qiankun_data_type_integer</a></div><div class="ttdeci">@ Qiankun_data_type_integer</div><div class="ttdoc">整型</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:29</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a></div><div class="ttdeci">@ Qiankun_errorcode_success</div><div class="ttdoc">正确的值</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:61</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html">tianzuo.QiankunInterface.h</a></div></div>
</div><!-- fragment --> </details>
<details >
<summary >
python</summary>
<div class="fragment"><div class="line"><span class="keyword">from</span> ctypes <span class="keyword">import</span> *</div>
<div class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</div>
<div class="line"><span class="keyword">import</span> ctypes</div>
<div class="line"> </div>
<div class="line">tianzuo_QiankunLib = cdll.LoadLibrary(<span class="stringliteral">&#39;./tianzuo.Qiankun.dll&#39;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Qiankun_error_code(Enum):</div>
<div class="line">    Qiankun_errorcode_success           = 1 <span class="comment"># 正确的值</span></div>
<div class="line">    Qiankun_errorcode_normal            = 2 <span class="comment"># 错误的值</span></div>
<div class="line">    Qiankun_errorcode_differ            = 3 <span class="comment"># 数据库文件数效验未通过 (The number of database files fails to be verified)</span></div>
<div class="line">    Qiankun_errorcode_no_rights         = 4 <span class="comment"># 数据库密码效验未通过 (The database password verification failed)</span></div>
<div class="line">    Qiankun_errorcode_db_not_exist      = 5 <span class="comment"># 数据库文件不存在 (The database file does not exist)</span></div>
<div class="line">    Qiankun_errorcode_exist             = 6 <span class="comment"># 数据已存在 (Data already exists)</span></div>
<div class="line">    Qiankun_errorcode_not_exist         = 7 <span class="comment"># 数据不存在 (Data does not exist)</span></div>
<div class="line">    Qiankun_errorcode_out_of_range      = 8 <span class="comment"># 超出范围 (out of range)</span></div>
<div class="line">    Qiankun_errorcode_type              = 9 <span class="comment"># 类型不符 (wrong type)</span></div>
<div class="line">    Qiankun_errorcode_param             = 10 <span class="comment"># 参数错误 (parameter error)</span></div>
<div class="line">    Qiankun_errorcode_compress          = 11 <span class="comment"># 压缩错误 (compression error)</span></div>
<div class="line">    Qiankun_errorcode_get_array         = 12 <span class="comment"># 数组错误 (arrary error)</span></div>
<div class="line">    Qiankun_errorcode_out_of_memory     = 13 <span class="comment"># 内存溢出 (memory overflow)</span></div>
<div class="line">    Qiankun_errorcode_handle            = 14 <span class="comment"># 句柄错误 (error handle)</span></div>
<div class="line">    Qiankun_errorcode_io                = 15 <span class="comment"># IO错误 (io error)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="classtianzuo___qiankun_int.html">tianzuo_QiankunInt</a>:</div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize.restype = c_void_p</div>
<div class="line">        self.obj = tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize()</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__del__(self):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInterface_terminate.argtypes = [c_void_p]</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInterface_terminate(self.obj)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>initialize(self):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize.restype = c_int</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInt_initialize.argtypes = [c_void_p]</div>
<div class="line">        <span class="keywordflow">return</span> tianzuo_QiankunLib.tianzuo_QiankunInt_initialize(self.obj)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>db_create_database(self, db_file_name, db_password, db_name, over_write):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, c_int]</div>
<div class="line">        <span class="keywordflow">return</span> tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database(self.obj, db_file_name, db_password, db_name, over_write)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>db_open_database(self, db_file_name, db_password):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database.argtypes = [c_void_p, c_char_p, c_char_p]</div>
<div class="line">        <span class="keywordflow">return</span> tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database(self.obj, db_file_name, db_password)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>db_close_database(self, db_file_name, db_password):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database.argtypes = [c_void_p, c_char_p, c_char_p]</div>
<div class="line">        <span class="keywordflow">return</span> tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database(self.obj, db_file_name, db_password)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>data_int_combine(self, db_file_name, db_password, data_name, remark, data):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, c_char_p, c_int]</div>
<div class="line">        <span class="keywordflow">return</span> tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine(self.obj, db_file_name, db_password, data_name, remark, data)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>data_int_extract(self, db_file_name, db_password, data_name, data):</div>
<div class="line">        tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, ctypes.POINTER(ctypes.c_int)]</div>
<div class="line">        <span class="keywordflow">return</span> tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract(self.obj, db_file_name, db_password, data_name, data)</div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>main():</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># 初始化接口 initialize the interface</span></div>
<div class="line">    print(<span class="stringliteral">&quot;initialize the interface&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># 创建实例 create an instance</span></div>
<div class="line">    qiankun = <a class="code hl_class" href="classtianzuo___qiankun_int.html">tianzuo_QiankunInt</a>()</div>
<div class="line">    error_code = qiankun.initialize()</div>
<div class="line">    <span class="keywordflow">if</span> error_code != Qiankun_error_code.Qiankun_errorcode_success.value:</div>
<div class="line">        print(<span class="stringliteral">&quot;initialize error:&quot;</span>, error_code)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># 创建数据库 create database</span></div>
<div class="line">    db_file_name = b<span class="stringliteral">&quot;qiankunDataBase.Ztz&quot;</span></div>
<div class="line">    db_password = b<span class="stringliteral">&quot;password&quot;</span></div>
<div class="line">    error_code = qiankun.db_create_database(db_file_name, db_password, b<span class="stringliteral">&quot;qiankunDataBase&quot;</span>, <span class="keyword">True</span>)</div>
<div class="line">    <span class="keywordflow">if</span> error_code != Qiankun_error_code.Qiankun_errorcode_success.value:</div>
<div class="line">        print(<span class="stringliteral">&quot;db_create_database error:&quot;</span>, error_code)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># 打开数据库 open database</span></div>
<div class="line">    error_code = qiankun.db_open_database(db_file_name, db_password)</div>
<div class="line">    <span class="keywordflow">if</span> error_code != Qiankun_error_code.Qiankun_errorcode_success.value:</div>
<div class="line">        print(<span class="stringliteral">&quot;db_open_database error:&quot;</span>, error_code)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># 向数据库写入一个整型数据 writes an integer to the database</span></div>
<div class="line">    intInt = 12345678</div>
<div class="line">    error_code = qiankun.data_int_combine(db_file_name, db_password, b<span class="stringliteral">&quot;integer&quot;</span>, <span class="keywordtype">None</span>, intInt)</div>
<div class="line">    <span class="keywordflow">if</span> error_code != Qiankun_error_code.Qiankun_errorcode_success.value:</div>
<div class="line">        print(<span class="stringliteral">&quot;data_combine error:&quot;</span>, error_code)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># 读取刚写入的数据 read the data just written</span></div>
<div class="line">    return_data = ctypes.c_int()</div>
<div class="line">    error_code = qiankun.data_int_extract(db_file_name, db_password, b<span class="stringliteral">&quot;integer&quot;</span>, ctypes.byref(return_data))</div>
<div class="line">    <span class="keywordflow">if</span> error_code != Qiankun_error_code.Qiankun_errorcode_success.value:</div>
<div class="line">        print(<span class="stringliteral">&quot;data_extract error:&quot;</span>, error_code)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line"> </div>
<div class="line">    integer = return_data.value</div>
<div class="line">    print(<span class="stringliteral">&quot;get integer data: {}&quot;</span>.format(integer))</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># 关闭数据库 close database</span></div>
<div class="line">    error_code = qiankun.db_close_database(db_file_name, db_password)</div>
<div class="line">    <span class="keywordflow">if</span> error_code != Qiankun_error_code.Qiankun_errorcode_success.value:</div>
<div class="line">        print(<span class="stringliteral">&quot;db_close_database error:&quot;</span>, error_code)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line"> </div>
<div class="line">    print(<span class="stringliteral">&quot;test done -------------------&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">    main()</div>
</div><!-- fragment --> </details>
<details >
<summary >
java</summary>
<div class="fragment"><div class="line"><span class="keyword">package </span>cn.camelsoft;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> com.sun.jna.Library;</div>
<div class="line"><span class="keyword">import</span> com.sun.jna.Native;</div>
<div class="line"><span class="keyword">import</span> com.sun.jna.Pointer;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a> {</div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>           (0x00000001),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7ae4ecae994aebf210c2e58e05192c66ed">Qiankun_errorcode_normal</a>            (0x00000002),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7af4af2a89ff840a0c044b82e744043f84">Qiankun_errorcode_differ</a>            (0x00000003),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a9a09ae3aac19ee018c77f9c3b0f9d1b0">Qiankun_errorcode_no_rights</a>         (0x00000004),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a6465531a69cdd291bdc216f5c183eeac">Qiankun_errorcode_db_not_exist</a>      (0x00000005),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aeb5def2fd068b2d462b5807c0be44ab4">Qiankun_errorcode_exist</a>             (0x00000006),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77ae468fdf80a766766624813f2e7453">Qiankun_errorcode_not_exist</a>         (0x00000007),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7afa25f0a03f97c1098bcd7f0b8314a92a">Qiankun_errorcode_out_of_range</a>      (0x00000008),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aae44d7527ef134d993db7a623cfa7fd2">Qiankun_errorcode_type</a>              (0x00000009),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a97fde6d3a06aabe4392950142a9c52e4">Qiankun_errorcode_param</a>             (0x0000000A),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77a83983817f1f956368aa82516bec2b">Qiankun_errorcode_compress</a>          (0x0000000B),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a523f62589da3aa1bf6f484e996aee702">Qiankun_errorcode_get_array</a>         (0x0000000C),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a726f7435283d7d06054fd689f5371899">Qiankun_errorcode_out_of_memory</a>     (0x0000000D),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a3d36d463c402b5f8cc9da2127b2f3935">Qiankun_errorcode_handle</a>            (0x0000000E),   </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a21594cac592ab73f4f2e845aba3c4627">Qiankun_errorcode_io</a>                (0x0000000F);   </div>
<div class="line"> </div>
<div class="line">    <span class="keyword">private</span> <span class="keywordtype">int</span> value;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>(<span class="keywordtype">int</span> value) {</div>
<div class="line">        this.value = value;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> getValue() {</div>
<div class="line">        <span class="keywordflow">return</span> value;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Main {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">interface </span>tianzuo_QiankunLib <span class="keyword">extends</span> Library {</div>
<div class="line">        tianzuo_QiankunLib instance = (tianzuo_QiankunLib) Native.load(<span class="stringliteral">&quot;./tianzuo.Qiankun.dll&quot;</span>, tianzuo_QiankunLib.class);</div>
<div class="line">        Pointer <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#ad8a8283c9edf0a154e38d4a2731bdf5e">tianzuo_QiankunInterface_initialize</a>();</div>
<div class="line">        <span class="keywordtype">void</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a8e7efae20f08cc39de5ca26d29f4facb">tianzuo_QiankunInterface_terminate</a>(Pointer qiankun);</div>
<div class="line">        <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a29e678d4ce7b294a0acaba8ae460712c">tianzuo_QiankunInt_initialize</a>(Pointer qiankun);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a15100945191955a5ba17a4cf15b42c63">tianzuo_QiankunInt_db_create_database</a>(Pointer qiankun, String db_file_name, String db_password, String db_name, Boolean over_write);</div>
<div class="line">        <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#ab699f0d89960ba223d28a1d7ae8a5a53">tianzuo_QiankunInt_db_open_database</a>(Pointer qiankun, String db_file_name, String db_password);</div>
<div class="line">        <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#aff36d2d6df4d42b177dbcb1a12205291">tianzuo_QiankunInt_db_close_database</a>(Pointer qiankun, String db_file_name, String db_password);</div>
<div class="line">        <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a3648c06181305fc854de9c4d9c5af849">tianzuo_QiankunInt_data_int_combine</a>(Pointer qiankun, String db_file_name, String db_password, String data_name, String remark, <span class="keywordtype">int</span> data);</div>
<div class="line">        <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a09e47e1e0c2a34d43c90daf7ece336d2">tianzuo_QiankunInt_data_int_extract</a>(Pointer qiankun, String db_file_name, String db_password, String data_name, <span class="keywordtype">int</span>[] data);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> main(String[] args) {</div>
<div class="line">        System.setProperty(<span class="stringliteral">&quot;jna.encoding&quot;</span>,<span class="stringliteral">&quot;UTF-8&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 初始化接口 initialize the interface</span></div>
<div class="line">        System.out.printf(<span class="stringliteral">&quot;initialize the interface\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 创建实例 create an instance</span></div>
<div class="line">        Pointer qiankun = tianzuo_QiankunLib.instance.tianzuo_QiankunInterface_initialize();</div>
<div class="line">        <span class="keywordtype">int</span> error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_initialize(qiankun);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success.getValue()) {</div>
<div class="line">            System.out.printf(<span class="stringliteral">&quot;tianzuo_QiankunInt_initialize error: %d\n&quot;</span>, error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 创建数据库 create database</span></div>
<div class="line">        String db_file_name = <span class="stringliteral">&quot;qiankunDataBase.Ztz&quot;</span>;</div>
<div class="line">        String db_password = <span class="stringliteral">&quot;password&quot;</span>;</div>
<div class="line">        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, <span class="stringliteral">&quot;qiankunDataBase&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success.getValue()) {</div>
<div class="line">            System.out.printf(<span class="stringliteral">&quot;tianzuo_QiankunInt_db_create_database error: %d\n&quot;</span>, error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 打开数据库 open database</span></div>
<div class="line">        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success.getValue()) {</div>
<div class="line">            System.out.printf(<span class="stringliteral">&quot;tianzuo_QiankunInt_db_open_database error: %d\n&quot;</span>, error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 向数据库写入一个整型数据 writes an integer to the database</span></div>
<div class="line">        <span class="keywordtype">int</span> intInt = 12345678;</div>
<div class="line">        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, <span class="stringliteral">&quot;integer&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, intInt);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success.getValue()) {</div>
<div class="line">            System.out.printf(<span class="stringliteral">&quot;tianzuo_QiankunInt_data_int_combine error: %d\n&quot;</span>, error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 读取刚写入的数据 read the data just written</span></div>
<div class="line">        <span class="keywordtype">int</span>[] return_data = {0};</div>
<div class="line">        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, <span class="stringliteral">&quot;integer&quot;</span>, return_data);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success.getValue()) {</div>
<div class="line">            System.out.printf(<span class="stringliteral">&quot;tianzuo_QiankunInt_data_int_extract error: %d\n&quot;</span>, error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        System.out.printf(<span class="stringliteral">&quot;get int: %d\n&quot;</span>, return_data[0]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 关闭数据库 close database</span></div>
<div class="line">        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success.getValue()) {</div>
<div class="line">            System.out.printf(<span class="stringliteral">&quot;tianzuo_QiankunInt_db_close_database error: %d\n&quot;</span>, error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        System.out.printf(<span class="stringliteral">&quot;test done -------------------\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        tianzuo_QiankunLib.instance.tianzuo_QiankunInterface_terminate(qiankun);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a></div><div class="ttdeci">Qiankun_error_code</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:60</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a21594cac592ab73f4f2e845aba3c4627"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a21594cac592ab73f4f2e845aba3c4627">Qiankun_errorcode_io</a></div><div class="ttdeci">@ Qiankun_errorcode_io</div><div class="ttdoc">IO错误 (io error)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:75</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a3d36d463c402b5f8cc9da2127b2f3935"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a3d36d463c402b5f8cc9da2127b2f3935">Qiankun_errorcode_handle</a></div><div class="ttdeci">@ Qiankun_errorcode_handle</div><div class="ttdoc">句柄错误 (error handle)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:74</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a523f62589da3aa1bf6f484e996aee702"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a523f62589da3aa1bf6f484e996aee702">Qiankun_errorcode_get_array</a></div><div class="ttdeci">@ Qiankun_errorcode_get_array</div><div class="ttdoc">数组错误 (arrary error)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:72</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a6465531a69cdd291bdc216f5c183eeac"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a6465531a69cdd291bdc216f5c183eeac">Qiankun_errorcode_db_not_exist</a></div><div class="ttdeci">@ Qiankun_errorcode_db_not_exist</div><div class="ttdoc">数据库文件不存在 (The database file does not exist)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:65</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a726f7435283d7d06054fd689f5371899"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a726f7435283d7d06054fd689f5371899">Qiankun_errorcode_out_of_memory</a></div><div class="ttdeci">@ Qiankun_errorcode_out_of_memory</div><div class="ttdoc">内存溢出 (memory overflow)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:73</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a77a83983817f1f956368aa82516bec2b"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77a83983817f1f956368aa82516bec2b">Qiankun_errorcode_compress</a></div><div class="ttdeci">@ Qiankun_errorcode_compress</div><div class="ttdoc">压缩错误 (compression error)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:71</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a77ae468fdf80a766766624813f2e7453"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77ae468fdf80a766766624813f2e7453">Qiankun_errorcode_not_exist</a></div><div class="ttdeci">@ Qiankun_errorcode_not_exist</div><div class="ttdoc">数据不存在 (Data does not exist)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:67</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a97fde6d3a06aabe4392950142a9c52e4"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a97fde6d3a06aabe4392950142a9c52e4">Qiankun_errorcode_param</a></div><div class="ttdeci">@ Qiankun_errorcode_param</div><div class="ttdoc">参数错误 (parameter error)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:70</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7a9a09ae3aac19ee018c77f9c3b0f9d1b0"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a9a09ae3aac19ee018c77f9c3b0f9d1b0">Qiankun_errorcode_no_rights</a></div><div class="ttdeci">@ Qiankun_errorcode_no_rights</div><div class="ttdoc">数据库密码效验未通过 (The database password verification failed)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:64</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7aae44d7527ef134d993db7a623cfa7fd2"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aae44d7527ef134d993db7a623cfa7fd2">Qiankun_errorcode_type</a></div><div class="ttdeci">@ Qiankun_errorcode_type</div><div class="ttdoc">类型不符 (wrong type)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:69</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7ae4ecae994aebf210c2e58e05192c66ed"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7ae4ecae994aebf210c2e58e05192c66ed">Qiankun_errorcode_normal</a></div><div class="ttdeci">@ Qiankun_errorcode_normal</div><div class="ttdoc">错误的值</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:62</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7aeb5def2fd068b2d462b5807c0be44ab4"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aeb5def2fd068b2d462b5807c0be44ab4">Qiankun_errorcode_exist</a></div><div class="ttdeci">@ Qiankun_errorcode_exist</div><div class="ttdoc">数据已存在 (Data already exists)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:66</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7af4af2a89ff840a0c044b82e744043f84"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7af4af2a89ff840a0c044b82e744043f84">Qiankun_errorcode_differ</a></div><div class="ttdeci">@ Qiankun_errorcode_differ</div><div class="ttdoc">数据库文件数效验未通过 (The number of database files fails to be verified)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:63</div></div>
<div class="ttc" id="atianzuo_8_qiankun_8h_html_a3309cdf05bd56e3dfd38a958001803d7afa25f0a03f97c1098bcd7f0b8314a92a"><div class="ttname"><a href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7afa25f0a03f97c1098bcd7f0b8314a92a">Qiankun_errorcode_out_of_range</a></div><div class="ttdeci">@ Qiankun_errorcode_out_of_range</div><div class="ttdoc">超出范围 (out of range)</div><div class="ttdef"><b>Definition</b> tianzuo.Qiankun.h:68</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_a09e47e1e0c2a34d43c90daf7ece336d2"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#a09e47e1e0c2a34d43c90daf7ece336d2">tianzuo_QiankunInt_data_int_extract</a></div><div class="ttdeci">tianzuo_Qiankun_lib int tianzuo_QiankunInt_data_int_extract(tianzuo_QiankunInt *QiankunInt_pointer, const char *db_file_name, const char *db_password, const char *data_name, int *data)</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_a15100945191955a5ba17a4cf15b42c63"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#a15100945191955a5ba17a4cf15b42c63">tianzuo_QiankunInt_db_create_database</a></div><div class="ttdeci">tianzuo_Qiankun_lib int tianzuo_QiankunInt_db_create_database(tianzuo_QiankunInt *QiankunInt_pointer, const char *db_file_name, const char *db_password, const char *db_name, bool const over_write)</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_a29e678d4ce7b294a0acaba8ae460712c"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#a29e678d4ce7b294a0acaba8ae460712c">tianzuo_QiankunInt_initialize</a></div><div class="ttdeci">tianzuo_Qiankun_lib int tianzuo_QiankunInt_initialize(tianzuo_QiankunInt *QiankunInt_pointer)</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_a3648c06181305fc854de9c4d9c5af849"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#a3648c06181305fc854de9c4d9c5af849">tianzuo_QiankunInt_data_int_combine</a></div><div class="ttdeci">tianzuo_Qiankun_lib int tianzuo_QiankunInt_data_int_combine(tianzuo_QiankunInt *QiankunInt_pointer, const char *db_file_name, const char *db_password, const char *data_name, const char *remark, int data)</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_a8e7efae20f08cc39de5ca26d29f4facb"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#a8e7efae20f08cc39de5ca26d29f4facb">tianzuo_QiankunInterface_terminate</a></div><div class="ttdeci">tianzuo_Qiankun_lib void tianzuo_QiankunInterface_terminate(tianzuo_QiankunInt **QiankunInt_pointer)</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_ab699f0d89960ba223d28a1d7ae8a5a53"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#ab699f0d89960ba223d28a1d7ae8a5a53">tianzuo_QiankunInt_db_open_database</a></div><div class="ttdeci">tianzuo_Qiankun_lib int tianzuo_QiankunInt_db_open_database(tianzuo_QiankunInt *QiankunInt_pointer, const char *db_file_name, const char *db_password)</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_ad8a8283c9edf0a154e38d4a2731bdf5e"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#ad8a8283c9edf0a154e38d4a2731bdf5e">tianzuo_QiankunInterface_initialize</a></div><div class="ttdeci">tianzuo_Qiankun_lib tianzuo_QiankunInt * tianzuo_QiankunInterface_initialize()</div></div>
<div class="ttc" id="atianzuo_8_qiankun_interface_8h_html_aff36d2d6df4d42b177dbcb1a12205291"><div class="ttname"><a href="tianzuo_8_qiankun_interface_8h.html#aff36d2d6df4d42b177dbcb1a12205291">tianzuo_QiankunInt_db_close_database</a></div><div class="ttdeci">tianzuo_Qiankun_lib int tianzuo_QiankunInt_db_close_database(tianzuo_QiankunInt *QiankunInt_pointer, const char *db_file_name, const char *db_password)</div></div>
</div><!-- fragment --> </details>
<details >
<summary >
csharp</summary>
<div class="fragment"><div class="line"><span class="keyword">using </span>System.Runtime.InteropServices;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>       = 0x00000001,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7ae4ecae994aebf210c2e58e05192c66ed">Qiankun_errorcode_normal</a>        = 0x00000002,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7af4af2a89ff840a0c044b82e744043f84">Qiankun_errorcode_differ</a>        = 0x00000003,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a9a09ae3aac19ee018c77f9c3b0f9d1b0">Qiankun_errorcode_no_rights</a>     = 0x00000004,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a6465531a69cdd291bdc216f5c183eeac">Qiankun_errorcode_db_not_exist</a>  = 0x00000005,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aeb5def2fd068b2d462b5807c0be44ab4">Qiankun_errorcode_exist</a>         = 0x00000006,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77ae468fdf80a766766624813f2e7453">Qiankun_errorcode_not_exist</a>     = 0x00000007,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7afa25f0a03f97c1098bcd7f0b8314a92a">Qiankun_errorcode_out_of_range</a>  = 0x00000008,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aae44d7527ef134d993db7a623cfa7fd2">Qiankun_errorcode_type</a>          = 0x00000009,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a97fde6d3a06aabe4392950142a9c52e4">Qiankun_errorcode_param</a>         = 0x0000000A,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77a83983817f1f956368aa82516bec2b">Qiankun_errorcode_compress</a>      = 0x0000000B,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a523f62589da3aa1bf6f484e996aee702">Qiankun_errorcode_get_array</a>     = 0x0000000C,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a726f7435283d7d06054fd689f5371899">Qiankun_errorcode_out_of_memory</a> = 0x0000000D,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a3d36d463c402b5f8cc9da2127b2f3935">Qiankun_errorcode_handle</a>        = 0x0000000E,              </div>
<div class="line">    <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a21594cac592ab73f4f2e845aba3c4627">Qiankun_errorcode_io</a>            = 0x0000000F,              </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Program {</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> IntPtr <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#ad8a8283c9edf0a154e38d4a2731bdf5e">tianzuo_QiankunInterface_initialize</a>();</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a8e7efae20f08cc39de5ca26d29f4facb">tianzuo_QiankunInterface_terminate</a>(IntPtr qiankun);</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a29e678d4ce7b294a0acaba8ae460712c">tianzuo_QiankunInt_initialize</a>(IntPtr qiankun);</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a15100945191955a5ba17a4cf15b42c63">tianzuo_QiankunInt_db_create_database</a>(IntPtr qiankun, <span class="keywordtype">string</span> db_file_name, <span class="keywordtype">string</span> db_password, <span class="keywordtype">string</span> db_name, <span class="keywordtype">bool</span> over_write);</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#ab699f0d89960ba223d28a1d7ae8a5a53">tianzuo_QiankunInt_db_open_database</a>(IntPtr qiankun, <span class="keywordtype">string</span> db_file_name, <span class="keywordtype">string</span> db_password);</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#aff36d2d6df4d42b177dbcb1a12205291">tianzuo_QiankunInt_db_close_database</a>(IntPtr qiankun, <span class="keywordtype">string</span> db_file_name, <span class="keywordtype">string</span> db_password);</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a3648c06181305fc854de9c4d9c5af849">tianzuo_QiankunInt_data_int_combine</a>(IntPtr qiankun, <span class="keywordtype">string</span> db_file_name, <span class="keywordtype">string</span> db_password, <span class="keywordtype">string</span> data_name, <span class="keywordtype">string</span> remark, <span class="keywordtype">int</span> data);</div>
<div class="line">    [DllImport(<span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a09e47e1e0c2a34d43c90daf7ece336d2">tianzuo_QiankunInt_data_int_extract</a>(IntPtr qiankun, <span class="keywordtype">string</span> db_file_name, <span class="keywordtype">string</span> db_password, <span class="keywordtype">string</span> data_name, ref <span class="keywordtype">int</span> data);</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> Main(<span class="keywordtype">string</span>[] args) {</div>
<div class="line">        <span class="comment">// 初始化接口 initialize the interface</span></div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;initialize the interface\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 创建实例 create an instance</span></div>
<div class="line">        IntPtr qiankun = <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#ad8a8283c9edf0a154e38d4a2731bdf5e">tianzuo_QiankunInterface_initialize</a>();</div>
<div class="line">        <span class="keywordtype">int</span> error_code = <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a29e678d4ce7b294a0acaba8ae460712c">tianzuo_QiankunInt_initialize</a>(qiankun);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != ((<span class="keywordtype">int</span>)<a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success))</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;tianzuo_QiankunInt_initialize error:&quot;</span> + error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 创建数据库 create database</span></div>
<div class="line">        <span class="keywordtype">string</span> db_file_name = <span class="stringliteral">&quot;qiankunDataBase.Ztz&quot;</span>;</div>
<div class="line">        <span class="keywordtype">string</span> db_password = <span class="stringliteral">&quot;password&quot;</span>;</div>
<div class="line">        error_code = <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a15100945191955a5ba17a4cf15b42c63">tianzuo_QiankunInt_db_create_database</a>(qiankun, db_file_name, db_password, <span class="stringliteral">&quot;qiankunDataBase&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != ((<span class="keywordtype">int</span>)<a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success))</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;tianzuo_QiankunInt_db_create_database error:&quot;</span> + error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 打开数据库 open database</span></div>
<div class="line">        error_code = <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#ab699f0d89960ba223d28a1d7ae8a5a53">tianzuo_QiankunInt_db_open_database</a>(qiankun, db_file_name, db_password);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != ((<span class="keywordtype">int</span>)<a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success)) {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;tianzuo_QiankunInt_db_open_database error:&quot;</span> + error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 向数据库写入一个整型数据 writes an integer to the database</span></div>
<div class="line">        <span class="keywordtype">int</span> intInt = 12345678;</div>
<div class="line">        error_code = <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a3648c06181305fc854de9c4d9c5af849">tianzuo_QiankunInt_data_int_combine</a>(qiankun, db_file_name, db_password, <span class="stringliteral">&quot;integer&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, intInt);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != ((<span class="keywordtype">int</span>)<a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success))</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;tianzuo_QiankunInt_data_int_combine error:&quot;</span> + error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 读取刚写入的数据 read the data just written</span></div>
<div class="line">        <span class="keywordtype">int</span> return_data = 0;</div>
<div class="line">        error_code = <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a09e47e1e0c2a34d43c90daf7ece336d2">tianzuo_QiankunInt_data_int_extract</a>(qiankun, db_file_name, db_password, <span class="stringliteral">&quot;integer&quot;</span>, ref return_data);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != ((<span class="keywordtype">int</span>)<a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success))</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;tianzuo_QiankunInt_data_int_extract error:&quot;</span> + error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;get int: &quot;</span> + return_data);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 关闭数据库 close database</span></div>
<div class="line">        error_code = <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#aff36d2d6df4d42b177dbcb1a12205291">tianzuo_QiankunInt_db_close_database</a>(qiankun, db_file_name, db_password);</div>
<div class="line">        <span class="keywordflow">if</span> (error_code != ((<span class="keywordtype">int</span>)<a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a>.Qiankun_errorcode_success))</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;tianzuo_QiankunInt_db_close_database error:&quot;</span> + error_code);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;test done -------------------\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="tianzuo_8_qiankun_interface_8h.html#a8e7efae20f08cc39de5ca26d29f4facb">tianzuo_QiankunInterface_terminate</a>(qiankun);</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --> </details>
<details >
<summary >
javascript</summary>
<div class="fragment"><div class="line">Qiankun_errorcode_success           = 0x00000001;   ///&lt;  正确的值</div>
<div class="line">Qiankun_errorcode_normal            = 0x00000002;   ///&lt;  错误的值</div>
<div class="line">Qiankun_errorcode_differ            = 0x00000003;   ///&lt;  数据库文件数效验未通过 (The number of database files fails to be verified)</div>
<div class="line">Qiankun_errorcode_no_rights         = 0x00000004;   ///&lt;  数据库密码效验未通过 (The database password verification failed)</div>
<div class="line">Qiankun_errorcode_db_not_exist      = 0x00000005;   ///&lt;  数据库文件不存在 (The database file does not exist)</div>
<div class="line">Qiankun_errorcode_exist             = 0x00000006;   ///&lt;  数据已存在 (Data already exists)</div>
<div class="line">Qiankun_errorcode_not_exist         = 0x00000007;   ///&lt;  数据不存在 (Data does not exist)</div>
<div class="line">Qiankun_errorcode_out_of_range      = 0x00000008;   ///&lt;  超出范围 (out of range)</div>
<div class="line">Qiankun_errorcode_type              = 0x00000009;   ///&lt;  类型不符 (wrong type)</div>
<div class="line">Qiankun_errorcode_param             = 0x0000000A;   ///&lt;  参数错误 (parameter error)</div>
<div class="line">Qiankun_errorcode_compress          = 0x0000000B;   ///&lt;  压缩错误 (compression error)</div>
<div class="line">Qiankun_errorcode_get_array         = 0x0000000C;   ///&lt;  数组错误 (arrary error)</div>
<div class="line">Qiankun_errorcode_out_of_memory     = 0x0000000D;   ///&lt;  内存溢出 (memory overflow)</div>
<div class="line">Qiankun_errorcode_handle            = 0x0000000E;   ///&lt;  句柄错误 (error handle)</div>
<div class="line">Qiankun_errorcode_io                = 0x0000000F;   ///&lt;  IO错误 (io error)</div>
<div class="line"> </div>
<div class="line">let ffi = require(&#39;ffi-napi&#39;)</div>
<div class="line">const ref = require(&#39;ref-napi&#39;);</div>
<div class="line"> </div>
<div class="line">let tianzuo_QiankunLib = ffi.Library(&quot;tianzuo.Qiankun.dll&quot;, {</div>
<div class="line">    &#39;tianzuo_QiankunInterface_initialize&#39;: [&#39;pointer&#39;, []],</div>
<div class="line">    &#39;tianzuo_QiankunInterface_terminate&#39;:[&#39;void&#39;,[&#39;pointer&#39;]],</div>
<div class="line">    &#39;tianzuo_QiankunInt_initialize&#39;:[&#39;int&#39;,[&#39;pointer&#39;]],</div>
<div class="line">    &#39;tianzuo_QiankunInt_db_create_database&#39;:[&#39;int&#39;,[&#39;pointer&#39;,&#39;string&#39;,&#39;string&#39;,&#39;string&#39;, &#39;bool&#39;]],</div>
<div class="line">    &#39;tianzuo_QiankunInt_db_open_database&#39;:[&#39;int&#39;,[&#39;pointer&#39;, &#39;string&#39;, &#39;string&#39;]],</div>
<div class="line">    &#39;tianzuo_QiankunInt_db_close_database&#39;:[&#39;int&#39;,[&#39;pointer&#39;, &#39;string&#39;, &#39;string&#39;]],</div>
<div class="line">    &#39;tianzuo_QiankunInt_data_int_combine&#39;:[&#39;int&#39;,[&#39;pointer&#39;,&#39;string&#39;,&#39;string&#39;,&#39;string&#39;, &#39;string&#39;, &#39;int&#39;]],</div>
<div class="line">    &#39;tianzuo_QiankunInt_data_int_extract&#39;:[&#39;int&#39;,[&#39;pointer&#39;,&#39;string&#39;,&#39;string&#39;,&#39;string&#39;, &#39;pointer&#39;]],</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">// 初始化接口 initialize the interface</div>
<div class="line">console.log(&quot;initialize the interface\n&quot;);</div>
<div class="line"> </div>
<div class="line">// 创建实例 create an instance</div>
<div class="line">let qiankun = tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize();</div>
<div class="line">let error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_initialize(qiankun);</div>
<div class="line">if (error_code !== Qiankun_errorcode_success) {</div>
<div class="line">    console.log(&quot;tianzuo_QiankunInt_initialize error: %d\n&quot;, error_code);</div>
<div class="line">    return;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// 创建数据库 create database</div>
<div class="line">let db_file_name = &quot;qiankunDataBase.Ztz&quot;;</div>
<div class="line">let db_password = &quot;password&quot;;</div>
<div class="line">error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, &quot;qiankunDataBase&quot;, true);</div>
<div class="line">if (error_code !== Qiankun_errorcode_success) {</div>
<div class="line">    console.log(&quot;tianzuo_QiankunInt_db_create_database error: %d\n&quot;, error_code);</div>
<div class="line">    return;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// 打开数据库 open database</div>
<div class="line">error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);</div>
<div class="line">if (error_code !== Qiankun_errorcode_success) {</div>
<div class="line">    console.log(&quot;tianzuo_QiankunInt_db_open_database error: %d\n&quot;, error_code);</div>
<div class="line">    return;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// 向数据库写入一个整型数据 writes an integer to the database</div>
<div class="line">let intInt = 12345678;</div>
<div class="line">error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, &quot;integer&quot;, &quot;&quot;, intInt);</div>
<div class="line">if (error_code !== Qiankun_errorcode_success) {</div>
<div class="line">    console.log(&quot;tianzuo_QiankunInt_data_int_combine error: %d\n&quot;, error_code);</div>
<div class="line">    return;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// 读取刚写入的数据 read the data just written</div>
<div class="line">return_buf = Buffer.alloc(1 * ref.sizeof.int);</div>
<div class="line">error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, &quot;integer&quot;, return_buf);</div>
<div class="line">if (error_code !== Qiankun_errorcode_success) {</div>
<div class="line">    console.log(&quot;tianzuo_QiankunInt_data_int_extract error: %d\n&quot;, error_code);</div>
<div class="line">    return;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">return_data = ref.get(return_buf, 0, ref.types.int);</div>
<div class="line">console.log(&quot;get int: %d\n&quot;, return_data);</div>
<div class="line"> </div>
<div class="line">// 关闭数据库 close database</div>
<div class="line">error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);</div>
<div class="line">if (error_code !== Qiankun_errorcode_success) {</div>
<div class="line">    console.log(&quot;tianzuo_QiankunInt_db_close_database error: %d\n&quot;, error_code);</div>
<div class="line">   return;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">console.log(&quot;test done -------------------\n&quot;);</div>
<div class="line"> </div>
<div class="line">tianzuo_QiankunLib.tianzuo_QiankunInterface_terminate(qiankun);</div>
</div><!-- fragment --> </details>
<details >
<summary >
php</summary>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 检查是否加载了 FFI 扩展</span></div>
<div class="line"><span class="keywordflow">if</span> (extension_loaded(<span class="stringliteral">&#39;ffi&#39;</span>)) {</div>
<div class="line">    echo(<span class="stringliteral">&quot;已启用 FFI 扩展\n&quot;</span>);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    die(<span class="stringliteral">&quot;未启动 FFI 扩展\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> <a class="code hl_enumeration" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7">Qiankun_error_code</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_errorcode_success</a>       = 0x00000001;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7ae4ecae994aebf210c2e58e05192c66ed">Qiankun_errorcode_normal</a>        = 0x00000002;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7af4af2a89ff840a0c044b82e744043f84">Qiankun_errorcode_differ</a>        = 0x00000003;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a9a09ae3aac19ee018c77f9c3b0f9d1b0">Qiankun_errorcode_no_rights</a>     = 0x00000004;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a6465531a69cdd291bdc216f5c183eeac">Qiankun_errorcode_db_not_exist</a>  = 0x00000005;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aeb5def2fd068b2d462b5807c0be44ab4">Qiankun_errorcode_exist</a>         = 0x00000006;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77ae468fdf80a766766624813f2e7453">Qiankun_errorcode_not_exist</a>     = 0x00000007;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7afa25f0a03f97c1098bcd7f0b8314a92a">Qiankun_errorcode_out_of_range</a>  = 0x00000008;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7aae44d7527ef134d993db7a623cfa7fd2">Qiankun_errorcode_type</a>          = 0x00000009;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a97fde6d3a06aabe4392950142a9c52e4">Qiankun_errorcode_param</a>         = 0x0000000A;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a77a83983817f1f956368aa82516bec2b">Qiankun_errorcode_compress</a>      = 0x0000000B;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a523f62589da3aa1bf6f484e996aee702">Qiankun_errorcode_get_array</a>     = 0x0000000C;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a726f7435283d7d06054fd689f5371899">Qiankun_errorcode_out_of_memory</a> = 0x0000000D;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a3d36d463c402b5f8cc9da2127b2f3935">Qiankun_errorcode_handle</a>        = 0x0000000E;            </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7a21594cac592ab73f4f2e845aba3c4627">Qiankun_errorcode_io</a>            = 0x0000000F;            </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">$ffi = FFI::cdef(<span class="stringliteral">&quot;</span></div>
<div class="line"><span class="stringliteral">    void* tianzuo_QiankunInterface_initialize();</span></div>
<div class="line"><span class="stringliteral">    void tianzuo_QiankunInterface_terminate(void* *QiankunInt_pointer);</span></div>
<div class="line"><span class="stringliteral">    int tianzuo_QiankunInt_initialize(void* QiankunInt_pointer);</span></div>
<div class="line"><span class="stringliteral">    int tianzuo_QiankunInt_db_create_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* db_name, bool const over_write);</span></div>
<div class="line"><span class="stringliteral">    int tianzuo_QiankunInt_db_open_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password);</span></div>
<div class="line"><span class="stringliteral">    int tianzuo_QiankunInt_db_close_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password);</span></div>
<div class="line"><span class="stringliteral">    int tianzuo_QiankunInt_data_int_combine(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* data_name, const char* remark, int data);</span></div>
<div class="line"><span class="stringliteral">    int tianzuo_QiankunInt_data_int_extract(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* data_name, int* data);</span></div>
<div class="line"><span class="stringliteral">&quot;</span>, <span class="stringliteral">&quot;tianzuo.Qiankun.dll&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># 初始化接口 initialize the interface</span></div>
<div class="line">echo <span class="stringliteral">&quot;initialize the interface&quot;</span> . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># 创建实例 create an instance</span></div>
<div class="line">$qiankun = $ffi-&gt;tianzuo_QiankunInterface_initialize();</div>
<div class="line"> </div>
<div class="line">$error_code = $ffi-&gt;tianzuo_QiankunInt_initialize($qiankun);</div>
<div class="line"><span class="keywordflow">if</span> ($error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_error_code::Qiankun_errorcode_success</a>) {</div>
<div class="line">    echo <span class="stringliteral">&quot;initialize error: &quot;</span> . $error_code . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># 创建数据库 create database</span></div>
<div class="line">$db_file_name = <span class="stringliteral">&quot;qiankunDataBase.Ztz&quot;</span>;</div>
<div class="line">$db_password = <span class="stringliteral">&quot;password&quot;</span>;</div>
<div class="line">$error_code = $ffi-&gt;tianzuo_QiankunInt_db_create_database($qiankun, $db_file_name, $db_password, <span class="stringliteral">&quot;qiankunDataBase&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="keywordflow">if</span> ($error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_error_code::Qiankun_errorcode_success</a>) {</div>
<div class="line">    echo <span class="stringliteral">&quot;tianzuo_QiankunInt_db_create_database error: &quot;</span> . $error_code . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># 打开数据库 open database</span></div>
<div class="line">$error_code = $ffi-&gt;tianzuo_QiankunInt_db_open_database($qiankun, $db_file_name, $db_password);</div>
<div class="line"><span class="keywordflow">if</span> ($error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_error_code::Qiankun_errorcode_success</a>) {</div>
<div class="line">    echo <span class="stringliteral">&quot;tianzuo_QiankunInt_db_open_database error: &quot;</span> . $error_code . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># 向数据库写入一个整型数据 writes an integer to the database</span></div>
<div class="line">$intInt = 12345678;</div>
<div class="line">$error_code = $ffi-&gt;tianzuo_QiankunInt_data_int_combine($qiankun, $db_file_name, $db_password, <span class="stringliteral">&quot;integer&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, $intInt);</div>
<div class="line"><span class="keywordflow">if</span> ($error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_error_code::Qiankun_errorcode_success</a>) {</div>
<div class="line">    echo <span class="stringliteral">&quot;tianzuo_QiankunInt_data_int_combine error: &quot;</span> . $error_code . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># 读取刚写入的数据 read the data just written</span></div>
<div class="line">$return_data = FFI::new(<span class="stringliteral">&quot;int&quot;</span>);</div>
<div class="line">$error_code = $ffi-&gt;tianzuo_QiankunInt_data_int_extract($qiankun, $db_file_name, $db_password, <span class="stringliteral">&quot;integer&quot;</span>, FFI::addr($return_data));</div>
<div class="line"><span class="keywordflow">if</span> ($error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_error_code::Qiankun_errorcode_success</a>) {</div>
<div class="line">    echo <span class="stringliteral">&quot;tianzuo_QiankunInt_data_int_extract error: &quot;</span> . $error_code . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">echo <span class="stringliteral">&quot;get integer data: &quot;</span> . $return_data-&gt;cdata . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># 关闭数据库 close database</span></div>
<div class="line">$error_code = $ffi-&gt;tianzuo_QiankunInt_db_close_database($qiankun, $db_file_name, $db_password);</div>
<div class="line"><span class="keywordflow">if</span> ($error_code != <a class="code hl_enumvalue" href="tianzuo_8_qiankun_8h.html#a3309cdf05bd56e3dfd38a958001803d7abf8315c040923257f6c55720fdd6b091">Qiankun_error_code::Qiankun_errorcode_success</a>) {</div>
<div class="line">    echo <span class="stringliteral">&quot;tianzuo_QiankunInt_db_close_database error: &quot;</span> . $error_code . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">echo <span class="stringliteral">&quot;test done -------------------&quot;</span> . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">?&gt;</div>
</div><!-- fragment --> </details>
<details >
<summary >
vb</summary>
<div class="fragment"><div class="line">Imports System.Runtime.InteropServices</div>
<div class="line"> </div>
<div class="line">Enum Qiankun_error_code</div>
<div class="line">    Qiankun_errorcode_success = 1                     &#39;  正确的值</div>
<div class="line">    Qiankun_errorcode_normal = 2                      &#39;  错误的值</div>
<div class="line">    Qiankun_errorcode_differ = 3                      &#39;  数据库文件数效验未通过 (The number Of database files fails To be verified)</div>
<div class="line">    Qiankun_errorcode_no_rights = 4                   &#39;  数据库密码效验未通过 (The database password verification failed)</div>
<div class="line">    Qiankun_errorcode_db_not_exist = 5                &#39;  数据库文件不存在 (The database file does Not exist)</div>
<div class="line">    Qiankun_errorcode_exist = 6                       &#39;  数据已存在 (Data already exists)</div>
<div class="line">    Qiankun_errorcode_not_exist = 7                   &#39;  数据不存在 (Data does Not exist)</div>
<div class="line">    Qiankun_errorcode_out_of_range = 8                &#39;  超出范围 (out Of range)</div>
<div class="line">    Qiankun_errorcode_type = 9                        &#39;  类型不符 (wrong type)</div>
<div class="line">    Qiankun_errorcode_param = 10                      &#39;  参数错误 (parameter Error)</div>
<div class="line">    Qiankun_errorcode_compress = 11                   &#39;  压缩错误 (compression Error)</div>
<div class="line">    Qiankun_errorcode_get_array = 12                  &#39;  数组错误 (arrary Error)</div>
<div class="line">    Qiankun_errorcode_out_of_memory = 13              &#39;  内存溢出 (memory overflow)</div>
<div class="line">    Qiankun_errorcode_handle = 14                     &#39;  句柄错误 (Error handle)</div>
<div class="line">    Qiankun_errorcode_io = 15                         &#39;  IO错误 (io Error)</div>
<div class="line">End Enum</div>
<div class="line"> </div>
<div class="line">Module Program</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInterface_initialize() As IntPtr</div>
<div class="line">    End Function</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInterface_terminate(ByRef QiankunInt_pointer As IntPtr)</div>
<div class="line">    End Function</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInt_initialize(QiankunInt_pointer As IntPtr) As Integer</div>
<div class="line">    End Function</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInt_db_create_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, db_name As String, over_write As Boolean) As Integer</div>
<div class="line">    End Function</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInt_db_open_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String) As Integer</div>
<div class="line">    End Function</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInt_db_close_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String) As Integer</div>
<div class="line">    End Function</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInt_data_int_combine(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, data_name As String, remark As String, data As Integer) As Integer</div>
<div class="line">    End Function</div>
<div class="line">    &lt;DllImport(&quot;tianzuo.Qiankun.dll&quot;)&gt;</div>
<div class="line">    Public Function tianzuo_QiankunInt_data_int_extract(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, data_name As String, ByRef data As Integer) As Integer</div>
<div class="line">    End Function</div>
<div class="line"> </div>
<div class="line">    Sub Main(args As String())</div>
<div class="line">        &#39; 初始化接口 initialize the interface</div>
<div class="line">        Console.WriteLine(&quot;initialize the interface&quot;)</div>
<div class="line"> </div>
<div class="line">        &#39; 创建实例 create an instance</div>
<div class="line">        Dim qiankun As IntPtr = tianzuo_QiankunInterface_initialize()</div>
<div class="line">        Dim error_code As Integer = tianzuo_QiankunInt_initialize(qiankun)</div>
<div class="line">        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then</div>
<div class="line">            Console.WriteLine(&quot;tianzuo_QiankunInt_initialize error:&quot; + error_code.ToString)</div>
<div class="line">            Return</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        &#39; 创建数据库 create database</div>
<div class="line">        Dim db_file_name As String = &quot;qiankunDataBase.Ztz&quot;</div>
<div class="line">        Dim db_password As String = &quot;password&quot;</div>
<div class="line">        error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, &quot;qiankunDataBase&quot;, True)</div>
<div class="line">        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then</div>
<div class="line">            Console.WriteLine(&quot;tianzuo_QiankunInt_db_create_database error:&quot; + error_code.ToString)</div>
<div class="line">            Return</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        &#39; 打开数据库 open database</div>
<div class="line">        error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password)</div>
<div class="line">        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then</div>
<div class="line">            Console.WriteLine(&quot;tianzuo_QiankunInt_db_open_database error:&quot; + error_code.ToString)</div>
<div class="line">            Return</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        &#39; 向数据库写入一个整型数据 writes an integer to the database</div>
<div class="line">        Dim intInt As Integer = 12345678</div>
<div class="line">        error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, &quot;integer&quot;, &quot;&quot;, intInt)</div>
<div class="line">        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then</div>
<div class="line">            Console.WriteLine(&quot;tianzuo_QiankunInt_data_int_combine error:&quot; + error_code.ToString)</div>
<div class="line">            Return</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        &#39; 读取刚写入的数据 read the data just written</div>
<div class="line">        Dim return_data As Integer = 0</div>
<div class="line">        error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, &quot;integer&quot;, return_data)</div>
<div class="line">        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then</div>
<div class="line">            Console.WriteLine(&quot;tianzuo_QiankunInt_data_int_extract error:&quot; + error_code.ToString)</div>
<div class="line">            Return</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        Console.WriteLine(&quot;get int: &quot; + return_data.ToString)</div>
<div class="line"> </div>
<div class="line">        &#39; 关闭数据库 close database</div>
<div class="line">        error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password)</div>
<div class="line">        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then</div>
<div class="line">            Console.WriteLine(&quot;tianzuo_QiankunInt_db_close_database error:&quot; + error_code.ToString)</div>
<div class="line">            Return</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        Console.WriteLine(&quot;test done -------------------&quot;)</div>
<div class="line"> </div>
<div class="line">    End Sub</div>
<div class="line">End Module</div>
</div><!-- fragment --> </details>
<details >
<summary >
go</summary>
<div class="fragment"><div class="line">package main</div>
<div class="line"> </div>
<div class="line">/*</div>
<div class="line">#include &quot;tianzuo.QiankunInterface.h&quot;</div>
<div class="line">*/</div>
<div class="line">import &quot;C&quot;</div>
<div class="line">import (</div>
<div class="line">    &quot;fmt&quot;</div>
<div class="line">    &quot;syscall&quot;</div>
<div class="line">    &quot;unsafe&quot;</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">const (</div>
<div class="line">    Qiankun_errorcode_success       = 1  //  正确的值</div>
<div class="line">    Qiankun_errorcode_normal        = 2  //  错误的值</div>
<div class="line">    Qiankun_errorcode_differ        = 3  //  数据库文件数效验未通过 (The number Of database files fails To be verified)</div>
<div class="line">    Qiankun_errorcode_no_rights     = 4  //  数据库密码效验未通过 (The database password verification failed)</div>
<div class="line">    Qiankun_errorcode_db_not_exist  = 5  //  数据库文件不存在 (The database file does Not exist)</div>
<div class="line">    Qiankun_errorcode_exist         = 6  //  数据已存在 (Data already exists)</div>
<div class="line">    Qiankun_errorcode_not_exist     = 7  //  数据不存在 (Data does Not exist)</div>
<div class="line">    Qiankun_errorcode_out_of_range  = 8  //  超出范围 (out Of range)</div>
<div class="line">    Qiankun_errorcode_type          = 9  //  类型不符 (wrong type)</div>
<div class="line">    Qiankun_errorcode_param         = 10 //  参数错误 (parameter Error)</div>
<div class="line">    Qiankun_errorcode_compress      = 11 //  压缩错误 (compression Error)</div>
<div class="line">    Qiankun_errorcode_get_array     = 12 //  数组错误 (arrary Error)</div>
<div class="line">    Qiankun_errorcode_out_of_memory = 13 //  内存溢出 (memory overflow)</div>
<div class="line">    Qiankun_errorcode_handle        = 14 //  句柄错误 (Error handle)</div>
<div class="line">    Qiankun_errorcode_io            = 15 //  IO错误 (io Error)</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">func main() {</div>
<div class="line">    // 初始化接口 initialize the interface</div>
<div class="line">    dll := syscall.MustLoadDLL(&quot;tianzuo.Qiankun.dll&quot;)</div>
<div class="line"> </div>
<div class="line">    // 创建实例 create an instance</div>
<div class="line">    tianzuo_QiankunInterface_initialize := dll.MustFindProc(&quot;tianzuo_QiankunInterface_initialize&quot;)</div>
<div class="line">    qiankun, _, _ := tianzuo_QiankunInterface_initialize.Call()</div>
<div class="line"> </div>
<div class="line">    tianzuo_QiankunInt_initialize := dll.MustFindProc(&quot;tianzuo_QiankunInt_initialize&quot;)</div>
<div class="line">    error_code, _, _ := tianzuo_QiankunInt_initialize.Call(qiankun)</div>
<div class="line">    if error_code != Qiankun_errorcode_success {</div>
<div class="line">        fmt.Println(&quot;tianzuo_QiankunInt_initialize error: &quot;, error_code)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    // 创建数据库 create database</div>
<div class="line">    db_file_name := C.CString(&quot;qiankunDataBase.Ztz&quot;)</div>
<div class="line">    db_password := C.CString(&quot;password&quot;)</div>
<div class="line">    tianzuo_QiankunInt_db_create_database := dll.MustFindProc(&quot;tianzuo_QiankunInt_db_create_database&quot;)</div>
<div class="line">    error_code, _, _ = tianzuo_QiankunInt_db_create_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(&quot;qiankunDataBase&quot;))), 1)</div>
<div class="line">    if error_code != Qiankun_errorcode_success {</div>
<div class="line">        fmt.Println(&quot;tianzuo_QiankunInt_db_create_database error: &quot;, error_code)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    // 打开数据库 open database</div>
<div class="line">    tianzuo_QiankunInt_db_open_database := dll.MustFindProc(&quot;tianzuo_QiankunInt_db_open_database&quot;)</div>
<div class="line">    error_code, _, _ = tianzuo_QiankunInt_db_open_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)))</div>
<div class="line">    if error_code != Qiankun_errorcode_success {</div>
<div class="line">        fmt.Println(&quot;tianzuo_QiankunInt_db_open_database error: &quot;, error_code)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    // 向数据库写入一个整型数据 writes an integer to the database</div>
<div class="line">    intInt := C.int(12345678)</div>
<div class="line">    tianzuo_QiankunInt_data_int_combine := dll.MustFindProc(&quot;tianzuo_QiankunInt_data_int_combine&quot;)</div>
<div class="line">    error_code, _, _ = tianzuo_QiankunInt_data_int_combine.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(&quot;integer&quot;))), uintptr(unsafe.Pointer(C.CString(&quot;&quot;))), uintptr(intInt))</div>
<div class="line">    if error_code != Qiankun_errorcode_success {</div>
<div class="line">        fmt.Println(&quot;tianzuo_QiankunInt_data_int_combine error: &quot;, error_code)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    // 读取刚写入的数据 read the data just written</div>
<div class="line">    return_int := C.int(0)</div>
<div class="line">    tianzuo_QiankunInt_data_int_extract := dll.MustFindProc(&quot;tianzuo_QiankunInt_data_int_extract&quot;)</div>
<div class="line">    error_code, _, _ = tianzuo_QiankunInt_data_int_extract.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(&quot;integer&quot;))), uintptr(unsafe.Pointer(&amp;return_int)))</div>
<div class="line">    if error_code != Qiankun_errorcode_success {</div>
<div class="line">        fmt.Println(&quot;tianzuo_QiankunInt_data_int_extract error: &quot;, error_code)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    fmt.Println(&quot;get integer data: &quot;, return_int)</div>
<div class="line"> </div>
<div class="line">    // 关闭数据库 close database</div>
<div class="line">    tianzuo_QiankunInt_db_close_database := dll.MustFindProc(&quot;tianzuo_QiankunInt_db_close_database&quot;)</div>
<div class="line">    error_code, _, _ = tianzuo_QiankunInt_db_close_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)))</div>
<div class="line">    if error_code != Qiankun_errorcode_success {</div>
<div class="line">        fmt.Println(&quot;tianzuo_QiankunInt_db_close_database error: &quot;, error_code)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    fmt.Println(&quot;test done -------------------&quot;)</div>
<div class="line">}</div>
</div><!-- fragment --> </details>
<details >
<summary >
rust</summary>
<div class="fragment"><div class="line">use std::os::raw::c_char;</div>
<div class="line">use std::ffi::{c_int};</div>
<div class="line">use std::ffi::CString;</div>
<div class="line">use std::ptr::null;</div>
<div class="line"> </div>
<div class="line">#[link(name = &quot;tianzuo.Qiankun&quot;)]</div>
<div class="line">extern {</div>
<div class="line">    fn tianzuo_QiankunInterface_initialize() -&gt; *mut std::ffi::c_void;</div>
<div class="line">    fn tianzuo_QiankunInterface_terminate(obj: *mut std::ffi::c_void);</div>
<div class="line">    fn tianzuo_QiankunInt_initialize(obj: *mut std::ffi::c_void) -&gt; c_int;</div>
<div class="line">    fn tianzuo_QiankunInt_db_create_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, db_name: *const c_char, over_write: c_int) -&gt; c_int;</div>
<div class="line">    fn tianzuo_QiankunInt_db_open_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char) -&gt; c_int;</div>
<div class="line">    fn tianzuo_QiankunInt_db_close_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char) -&gt; c_int;</div>
<div class="line">    fn tianzuo_QiankunInt_data_int_combine(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, data_name: *const c_char, remark: *const c_char, data: c_int) -&gt; c_int;</div>
<div class="line">    fn tianzuo_QiankunInt_data_int_extract(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, data_name: *const c_char, data: *const c_int) -&gt; c_int;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">fn main() {</div>
<div class="line">    unsafe {</div>
<div class="line">        // 初始化接口 initialize the interface</div>
<div class="line">        println!(&quot;initialize the interface&quot;);</div>
<div class="line"> </div>
<div class="line">        // 创建实例 create an instance</div>
<div class="line">        let qiankun = tianzuo_QiankunInterface_initialize();</div>
<div class="line">        let error_code = tianzuo_QiankunInt_initialize(qiankun);</div>
<div class="line">        if 1 != error_code {</div>
<div class="line">            println!(&quot;initialize error: {:?}&quot;, error_code);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        // 创建数据库 create database</div>
<div class="line">        let db_file_name = CString::new(String::from(&quot;qiankunDataBase.Ztz&quot;)).expect(&quot;Failed to create CString&quot;);</div>
<div class="line">        let db_password = CString::new(String::from(&quot;password&quot;)).expect(&quot;Failed to create CString&quot;);</div>
<div class="line">        let db_name = CString::new(String::from(&quot;qiankunDataBase&quot;)).expect(&quot;Failed to create CString&quot;);</div>
<div class="line">        let error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), db_name.as_ptr(), 1);</div>
<div class="line">        if 1 != error_code {</div>
<div class="line">            println!(&quot;db_create_database error: {:?}&quot;, error_code);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        // 打开数据库 open database</div>
<div class="line">        let error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr());</div>
<div class="line">        if 1 != error_code {</div>
<div class="line">            println!(&quot;db_open_database error: {:?}&quot;, error_code);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        // 向数据库写入一个整型数据 writes an integer to the database</div>
<div class="line">        let int = 12345678;</div>
<div class="line">        let data_name = CString::new(String::from(&quot;integer&quot;)).expect(&quot;Failed to create CString&quot;);</div>
<div class="line">        let error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), data_name.as_ptr(), null(), int);</div>
<div class="line">        if 1 != error_code {</div>
<div class="line">            println!(&quot;data_combine error: {:?}&quot;, error_code);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        // 读取刚写入的数据 read the data just written</div>
<div class="line">        let mut return_data: c_int = 0;</div>
<div class="line">        let error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), data_name.as_ptr(), &amp;mut return_data);</div>
<div class="line">        if 1 != error_code {</div>
<div class="line">            println!(&quot;data_extract error: {:?}&quot;, error_code);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        println!(&quot;get integer data: {:?}&quot;, return_data);</div>
<div class="line"> </div>
<div class="line">        // 关闭数据库 close database</div>
<div class="line">        let error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr());</div>
<div class="line">        if 1 != error_code {</div>
<div class="line">            println!(&quot;db_close_database error: {:?}&quot;, error_code);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        println!(&quot;test done -------------------&quot;)</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </details>
<details >
<summary >
ruby</summary>
<div class="fragment"><div class="line">require &#39;fiddle&#39;</div>
<div class="line"> </div>
<div class="line">lib = Fiddle::dlopen(&#39;C:/Users/zhengtianzuo/RubymineProjects/tianzuo.QiankunTest/tianzuo.Qiankun.dll&#39;)</div>
<div class="line">tianzuo_QiankunInterface_initialize = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInterface_initialize&#39;], [], Fiddle::TYPE_VOIDP)</div>
<div class="line">tianzuo_QiankunInterface_terminate = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInterface_terminate&#39;], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_VOID)</div>
<div class="line">tianzuo_QiankunInt_initialize = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInt_initialize&#39;], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)</div>
<div class="line">tianzuo_QiankunInt_db_create_database = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInt_db_create_database&#39;], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)</div>
<div class="line">tianzuo_QiankunInt_db_open_database = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInt_db_open_database&#39;], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)</div>
<div class="line">tianzuo_QiankunInt_data_int_combine = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInt_data_int_combine&#39;], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)</div>
<div class="line">tianzuo_QiankunInt_data_int_extract = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInt_data_int_extract&#39;], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)</div>
<div class="line">tianzuo_QiankunInt_db_close_database = Fiddle::Function.new(lib[&#39;tianzuo_QiankunInt_db_close_database&#39;], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)</div>
<div class="line"> </div>
<div class="line"># 初始化接口 initialize the interface</div>
<div class="line">print(&quot;initialize the interface\n&quot;)</div>
<div class="line"> </div>
<div class="line"># 创建实例 create an instance</div>
<div class="line">qiankun = tianzuo_QiankunInterface_initialize.call()</div>
<div class="line">error_code = tianzuo_QiankunInt_initialize.call(qiankun)</div>
<div class="line">if error_code != 1</div>
<div class="line">  print(&quot;initialize error:&quot;, error_code, &quot;\n&quot;)</div>
<div class="line">  return</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line"># 创建数据库 create database</div>
<div class="line">db_file_name = &quot;qiankunDataBase.Ztz&quot;</div>
<div class="line">db_password = &quot;password&quot;</div>
<div class="line">error_code = tianzuo_QiankunInt_db_create_database.call(qiankun, db_file_name, db_password, &quot;qiankunDataBase&quot;, 1)</div>
<div class="line">if error_code != 1</div>
<div class="line">  print(&quot;db_create_database error:&quot;, error_code, &quot;\n&quot;)</div>
<div class="line">  return</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line"># 打开数据库 open database</div>
<div class="line">error_code = tianzuo_QiankunInt_db_open_database.call(qiankun, db_file_name, db_password)</div>
<div class="line">if error_code != 1</div>
<div class="line">  print(&quot;db_open_database error:&quot;, error_code, &quot;\n&quot;)</div>
<div class="line">return</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line"># 向数据库写入一个整型数据 writes an integer to the database</div>
<div class="line">intInt = 12345678</div>
<div class="line">error_code = tianzuo_QiankunInt_data_int_combine.call(qiankun, db_file_name, db_password, &quot;integer&quot;, &quot;&quot;, intInt)</div>
<div class="line">if error_code != 1</div>
<div class="line">  print(&quot;data_combine error:&quot;, error_code, &quot;\n&quot;)</div>
<div class="line">return</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line"># 读取刚写入的数据 read the data just written</div>
<div class="line">return_data = Fiddle::Pointer.malloc(Fiddle::SIZEOF_INT)</div>
<div class="line">error_code = tianzuo_QiankunInt_data_int_extract.call(qiankun, db_file_name, db_password, &quot;integer&quot;, return_data)</div>
<div class="line">if error_code != 1</div>
<div class="line">  print(&quot;data_extract error:&quot;, error_code, &quot;\n&quot;)</div>
<div class="line">return</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line">integer = return_data[0, Fiddle::SIZEOF_INT].unpack(&#39;I&#39;)[0]</div>
<div class="line">print(&quot;get integer data: &quot;, integer, &quot;\n&quot;)</div>
<div class="line"> </div>
<div class="line"># 关闭数据库 close database</div>
<div class="line">error_code = tianzuo_QiankunInt_db_close_database.call(qiankun, db_file_name, db_password)</div>
<div class="line">if error_code != 1</div>
<div class="line">  print(&quot;db_close_database error:&quot;, error_code)</div>
<div class="line">return</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line">print(&quot;test done -------------------&quot;)</div>
</div><!-- fragment --> </details>
<h1><a class="anchor" id="autotoc_md6"></a>
download</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="4"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/zhengtianzuo/tianzuo.Qiankun/releases"><div class="image">
<object type="image/svg+xml" data="com_btnGitHub.svg" style="pointer-events: none;"></object>
<div class="caption">
download</div></div>
     </a>   </td><td class="markdownTableBodyNone"><a href="https://gitee.com/zhengtianzuo/tianzuo.Qiankun/releases"><div class="image">
<object type="image/svg+xml" data="com_btnGitee.svg" style="pointer-events: none;"></object>
<div class="caption">
download</div></div>
     </a>   </td><td class="markdownTableBodyNone"><a href="https://pan.baidu.com/s/1ecnWXCHtFUT0edNqCLwFbQ?pwd=1234"><div class="image">
<object type="image/svg+xml" data="down_baidu.svg" style="pointer-events: none;"></object>
<div class="caption">
download</div></div>
     </a>   </td><td class="markdownTableBodyNone"><a href="https://share.weiyun.com/TVxOYtJr"><div class="image">
<object type="image/svg+xml" data="down_weiyun.svg" style="pointer-events: none;"></object>
<div class="caption">
download</div></div>
     </a>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md7"></a>
about</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
contact</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="3"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">author   </td><td class="markdownTableBodyNone" colspan="2">zhengtianzuo    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">QQ   </td><td class="markdownTableBodyNone" colspan="2">278969898    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">mailbox   </td><td class="markdownTableBodyNone" colspan="2"><a href="#" onclick="location.href='mai'+'lto:'+'cam'+'el'+'sof'+'t@'+'163'+'.c'+'om'; return false;">camel<span class="obfuscator">.nosp@m.</span>soft<span class="obfuscator">.nosp@m.</span>@163.<span class="obfuscator">.nosp@m.</span>com</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">homepage   </td><td class="markdownTableBodyNone" colspan="2"><a href="http://www.camelstudio.cn">http://www.camelstudio.cn</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">blog   </td><td class="markdownTableBodyNone" colspan="2"><a href="http://blog.csdn.net/zhengtianzuo06">http://blog.csdn.net/zhengtianzuo06</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">github   </td><td class="markdownTableBodyNone" colspan="2"><a href="https://github.com/zhengtianzuo">https://github.com/zhengtianzuo</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gitee   </td><td class="markdownTableBodyNone" colspan="2"><a href="https://gitee.com/zhengtianzuo">https://gitee.com/zhengtianzuo</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">QQ group   </td><td class="markdownTableBodyNone" colspan="2">199672080   </td></tr>
</table>
<div class="image">
<img src="allinone.png" alt=""/>
</div>
    <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="5"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Add QQ Friends   </td><td class="markdownTableBodyNone">Add WeChat Friends   </td><td class="markdownTableBodyNone">Paid Questions   </td><td class="markdownTableBodyNone">WeChat Sponsor   </td><td class="markdownTableBodyNone">Alipay Sponsor   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
