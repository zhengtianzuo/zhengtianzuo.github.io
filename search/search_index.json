{"config":{"lang":["en","zh"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u4e3b\u9875","text":"\u6211\u200b\u662f\u200b\u90d1\u5929\u4f50\u200b\uff0c\u200b\u76ee\u524d\u200b\u4e13\u6ce8\u200b\u4e8e\u200b\u8fdc\u7a0b\u684c\u9762\u200b\u7684\u200b\u5f00\u53d1\u200b\uff0c\u200b\u4e3b\u8981\u200b\u4f7f\u7528\u200bC++\uff0c\u200b\u559c\u6b22\u200b\u7814\u7a76\u200b\u9ad8\u6027\u80fd\u200b\u4e0e\u200b\u4ee3\u7801\u200b\u67b6\u6784\u200b\u3002      \u200b\u613f\u666f\u200b: \u200b\u6280\u672f\u200b\u5206\u4eab\u200b\uff0c\u200b\u5171\u521b\u200b\u8f89\u714c\u200b \u200b\u4f7f\u547d\u200b: \u200b\u521b\u9020\u200b\u4ef7\u503c\u200b\uff0c\u200b\u6210\u5c31\u200b\u5ba2\u6237\u200b\uff0c\u200b\u670d\u52a1\u884c\u4e1a\u200b \u200b\u4ef7\u503c\u89c2\u200b: \u200b\u6316\u6398\u200b\u529f\u80fd\u200b\uff0c\u200b\u96c6\u5927\u6210\u8005\u200b\uff0c\u200b\u7cbe\u51c6\u200b\u670d\u52a1\u200b \u200b\u4e2a\u4eba\u200b\u4ea7\u54c1\u200b\uff1a Logo \u200b\u4ea7\u54c1\u200b Github Gitee \u200b\u7b80\u8ff0\u200b \u200b\u6280\u672f\u200b \u200b\u5929\u4f50\u200b.\u200b\u76d8\u53e4\u200b\u65a7\u200b \u200b\u5373\u65f6\u901a\u8baf\u200b\u5e73\u53f0\u200b \u200b\u5929\u4f50\u200b.\u200b\u6606\u4ed1\u955c\u200b \u200b\u672c\u5730\u200b\u6784\u5efa\u200b\u5de5\u5177\u200b \u200b\u5929\u4f50\u200b.\u200b\u4f0f\u7fb2\u200b\u7434\u200b \u200b\u5f00\u53d1\u200b\u4e2d\u200b \u200b\u4e2a\u4eba\u200b\u6a21\u5757\u200b\uff1a Logo \u200b\u6a21\u5757\u200b Github Gitee \u200b\u7b80\u8ff0\u200b \u200b\u6280\u672f\u200b \u200b\u5929\u4f50\u200b.\u200b\u5d06\u5cd2\u200b\u5370\u200b \u200b\u5d29\u6e83\u200b\u68c0\u6d4b\u200b\u5206\u6790\u200b \u200b\u5929\u4f50\u200b.\u200b\u4e7e\u5764\u888b\u200b NoSql\u200b\u6570\u636e\u5e93\u200b \u200b\u5929\u4f50\u200b.\u200b\u8ffd\u65e5\u200b\u9774\u200b UDP\u200b\u53ef\u9760\u200b\u6570\u636e\u4f20\u8f93\u200b \u200b\u5929\u4f50\u200b.\u200b\u6df7\u6c8c\u200b\u949f\u200b \u200b\u8f6f\u4ef6\u200b\u8bb8\u53ef\u200b\u6388\u6743\u200b \u200b\u5929\u4f50\u200b.\u200b\u70bc\u200b\u5996\u200b\u58f6\u200b \u200b\u5185\u5b58\u200b\u6c60\u200b \u200b\u5929\u4f50\u200b.\u200b\u795e\u519c\u200b\u9f0e\u200b \u200b\u5f00\u53d1\u200b\u4e2d\u200b \u200b\u5929\u4f50\u200b.\u200b\u73b2\u73d1\u5854\u200b \u200b\u5f00\u53d1\u200b\u4e2d\u200b \u200b\u5929\u4f50\u200b.\u200b\u5c01\u5929\u200b\u5370\u200b \u200b\u5f00\u53d1\u200b\u4e2d\u200b        \u200b\u52a0\u200bQQ\u200b\u597d\u53cb\u200b             \u200b\u52a0\u5fae\u4fe1\u200b\u597d\u53cb\u200b             \u200b\u5173\u6ce8\u200b\u5fae\u4fe1\u200b\u516c\u4f17\u200b\u53f7\u200b             \u200b\u652f\u4ed8\u5b9d\u200b\u8d5e\u52a9\u200b             \u200b\u5fae\u4fe1\u200b\u8d5e\u52a9"},{"location":"component/tianzuo.Hundun/","title":"\u5929\u4f50\u200b.\u200b\u6df7\u6c8c\u200b\u949f","text":""},{"location":"component/tianzuo.Hundun/#_2","title":"\u5929\u4f50\u200b.\u200b\u6df7\u6c8c\u200b\u949f","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"component/tianzuo.Hundun/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u6df7\u6c8c\u200b\u949f\u200b \u200b\u4fdd\u62a4\u200b\u4f60\u200b\u5f00\u53d1\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u4e0d\u200b\u53d7\u200b\u672a\u7ecf\u200b\u6388\u6743\u200b\u7684\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u53ca\u65f6\u200b\u9650\u5236\u200b\u4f7f\u7528\u200b\uff0c\u200b\u53ea\u200b\u5728\u200b\u7279\u5b9a\u200b\u7684\u200b\u673a\u5668\u200b\u4e0a\u200b\u4f7f\u7528\u200b\u3002</p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u4e43\u662f\u200b\u4e0a\u53e4\u200b\u5341\u5927\u200b\u795e\u5668\u200b\u4e4b\u200b\u9996\u200b\uff0c\u200b\u88ab\u8a89\u4e3a\u200b\u529b\u91cf\u200b\u6700\u200b\u5f3a\u5927\u200b\u7684\u200b\u795e\u5668\u200b\u3002 \u200b\u4e1c\u7687\u949f\u200b\u4e4b\u200b\u6240\u200b\u88ab\u200b\u79f0\u4e4b\u4e3a\u200b\u4e1c\u7687\u949f\u200b\uff0c\u200b\u5176\u200b\u62e5\u6709\u8005\u200b\u4fbf\u662f\u200b\u4e1c\u7687\u592a\u200b\u4e00\u200b\uff0c\u200b\u4e1c\u7687\u592a\u200b\u4e00\u662f\u200b\u4e0a\u53e4\u200b\u795e\u8bdd\u200b\u4e2d\u200b\uff0c\u200b\u540d\u5217\u200b\u524d\u4e94\u200b\u7684\u200b\u5927\u795e\u200b\uff0c\u200b\u4f5c\u4e3a\u200b\u5176\u200b\u6cd5\u5b9d\u200b\u7684\u200b\u4e1c\u7687\u949f\u200b\uff0c\u200b\u5b9e\u529b\u200b\u4e5f\u200b\u4e0d\u8d56\u200b\u3002\u200b\u76f8\u4f20\u200b\u4e1c\u7687\u949f\u200b\u662f\u200b\u5929\u754c\u200b\u4e4b\u200b\u95e8\u200b\uff0c\u200b\u53ef\u63a7\u200b\u65e5\u6708\u200b\uff0c\u200b\u80fd\u200b\u53d8\u200b\u9634\u9633\u200b\uff0c\u200b\u4e1c\u7687\u949f\u200b\u662f\u200b\u4e00\u79cd\u200b\u9632\u5fa1\u6027\u200b\u5f88\u5f3a\u200b\uff0c\u200b\u653b\u51fb\u529b\u200b\u8f83\u5f31\u200b\uff0c\u200b\u4f46\u662f\u200b\u7206\u53d1\u529b\u200b\u60ca\u4eba\u200b\u7684\u200b\u6cd5\u5668\u200b\uff0c\u200b\u4e00\u65e6\u200b\u7206\u53d1\u200b\u771f\u6b63\u200b\u5b9e\u529b\u200b\uff0c\u200b\u57fa\u672c\u4e0a\u200b\u80fd\u591f\u200b\u6bc1\u5929\u706d\u200b\u5730\u200b\uff0c\u200b\u541e\u566c\u200b\u8bf8\u5929\u200b\u3002</p>"},{"location":"component/tianzuo.Hundun/#_4","title":"\u76ee\u6807","text":"<p>\u200b\u4fdd\u62a4\u200b\u4f60\u200b\u5f00\u53d1\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u4e0d\u200b\u53d7\u200b\u672a\u7ecf\u200b\u6388\u6743\u200b\u7684\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u53ca\u65f6\u200b\u9650\u5236\u200b\u4f7f\u7528\u200b\uff0c\u200b\u53ea\u200b\u5728\u200b\u7279\u5b9a\u200b\u7684\u200b\u673a\u5668\u200b\u4e0a\u200b\u4f7f\u7528\u200b\u3002</p> <p></p>"},{"location":"component/tianzuo.Hundun/#_5","title":"\u529f\u80fd","text":"<ul> <li>\ud83e\udde9 \u200b\u96c6\u6210\u200b\u7b80\u5355\u200b</li> <li>\ud83e\udea2 \u200b\u6570\u636e\u200b\u7ecf\u8fc7\u200b\u7b97\u6cd5\u200b\u52a0\u5bc6\u200b</li> <li>\ud83d\udd12 \u200b\u53ef\u200b\u6309\u200b\u65f6\u95f4\u200b\u9650\u5236\u200b, \u200b\u53ef\u200b\u6309\u200b\u8bbe\u5907\u200bID\u200b\u9650\u5236\u200b, \u200b\u4e5f\u200b\u53ef\u200b\u540c\u65f6\u200b\u9650\u5236\u200b</li> </ul>"},{"location":"component/tianzuo.Hundun/#_6","title":"\u6d41\u7a0b","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b\u8f6f\u4ef6\u200b\u4e2d\u200b\u8c03\u7528\u200bget_machineid\u200b\u63a5\u53e3\u200b\u53ef\u4ee5\u200b\u83b7\u53d6\u200b\u5230\u200b\u673a\u5668\u7801\u200b(\u200b\u6ce8\u518c\u7801\u200b), \u200b\u7136\u540e\u200b\u901a\u8fc7\u200bmaker\u200b\u7a0b\u5e8f\u200b\u8f93\u5165\u200b\u6ce8\u518c\u7801\u200b/\u200b\u622a\u6b62\u200b\u65f6\u95f4\u200b\u6765\u200b\u521b\u5efa\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b, maker\u200b\u751f\u6210\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u65f6\u200b\u9700\u8981\u200b\u8bfb\u53d6\u200b\u79c1\u94a5\u200b\u6587\u4ef6\u200b, \u200b\u5bf9\u5e94\u200b\u7684\u200b\u516c\u94a5\u200b\u4fe1\u606f\u200b\u5728\u200b\u5ba2\u6237\u7aef\u200b\u8f6f\u4ef6\u200b\u4e2d\u200b\u8fdb\u884c\u200b\u8f93\u5165\u200b. \u200b\u5f53\u200b\u8bb8\u53ef\u8bc1\u200b\u53d1\u5e03\u200b\u5230\u200b\u5ba2\u6237\u7aef\u200b\u672c\u5730\u200b\u540e\u200b, \u200b\u5ba2\u6237\u7aef\u200b\u542f\u52a8\u200b\u8c03\u7528\u200bcheck\u200b\u63a5\u53e3\u200b\u8fdb\u884c\u200b\u9a8c\u8bc1\u200b. </p> <ol> <li>\u200b\u751f\u6210\u200b\u516c\u94a5\u200b\u79c1\u94a5\u200b\u914d\u5bf9\u200b\u7684\u200b\u4fe1\u606f\u200b\u6587\u4ef6\u200b.</li> </ol> <pre><code>// \u200b\u521b\u5efa\u200b\u79c1\u94a5\u200b\u6587\u4ef6\u200b\n(1) openssl genrsa -out privatekey.pem 2048                 \n\n// \u200b\u6839\u636e\u200b\u79c1\u94a5\u200b\u6587\u4ef6\u521b\u5efa\u200b\u5bf9\u5e94\u200b\u7684\u200b\u516c\u94a5\u200b\u6587\u4ef6\u200b          \n(2) openssl rsa -in privatekey.pem -pubout -out publickey.pem         \n</code></pre> <ol> <li>\u200b\u901a\u8fc7\u200bmaker\u200b\u547d\u4ee4\u884c\u200b\u521b\u5efa\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b:</li> </ol> <pre><code>// \u200b\u4ec5\u200b\u751f\u6210\u200b\u65f6\u95f4\u200b\u9650\u5236\u200b\u7684\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\nmaker.exe --type=1 --date=\"2024-04-30\" --keyfile=\"privatekey.pem\"\n\n// \u200b\u4ec5\u200b\u751f\u6210\u200b\u673a\u5668\u7801\u200b\u9650\u5236\u200b\u7684\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\nmaker.exe --type=2 --id=\"9ea03801651cd3d93add9d42a07d3c4b\" --keyfile=\"privatekey.pem\"\n\n// \u200b\u751f\u6210\u200b\u540c\u65f6\u200b\u62e5\u6709\u200b\u65f6\u95f4\u200b\u9650\u5236\u200b\u548c\u200b\u673a\u5668\u7801\u200b\u9650\u5236\u200b\u7684\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\nmaker.exe --type=3 --date=\"2024-04-30\" --id=\"9ea03801651cd3d93add9d42a07d3c4b\" --keyfile=\"privatekey.pem\"\n</code></pre>"},{"location":"component/tianzuo.Hundun/#_7","title":"\u4f8b\u5b50","text":"cpp <pre><code>#include &lt;iostream&gt;\n#include \"../../include/tianzuo.HundunInterface.h\" // \u200b\u63a5\u53e3\u200b\u5934\u6587\u4ef6\u200b interface heaher file\n\n#define Get_Machineid 0\n\nint main() {\n    std::string public_key = \"-----BEGIN PUBLIC KEY-----\\n\"\n        \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\"\n        \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\"\n        \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\"\n        \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\"\n        \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\"\n        \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\"\n        \"lQIDAQAB\\n\"\n        \"-----END PUBLIC KEY-----\\n\";\n\n    tianzuo_HundunInt hundun;\n#if Get_Machineid\n    const char* id = hundun.get_machineid();\n    if (id == nullptr) {\n        std::cerr &lt;&lt; \"hundun.get_machineid error\" &lt;&lt; std::endl;\n        return -1;\n    }\n    std::cout &lt;&lt; \"id: \" &lt;&lt; id &lt;&lt; std::endl;\n#else\n    int days = 0;\n    int error_code = tianzuo_Hundun_check(public_key.c_str(), \"license.dat\", &amp;days);\n    if (error_code != Hundun_error_code_success) {\n        std::cout &lt;&lt; \"hundun.check error_code: \" &lt;&lt; error_code &lt;&lt; \" error_string: \" &lt;&lt; Hundun_error_code_strings_cn[error_code] &lt;&lt; std::endl;\n        return -1;\n    }\n    std::cout &lt;&lt; \"hundun.check days: \" &lt;&lt; days &lt;&lt; std::endl;\n#endif\n    return 0;\n}\n\n</code></pre> python <pre><code>from ctypes import *\nfrom enum import Enum\nimport ctypes\n\n\ntianzuo_HundunLib = cdll.LoadLibrary('./tianzuo.Hundun.dll')\n\n\nclass Hundun_error_code(Enum):\n    Hundun_error_code_success       = 0 # \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter     = 1 # \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse         = 2 # \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile   = 3 # \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate     = 4 # \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched     = 5 # \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n\n\ndef tianzuo_Hundun_check(public_key_string, license_file, days):\n    tianzuo_HundunLib.tianzuo_Hundun_check.argtypes = [c_char_p, c_char_p, ctypes.POINTER(ctypes.c_int)]\n    return tianzuo_HundunLib.tianzuo_Hundun_check(public_key_string, license_file, days)\n\n\ndef main():\n    public_key = (b\"-----BEGIN PUBLIC KEY-----\\n\"\n                  b\"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\"\n                  b\"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\"\n                  b\"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\"\n                  b\"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\"\n                  b\"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\"\n                  b\"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\"\n                  b\"lQIDAQAB\\n\"\n                  b\"-----END PUBLIC KEY-----\\n\")\n\n    Hundun_error_code_strings_cn = (\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\")\n\n    Hundun_error_code_strings = (\n        \"success\",\n        \"parameter error\",\n        \"parse error\",\n        \"license filename error\",\n        \"out of date\",\n        \"machine id unmatched\")\n\n    days = ctypes.c_int()\n    license_file = b\"license.dat\"\n    error_code = tianzuo_Hundun_check(public_key, license_file, days)\n    if error_code != Hundun_error_code.Hundun_error_code_success.value:\n        print(\"hundun.check error_code: {} error_string: {}\".format(error_code, Hundun_error_code_strings_cn[error_code]))\n        return\n\n    int_days = days.value\n    print(\"hundun.check days: {}\".format(int_days))\n\n\nif __name__ == '__main__':\n    main()\n\n</code></pre> java <pre><code>package cn.camelsoft;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\n\nenum Hundun_error_code {\n    Hundun_error_code_success       (0),            ///&lt;  \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter     (1),            ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse         (2),            ///&lt;  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile   (3),            ///&lt;  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate     (4),            ///&lt;  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched     (5);            ///&lt;  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n\n    private int value;\n\n    Hundun_error_code(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\n\npublic class Main {\n    public interface tianzuo_HundunLib extends Library {\n        tianzuo_HundunLib instance = (tianzuo_HundunLib) Native.load(\"./tianzuo.Hundun.dll\", tianzuo_HundunLib.class);\n        int tianzuo_Hundun_check(String public_key_string, String license_file, int[] days);\n    }\n\n    public static void main(String[] args) {\n        System.setProperty(\"jna.encoding\",\"UTF-8\");\n\n        String public_key = \"-----BEGIN PUBLIC KEY-----\\n\" +\n        \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n        \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n        \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n        \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n        \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n        \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n        \"lQIDAQAB\\n\" +\n        \"-----END PUBLIC KEY-----\\n\";\n\n        String[] Hundun_error_code_strings_cn = {\"\u200b\u6210\u529f\u200b\",\n                \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n                \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n                \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n                \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n                \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"};\n\n        String[] Hundun_error_code_strings = {\n                \"success\",\n                \"parameter error\",\n                \"parse error\",\n                \"license filename error\",\n                \"out of date\",\n                \"machine id unmatched\"\n        };\n\n        int[] days = {0};\n        int error_code = tianzuo_HundunLib.instance.tianzuo_Hundun_check(public_key, \"license.dat\", days);\n        if (error_code != Hundun_error_code.Hundun_error_code_success.getValue()) {\n            System.out.printf(\"hundun.check error_code: %d error_string: %s\\n\", error_code, Hundun_error_code_strings_cn[error_code]);\n            return;\n        }\n        System.out.printf(\"hundun.check days: : %d\\n\", days[0]);\n    }\n}\n\n</code></pre> csharp <pre><code>\n\nusing System.Runtime.InteropServices;\n\nclass Program {\n    [DllImport(\"tianzuo.Hundun.dll\")]\n    public static extern int tianzuo_Hundun_check(string public_key_string, string license_file, ref int days);\n\n    public enum Hundun_error_code\n    {\n        Hundun_error_code_success,                ///&lt;  \u200b\u6210\u529f\u200b\n        Hundun_error_code_parameter,              ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n        Hundun_error_code_parse,                  ///&lt;  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n        Hundun_error_code_licensefile,            ///&lt;  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n        Hundun_error_code_outofdate,              ///&lt;  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n        Hundun_error_code_unmatched               ///&lt;  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n    }\n\n    public string[] Hundun_error_code_strings_cn = {\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"\n    };\n\n    public string[] Hundun_error_code_strings = {\n        \"success\",\n        \"parameter error\",\n        \"parse error\",\n        \"license filename error\",\n        \"out of date\",\n        \"machine id unmatched\"\n    };\n\n    static void Main(string[] args) {\n        string public_key = \"-----BEGIN PUBLIC KEY-----\\n\" +\n            \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n            \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n            \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n            \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n            \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n            \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n            \"lQIDAQAB\\n\" +\n            \"-----END PUBLIC KEY-----\\n\";\n\n        int days = 0;\n        int error_code = tianzuo_Hundun_check(public_key, \"license.dat\", ref days);\n        if (error_code != (int)Hundun_error_code.Hundun_error_code_success)\n        {\n            Program myProgram = new Program();\n            Console.WriteLine(\"hundun.check error_code: \" + error_code + \" error_string: \" + myProgram.Hundun_error_code_strings_cn[error_code]);\n            return;\n        }\n        Console.WriteLine(\"hundun.check days: \" + days);\n\n    }\n\n}\n</code></pre> javascript <pre><code>\nHundun_error_code_success     = 0 //  \u200b\u6210\u529f\u200b\nHundun_error_code_parameter   = 1 //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\nHundun_error_code_parse       = 2 //  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\nHundun_error_code_licensefile = 3 //  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\nHundun_error_code_outofdate   = 4 //  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\nHundun_error_code_unmatched   = 5 //  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n\nlet ffi = require('ffi-napi')\nconst ref = require('ref-napi');\n\nlet tianzuo_HundunLib = ffi.Library(\"tianzuo.Hundun.dll\", {\n    'tianzuo_Hundun_check':['int',['string','string','pointer']],\n})\n\nlet public_key = \"-----BEGIN PUBLIC KEY-----\\n\" +\n\"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n\"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n\"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n\"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n\"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n\"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n\"lQIDAQAB\\n\" +\n\"-----END PUBLIC KEY-----\\n\";\n\nconst Hundun_error_code_strings_cn = [\n    \"\u200b\u6210\u529f\u200b\",\n    \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n    \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"];\n\nconst Hundun_error_code_strings = [\n    \"success\",\n    \"parameter error\",\n    \"parse error\",\n    \"license filename error\",\n    \"out of date\",\n    \"machine id unmatched\"];\n\ndays = Buffer.alloc(1 * ref.sizeof.int);\nlet error_code = tianzuo_HundunLib.tianzuo_Hundun_check(public_key, \"license.dat\", days);\nif (error_code !== Hundun_error_code_success) {\n    console.log(\"hundun.check error_code: %d error_string: %s\\n\", error_code, Hundun_error_code_strings_cn[error_code]);\n    return -1;\n}\ndays_data = ref.get(days, 0, ref.types.int);\nconsole.log(\"hundun.check days: %d\\n\", days_data);\n\n</code></pre> php <pre><code>&lt;?php\n\n// \u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u52a0\u8f7d\u200b\u4e86\u200b FFI \u200b\u6269\u5c55\u200b\nif (extension_loaded('ffi')) {\n    echo(\"\u200b\u5df2\u200b\u542f\u7528\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n} else {\n    die(\"\u200b\u672a\u200b\u542f\u52a8\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n}\n\nenum Hundun_error_code\n{\n    const Hundun_error_code_success = 0;        //  \u200b\u6210\u529f\u200b\n    const Hundun_error_code_parameter = 1;      //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    const Hundun_error_code_parse = 2;          //  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    const Hundun_error_code_licensefile = 3;    //  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    const Hundun_error_code_outofdate = 4;      //  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    const Hundun_error_code_unmatched = 5;      //  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n}\n\n$ffi = FFI::cdef(\"\n    int tianzuo_Hundun_check(const char* public_key_string, const char* license_file, int* days);\n\", \"tianzuo.Hundun.dll\");\n\n$public_key = \"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\np1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\nLrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\nENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\nz1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\nouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\nlQIDAQAB\n-----END PUBLIC KEY-----\\n\";\n\ndefine('Hundun_error_code_strings_cn', [\n    \"\u200b\u6210\u529f\u200b\",\n    \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n    \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"]);\n\ndefine('Hundun_error_code_strings', [\n    \"success\",\n    \"parameter error\",\n    \"parse error\",\n    \"license filename error\",\n    \"out of date\",\n    \"machine id unmatched\"\n]);\n\n$days = FFI::new(\"int\");\n$error_code = $ffi-&gt;tianzuo_Hundun_check($public_key, \"license.dat\", FFI::addr($days));\nif ($error_code != Hundun_error_code::Hundun_error_code_success) {\n    echo \"hundun.check error_code: \" . $error_code . \" error_string: \" . Hundun_error_code_strings_cn[$error_code] . \"\\n\";\n    return;\n}\necho \"hundun.check days: \" . $days-&gt;cdata . \"\\n\";\n\n?&gt;\n</code></pre> vb <pre><code>\nImports System.Runtime.InteropServices\n\nEnum Hundun_error_code\n    Hundun_error_code_success = 0 '  \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter = 1 '  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse = 2 '  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile = 3 '  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate = 4 '  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched = 5 '  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\nEnd Enum\n\nModule Program\n    &lt;DllImport(\"tianzuo.Hundun.dll\")&gt;\n    Public Function tianzuo_Hundun_check(public_key_string As String, license_file As String, ByRef days As Integer) As Integer\n    End Function\n\n    ReadOnly Hundun_error_code_strings_cn() As String = {\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"}\n\n    ReadOnly Hundun_error_code_strings() As String = {\n        \"success\",\n        \"parameter error\",\n        \"parse error\",\n        \"license filename error\",\n        \"out of date\",\n        \"machine id unmatched\"}\n\n    Sub Main(args As String())\n        Dim public_key As String = \"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\np1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\nLrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\nENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\nz1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\nouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\nlQIDAQAB\n-----END PUBLIC KEY-----\"\n\n        Dim license_file As String = \"license.dat\"\n        Dim days As Integer = 0\n        Dim error_code As Integer = tianzuo_Hundun_check(public_key, license_file, days)\n        If (error_code &lt;&gt; Hundun_error_code.Hundun_error_code_success) Then\n            Console.WriteLine(\"hundun.check error_code: \" + error_code.ToString + \" error_string: \" + Hundun_error_code_strings_cn(error_code))\n            Return\n        End If\n\n        Console.WriteLine(\"hundun.check days:\" + days.ToString)\n    End Sub\nEnd Module\n\n</code></pre> go <pre><code>package main\n\n/*\n#include \"tianzuo.HundunInterface.h\"\n*/\nimport \"C\"\nimport (\n    \"fmt\"\n    \"syscall\"\n    \"unsafe\"\n)\n\nconst (\n    Hundun_error_code_success     = 0 //  \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter   = 1 //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse       = 2 //  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile = 3 //  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate   = 4 //  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched   = 5 //  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n)\n\nfunc main() {\n    const public_key string = \"-----BEGIN PUBLIC KEY-----\\n\" +\n        \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n        \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n        \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n        \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n        \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n        \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n        \"lQIDAQAB\\n\" +\n        \"-----END PUBLIC KEY-----\\n\"\n\n    Hundun_error_code_strings_cn := [6]string{\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"}\n\n    //Hundun_error_code_strings := [6]string{\n    //  \"success\",\n    //  \"parameter error\",\n    //  \"parse error\",\n    //  \"license filename error\",\n    //  \"out of date\",\n    //  \"machine id unmatched\"}\n\n    dll := syscall.MustLoadDLL(\"tianzuo.Hundun.dll\")\n    tianzuo_Hundun_check := dll.MustFindProc(\"tianzuo_Hundun_check\")\n    days := C.int(0)\n    pub_key := C.CString(public_key)\n    license_file := C.CString(\"license.dat\")\n    error_code, _, _ := tianzuo_Hundun_check.Call(uintptr(unsafe.Pointer(pub_key)), uintptr(unsafe.Pointer(license_file)), uintptr(unsafe.Pointer(&amp;days)))\n    if error_code != Hundun_error_code_success {\n        fmt.Println(\"hundun.check error_code: \", error_code, \" error_string: \", Hundun_error_code_strings_cn[error_code])\n        return\n    }\n    fmt.Println(\"hundun.check days: \", days)\n}\n\n</code></pre> rust <pre><code>\nuse std::os::raw::c_char;\nuse std::ffi::{c_int};\nuse std::ffi::CString;\n\n#[link(name = \"tianzuo.Hundun\")]\nextern {\n    fn tianzuo_Hundun_check(public_key_string: *const c_char, license_file: *const c_char, days: *const c_int) -&gt; c_int;\n}\n\nconst Hundun_error_code_strings_cn: [&amp;str; 6] = [\n    \"\u200b\u6210\u529f\u200b\",\n    \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n    \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"];\n\nconst Hundun_error_code_strings: [&amp;str; 6] = [\n    \"success\",\n    \"parameter error\",\n    \"parse error\",\n    \"license filename error\",\n    \"out of date\",\n    \"machine id unmatched\"];\n\nfn main() {\n    unsafe {\n        let public_key = CString::new(String::from(\"-----BEGIN PUBLIC KEY-----\\n\\\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\\\n        p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\\\n        LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\\\n        ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\\\n        z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\\\n        ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\\\n        lQIDAQAB\\n\\\n        -----END PUBLIC KEY-----\\n\")).expect(\"Failed to create CString\");\n\n\n\n        let license_file = CString::new(String::from(\"license.dat\")).expect(\"Failed to create CString\");\n        let mut days: c_int = 0;\n        let error_code = tianzuo_Hundun_check(public_key.as_ptr(), license_file.as_ptr(), &amp;mut days);\n        if 0 != error_code {\n            let errorc: usize =  error_code as usize;\n            println!(\"hundun.check error_code: {:?} error_string: {:?}\", error_code, Hundun_error_code_strings_cn[errorc]);\n        }\n\n        println!(\"hundun.check days: {:?}\", days);\n    }\n}\n\n</code></pre> ruby <pre><code>require 'fiddle'\n\nlib = Fiddle::dlopen('C:/Users/zhengtianzuo/RubymineProjects/tianzuo.HundunTest/tianzuo.Hundun.dll')\ntianzuo_Hundun_check = Fiddle::Function.new(lib['tianzuo_Hundun_check'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\n\npublic_key = \"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\np1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\nLrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\nENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\nz1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\nouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\nlQIDAQAB\n-----END PUBLIC KEY-----\"\n\nHundun_error_code_strings_cn = [\n  \"\u200b\u6210\u529f\u200b\",\n  \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n  \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n  \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n  \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n  \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"]\n\nHundun_error_code_strings = [\n  \"success\",\n  \"parameter error\",\n  \"parse error\",\n  \"license filename error\",\n  \"out of date\",\n  \"machine id unmatched\"]\n\nlicense_file = \"license.dat\"\ndays = Fiddle::Pointer.malloc(Fiddle::SIZEOF_INT)\nerror_code = tianzuo_Hundun_check.call(public_key, license_file, days)\nif error_code != 0\n  print(\"hundun.check error_code: \", error_code, \" error_string:\", Hundun_error_code_strings_cn[error_code] ,\" \\n\")\n  return\nend\n\nint_days = days[0, Fiddle::SIZEOF_INT].unpack('I')[0]\nprint(\"hundun.check days: \", int_days, \"\\n\")\n\n</code></pre>"},{"location":"component/tianzuo.Hundun/#_8","title":"\u4e0b\u8f7d","text":""},{"location":"component/tianzuo.Kongtong/","title":"\u5929\u4f50\u200b.\u200b\u5d06\u5cd2\u200b\u5370","text":""},{"location":"component/tianzuo.Kongtong/#_2","title":"\u5929\u4f50\u200b.\u200b\u5d06\u5cd2\u200b\u5370","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"component/tianzuo.Kongtong/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u5d06\u5cd2\u200b\u5370\u200b Windows\u200b\u5e73\u53f0\u200b\u4e0b\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53d1\u751f\u200b\u5d29\u6e83\u200b\u65f6\u200b, \u200b\u751f\u6210\u200b\u5d29\u6e83\u200b\u8f6c\u50a8\u200b\u6587\u4ef6\u200b\u7528\u4e8e\u200b\u5206\u6790\u200b\u5b9a\u4f4d\u200b\u5230\u200b\u5d29\u6e83\u200b\u4ee3\u7801\u200b\u884c\u200b\uff0c\u200b\u540c\u65f6\u200b\u751f\u6210\u200b\u7cfb\u7edf\u200b\u73af\u5883\u200b\u76f8\u5173\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u5d06\u5cd2\u200b\u6d77\u4e0a\u200b\u4e0d\u6b7b\u200b\u9f99\u65cf\u200b\u7684\u200b\u62a4\u5b88\u200b\u795e\u5668\u200b\uff0c\u200b\u5176\u4e0a\u523b\u200b\u5851\u6709\u200b\u4e94\u65b9\u200b\u5929\u5e1d\u200b\u5f62\u8c8c\u200b\uff0c\u200b\u5e76\u200b\u6709\u200b\u7389\u9f99\u200b\u76d8\u7ed5\u200b\u3002\u200b\u81ea\u53e4\u200b\u76f8\u4f20\u200b\u5f97\u5230\u200b\u5b83\u200b\u7684\u200b\u4eba\u200b\uff0c\u200b\u5c31\u200b\u80fd\u200b\u62e5\u6709\u200b\u5929\u4e0b\u200b\uff0c\u200b\u4e5f\u200b\u6709\u4eba\u200b\u4f20\u8bf4\u200b\u5b83\u200b\u80fd\u200b\u8ba9\u200b\u4eba\u200b\u4e0d\u200b\u8001\u4e0d\u6b7b\u200b\u3002</p>"},{"location":"component/tianzuo.Kongtong/#_4","title":"\u76ee\u6807","text":"<p>\u200b\u5f00\u53d1\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u5076\u5c14\u200b\u9047\u5230\u200b\u7a0b\u5e8f\u200b\u5d29\u6e83\u200b\u7684\u200b\u60c5\u51b5\u200b\uff0c\u200b\u9700\u8981\u200b\u5206\u6790\u200b\u5d29\u6e83\u200b\u539f\u56e0\u200b\u548c\u200b\u5b9a\u4f4d\u200b\u5230\u200b\u4ee3\u7801\u200b\u884c\u200b\uff0c\u200b\u540c\u65f6\u200b\u9700\u8981\u200b\u5206\u6790\u200b\u73af\u5883\u56e0\u7d20\u200b\u7b49\u200b\u3002</p> <p></p>"},{"location":"component/tianzuo.Kongtong/#_5","title":"\u529f\u80fd","text":"<ul> <li>\ud83e\udde9 \u200b\u96c6\u6210\u200b\u7b80\u5355\u200b</li> <li>\ud83d\udcdd \u200b\u53ef\u200b\u9009\u62e9\u200b\u751f\u6210\u200bdmp\u200b\u4e0e\u200b\u65e5\u5fd7\u200b</li> <li>\ud83e\ude90 \u200b\u65e5\u5fd7\u200b\u591a\u200b\u8bed\u8a00\u200b(\u200b\u7b80\u4f53\u4e2d\u6587\u200b/English)</li> <li>\u26d3 \u200b\u652f\u6301\u200b\u7ebf\u7a0b\u200b\u5185\u200b\u68c0\u6d4b\u200b</li> </ul>"},{"location":"component/tianzuo.Kongtong/#_6","title":"\u622a\u56fe","text":"<p>\u200b\u901a\u8fc7\u200bdmp\u200b\u6587\u4ef6\u200b\u5206\u6790\u200b\u5b9a\u4f4d\u200b\u5d29\u6e83\u200b\u4ee3\u7801\u200b\u884c\u200b:</p> <p>Visual Studio \u200b\u5206\u6790\u200bdmp\u200b\u6587\u4ef6\u200b</p> <p></p> <p>WinDbg \u200b\u5206\u6790\u200bdmp\u200b\u6587\u4ef6\u200b</p> <p></p> <p>\u200b\u73af\u5883\u200b\u65e5\u5fd7\u200b:</p> <p></p>"},{"location":"component/tianzuo.Kongtong/#_7","title":"\u5b89\u88c5","text":"<p>\u200b\u9879\u76ee\u200b\u4e2d\u200b\u542f\u7528\u200b\u5f02\u5e38\u200b\u68c0\u6d4b\u200b</p>"},{"location":"component/tianzuo.Kongtong/#visual-studio","title":"Visual Studio","text":"<p>Visual Studio\u200b\u4e2d\u200b\u5f00\u542f\u200bC++\u200b\u5f02\u5e38\u200b\u68c0\u6d4b\u200b</p> <p></p> <p>Visual Studio\u200b\u4e2d\u200b\u5f00\u542f\u200b\u751f\u6210\u200bpdb\u200b\u6587\u4ef6\u200b</p>"},{"location":"component/tianzuo.Kongtong/#qt-creator","title":"Qt Creator","text":"<p>Qt Creator\u200b\u4e2d\u200b\u5f00\u542f\u200b\u751f\u6210\u200bpdb\u200b\u6587\u4ef6\u200b</p> <pre><code>CONFIG += force_debug_info\nCONFIG += senarate_debug_info\n</code></pre>"},{"location":"component/tianzuo.Kongtong/#_8","title":"\u4f8b\u5b50","text":"<pre><code>#include \"tianzuo.KongtongTest.h\"\n#include \"../../include/tianzuo.Kongtong.h\"\n#include &lt;Windows.h&gt;\n\nvoid init(int argc, char* argv[]) {\n    tianzuo_KongtongTest test;\n    test.doSomething();\n}\n\nint main(int argc, char* argv[]) {\n    HINSTANCE hKongtong = LoadLibrary(L\"tianzuo.Kongtong.dll\");\n    if (!hKongtong) {\n        init(argc, argv);\n        return(0);\n    }\n\n    tianzuo_Kongtong_get_exception getException = (tianzuo_Kongtong_get_exception)GetProcAddress(hKongtong, \"Kongtong_get_exception\");\n    if (!getException) return -1;\n    __try {\n        init(argc, argv);\n    }\n    __except (getException(GetExceptionInformation(), Kongtong_create_normal, 0)) {\n    }\n\n    if (hKongtong != nullptr) {\n        getException = nullptr;\n        FreeLibrary(hKongtong);\n        hKongtong = nullptr;\n    }\n    return(0);\n}\n</code></pre>"},{"location":"component/tianzuo.Kongtong/#_9","title":"\u4e0b\u8f7d","text":""},{"location":"component/tianzuo.LianYao/","title":"\u5929\u4f50\u200b.\u200b\u70bc\u200b\u5996\u200b\u58f6","text":""},{"location":"component/tianzuo.LianYao/#_2","title":"\u5929\u4f50\u200b.\u200b\u70bc\u200b\u5996\u200b\u58f6","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"component/tianzuo.LianYao/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u70bc\u200b\u5996\u200b\u58f6\u200b \u200b\u4e00\u79cd\u200b\u7b80\u5355\u200b\u7684\u200b\u5185\u5b58\u200b\u6c60\u200b\uff0c\u200b\u521d\u59cb\u5316\u200b\u7533\u8bf7\u200b\u4e00\u4e9b\u200b\u5185\u5b58\u200b\u5faa\u73af\u200b\u4f7f\u7528\u200b\uff0c\u200b\u4e0d\u591f\u200b\u65f6\u200b\u52a8\u6001\u200b\u8fdb\u884c\u200b\u6269\u5bb9\u200b\uff0c\u200b\u5e76\u4e14\u200b\u5e26\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u68c0\u6d4b\u200b\u529f\u80fd\u200b\u3002</p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u5b83\u200b\u4ee3\u8868\u200b\u7740\u200b\u878d\u5408\u200b\u548c\u200b\u8fdb\u5316\u200b\u3002\u200b\u70bc\u200b\u5996\u200b\u58f6\u200b\u53ef\u4ee5\u200b\u6536\u7eb3\u200b\u4e07\u7269\u200b\uff0c\u200b\u5c06\u200b\u5996\u200b\u517d\u200b\u3001\u200b\u7075\u517d\u200b\u7b49\u200b\u751f\u7269\u200b\u70bc\u5316\u200b\u4e3a\u200b\u58f6\u200b\u4e2d\u200b\u5143\u6c14\u200b\u3002\u200b\u8fd9\u79cd\u200b\u529b\u91cf\u200b\u8c61\u5f81\u200b\u7740\u200b\u878d\u5408\u200b\u4e0e\u200b\u8fdb\u5316\u200b\uff0c\u200b\u5bd3\u610f\u200b\u7740\u200b\u9053\u5bb6\u200b\u6587\u5316\u200b\u7684\u200b\u5305\u5bb9\u200b\u4e0e\u200b\u548c\u8c10\u200b\u3002</p>"},{"location":"component/tianzuo.LianYao/#_4","title":"\u76ee\u6807","text":"<p>\u200b\u8bbe\u8ba1\u200b\u4e00\u79cd\u200b\u5185\u5b58\u200b\u6c60\u200b\uff0c\u200b\u5faa\u73af\u200b\u8fdb\u884c\u200b\u5185\u5b58\u200b\u4f7f\u7528\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u5185\u5b58\u200b\u4f7f\u7528\u200b\u6548\u7387\u200b\uff0c\u200b\u540c\u65f6\u200b\u63d0\u4f9b\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u68c0\u6d4b\u200b\u529f\u80fd\u200b\u3002</p> <p></p>"},{"location":"component/tianzuo.LianYao/#_5","title":"\u529f\u80fd","text":"<ul> <li>\ud83e\udde9 \u200b\u96c6\u6210\u200b\u7b80\u5355\u200b</li> <li>\ud83d\udcdd \u200b\u53ef\u200b\u9009\u62e9\u200b\u751f\u6210\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u65e5\u5fd7\u200b</li> <li>\ud83e\ude90 \u200b\u65e5\u5fd7\u200b\u591a\u200b\u8bed\u8a00\u200b(\u200b\u7b80\u4f53\u4e2d\u6587\u200b/English)</li> </ul>"},{"location":"component/tianzuo.LianYao/#_6","title":"\u622a\u56fe","text":"<p>\u200b\u901a\u8fc7\u200b\u65e5\u5fd7\u200b\u5206\u6790\u200b\u5b9a\u4f4d\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u4ee3\u7801\u200b\u884c\u200b:</p> <p></p>"},{"location":"component/tianzuo.LianYao/#_7","title":"\u4f8b\u5b50","text":"<pre><code>\n#include &lt;iostream&gt;\n#include \"../../include/tianzuo.LianYaoInterface.h\"\n\nvoid* operator new(size_t size) {\n    return tianzuo_LianYaoInt::mem_get(size);\n}\nvoid* operator new[](size_t size) {\n    return operator new(size);\n}\n\nvoid operator delete(void* ptr) noexcept {\n    tianzuo_LianYaoInt::mem_del(ptr);\n}\nvoid operator delete[](void* ptr) noexcept {\n    operator delete(ptr);\n}\n\nclass cpp {\n public:\n    cpp() {}\n    ~cpp() {}\n private:\n     int m_a;\n     long m_l;\n     float m_f;\n};\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; \"start tianzuo.LianYaoTest ...\\n\";\n#ifdef WIN32\n    tianzuo_LianYaoInt::initialize(3, \"memory_leaks.log\", nullptr, 0);\n#else\n    tianzuo_LianYaoInt::initialize(3, \"memory_leaks.log\", \"./tianzuo.LianYaoTest\", 0);\n#endif\n\n    int* new_int = new int(10); // leak 4\n    int* new_int2 = new int(10);\n    *new_int2 = 12;\n\n    for (size_t i = 0; i &lt; 10; i++) {\n        int* new_int3 = new int(10);\n        *new_int3 = 12;\n        delete new_int3;\n    }\n\n    char* new_buf = new char[1555]; // leak 1555\n    char* new_buf2 = new char[123];\n\n    cpp* new_class = new cpp(); // leak 12\n    cpp* new_class2 = new cpp();\n\n    class1* cls1 = new class1();\n    delete cls1;\n\n    delete new_class2;\n    delete new_int2;\n    delete[] new_buf2;\n\n    tianzuo_LianYaoInt::terminate();\n\n    return 0;\n}\n\n</code></pre>"},{"location":"component/tianzuo.LianYao/#_8","title":"\u4e0b\u8f7d","text":""},{"location":"component/tianzuo.Qiankun/","title":"\u5929\u4f50\u200b.\u200b\u4e7e\u5764\u888b","text":""},{"location":"component/tianzuo.Qiankun/#_2","title":"\u5929\u4f50\u200b.\u200b\u4e7e\u5764\u888b","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"component/tianzuo.Qiankun/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u4e7e\u5764\u888b\u200b \u200b\u57fa\u4e8e\u200b\u62bd\u5c49\u5f0f\u200b\u6587\u4ef6\u200b\u5b58\u50a8\u200b\u7684\u200bNoSql\u200b\u6570\u636e\u5e93\u200b\uff0c\u200b\u53ef\u200b\u7528\u4e8e\u200b\u6587\u4ef6\u200b\u6253\u5305\u200b\uff0c\u200b\u6570\u636e\u200b\u6574\u5408\u200b\uff0c\u200b\u52a0\u5bc6\u200b\u5b58\u653e\u200b\u7b49\u200b\u591a\u79cd\u200b\u7528\u9014\u200b\u3002\u200b\u53ef\u4ee5\u200b\u65b9\u4fbf\u5feb\u6377\u200b\u7684\u200b\u642d\u5efa\u200b\u548c\u200b\u90e8\u7f72\u200b\u5b58\u50a8\u200b\u5e94\u7528\u200b\u7684\u200b\u7cfb\u7edf\u200b\u3002</p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u5f25\u52d2\u200b\u6240\u6709\u200b\uff0c\u200b\u4e13\u505a\u200b\u50a8\u7269\u200b\u4e4b\u7528\u200b\u3002\u200b\u62e5\u6709\u200b\u4e0d\u53ef\u601d\u8bae\u200b\u4e4b\u529b\u200b\uff0c\u200b\u5185\u90e8\u200b\u6709\u8457\u200b\u5947\u5f02\u200b\u4e4b\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u7a7a\u95f4\u200b\u4e4b\u5927\u4f3c\u200b\u80fd\u200b\u5c06\u200b\u5929\u5730\u200b\u6536\u7eb3\u200b\u4e8e\u200b\u5185\u200b\u3002\u200b\u888b\u4e2d\u200b\u53e6\u6709\u200b\u4e7e\u5764\u200b\uff0c\u200b\u5e94\u6709\u5c3d\u6709\u200b\uff0c\u200b\u53d6\u4e4b\u4e0d\u5c3d\u200b\u3002</p>"},{"location":"component/tianzuo.Qiankun/#_4","title":"\u76ee\u6807","text":"<p>\u200b\u6784\u5efa\u200b\u4e00\u79cd\u200b\u4f7f\u7528\u200b\u7b80\u5355\u200b\u63a5\u53e3\u200b\u8c03\u7528\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5b8c\u6210\u200b\u6570\u636e\u7ba1\u7406\u200b\u7684\u200bNoSql\u200b\u6570\u636e\u5e93\u200b\u3002</p> <p></p>"},{"location":"component/tianzuo.Qiankun/#_5","title":"\u529f\u80fd","text":"<ul> <li>\ud83e\udde9 \u200b\u96c6\u6210\u200b\u7b80\u5355\u200b</li> <li>\ud83d\udce6 \u200b\u5b58\u653e\u200b\u6587\u4ef6\u200b\u53ef\u200b\u81ea\u7531\u9009\u62e9\u200b\u538b\u7f29\u200b</li> <li>\ud83e\udea2 \u200b\u6570\u636e\u200b\u7ecf\u8fc7\u200b256\u200b\u4f4d\u200bAES\u200b\u7b97\u6cd5\u200b\u52a0\u5bc6\u200b</li> <li>\ud83d\udcd2 \u200b\u652f\u6301\u200b\u6570\u636e\u200b\u6279\u91cf\u200b\u589e\u52a0\u200b/\u200b\u5220\u9664\u200b/\u200b\u4fee\u6539\u200b/\u200b\u67e5\u8be2\u200b</li> <li>\ud83d\udcc3 \u200b\u652f\u6301\u200b\u76f4\u63a5\u200b\u83b7\u53d6\u200b\u539f\u59cb\u6570\u636e\u200b\u6d41\u200b</li> </ul>"},{"location":"component/tianzuo.Qiankun/#_6","title":"\u622a\u56fe","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u4e7e\u5764\u888b\u200b\u6d4b\u8bd5\u7a0b\u5e8f\u200b:</p> <p></p>"},{"location":"component/tianzuo.Qiankun/#_7","title":"\u4f8b\u5b50","text":"cpp <pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include \"tianzuo.QiankunInterface.h\" // \u200b\u63a5\u53e3\u200b\u5934\u6587\u4ef6\u200b interface heaher file\n\nint main() {\n    // \u200b\u51c6\u5907\u200b\u6570\u636e\u200b prepare data\n    Qiankun_db_verify_struct db_verify(\"qiankunDataBase.Ztz\", \"password\");\n    int integer = 12345678;\n    Qiankun_data_type_struct data_type(Qiankun_data_type_integer, -1, \"integer\");\n    Qiankun_user_data_struct user_data(&amp;integer, 0);\n    int data_size = 0;\n    Qiankun_get_user_data_struct get_user_data(reinterpret_cast&lt;void*&amp;&gt;(integer), &amp;data_size);\n\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    std::unique_ptr&lt;tianzuo_QiankunInterface&gt; qiankun_interface(new tianzuo_QiankunInterface());\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_QiankunInt* qiankun = qiankun_interface-&gt;initialize();\n\n    // \u200b\u521d\u59cb\u5316\u200b\u5b9e\u4f8b\u200b initialize the instance\n    int error_code = qiankun-&gt;initialize();\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"initialize error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n    error_code = qiankun-&gt;db_create_database(&amp;db_verify, \"qiankunDataBase\", true);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"db_create_database error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n    error_code = qiankun-&gt;db_open_database(&amp;db_verify);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"db_open_database error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n    error_code = qiankun-&gt;data_combine(&amp;db_verify, &amp;data_type, nullptr, &amp;user_data, false, -1);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"data_combine error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n\n    // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n    integer = -1;\n    error_code = qiankun-&gt;data_extract(&amp;db_verify, &amp;data_type, nullptr, &amp;get_user_data);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"data_extract error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    std::cout &lt;&lt; \"get integer data: \" &lt;&lt; integer;\n\n    // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n    error_code = qiankun-&gt;db_close_database(&amp;db_verify);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"db_close_database error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\nreturn_error:\n\n    // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n    if (qiankun_interface != nullptr &amp;&amp; qiankun != nullptr) {\n        qiankun_interface-&gt;terminate(&amp;qiankun);\n    }\n\n    std::cout &lt;&lt; \"test done -------------------\";\n\n    return 0;\n}\n</code></pre> python <pre><code>from ctypes import *\nfrom enum import Enum\nimport ctypes\n\ntianzuo_QiankunLib = cdll.LoadLibrary('./tianzuo.Qiankun.dll')\n\nclass Qiankun_error_code(Enum):\n    Qiankun_errorcode_success           = 1 # \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal            = 2 # \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ            = 3 # \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\n    Qiankun_errorcode_no_rights         = 4 # \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist      = 5 # \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\n    Qiankun_errorcode_exist             = 6 # \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist         = 7 # \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\n    Qiankun_errorcode_out_of_range      = 8 # \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\n    Qiankun_errorcode_type              = 9 # \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param             = 10 # \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\n    Qiankun_errorcode_compress          = 11 # \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\n    Qiankun_errorcode_get_array         = 12 # \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\n    Qiankun_errorcode_out_of_memory     = 13 # \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle            = 14 # \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\n    Qiankun_errorcode_io                = 15 # IO\u200b\u9519\u8bef\u200b (io error)\n\nclass tianzuo_QiankunInt:\n    def __init__(self):\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize.restype = c_void_p\n        self.obj = tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize()\n\n    def __del__(self):\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_terminate.argtypes = [c_void_p]\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_terminate(self.obj)\n\n    def initialize(self):\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize.restype = c_int\n        tianzuo_QiankunLib.tianzuo_QiankunInt_initialize.argtypes = [c_void_p]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_initialize(self.obj)\n\n    def db_create_database(self, db_file_name, db_password, db_name, over_write):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, c_int]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database(self.obj, db_file_name, db_password, db_name, over_write)\n\n    def db_open_database(self, db_file_name, db_password):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database.argtypes = [c_void_p, c_char_p, c_char_p]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database(self.obj, db_file_name, db_password)\n\n    def db_close_database(self, db_file_name, db_password):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database.argtypes = [c_void_p, c_char_p, c_char_p]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database(self.obj, db_file_name, db_password)\n\n    def data_int_combine(self, db_file_name, db_password, data_name, remark, data):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, c_char_p, c_int]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine(self.obj, db_file_name, db_password, data_name, remark, data)\n\n    def data_int_extract(self, db_file_name, db_password, data_name, data):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, ctypes.POINTER(ctypes.c_int)]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract(self.obj, db_file_name, db_password, data_name, data)\n\ndef main():\n\n    # \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    print(\"initialize the interface\")\n\n    # \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    qiankun = tianzuo_QiankunInt()\n    error_code = qiankun.initialize()\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"initialize error:\", error_code)\n        return\n\n    # \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n    db_file_name = b\"qiankunDataBase.Ztz\"\n    db_password = b\"password\"\n    error_code = qiankun.db_create_database(db_file_name, db_password, b\"qiankunDataBase\", True)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"db_create_database error:\", error_code)\n        return\n\n    # \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n    error_code = qiankun.db_open_database(db_file_name, db_password)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"db_open_database error:\", error_code)\n        return\n\n    # \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n    intInt = 12345678\n    error_code = qiankun.data_int_combine(db_file_name, db_password, b\"integer\", None, intInt)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"data_combine error:\", error_code)\n        return\n\n    # \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n    return_data = ctypes.c_int()\n    error_code = qiankun.data_int_extract(db_file_name, db_password, b\"integer\", ctypes.byref(return_data))\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"data_extract error:\", error_code)\n        return\n\n    integer = return_data.value\n    print(\"get integer data: {}\".format(integer))\n\n    # \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n    error_code = qiankun.db_close_database(db_file_name, db_password)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"db_close_database error:\", error_code)\n        return\n\n    print(\"test done -------------------\")\n\nif __name__ == '__main__':\n    main()\n\n</code></pre> java <pre><code>package cn.camelsoft;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\n\nenum Qiankun_error_code {\n    Qiankun_errorcode_success           (0x00000001),   ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal            (0x00000002),   ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ            (0x00000003),   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\n    Qiankun_errorcode_no_rights         (0x00000004),   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist      (0x00000005),   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\n    Qiankun_errorcode_exist             (0x00000006),   ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist         (0x00000007),   ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\n    Qiankun_errorcode_out_of_range      (0x00000008),   ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\n    Qiankun_errorcode_type              (0x00000009),   ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param             (0x0000000A),   ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\n    Qiankun_errorcode_compress          (0x0000000B),   ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\n    Qiankun_errorcode_get_array         (0x0000000C),   ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\n    Qiankun_errorcode_out_of_memory     (0x0000000D),   ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle            (0x0000000E),   ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\n    Qiankun_errorcode_io                (0x0000000F);   ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n\n    private int value;\n\n    Qiankun_error_code(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\n\npublic class Main {\n\n    public interface tianzuo_QiankunLib extends Library {\n        tianzuo_QiankunLib instance = (tianzuo_QiankunLib) Native.load(\"./tianzuo.Qiankun.dll\", tianzuo_QiankunLib.class);\n        Pointer tianzuo_QiankunInterface_initialize();\n        void tianzuo_QiankunInterface_terminate(Pointer qiankun);\n        int tianzuo_QiankunInt_initialize(Pointer qiankun);\n\n        int tianzuo_QiankunInt_db_create_database(Pointer qiankun, String db_file_name, String db_password, String db_name, Boolean over_write);\n        int tianzuo_QiankunInt_db_open_database(Pointer qiankun, String db_file_name, String db_password);\n        int tianzuo_QiankunInt_db_close_database(Pointer qiankun, String db_file_name, String db_password);\n        int tianzuo_QiankunInt_data_int_combine(Pointer qiankun, String db_file_name, String db_password, String data_name, String remark, int data);\n        int tianzuo_QiankunInt_data_int_extract(Pointer qiankun, String db_file_name, String db_password, String data_name, int[] data);\n    }\n\n    public static void main(String[] args) {\n        System.setProperty(\"jna.encoding\",\"UTF-8\");\n\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        System.out.printf(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Pointer qiankun = tianzuo_QiankunLib.instance.tianzuo_QiankunInterface_initialize();\n        int error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_initialize(qiankun);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_initialize error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        String db_file_name = \"qiankunDataBase.Ztz\";\n        String db_password = \"password\";\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", true);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_db_create_database error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_db_open_database error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        int intInt = 12345678;\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_data_int_combine error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        int[] return_data = {0};\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", return_data);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_data_int_extract error: %d\\n\", error_code);\n            return;\n        }\n\n        System.out.printf(\"get int: %d\\n\", return_data[0]);\n\n        // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_db_close_database error: %d\\n\", error_code);\n            return;\n        }\n\n        System.out.printf(\"test done -------------------\\n\");\n\n        tianzuo_QiankunLib.instance.tianzuo_QiankunInterface_terminate(qiankun);\n    }\n}\n</code></pre> csharp <pre><code>\n\nusing System.Runtime.InteropServices;\n\npublic enum Qiankun_error_code\n{\n    Qiankun_errorcode_success       = 0x00000001,              ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal        = 0x00000002,              ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ        = 0x00000003,              ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\n    Qiankun_errorcode_no_rights     = 0x00000004,              ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist  = 0x00000005,              ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\n    Qiankun_errorcode_exist         = 0x00000006,              ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist     = 0x00000007,              ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\n    Qiankun_errorcode_out_of_range  = 0x00000008,              ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\n    Qiankun_errorcode_type          = 0x00000009,              ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param         = 0x0000000A,              ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\n    Qiankun_errorcode_compress      = 0x0000000B,              ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\n    Qiankun_errorcode_get_array     = 0x0000000C,              ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\n    Qiankun_errorcode_out_of_memory = 0x0000000D,              ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle        = 0x0000000E,              ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\n    Qiankun_errorcode_io            = 0x0000000F,              ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n}\n\nclass Program {\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern IntPtr tianzuo_QiankunInterface_initialize();\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern void tianzuo_QiankunInterface_terminate(IntPtr qiankun);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_initialize(IntPtr qiankun);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_db_create_database(IntPtr qiankun, string db_file_name, string db_password, string db_name, bool over_write);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_db_open_database(IntPtr qiankun, string db_file_name, string db_password);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_db_close_database(IntPtr qiankun, string db_file_name, string db_password);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_data_int_combine(IntPtr qiankun, string db_file_name, string db_password, string data_name, string remark, int data);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_data_int_extract(IntPtr qiankun, string db_file_name, string db_password, string data_name, ref int data);\n\n    static void Main(string[] args) {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        IntPtr qiankun = tianzuo_QiankunInterface_initialize();\n        int error_code = tianzuo_QiankunInt_initialize(qiankun);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_initialize error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        string db_file_name = \"qiankunDataBase.Ztz\";\n        string db_password = \"password\";\n        error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", true);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_db_create_database error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success)) {\n            Console.WriteLine(\"tianzuo_QiankunInt_db_open_database error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        int intInt = 12345678;\n        error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_combine error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        int return_data = 0;\n        error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", ref return_data);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_extract error:\" + error_code);\n            return;\n        }\n\n        Console.WriteLine(\"get int: \" + return_data);\n\n        // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_db_close_database error:\" + error_code);\n            return;\n        }\n\n        Console.WriteLine(\"test done -------------------\\n\");\n\n        tianzuo_QiankunInterface_terminate(qiankun);\n\n    }\n\n}\n</code></pre> javascript <pre><code>\nQiankun_errorcode_success           = 0x00000001;   ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\nQiankun_errorcode_normal            = 0x00000002;   ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\nQiankun_errorcode_differ            = 0x00000003;   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\nQiankun_errorcode_no_rights         = 0x00000004;   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\nQiankun_errorcode_db_not_exist      = 0x00000005;   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\nQiankun_errorcode_exist             = 0x00000006;   ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\nQiankun_errorcode_not_exist         = 0x00000007;   ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\nQiankun_errorcode_out_of_range      = 0x00000008;   ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\nQiankun_errorcode_type              = 0x00000009;   ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\nQiankun_errorcode_param             = 0x0000000A;   ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\nQiankun_errorcode_compress          = 0x0000000B;   ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\nQiankun_errorcode_get_array         = 0x0000000C;   ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\nQiankun_errorcode_out_of_memory     = 0x0000000D;   ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\nQiankun_errorcode_handle            = 0x0000000E;   ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\nQiankun_errorcode_io                = 0x0000000F;   ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n\nlet ffi = require('ffi-napi')\nconst ref = require('ref-napi');\n\nlet tianzuo_QiankunLib = ffi.Library(\"tianzuo.Qiankun.dll\", {\n    'tianzuo_QiankunInterface_initialize': ['pointer', []],\n    'tianzuo_QiankunInterface_terminate':['void',['pointer']],\n    'tianzuo_QiankunInt_initialize':['int',['pointer']],\n    'tianzuo_QiankunInt_db_create_database':['int',['pointer','string','string','string', 'bool']],\n    'tianzuo_QiankunInt_db_open_database':['int',['pointer', 'string', 'string']],\n    'tianzuo_QiankunInt_db_close_database':['int',['pointer', 'string', 'string']],\n    'tianzuo_QiankunInt_data_int_combine':['int',['pointer','string','string','string', 'string', 'int']],\n    'tianzuo_QiankunInt_data_int_extract':['int',['pointer','string','string','string', 'pointer']],\n})\n\n\n// \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\nconsole.log(\"initialize the interface\\n\");\n\n// \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\nlet qiankun = tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize();\nlet error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_initialize(qiankun);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_initialize error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\nlet db_file_name = \"qiankunDataBase.Ztz\";\nlet db_password = \"password\";\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", true);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_db_create_database error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_db_open_database error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\nlet intInt = 12345678;\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_data_int_combine error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\nreturn_buf = Buffer.alloc(1 * ref.sizeof.int);\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", return_buf);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_data_int_extract error: %d\\n\", error_code);\n    return;\n}\n\nreturn_data = ref.get(return_buf, 0, ref.types.int);\nconsole.log(\"get int: %d\\n\", return_data);\n\n// \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_db_close_database error: %d\\n\", error_code);\n   return;\n}\n\nconsole.log(\"test done -------------------\\n\");\n\ntianzuo_QiankunLib.tianzuo_QiankunInterface_terminate(qiankun);\n\n</code></pre> php <pre><code>&lt;?php\n\n// \u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u52a0\u8f7d\u200b\u4e86\u200b FFI \u200b\u6269\u5c55\u200b\nif (extension_loaded('ffi')) {\n    echo(\"\u200b\u5df2\u200b\u542f\u7528\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n} else {\n    die(\"\u200b\u672a\u200b\u542f\u52a8\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n}\n\nenum Qiankun_error_code\n{\nconst Qiankun_errorcode_success       = 0x00000001;            ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\nconst Qiankun_errorcode_normal        = 0x00000002;            ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\nconst Qiankun_errorcode_differ        = 0x00000003;            ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\nconst Qiankun_errorcode_no_rights     = 0x00000004;            ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\nconst Qiankun_errorcode_db_not_exist  = 0x00000005;            ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\nconst Qiankun_errorcode_exist         = 0x00000006;            ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\nconst Qiankun_errorcode_not_exist     = 0x00000007;            ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\nconst Qiankun_errorcode_out_of_range  = 0x00000008;            ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\nconst Qiankun_errorcode_type          = 0x00000009;            ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\nconst Qiankun_errorcode_param         = 0x0000000A;            ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\nconst Qiankun_errorcode_compress      = 0x0000000B;            ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\nconst Qiankun_errorcode_get_array     = 0x0000000C;            ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\nconst Qiankun_errorcode_out_of_memory = 0x0000000D;            ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\nconst Qiankun_errorcode_handle        = 0x0000000E;            ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\nconst Qiankun_errorcode_io            = 0x0000000F;            ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n}\n\n$ffi = FFI::cdef(\"\n    void* tianzuo_QiankunInterface_initialize();\n    void tianzuo_QiankunInterface_terminate(void* *QiankunInt_pointer);\n    int tianzuo_QiankunInt_initialize(void* QiankunInt_pointer);\n    int tianzuo_QiankunInt_db_create_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* db_name, bool const over_write);\n    int tianzuo_QiankunInt_db_open_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password);\n    int tianzuo_QiankunInt_db_close_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password);\n    int tianzuo_QiankunInt_data_int_combine(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* data_name, const char* remark, int data);\n    int tianzuo_QiankunInt_data_int_extract(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* data_name, int* data);\n\", \"tianzuo.Qiankun.dll\");\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\necho \"initialize the interface\" . \"\\n\";\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n$qiankun = $ffi-&gt;tianzuo_QiankunInterface_initialize();\n\n$error_code = $ffi-&gt;tianzuo_QiankunInt_initialize($qiankun);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"initialize error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n$db_file_name = \"qiankunDataBase.Ztz\";\n$db_password = \"password\";\n$error_code = $ffi-&gt;tianzuo_QiankunInt_db_create_database($qiankun, $db_file_name, $db_password, \"qiankunDataBase\", true);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_db_create_database error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n$error_code = $ffi-&gt;tianzuo_QiankunInt_db_open_database($qiankun, $db_file_name, $db_password);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_db_open_database error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n$intInt = 12345678;\n$error_code = $ffi-&gt;tianzuo_QiankunInt_data_int_combine($qiankun, $db_file_name, $db_password, \"integer\", \"\", $intInt);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_data_int_combine error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n$return_data = FFI::new(\"int\");\n$error_code = $ffi-&gt;tianzuo_QiankunInt_data_int_extract($qiankun, $db_file_name, $db_password, \"integer\", FFI::addr($return_data));\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_data_int_extract error: \" . $error_code . \"\\n\";\n    return;\n}\n\necho \"get integer data: \" . $return_data-&gt;cdata . \"\\n\";\n\n# \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n$error_code = $ffi-&gt;tianzuo_QiankunInt_db_close_database($qiankun, $db_file_name, $db_password);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_db_close_database error: \" . $error_code . \"\\n\";\n    return;\n}\n\necho \"test done -------------------\" . \"\\n\";\n\n?&gt;\n</code></pre> vb <pre><code>\nImports System.Runtime.InteropServices\n\nEnum Qiankun_error_code\n    Qiankun_errorcode_success = 1                     '  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal = 2                      '  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ = 3                      '  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number Of database files fails To be verified)\n    Qiankun_errorcode_no_rights = 4                   '  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist = 5                '  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does Not exist)\n    Qiankun_errorcode_exist = 6                       '  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist = 7                   '  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does Not exist)\n    Qiankun_errorcode_out_of_range = 8                '  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out Of range)\n    Qiankun_errorcode_type = 9                        '  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param = 10                      '  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter Error)\n    Qiankun_errorcode_compress = 11                   '  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression Error)\n    Qiankun_errorcode_get_array = 12                  '  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary Error)\n    Qiankun_errorcode_out_of_memory = 13              '  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle = 14                     '  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (Error handle)\n    Qiankun_errorcode_io = 15                         '  IO\u200b\u9519\u8bef\u200b (io Error)\nEnd Enum\n\nModule Program\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInterface_initialize() As IntPtr\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInterface_terminate(ByRef QiankunInt_pointer As IntPtr)\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_initialize(QiankunInt_pointer As IntPtr) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_db_create_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, db_name As String, over_write As Boolean) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_db_open_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_db_close_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_data_int_combine(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, data_name As String, remark As String, data As Integer) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_data_int_extract(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, data_name As String, ByRef data As Integer) As Integer\n    End Function\n\n    Sub Main(args As String())\n        ' \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\")\n\n        ' \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Dim qiankun As IntPtr = tianzuo_QiankunInterface_initialize()\n        Dim error_code As Integer = tianzuo_QiankunInt_initialize(qiankun)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_initialize error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        Dim db_file_name As String = \"qiankunDataBase.Ztz\"\n        Dim db_password As String = \"password\"\n        error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", True)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_db_create_database error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_db_open_database error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        Dim intInt As Integer = 12345678\n        error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_combine error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        Dim return_data As Integer = 0\n        error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", return_data)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_extract error:\" + error_code.ToString)\n            Return\n        End If\n\n        Console.WriteLine(\"get int: \" + return_data.ToString)\n\n        ' \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_db_close_database error:\" + error_code.ToString)\n            Return\n        End If\n\n        Console.WriteLine(\"test done -------------------\")\n\n    End Sub\nEnd Module\n\n</code></pre> go <pre><code>package main\n\n/*\n#include \"tianzuo.QiankunInterface.h\"\n*/\nimport \"C\"\nimport (\n    \"fmt\"\n    \"syscall\"\n    \"unsafe\"\n)\n\nconst (\n    Qiankun_errorcode_success       = 1  //  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal        = 2  //  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ        = 3  //  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number Of database files fails To be verified)\n    Qiankun_errorcode_no_rights     = 4  //  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist  = 5  //  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does Not exist)\n    Qiankun_errorcode_exist         = 6  //  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist     = 7  //  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does Not exist)\n    Qiankun_errorcode_out_of_range  = 8  //  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out Of range)\n    Qiankun_errorcode_type          = 9  //  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param         = 10 //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter Error)\n    Qiankun_errorcode_compress      = 11 //  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression Error)\n    Qiankun_errorcode_get_array     = 12 //  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary Error)\n    Qiankun_errorcode_out_of_memory = 13 //  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle        = 14 //  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (Error handle)\n    Qiankun_errorcode_io            = 15 //  IO\u200b\u9519\u8bef\u200b (io Error)\n)\n\nfunc main() {\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    dll := syscall.MustLoadDLL(\"tianzuo.Qiankun.dll\")\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_QiankunInterface_initialize := dll.MustFindProc(\"tianzuo_QiankunInterface_initialize\")\n    qiankun, _, _ := tianzuo_QiankunInterface_initialize.Call()\n\n    tianzuo_QiankunInt_initialize := dll.MustFindProc(\"tianzuo_QiankunInt_initialize\")\n    error_code, _, _ := tianzuo_QiankunInt_initialize.Call(qiankun)\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_initialize error: \", error_code)\n    }\n\n    // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n    db_file_name := C.CString(\"qiankunDataBase.Ztz\")\n    db_password := C.CString(\"password\")\n    tianzuo_QiankunInt_db_create_database := dll.MustFindProc(\"tianzuo_QiankunInt_db_create_database\")\n    error_code, _, _ = tianzuo_QiankunInt_db_create_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(\"qiankunDataBase\"))), 1)\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_db_create_database error: \", error_code)\n    }\n\n    // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n    tianzuo_QiankunInt_db_open_database := dll.MustFindProc(\"tianzuo_QiankunInt_db_open_database\")\n    error_code, _, _ = tianzuo_QiankunInt_db_open_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_db_open_database error: \", error_code)\n    }\n\n    // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n    intInt := C.int(12345678)\n    tianzuo_QiankunInt_data_int_combine := dll.MustFindProc(\"tianzuo_QiankunInt_data_int_combine\")\n    error_code, _, _ = tianzuo_QiankunInt_data_int_combine.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(\"integer\"))), uintptr(unsafe.Pointer(C.CString(\"\"))), uintptr(intInt))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_data_int_combine error: \", error_code)\n    }\n\n    // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n    return_int := C.int(0)\n    tianzuo_QiankunInt_data_int_extract := dll.MustFindProc(\"tianzuo_QiankunInt_data_int_extract\")\n    error_code, _, _ = tianzuo_QiankunInt_data_int_extract.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(\"integer\"))), uintptr(unsafe.Pointer(&amp;return_int)))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_data_int_extract error: \", error_code)\n    }\n\n    fmt.Println(\"get integer data: \", return_int)\n\n    // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n    tianzuo_QiankunInt_db_close_database := dll.MustFindProc(\"tianzuo_QiankunInt_db_close_database\")\n    error_code, _, _ = tianzuo_QiankunInt_db_close_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_db_close_database error: \", error_code)\n    }\n\n    fmt.Println(\"test done -------------------\")\n}\n\n</code></pre> rust <pre><code>\nuse std::os::raw::c_char;\nuse std::ffi::{c_int};\nuse std::ffi::CString;\nuse std::ptr::null;\n\n#[link(name = \"tianzuo.Qiankun\")]\nextern {\n    fn tianzuo_QiankunInterface_initialize() -&gt; *mut std::ffi::c_void;\n    fn tianzuo_QiankunInterface_terminate(obj: *mut std::ffi::c_void);\n    fn tianzuo_QiankunInt_initialize(obj: *mut std::ffi::c_void) -&gt; c_int;\n    fn tianzuo_QiankunInt_db_create_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, db_name: *const c_char, over_write: c_int) -&gt; c_int;\n    fn tianzuo_QiankunInt_db_open_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char) -&gt; c_int;\n    fn tianzuo_QiankunInt_db_close_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char) -&gt; c_int;\n    fn tianzuo_QiankunInt_data_int_combine(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, data_name: *const c_char, remark: *const c_char, data: c_int) -&gt; c_int;\n    fn tianzuo_QiankunInt_data_int_extract(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, data_name: *const c_char, data: *const c_int) -&gt; c_int;\n}\n\nfn main() {\n    unsafe {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        println!(\"initialize the interface\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        let qiankun = tianzuo_QiankunInterface_initialize();\n        let error_code = tianzuo_QiankunInt_initialize(qiankun);\n        if 1 != error_code {\n            println!(\"initialize error: {:?}\", error_code);\n        }\n\n        // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        let db_file_name = CString::new(String::from(\"qiankunDataBase.Ztz\")).expect(\"Failed to create CString\");\n        let db_password = CString::new(String::from(\"password\")).expect(\"Failed to create CString\");\n        let db_name = CString::new(String::from(\"qiankunDataBase\")).expect(\"Failed to create CString\");\n        let error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), db_name.as_ptr(), 1);\n        if 1 != error_code {\n            println!(\"db_create_database error: {:?}\", error_code);\n        }\n\n        // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        let error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr());\n        if 1 != error_code {\n            println!(\"db_open_database error: {:?}\", error_code);\n        }\n\n        // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        let int = 12345678;\n        let data_name = CString::new(String::from(\"integer\")).expect(\"Failed to create CString\");\n        let error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), data_name.as_ptr(), null(), int);\n        if 1 != error_code {\n            println!(\"data_combine error: {:?}\", error_code);\n        }\n\n        // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        let mut return_data: c_int = 0;\n        let error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), data_name.as_ptr(), &amp;mut return_data);\n        if 1 != error_code {\n            println!(\"data_extract error: {:?}\", error_code);\n        }\n\n        println!(\"get integer data: {:?}\", return_data);\n\n        // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        let error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr());\n        if 1 != error_code {\n            println!(\"db_close_database error: {:?}\", error_code);\n        }\n\n        println!(\"test done -------------------\")\n    }\n}\n\n</code></pre> ruby <pre><code>require 'fiddle'\n\nlib = Fiddle::dlopen('C:/Users/zhengtianzuo/RubymineProjects/tianzuo.QiankunTest/tianzuo.Qiankun.dll')\ntianzuo_QiankunInterface_initialize = Fiddle::Function.new(lib['tianzuo_QiankunInterface_initialize'], [], Fiddle::TYPE_VOIDP)\ntianzuo_QiankunInterface_terminate = Fiddle::Function.new(lib['tianzuo_QiankunInterface_terminate'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_VOID)\ntianzuo_QiankunInt_initialize = Fiddle::Function.new(lib['tianzuo_QiankunInt_initialize'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_db_create_database = Fiddle::Function.new(lib['tianzuo_QiankunInt_db_create_database'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_db_open_database = Fiddle::Function.new(lib['tianzuo_QiankunInt_db_open_database'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_data_int_combine = Fiddle::Function.new(lib['tianzuo_QiankunInt_data_int_combine'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_data_int_extract = Fiddle::Function.new(lib['tianzuo_QiankunInt_data_int_extract'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_db_close_database = Fiddle::Function.new(lib['tianzuo_QiankunInt_db_close_database'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\nprint(\"initialize the interface\\n\")\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\nqiankun = tianzuo_QiankunInterface_initialize.call()\nerror_code = tianzuo_QiankunInt_initialize.call(qiankun)\nif error_code != 1\n  print(\"initialize error:\", error_code, \"\\n\")\n  return\nend\n\n# \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\ndb_file_name = \"qiankunDataBase.Ztz\"\ndb_password = \"password\"\nerror_code = tianzuo_QiankunInt_db_create_database.call(qiankun, db_file_name, db_password, \"qiankunDataBase\", 1)\nif error_code != 1\n  print(\"db_create_database error:\", error_code, \"\\n\")\n  return\nend\n\n# \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\nerror_code = tianzuo_QiankunInt_db_open_database.call(qiankun, db_file_name, db_password)\nif error_code != 1\n  print(\"db_open_database error:\", error_code, \"\\n\")\nreturn\nend\n\n# \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\nintInt = 12345678\nerror_code = tianzuo_QiankunInt_data_int_combine.call(qiankun, db_file_name, db_password, \"integer\", \"\", intInt)\nif error_code != 1\n  print(\"data_combine error:\", error_code, \"\\n\")\nreturn\nend\n\n# \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\nreturn_data = Fiddle::Pointer.malloc(Fiddle::SIZEOF_INT)\nerror_code = tianzuo_QiankunInt_data_int_extract.call(qiankun, db_file_name, db_password, \"integer\", return_data)\nif error_code != 1\n  print(\"data_extract error:\", error_code, \"\\n\")\nreturn\nend\n\ninteger = return_data[0, Fiddle::SIZEOF_INT].unpack('I')[0]\nprint(\"get integer data: \", integer, \"\\n\")\n\n# \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\nerror_code = tianzuo_QiankunInt_db_close_database.call(qiankun, db_file_name, db_password)\nif error_code != 1\n  print(\"db_close_database error:\", error_code)\nreturn\nend\n\nprint(\"test done -------------------\")\n\n</code></pre>"},{"location":"component/tianzuo.Qiankun/#_8","title":"\u4e0b\u8f7d","text":""},{"location":"component/tianzuo.Zhuiri/","title":"\u5929\u4f50\u200b.\u200b\u8ffd\u65e5\u200b\u9774","text":""},{"location":"component/tianzuo.Zhuiri/#_2","title":"\u5929\u4f50\u200b.\u200b\u8ffd\u65e5\u200b\u9774","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"component/tianzuo.Zhuiri/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u8ffd\u65e5\u200b\u9774\u200b \u200b\u9ad8\u6027\u80fd\u200b\u53ef\u9760\u200bUDP\u200b\u6570\u636e\u4f20\u8f93\u200bP2P\u200b\u901a\u8baf\u200b\u6846\u67b6\u200b\uff0c\u200b\u53ef\u200b\u7528\u4e8e\u200b\u5efa\u7acb\u200bP2P\u200b\u73af\u5883\u200b\uff0c\u200b\u6587\u4ef6\u4f20\u8f93\u200b\uff0c\u200b\u6570\u636e\u901a\u8baf\u200b\u3002\u200b\u57fa\u4e8e\u200bUDP\u200b\u534f\u8bae\u200b\u7684\u200b\u5185\u7f51\u200b\u7a7f\u900f\u200b\u89e3\u51b3\u65b9\u6848\u200b\uff0c\u200b\u8f7b\u677e\u200b\u5b9e\u73b0\u200b\u97f3\u89c6\u9891\u200b\u4f1a\u8bae\u200b\u4e2d\u5fc3\u200b\uff0c\u200b\u76f4\u64ad\u200b\uff0c\u200b\u8fdc\u7a0b\u684c\u9762\u200b/\u200b\u6587\u6863\u200b\u6f14\u793a\u200b\u7b49\u200b\u529f\u80fd\u200b\u3002</p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u51ed\u6b64\u200b\u9774\u200b\u53ef\u4ee5\u200b\u65e5\u884c\u5343\u91cc\u200b\u3001\u200b\u591c\u8d70\u200b\u516b\u767e\u200b\uff0c\u200b\u5982\u751f\u200b\u7fbd\u7ffc\u200b\u3002\u200b\u6e34\u6b32\u5f97\u200b\u996e\u200b\uff0c\u200b\u996e\u4e8e\u200b\u6cb3\u6e2d\u200b\uff0c\u200b\u6cb3\u6e2d\u200b\u4e0d\u8db3\u200b\uff0c\u200b\u5317\u996e\u200b\u5927\u6cfd\u200b\u3002\u200b\u672a\u81f3\u200b\uff0c\u200b\u9053\u200b\u6e34\u200b\u800c\u200b\u6b7b\u200b\u3002\u200b\u5f03\u5176\u6756\u200b\uff0c\u200b\u5316\u4e3a\u200b\u9093\u6797\u200b\u3002</p>"},{"location":"component/tianzuo.Zhuiri/#_4","title":"\u76ee\u6807","text":"<p>\u200b\u6784\u5efa\u200bUDP\u200b\u53ef\u9760\u200b\u6570\u636e\u4f20\u8f93\u200b\uff0c\u200b\u6309\u200b\u7b56\u7565\u200b\u52a8\u6001\u200b\u8c03\u6574\u200b\u4e22\u200b\u5305\u7387\u200b\u548c\u200b\u4f20\u8f93\u200b\u6027\u80fd\u200b\uff0c\u200b\u53ef\u200b\u65b9\u4fbf\u200b\u642d\u5efa\u200bP2P\u200b\u901a\u8baf\u200b\u3002</p> <p></p>"},{"location":"component/tianzuo.Zhuiri/#_5","title":"\u529f\u80fd","text":"<ul> <li>\ud83e\udde9 \u200b\u96c6\u6210\u200b\u7b80\u5355\u200b</li> <li>\ud83d\udcca \u200b\u9ad8\u5c42\u200b\u534f\u8bae\u200b\u5b9e\u73b0\u200b\u6570\u636e\u901a\u8baf\u200b\u7684\u200b\u7a33\u5b9a\u200b\u53ef\u9760\u200b, \u200b\u53ef\u200b\u52a8\u6001\u200b\u4fee\u6539\u200b\u53c2\u6570\u200b\u8c03\u6574\u200b\u901a\u8baf\u200b\u7b56\u7565\u200b.</li> <li>\ud83e\udea1 \u200b\u53ef\u200b\u4f7f\u7528\u200b\u540c\u200b\u4e00\u5957\u200b\u63a5\u5b57\u200b\u521d\u59cb\u5316\u200b\u591a\u4e2a\u200b\u7ec4\u4ef6\u200b\u8fdb\u884c\u200b\u591a\u7ebf\u7a0b\u200b\u6570\u636e\u901a\u8baf\u200b.</li> <li>\ud83d\udd22 \u200b\u89e3\u51b3\u200b\u4e22\u5305\u200b: \u200b\u91c7\u7528\u200b\u81ea\u884c\u200b\u7814\u53d1\u200b\u7684\u200b\u5e76\u884c\u200b\u6ed1\u52a8\u200b\u7a97\u53e3\u200b\u534f\u8bae\u200b, \u200b\u4fdd\u8bc1\u6570\u636e\u200b\u7684\u200b\u7a33\u5b9a\u200b\u53ef\u9760\u200b\u4f20\u8f93\u200b.</li> <li>\ud83e\ude9f \u200b\u52a8\u6001\u200b\u8c03\u6574\u200b: \u200b\u6570\u636e\u901a\u8baf\u200b\u53ef\u884c\u200b\u6548\u7387\u200b\u52a8\u6001\u200b\u8bc4\u4f30\u200b\u548c\u200b\u8ba1\u7b97\u200b\u83b7\u5f97\u200b\u5f53\u524d\u200b\u73af\u5883\u200b\u4e0b\u200b\u7684\u200b\u6700\u4f73\u200b\u901a\u8baf\u200b\u8868\u73b0\u200b.</li> <li>\ud83d\udc5c \u200b\u6570\u636e\u200b\u7ec4\u5e27\u200b: \u200b\u901a\u8baf\u200b\u6570\u636e\u5305\u200b\u53d1\u9001\u200b\u5206\u5305\u200b, \u200b\u63a5\u6536\u200b\u7ec4\u5305\u200b, \u200b\u4fdd\u8bc1\u6570\u636e\u200b\u987a\u5e8f\u200b\u5b8c\u6574\u200b.</li> </ul>"},{"location":"component/tianzuo.Zhuiri/#_6","title":"\u622a\u56fe","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u8ffd\u65e5\u200b\u9774\u200b\u6d4b\u8bd5\u7a0b\u5e8f\u200b:</p> <p></p>"},{"location":"component/tianzuo.Zhuiri/#_7","title":"\u4f8b\u5b50","text":"cpp <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include \"tianzuo.ZhuiriInterface.h\" // \u200b\u63a5\u53e3\u200b\u5934\u6587\u4ef6\u200b interface heaher file\n\n#include &lt;winsock.h&gt;\n#pragma comment(lib, \"ws2_32.lib\")\n\n// \u200b\u6570\u636e\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\nvoid msg_recv_callback(void* context, Zhuiri_data_pkg_pointer data_pkg) {\n    Zhuiri_data_pkg_struct data_new;\n    memcpy(&amp;data_new, data_pkg, sizeof(Zhuiri_data_pkg_struct));\n    int send_size = data_pkg-&gt;m_data.get_send_size();\n    if (send_size &gt; Zhuiri_content_size) {\n        char* send_data = new char[static_cast&lt;unsigned int&gt;(send_size)];\n        memcpy(send_data, data_pkg-&gt;get_send_data(), static_cast&lt;unsigned int&gt;(send_size));\n        data_new.set_send_data(send_data);\n    } else {\n        data_new.set_send_data(data_new.m_data.m_data);\n    }\n    tianzuo_DataQueue* const dataQueue = reinterpret_cast&lt;tianzuo_DataQueue*&gt;(context);\n    dataQueue-&gt;push_back(&amp;data_new);\n}\n\n// \u200b\u63a5\u6536\u200b\u7ebf\u7a0b\u200b\nvoid recv_thread(tianzuo_DataQueue* data_queue_recv) {\n    while (1) {\n        Zhuiri_data_pkg_struct recv_msg;\n        if (data_queue_recv-&gt;pop_up(&amp;recv_msg) != Zhuiri_queue_error_code_success) {\n            //std::cout &lt;&lt; \"pop_up no data\" &lt;&lt; std::endl;\n            std::this_thread::sleep_for(std::chrono::milliseconds(200));\n            continue;\n        }\n\n        std::cout &lt;&lt; \"recv data: \" &lt;&lt; recv_msg.m_data.m_data &lt;&lt; std::endl;\n        if (strcmp(recv_msg.m_data.m_data, \"send data 99\") == 0) {\n            std::cout &lt;&lt; \"recv done\" &lt;&lt; std::endl;\n            return;\n        }\n    }\n}\n\nint main() {\n\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    std::unique_ptr&lt;tianzuo_ZhuiriInterface&gt; zhuiri_interface(new tianzuo_ZhuiriInterface());\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_ZhuiriInt* zhuiri = zhuiri_interface-&gt;initialize();\n\n    // \u200b\u521d\u59cb\u5316\u200b\u6570\u636e\u200b\u961f\u5217\u200b\u63a5\u53e3\u200b initialize the data queue interface\n    std::unique_ptr&lt;tianzuo_DataQueueInterface&gt; data_queue_interface(new tianzuo_DataQueueInterface());\n\n    // \u200b\u521b\u5efa\u200b\u6570\u636e\u200b\u961f\u5217\u200b\u5b9e\u4f8b\u200b create an data queue instance\n    tianzuo_DataQueue* data_queue_recv = data_queue_interface-&gt;initialize();\n\n    // \u200b\u521d\u59cb\u5316\u200b\u5b9e\u4f8b\u200b initialize the instance\n    int port = 6666;\n    int error_code = zhuiri-&gt;initialize(\n        nullptr, port, reinterpret_cast&lt;void*&gt;(msg_recv_callback),\n        data_queue_recv, 6000, false);\n    if (error_code != Zhuiri_error_code_success) {\n        std::cout &lt;&lt; \"initialize error: \" &lt;&lt; error_code;\n\n        // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n        if (data_queue_interface != nullptr &amp;&amp; data_queue_recv != nullptr) {\n            data_queue_interface-&gt;terminate(&amp;data_queue_recv);\n        }\n        if (zhuiri_interface != nullptr &amp;&amp; zhuiri != nullptr) {\n            zhuiri_interface-&gt;terminate(&amp;zhuiri);\n        }\n        return -1;\n    }\n\n    // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    Zhuiri_param_struct param(0, 5168, 1024, 2280, 3, 5, 600);\n    zhuiri-&gt;set_param(&amp;param);\n\n    // \u200b\u542f\u52a8\u200b\u63a5\u6536\u200b\u7ebf\u7a0b\u200b start receiving thread\n    std::thread recv_th(recv_thread, data_queue_recv);\n\n    // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    int data_size = 1024;\n    char data[1024];\n    memset(data, 0, data_size);\n    int ip = ntohl(inet_addr(\"127.0.0.1\"));\n    for (size_t i = 0; i &lt; 100; i++) {\n        //std::cout &lt;&lt; \"start send index: \" &lt;&lt; i &lt;&lt; std::endl;\n        sprintf_s(data, data_size, \"send data %d\", i);\n        int data_len = strlen(data);\n        Zhuiri_send_param_struct send_param(0, ip, port, Zhuiri_data_sign_reliable, 7788, data, data_len);\n        error_code = zhuiri-&gt;send(&amp;send_param);\n        if (error_code != Zhuiri_error_code_success) {\n            std::cout &lt;&lt; \"send error: \" &lt;&lt; error_code;\n\n            // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n            if (data_queue_interface != nullptr &amp;&amp; data_queue_recv != nullptr) {\n                data_queue_interface-&gt;terminate(&amp;data_queue_recv);\n            }\n            if (zhuiri_interface != nullptr &amp;&amp; zhuiri != nullptr) {\n                zhuiri_interface-&gt;terminate(&amp;zhuiri);\n            }\n            return -1;\n        }\n        //std::this_thread::sleep_for(std::chrono::milliseconds(10));\n    }\n    std::cout &lt;&lt; \"send done\" &lt;&lt; std::endl;\n    recv_th.join();\n\n    // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n    if (data_queue_interface != nullptr &amp;&amp; data_queue_recv != nullptr) {\n        data_queue_interface-&gt;terminate(&amp;data_queue_recv);\n    }\n    if (zhuiri_interface != nullptr &amp;&amp; zhuiri != nullptr) {\n        zhuiri_interface-&gt;terminate(&amp;zhuiri);\n    }\n\n    return 0;\n}\n</code></pre> python <pre><code>from ctypes import *\nfrom enum import Enum\nimport ctypes\nimport ipaddress\n\ntianzuo_ZhuiriLib = cdll.LoadLibrary('./tianzuo.Zhuiri.dll')\n\n\nclass Zhuiri_error_code(Enum):\n    Zhuiri_error_code_success       = 0x00000001                                     # \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     = 0x00000002                                     # \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        = 0x0000000D                                     # \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  = 0x00000021                                     # \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        = 0x00000022                                     # \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  = 0x00000023                                     # \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 0x00000024                                     # \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      = 0x00000025                                     # \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   = 0x00000098                                     # \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     = 0x00000099                                     # \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n\n\nclass Zhuiri_queue_error_code(Enum):\n    Zhuiri_queue_error_code_success       = 0x00000001                               # \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_queue_error_code_invalid_value = 0x00000002                               # \u200b\u65e0\u6548\u200b\u7684\u200b\u503c\u200b (invalid value)\n    Zhuiri_queue_error_code_out_of_cache  = 0x00000003                               # \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b (out f cache)\n    Zhuiri_queue_error_code_out_of_memory = 0x00000004                               # \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_queue_error_code_no_data       = 0x00000005                               # \u200b\u65e0\u200b\u6570\u636e\u200b (no data)\n\n\nclass Zhuiri_data_sign(Enum):\n    Zhuiri_data_sign_none       = 0x00000000                                         # \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   = 0x00000001                                         # \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 0x00000002                                         # \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   = 0x00000003                                         # \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      = 0x00000004                                         # \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n\n\nclass tianzuo_ZhuiriInt:\n    def __init__(self):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_initialize.restype = c_void_p\n        self.obj = tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_initialize()\n\n    def __del__(self):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_terminate.argtypes = [c_void_p]\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_terminate(self.obj)\n\n    def initialize(self, ip_addr, port, callback, context, heart_check_time, log_trace, iocp):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize.restype = c_int\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize.argtypes = [c_void_p, c_char_p, ctypes.c_int, c_void_p, c_void_p, ctypes.c_int, ctypes.c_int, c_void_p]\n        return tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize(self.obj, ip_addr, port, callback, context, heart_check_time, log_trace, iocp)\n\n    def set_param(self, sender_index, init_server_port, msg_init_size, recv_ex_data_max, retry_max, retry_all_number, init_retry_time):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param.restype = c_int\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param.argtypes = [c_void_p, c_int, c_int, c_int, c_int, c_int, c_int, c_int]\n        return tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param(self.obj, sender_index, init_server_port, msg_init_size, recv_ex_data_max, retry_max, retry_all_number, init_retry_time)\n\n    def send(self, sender_index, ip, port, sign, function, send_data, send_size):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send.restype = c_int\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send.argtypes = [c_void_p, c_int, c_int, c_int, c_int, c_int, c_char_p, c_int]\n        return tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send(self.obj, sender_index, ip, port, sign, function, send_data, send_size)\n\n\nclass tianzuo_DataQueueInt:\n    def __init__(self):\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_initialize.restype = c_void_p\n        self.obj = tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_initialize()\n\n    def __del__(self):\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_terminate.argtypes = [c_void_p]\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_terminate(self.obj)\n\n    def initialize(self):\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInt_initialize.restype = c_void_p\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInt_initialize.argtypes = [c_void_p]\n        return tianzuo_ZhuiriLib.tianzuo_DataQueueInt_initialize(self.obj)\n\n\ncallback_type = ctypes.CFUNCTYPE(c_void_p, c_void_p, c_void_p)\n\n\nclass Zhuiri_data_struct(ctypes.Structure):\n    _fields_ = [(\"m_ip_adrs\", ctypes.c_int),\n                (\"m_port\", ctypes.c_int),\n                (\"m_function\", ctypes.c_int),\n                (\"m_sign\", ctypes.c_int),\n                (\"m_index\", ctypes.c_int),\n                (\"m_send_time\", ctypes.c_int),\n                (\"m_send_size\", ctypes.c_int),\n                (\"m_data\", ctypes.c_char * 492)]\n\n\nclass Zhuiri_data_pkg_struct(ctypes.Structure):\n    _fields_ = [(\"m_data\", Zhuiri_data_struct),\n                (\"m_send_data\", ctypes.c_char_p),\n                (\"m_Zhuiri\", ctypes.c_void_p),\n                (\"m_user_data\", ctypes.c_void_p)]\n\n\ndef msg_recv_callback(context, pData):\n    data = ctypes.cast(pData, ctypes.POINTER(Zhuiri_data_pkg_struct)).contents\n    print(\"recv data:\", data.m_data.m_data)\n\n\ndef main():\n    # \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    print(\"initialize the interface\")\n\n    # \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    data_queue_recv = tianzuo_DataQueueInt()\n    pdata_queue_recv = ctypes.pointer(ctypes.py_object(data_queue_recv))\n\n    pmsg_recv_callback = callback_type(msg_recv_callback)\n\n    Zhuiri = tianzuo_ZhuiriInt()\n    port = 6666\n    error_code = Zhuiri.initialize(None, port, pmsg_recv_callback, pdata_queue_recv, 6000, False, None)\n    if error_code != Zhuiri_error_code.Zhuiri_error_code_success.value:\n        print(\"initialize error:\", error_code)\n        return\n\n    # \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    Zhuiri.set_param(0, 5168, 1024, 2280, 3, 5, 600)\n\n    # \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    ip = int(ipaddress.IPv4Address(\"127.0.0.1\"))\n    for i in range(100):\n        data = \"send data {}\".format(i)\n        data_len = len(data)\n        bytes_string = data.encode('utf-8')\n        error_code = Zhuiri.send(0, ip, port, Zhuiri_data_sign.Zhuiri_data_sign_reliable.value, 7788, bytes_string, data_len)\n        if error_code != Zhuiri_error_code.Zhuiri_error_code_success.value:\n            print(\"send error:\", error_code)\n            return\n\n    print(\"test done\")\n\n\nif __name__ == '__main__':\n    main()\n\n</code></pre> java <pre><code>package cn.camelsoft;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\nimport com.sun.jna.Callback;\nimport com.sun.jna.CallbackReference;\nimport com.sun.jna.ptr.IntByReference;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\nenum Zhuiri_error_code {\n    Zhuiri_error_code_success       (0x00000001),                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     (0x00000002),                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        (0x0000000D),                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  (0x00000021),                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        (0x00000022),                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  (0x00000023),                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory (0x00000024),                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      (0x00000025),                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   (0x00000098),                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     (0x00000099);                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n    private int value;\n    Zhuiri_error_code(int value) {\n        this.value = value;\n    }\n    public int getValue() {\n        return value;\n    }\n};\n\nenum Zhuiri_data_sign {\n    Zhuiri_data_sign_none       (0x00000000),                                         ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   (0x00000001),                                         ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing (0x00000002),                                         ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   (0x00000003),                                         ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      (0x00000004);                                         ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n    private int value;\n    Zhuiri_data_sign(int value) {\n        this.value = value;\n    }\n    public int getValue() {\n        return value;\n    }\n};\n\ninterface tianzuo_ZhuiriLib extends Library {\n    tianzuo_ZhuiriLib instance = (tianzuo_ZhuiriLib) Native.load(\"./tianzuo.Zhuiri.dll\", tianzuo_ZhuiriLib.class);\n    Pointer tianzuo_ZhuiriInterface_initialize();\n    void tianzuo_ZhuiriInterface_terminate(Pointer zhuiri);\n    int tianzuo_ZhuiriInt_initialize(Pointer zhuiri, String ip_addr, int port, Pointer callback, Pointer context, int heart_check_time, Boolean log_trace, Pointer iocp);\n    int tianzuo_ZhuiriInt_set_param(Pointer zhuiri, int sender_index, int init_server_port, int msg_init_size, int recv_ex_data_max, int retry_max, int retry_all_number, int init_retry_time);\n    int tianzuo_ZhuiriInt_send(Pointer zhuiri, int sender_index, int ip, int port, int sign, int function, String send_data, int send_size);\n}\n\ninterface tianzuo_DataQueueLib extends Library {\n    tianzuo_DataQueueLib instance = (tianzuo_DataQueueLib) Native.load(\"./tianzuo.Zhuiri.dll\", tianzuo_DataQueueLib.class);\n    Pointer tianzuo_DataQueueInterface_initialize();\n    void tianzuo_DataQueueInterface_terminate(Pointer DataQueue);\n    int tianzuo_DataQueueInt_initialize(Pointer DataQueue);\n}\n\ninterface MyCallback extends Callback {\n    void callbackFunction(Pointer context, Pointer pData);\n}\nclass MyCallbackImpl implements MyCallback {\n\n    @Override\n    public void callbackFunction(Pointer context, Pointer pData) {\n        Zhuiri_data_pkg_struct data_pkg = new Zhuiri_data_pkg_struct(pData);\n        String str = new String(data_pkg.m_data.m_data).trim();\n        System.out.printf(\"recv data: %s\\n\", str);\n    }\n}\n\npublic class Main {\n    public static int ipToInt(String ipAddress) {\n        try {\n            InetAddress inetAddress = InetAddress.getByName(ipAddress);\n            byte[] bytes = inetAddress.getAddress();\n\n            int result = 0;\n            for (byte b : bytes) {\n                result = result &lt;&lt; 8 | (b &amp; 0xFF);\n            }\n\n            return result;\n        } catch (UnknownHostException e) {\n            System.err.println(\"Invalid IP address: \" + ipAddress);\n            return 0;\n        }\n    }\n\n    public static void main(String[] args) {\n\n        System.setProperty(\"jna.encoding\",\"UTF-8\");\n\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        System.out.printf(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Pointer data_queue_recv = tianzuo_DataQueueLib.instance.tianzuo_DataQueueInterface_initialize();\n\n        MyCallback callback = new MyCallbackImpl();\n        Pointer pcallback = CallbackReference.getFunctionPointer(callback);\n\n        Pointer zhuiri = tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInterface_initialize();\n        int port = 6666;\n        int error_code = tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInt_initialize(zhuiri, null, port, pcallback, data_queue_recv, 6000, false, null);\n        if (error_code != Zhuiri_error_code.Zhuiri_error_code_success.getValue()) {\n            System.out.printf(\"tianzuo_ZhuiriInt_initialize error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n        tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInt_set_param(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n        // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        String ipAddress = \"127.0.0.1\";\n        int ip = ipToInt(ipAddress);\n        int sport = 6666;\n        for (int i = 0; i &lt; 100; i++) {\n            String data = String.format(\"send data %d \", i);\n            int data_len = data.length();\n            int error_code2 = tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInt_send(zhuiri, 0, ip, sport, Zhuiri_data_sign.Zhuiri_data_sign_reliable.getValue(), 7788, data, data_len);\n            if (error_code2 != Zhuiri_error_code.Zhuiri_error_code_success.getValue()) {\n                System.out.printf(\"tianzuo_ZhuiriInt_send error: %d\\n\", error_code2);\n                return;\n            }\n        }\n\n        System.out.printf(\"test done\\n\");\n    }\n}\n</code></pre> csharp <pre><code>\n\nusing System.Collections;\nusing System.Net;\nusing System.Runtime.InteropServices;\nusing System.Text;\n\npublic enum Zhuiri_error_code\n{\n    Zhuiri_error_code_success       = 0x00000001,                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     = 0x00000002,                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        = 0x0000000D,                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  = 0x00000021,                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        = 0x00000022,                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  = 0x00000023,                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 0x00000024,                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      = 0x00000025,                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   = 0x00000098,                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     = 0x00000099,                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n}\n\npublic enum Zhuiri_data_sign\n{\n    Zhuiri_data_sign_none       = 0x00000000,                                         ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   = 0x00000001,                                         ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 0x00000002,                                         ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   = 0x00000003,                                         ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      = 0x00000004,                                         ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n};\n\npublic struct Zhuiri_data_struct\n{\n    public Zhuiri_data_struct()\n    {\n    }\n    public int m_ip_adrs;\n    public int m_port;\n    public int m_function;\n    public int m_sign;\n    public int m_index;\n    public int m_send_time;\n    public int m_send_size;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 492)]\n    public byte[] m_data;\n}\n\npublic struct Zhuiri_data_pkg_struct\n{\n    public Zhuiri_data_pkg_struct()\n    {\n    }\n    public Zhuiri_data_struct m_data;\n    public IntPtr m_send_data;\n    public IntPtr m_Zhuiri;\n    public IntPtr m_user_data;\n}\n\npublic delegate void CallbackDelegate(IntPtr context, IntPtr pData);\n\nclass Program\n{\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern IntPtr tianzuo_ZhuiriInterface_initialize();\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern void tianzuo_ZhuiriInterface_terminate(IntPtr Zhuiri);\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern int tianzuo_ZhuiriInt_initialize(IntPtr Zhuiri, string ip_addr, int port, IntPtr callback, IntPtr context, int heart_check_time, bool log_trace, IntPtr iocp);\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern IntPtr tianzuo_DataQueueInterface_initialize();\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern int tianzuo_ZhuiriInt_set_param(IntPtr Zhuiri, int sender_index, int init_server_port, int msg_init_size, int recv_ex_data_max, int retry_max, int retry_all_number, int init_retry_time);\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern int tianzuo_ZhuiriInt_send(IntPtr Zhuiri, int sender_index, int ip, int port, int sign, int function, string send_data, int send_size);\n\n    static void MyCallback(IntPtr context, IntPtr pData)\n    {\n        Zhuiri_data_pkg_struct data = Marshal.PtrToStructure&lt;Zhuiri_data_pkg_struct&gt;(pData);\n        string str = Encoding.ASCII.GetString(data.m_data.m_data);\n        Console.WriteLine(\"recv data:\" + str);\n    }\n\n    static void Main(string[] args)\n    {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        IntPtr data_queue_recv = tianzuo_DataQueueInterface_initialize();\n\n        CallbackDelegate callback = new CallbackDelegate(MyCallback);\n        IntPtr callbackPtr = Marshal.GetFunctionPointerForDelegate(callback);\n\n        IntPtr zhuiri = tianzuo_ZhuiriInterface_initialize();\n        int port = 6666;\n        int error_code = tianzuo_ZhuiriInt_initialize(zhuiri, null, port, callbackPtr, data_queue_recv, 6000, false, 0);\n        if (error_code != ((int)Zhuiri_error_code.Zhuiri_error_code_success))\n        {\n            Console.WriteLine(\"tianzuo_ZhuiriInt_initialize error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n        tianzuo_ZhuiriInt_set_param(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n        // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        string ipAddressString = \"127.0.1.1\";\n        IPAddress ipAddress = IPAddress.Parse(ipAddressString);\n        byte[] bytes = ipAddress.GetAddressBytes();\n        if (BitConverter.IsLittleEndian)\n        {\n            Array.Reverse(bytes);\n        }\n        int ip = BitConverter.ToInt32(bytes, 0);\n        int sport = 6666;\n        for (int i = 0; i &lt; 100; i++)\n        {\n            string data = String.Format(\"send data {0}\", i);\n            int data_len = data.Length;\n            error_code = tianzuo_ZhuiriInt_send(zhuiri, 0, ip, sport, (int)Zhuiri_data_sign.Zhuiri_data_sign_reliable, 7788, data, data_len);\n            if (error_code != ((int)Zhuiri_error_code.Zhuiri_error_code_success))\n            {\n                Console.WriteLine(\"tianzuo_ZhuiriInt_send error:\" + error_code);\n                return;\n            }\n        }\n\n        Console.WriteLine(\"test done\");\n    }\n}\n\n</code></pre> javascript <pre><code>\n\nZhuiri_error_code_success       = 0x00000001;                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\nZhuiri_error_code_no_rights     = 0x00000002;                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\nZhuiri_error_code_socket        = 0x0000000D;                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\nZhuiri_error_code_thread_error  = 0x00000021;                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\nZhuiri_error_code_handle        = 0x00000022;                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\nZhuiri_error_code_out_of_cache  = 0x00000023;                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\nZhuiri_error_code_out_of_memory = 0x00000024;                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\nZhuiri_error_code_time_out      = 0x00000025;                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\nZhuiri_error_code_user_reject   = 0x00000098;                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\nZhuiri_error_code_user_exit     = 0x00000099;                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n\nZhuiri_data_sign_none           = 0x00000000;                                     ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\nZhuiri_data_sign_reliable       = 0x00000001;                                     ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\nZhuiri_data_sign_processing     = 0x00000002;                                     ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\nZhuiri_data_sign_response       = 0x00000003;                                     ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\nZhuiri_data_sign_heart          = 0x00000004;                                     ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n\nlet ffi = require('ffi-napi')\nconst ref = require('ref-napi');\n\nlet tianzuo_ZhuiriLib = ffi.Library(\"tianzuo.Zhuiri.dll\", {\n    'tianzuo_ZhuiriInterface_initialize': ['pointer', []],\n    'tianzuo_ZhuiriInterface_terminate':['void',['pointer']],\n    'tianzuo_ZhuiriInt_initialize':['int',['pointer','pointer','int','pointer','pointer','int', 'bool','pointer']],\n    'tianzuo_ZhuiriInt_set_param':['int',['pointer','int','int','int','int','int','int','int']],\n    'tianzuo_ZhuiriInt_send':['int',['pointer','int','int','int','int','int','string','int']],\n    'tianzuo_DataQueueInterface_initialize': ['pointer', []],\n    'tianzuo_DataQueueInterface_terminate':['void',['pointer']],\n})\n\nfunction ipToInt(ip) {\n    let parts = ip.split('.').map(Number);\n    return (parts[0] &lt;&lt; 24) + (parts[1] &lt;&lt; 16) + (parts[2] &lt;&lt; 8) + parts[3];\n}\n\nfunction sleep(ms) {\n    return new Promise(resolve =&gt; setTimeout(resolve, ms));\n}\n\nasync function main() {\n\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    console.log(\"initialize the interface\\n\");\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    let data_queue_recv = tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_initialize();\n\n    const callback = ffi.Callback('void', ['pointer', 'pointer'], function(context, pData) {\n        const data = pData.readCString(4*7);\n        console.log(`recv data: ${data}`);\n    });\n\n    let port = 5555;\n    let zhuiri = tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_initialize();\n    let error_code = tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize(zhuiri, null, port, callback, data_queue_recv, 6000, false, null);\n    if (error_code !== Zhuiri_error_code_success) {\n        console.log(\"tianzuo_ZhuiriInt_initialize error: %d\\n\", error_code);\n        return;\n    }\n\n    // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n    // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    const ipString = '127.0.0.1';\n    const ip = ipToInt(ipString);\n    let sport = 6666;\n\n    for (let i = 0; i &lt; 10; i++) {\n        const data = `send data ${i}`;\n        const data_len = data.length;\n        error_code = tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send(zhuiri, 0, ip, sport, Zhuiri_data_sign_reliable, 7788, data, data_len);\n        if (error_code !== Zhuiri_error_code_success) {\n            console.log(\"tianzuo_ZhuiriInt_send error: %d\\n\", error_code);\n            return;\n        }\n    }\n    await sleep(20000);\n}\n\nmain();\n\nconsole.log(\"test done\\n\");\n\n\n</code></pre> php <pre><code>&lt;?php\n\n// \u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u52a0\u8f7d\u200b\u4e86\u200b FFI \u200b\u6269\u5c55\u200b\nif (extension_loaded('ffi')) {\n    echo(\"\u200b\u5df2\u200b\u542f\u7528\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n} else {\n    die(\"\u200b\u672a\u200b\u542f\u52a8\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n}\n\nenum Zhuiri_error_code\n{\nconst Zhuiri_error_code_success       = 0x00000001;                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\nconst Zhuiri_error_code_no_rights     = 0x00000002;                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\nconst Zhuiri_error_code_socket        = 0x0000000D;                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\nconst Zhuiri_error_code_thread_error  = 0x00000021;                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\nconst Zhuiri_error_code_handle        = 0x00000022;                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\nconst Zhuiri_error_code_out_of_cache  = 0x00000023;                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\nconst Zhuiri_error_code_out_of_memory = 0x00000024;                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\nconst Zhuiri_error_code_time_out      = 0x00000025;                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\nconst Zhuiri_error_code_user_reject   = 0x00000098;                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\nconst Zhuiri_error_code_user_exit     = 0x00000099;                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n};\n\nenum Zhuiri_data_sign\n{\nconst Zhuiri_data_sign_none           = 0x00000000;                                     ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\nconst Zhuiri_data_sign_reliable       = 0x00000001;                                     ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\nconst Zhuiri_data_sign_processing     = 0x00000002;                                     ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\nconst Zhuiri_data_sign_response       = 0x00000003;                                     ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\nconst Zhuiri_data_sign_heart          = 0x00000004;                                     ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n};\n\n$ffi = FFI::cdef(\"\n    void* tianzuo_ZhuiriInterface_initialize();\n    void tianzuo_ZhuiriInterface_terminate(void* *ZhuiriInt_pointer);\n    int tianzuo_ZhuiriInt_initialize(void* ZhuiriInt_pointer, const char* ip_addr, int port, const void* callback, const void* context, int const heart_check_time, bool log_trace, void* iocp);\n    int tianzuo_ZhuiriInt_set_param(void* ZhuiriInt_pointer, int sender_index, int init_server_port, int msg_init_size, int recv_ex_data_max, int retry_max, int retry_all_number, int init_retry_time);\n    int tianzuo_ZhuiriInt_send(void* ZhuiriInt_pointer, int sender_index, int ip, int port, int sign, int function, char* send_data, int send_size);\n    void* tianzuo_DataQueueInterface_initialize();\n    void tianzuo_DataQueueInterface_terminate(void* *DataQueue_pointer);\n    typedef unsigned(*Zhuiri_callback)(const void *context, const void *pData);\n\", \"tianzuo.Zhuiri.dll\");\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\necho \"initialize the interface\" . \"\\n\";\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n$data_queue_recv = $ffi-&gt;tianzuo_DataQueueInterface_initialize();\n\n\n//function myCallback($context, $pData) {\n//    echo \"phpCallback\" . \"\\n\";\n//}\n//\n//// Define the callback function signature\n//$callback = function($context, $pData) {\n//    myCallback($context, $pData);\n//};\n//\n//$callableCallback = FFI::addr($callback);\n\n\n//$phpCallback = function($context, $pData): void {\n//    echo \"phpCallback\" . \"\\n\";\n//};\n//$callback= FFI::new(\"Zhuiri_callback\", $phpCallback);\n\n\n$callback = $ffi-&gt;callback(\"void(const char*)\", function($message) {\n    echo \"Callback message: $message\\n\";\n});\n\n\n\n$port = 6666;\n$zhuiri = $ffi-&gt;tianzuo_ZhuiriInterface_initialize();\n$error_code = $ffi-&gt;tianzuo_ZhuiriInt_initialize($zhuiri, null, $port, $callback, $data_queue_recv, 6000, False, null);\nif ($error_code != Zhuiri_error_code::Zhuiri_error_code_success) {\n    echo \"initialize error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n$ffi-&gt;tianzuo_ZhuiriInt_set_param($zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n# \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n$ip = ip2long(\"127.0.0.1\");\nfor ($i = 0; $i &lt; 10; $i++) {\n    $data = sprintf(\"send data %d\", $i);\n    $data_len = strlen($data);\n    echo \"ip: \" . $ip . \"\\n\";\n    echo \"port: \" . $port . \"\\n\";\n    echo \"send data: \" . $data . \"\\n\";\n    echo \"data_len: \" . $data_len . \"\\n\";\n    $error_code = $ffi-&gt;tianzuo_ZhuiriInt_send($zhuiri, 0, $ip, $port, Zhuiri_data_sign::Zhuiri_data_sign_reliable, 7788, $data, $data_len);\n    if ($error_code != Zhuiri_error_code::Zhuiri_error_code_success) {\n        echo \"send error: \" . $error_code . \"\\n\";\n        return;\n    }\n}\n\necho \"test done\" . \"\\n\";\n\n\n?&gt;\n</code></pre> vb <pre><code>\nImports System.IO\nImports System.Net\nImports System.Runtime.InteropServices\nImports System.Runtime.InteropServices.JavaScript.JSType\nImports System.Text\n\nEnum Zhuiri_error_code\n    Zhuiri_error_code_success = 1                                            ' \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights = 2                                          ' \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket = 13                                            ' \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket Error)\n    Zhuiri_error_code_thread_error = 21                                      ' \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread Error)\n    Zhuiri_error_code_handle = 22                                            ' \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle Error)\n    Zhuiri_error_code_out_of_cache = 23                                      ' \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 24                                     ' \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out Of memory)\n    Zhuiri_error_code_time_out = 25                                          ' \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject = 98                                       ' \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit = 99                                         ' \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user Exit)\nEnd Enum\n\nEnum Zhuiri_data_sign\n    Zhuiri_data_sign_none = 0                                               ' \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable = 1                                           ' \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 2                                         ' \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response = 3                                           ' \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart = 4                                              ' \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\nEnd Enum\n\nStructure Zhuiri_data_struct\n    Public m_ip_adrs As Integer\n    Public m_port As Integer\n    Public m_function As Integer\n    Public m_sign As Integer\n    Public m_index As Integer\n    Public m_send_time As Integer\n    Public m_send_size As Integer\n    &lt;MarshalAs(UnmanagedType.ByValArray, SizeConst:=492)&gt;\n    Public m_data As Byte()\nEnd Structure\n\nStructure Zhuiri_data_pkg_struct\n    Public m_data As Zhuiri_data_struct\n    Public m_send_data As IntPtr\n    Public m_Zhuiri As IntPtr\n    Public m_user_data As IntPtr\nEnd Structure\n\nModule Program\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInterface_initialize() As IntPtr\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInterface_terminate(ByRef ZhuiriInt_pointer As IntPtr)\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInt_initialize(ZhuiriInt_pointer As IntPtr, ip_addr As String, port As Integer,\n        callback As IntPtr, context As IntPtr, heart_check_time As Integer, log_trace As Boolean, iocp As IntPtr) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInt_set_param(ZhuiriInt_pointer As IntPtr,\n        sender_index As Integer, init_server_port As Integer, msg_init_size As Integer,\n        recv_ex_data_max As Integer, retry_max As Integer, retry_all_number As Integer,\n        init_retry_time As Integer) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInt_send(ZhuiriInt_pointer As IntPtr,\n        sender_index As Integer, ip As Integer, port As Integer, sign As Integer, func As Integer, send_data As String, send_size As Integer) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_DataQueueInterface_initialize() As IntPtr\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_DataQueueInterface_terminate(ByRef DataQueue_pointer As IntPtr)\n    End Function\n\n    Public Delegate Sub CallbackFunc(context As IntPtr, pData As IntPtr)\n\n    Public Sub msg_recv_callback(context As IntPtr, pData As IntPtr)\n        Dim data As Zhuiri_data_pkg_struct = Marshal.PtrToStructure(Of Zhuiri_data_pkg_struct)(pData)\n        Dim Str As String = Encoding.ASCII.GetString(data.m_data.m_data)\n        Console.WriteLine(\"recv data:\" + Str)\n    End Sub\n\n    Sub Main(args As String())\n\n        ' \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\")\n\n        ' \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Dim data_queue_recv As IntPtr = tianzuo_DataQueueInterface_initialize()\n        Dim callbackDelegate As CallbackFunc = AddressOf msg_recv_callback\n        Dim callbackPtr As IntPtr = Marshal.GetFunctionPointerForDelegate(callbackDelegate)\n\n        Dim port As Integer = 6666\n        Dim Zhuiri As IntPtr = tianzuo_ZhuiriInterface_initialize()\n        Dim error_code As Integer = tianzuo_ZhuiriInt_initialize(Zhuiri, IntPtr.Zero, port, callbackPtr, data_queue_recv, 6000, False, IntPtr.Zero)\n        If (error_code &lt;&gt; Zhuiri_error_code.Zhuiri_error_code_success) Then\n            Console.WriteLine(\"tianzuo_ZhuiriInt_initialize error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b Set Default parameters\n        tianzuo_ZhuiriInt_set_param(Zhuiri, 0, 5168, 1024, 2280, 3, 5, 600)\n\n        ' \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        Dim ipAddressString As String = \"127.0.1.1\"\n        Dim ipAddress As IPAddress = IPAddress.Parse(ipAddressString)\n        Dim bytes As Byte() = ipAddress.GetAddressBytes()\n        If (BitConverter.IsLittleEndian) Then\n            Array.Reverse(bytes)\n        End If\n        Dim ip As Integer = BitConverter.ToInt32(bytes, 0)\n        Dim sport As Integer = 6666\n        For i As Integer = 0 To 99\n            Dim data As String = String.Format(\"send data {0}\", i)\n            Dim data_len As Integer = data.Length\n            error_code = tianzuo_ZhuiriInt_send(Zhuiri, 0, ip, sport, Zhuiri_data_sign.Zhuiri_data_sign_reliable, 7788, data, data_len)\n            If (error_code &lt;&gt; Zhuiri_error_code.Zhuiri_error_code_success) Then\n                Console.WriteLine(\"tianzuo_ZhuiriInt_send error:\" + error_code.ToString)\n                Return\n            End If\n        Next\n\n        Console.WriteLine(\"test done -------------------\")\n\n    End Sub\nEnd Module\n\n</code></pre> go <pre><code>package main\n\n/*\n#include \"tianzuo.ZhuiriInterface.h\"\nvoid msg_recv_callback_cgo(const void *context, const void *pData);\n*/\nimport \"C\"\nimport (\n    \"fmt\"\n    \"net\"\n    \"syscall\"\n    \"unsafe\"\n)\n\nconst (\n    Zhuiri_error_code_success       = 1  // \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     = 2  // \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        = 13 // \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  = 21 // \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        = 22 // \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  = 23 // \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 24 // \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      = 25 // \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   = 98 // \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     = 99 // \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n)\n\nconst (\n    Zhuiri_data_sign_none       = 0 // \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   = 1 // \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 2 // \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   = 3 // \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      = 4 // \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n)\n\nfunc ipToInt(ip net.IP) uint32 {\n    ip = ip.To4()\n    if ip == nil {\n        return 0\n    }\n\n    ipInt := uint32(ip[0])&lt;&lt;24 | uint32(ip[1])&lt;&lt;16 | uint32(ip[2])&lt;&lt;8 | uint32(ip[3])\n    return ipInt\n}\n\ntype Zhuiri_data_pkg_struct C.Zhuiri_data_pkg_struct\n\n//export msg_recv_callback\nfunc msg_recv_callback(context unsafe.Pointer, pData unsafe.Pointer) {\n    data := *(*Zhuiri_data_pkg_struct)(unsafe.Pointer(pData))\n    charArray := data.m_data.m_data\n    goStr := C.GoString((*C.char)(unsafe.Pointer(&amp;charArray[0])))\n    fmt.Println(\"recv data:\", goStr)\n}\n\nfunc main() {\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    dll := syscall.MustLoadDLL(\"tianzuo.Zhuiri.dll\")\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_DataQueueInterface_initialize := dll.MustFindProc(\"tianzuo_DataQueueInterface_initialize\")\n    data_queue_recv, _, _ := tianzuo_DataQueueInterface_initialize.Call()\n\n    tianzuo_ZhuiriInterface_initialize := dll.MustFindProc(\"tianzuo_ZhuiriInterface_initialize\")\n    Zhuiri, _, _ := tianzuo_ZhuiriInterface_initialize.Call()\n\n    var ip uintptr\n    port := 6666\n    var iocp uintptr\n    tianzuo_ZhuiriInt_initialize := dll.MustFindProc(\"tianzuo_ZhuiriInt_initialize\")\n    msg_recv_callback_ptr := uintptr(unsafe.Pointer(C.msg_recv_callback_cgo))\n    error_code, _, _ := tianzuo_ZhuiriInt_initialize.Call(Zhuiri, ip, uintptr(C.int(port)), msg_recv_callback_ptr, data_queue_recv, 6000, uintptr(C.int(0)), iocp)\n    if error_code != Zhuiri_error_code_success {\n        fmt.Println(\"tianzuo_ZhuiriInt_initialize error: \", error_code)\n    }\n\n    // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    tianzuo_ZhuiriInt_set_param := dll.MustFindProc(\"tianzuo_ZhuiriInt_set_param\")\n    tianzuo_ZhuiriInt_set_param.Call(Zhuiri, 0, 5168, 1024, 2280, 3, 5, 600)\n\n    // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    ipStr := \"127.0.0.1\"\n    ipint := net.ParseIP(ipStr)\n    nip := ipToInt(ipint)\n    tianzuo_ZhuiriInt_send := dll.MustFindProc(\"tianzuo_ZhuiriInt_send\")\n    for i := 0; i &lt; 100; i++ {\n        data := \"send data %d\"\n        gdata := fmt.Sprintf(data, i)\n        cdata := C.CString(gdata)\n        gdata_len := len(gdata)\n        data_len := C.int(gdata_len)\n        error_code, _, _ = tianzuo_ZhuiriInt_send.Call(Zhuiri, 0, uintptr(C.int(nip)), uintptr(C.int(port)), Zhuiri_data_sign_reliable, 7788, uintptr(unsafe.Pointer(cdata)), uintptr(data_len))\n        if error_code != Zhuiri_error_code_success {\n            fmt.Println(\"tianzuo_ZhuiriInt_send error: \", error_code)\n            return\n        }\n    }\n\n    fmt.Println(\"test done -------------------\")\n}\n\n</code></pre> rust <pre><code>\nuse std::os::raw::c_char;\nuse std::ffi::{c_int};\nuse std::ffi::CString;\nuse std::ptr::null;\nuse std::mem;\n\ntype CallbackFunc = extern \"C\" fn(context: *mut std::ffi::c_void, pData: *mut std::ffi::c_void);\n\nstruct Zhuiri_data_struct {\n    m_ip_adrs: i32,\n    m_port: i32,\n    m_function: i32,\n    m_sign: i32,\n    m_index: i32,\n    m_send_time: i32,\n    m_send_size: i32,\n    m_data: [u8; 492],\n}\n\nstruct Zhuiri_data_pkg_struct {\n    m_data: Zhuiri_data_struct,\n    m_send_data: *const c_char,\n    m_Zhuiri: *mut std::ffi::c_void,\n    m_user_data: *mut std::ffi::c_void,\n}\n\n#[link(name = \"tianzuo.Zhuiri\")]\nextern {\n    fn tianzuo_ZhuiriInterface_initialize() -&gt; *mut std::ffi::c_void;\n    fn tianzuo_ZhuiriInterface_terminate(obj: *mut std::ffi::c_void);\n    fn tianzuo_ZhuiriInt_initialize(obj: *mut std::ffi::c_void, ip_addr: *const c_char, port: c_int, callback: *mut std::ffi::c_void, context: *mut std::ffi::c_void, heart_check_time: c_int, log_trace: c_int, iocp: *const std::ffi::c_void) -&gt; c_int;\n    fn tianzuo_ZhuiriInt_set_param(obj: *mut std::ffi::c_void, sender_index: c_int, init_server_port: c_int, msg_init_size: c_int, recv_ex_data_max: c_int, retry_max: c_int, retry_all_number: c_int, init_retry_time: c_int);\n    fn tianzuo_ZhuiriInt_send(obj: *mut std::ffi::c_void, sender_index: c_int, ip: c_int, port: c_int, sign: c_int, function: c_int, send_data: *const c_char, send_size: c_int) -&gt; c_int;\n    fn tianzuo_DataQueueInterface_initialize() -&gt; *mut std::ffi::c_void;\n    fn tianzuo_DataQueueInterface_terminate(obj: *mut std::ffi::c_void);\n    fn tianzuo_DataQueueInt_initializee(obj: *mut std::ffi::c_void);\n}\n\nextern \"C\" fn msg_recv_callback(context: *mut std::ffi::c_void, pData: *mut std::ffi::c_void) {\n    unsafe {\n        //println!(\"Rust callback function called\");\n        let data: &amp;mut Zhuiri_data_pkg_struct = unsafe { mem::transmute(pData) };\n        let string = std::str::from_utf8(&amp;data.m_data.m_data).unwrap();\n        println!(\"recv data: {}\", string);\n    }\n}\n\nfn ip_to_int(ip: &amp;str) -&gt; i32 {\n    let parts: Vec&lt;i32&gt; = ip.split('.').map(|part| part.parse().unwrap()).collect();\n    (parts[0] &lt;&lt; 24) + (parts[1] &lt;&lt; 16) + (parts[2] &lt;&lt; 8) + parts[3]\n}\n\nfn main() {\n    unsafe {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        println!(\"initialize the interface\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        let data_queue_recv = tianzuo_DataQueueInterface_initialize();\n\n        let pdata_queue_recv= data_queue_recv as *mut std::ffi::c_void;\n\n        let pmsg_recv_callback = msg_recv_callback as *mut std::ffi::c_void;\n\n        let zhuiri = tianzuo_ZhuiriInterface_initialize();\n        let port = 6666;\n        let error_code = tianzuo_ZhuiriInt_initialize(zhuiri, null(), port, pmsg_recv_callback, pdata_queue_recv, 6000, 0, null());\n        if 1 != error_code {\n            println!(\"tianzuo_ZhuiriInt_initialize error: {:?}\", error_code);\n        }\n\n        // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n        tianzuo_ZhuiriInt_set_param(zhuiri,0, 5168, 1024, 2280, 3, 5, 600);\n\n        // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        let ip = ip_to_int(\"127.0.0.1\");\n        for i in 0..=99 {\n            let data = format!(\"send data {}\", i);\n            let data_str = CString::new(String::from(data.clone())).expect(\"Failed to create CString\");\n            let data_len = data.len() as i32;\n            let error_code = tianzuo_ZhuiriInt_send(zhuiri, 0, ip, port, 1, 7788, data_str.as_ptr(), data_len);\n            if 1 != error_code {\n                println!(\"tianzuo_ZhuiriInt_send error: {:?}\", error_code);\n            }\n        }\n\n        println!(\"test done -------------------\")\n    }\n}\n\n</code></pre> ruby <pre><code>require 'fiddle'\nrequire 'ipaddr'\n\nlib = Fiddle::dlopen('C:/Users/zhengtianzuo/RubymineProjects/tianzuo.ZhuiriTest/tianzuo.Zhuiri.dll')\ntianzuo_ZhuiriInterface_initialize = Fiddle::Function.new(lib['tianzuo_ZhuiriInterface_initialize'], [], Fiddle::TYPE_VOIDP)\ntianzuo_ZhuiriInterface_terminate = Fiddle::Function.new(lib['tianzuo_ZhuiriInterface_terminate'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_VOID)\ntianzuo_ZhuiriInt_initialize = Fiddle::Function.new(lib['tianzuo_ZhuiriInt_initialize'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_ZhuiriInt_set_param = Fiddle::Function.new(lib['tianzuo_ZhuiriInt_set_param'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_ZhuiriInt_send = Fiddle::Function.new(lib['tianzuo_ZhuiriInt_send'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_DataQueueInterface_initialize = Fiddle::Function.new(lib['tianzuo_DataQueueInterface_initialize'], [], Fiddle::TYPE_VOIDP)\ntianzuo_DataQueueInterface_terminate = Fiddle::Function.new(lib['tianzuo_DataQueueInterface_terminate'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_VOID)\n\ndef string_to_char_pointer(str)\n  ptr = Fiddle::Pointer[str]\n  ptr.to_s\nend\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\nprint(\"initialize the interface\\n\")\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\ndata_queue_recv = tianzuo_DataQueueInterface_initialize.call()\n\ncallback = Fiddle::Closure::BlockCaller.new(Fiddle::TYPE_INT, [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP]) do |context, pData|\n  puts \"callback function called\"\nend\n\nport = 6666\nzhuiri = tianzuo_ZhuiriInterface_initialize.call()\nerror_code = tianzuo_ZhuiriInt_initialize.call(zhuiri, nil, port, callback.to_i, data_queue_recv, 6000, 0, nil)\nif error_code != 1\n  print(\"initialize error:\", error_code, \"\\n\")\n  return\nend\n\n# \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\ntianzuo_ZhuiriInt_set_param.call(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600)\n\n# \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\nip = IPAddr.new(\"127.0.0.1\").to_i\nfor i in 1..10\n  data = \"send data %d\" % [i]\n  data_len = data.length\n  error_code = tianzuo_ZhuiriInt_send.call(zhuiri, 0, ip, port, 1, 7788, data, data_len)\n  if error_code != 1\n    print(\"tianzuo_ZhuiriInt_send error:\", error_code, \"\\n\")\n    return\n  end\nend\n\n</code></pre>"},{"location":"component/tianzuo.Zhuiri/#_8","title":"\u4e0b\u8f7d","text":""},{"location":"other/","title":"\u5176\u4ed6","text":""},{"location":"other/AllArticles/","title":"\u5168\u90e8\u200b\u6587\u7ae0\u200b\u5217\u8868","text":"<p>038-flatbuffers 2025/04/13</p> <p>037-\u200b\u4ee3\u7801\u200b\u5473\u9053\u200b-\u200b\u8fc7\u5ea6\u200b\u8026\u5408\u200b\u7684\u200b\u6d88\u606f\u200b\u94fe\u200b 2025/04/10</p> <p>036-\u200b\u4ee3\u7801\u200b\u5473\u9053\u200b-\u200b\u4e0a\u5e1d\u200b\u7c7b\u200b 2025/04/08</p> <p>035-Windows\u200b\u6293\u5c4f\u200b-GDI 2025/04/04</p> <p>034-QSharedMemory 2025/04/03</p> <p>033-QtShadowDialog 2025/04/02</p> <p>032-overlayYUV.md 2025/04/01</p> <p>031-valgrind 2025/03/31</p> <p>030-gprof 2025/03/30</p> <p>029-gperftools 2025/03/29</p> <p>028-ImageCompress 2025/03/28</p> <p>027-7zsfx 2025/03/27</p> <p>026-zstd 2025/03/26</p> <p>025-lz4 2025/03/25</p> <p>024-epoll 2025/03/24</p> <p>023-sha256 2025/03/23</p> <p>022-spdlog 2025/03/22</p> <p>021-TCMalloc 2025/03/21</p> <p>020-\u200b\u73af\u5f62\u200b\u961f\u5217\u200b 2025/03/20</p> <p>019-RSA 2025/03/17</p> <p>018-IOCP 2025/03/16</p> <p>017-HttpServer 2025/03/15</p> <p>016-condition_variable 2025/03/14</p> <p>015-SingleApplication 2025/03/13</p> <p>014-log4cpp 2025/03/13</p> <p>013-Detours 2025/03/13</p> <p>012-Benchmark 2025/03/12</p> <p>011-base64 2025/03/12</p> <p>010-Catch2 2025/03/11</p> <p>009-\u200b\u9ad8\u7cbe\u5ea6\u200b\u8ba1\u65f6\u5668\u200b 2025/03/10</p> <p>008-\u200b\u751f\u6210\u200b\u4e0d\u200b\u91cd\u590d\u200b9\u200b\u4f4d\u200b\u968f\u673a\u6570\u200b 2025/03/10</p> <p>007-Property\u200b\u5728\u200bC++\u200b\u4e2d\u200b\u7684\u200b\u5b9e\u73b0\u200b\u4e0e\u200b\u5e94\u7528\u200b 2025/03/09</p> <p>006-\u200b\u83b7\u53d6\u200b\u786c\u4ef6\u200b\u5e8f\u5217\u53f7\u200b 2025/03/09</p> <p>005-\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b 2025/03/08</p> <p>004-\u200b\u83b7\u53d6\u200bCPU\u200b\u5360\u7528\u7387\u200b 2025/03/08</p> <p>003-Boost\u200b\u6587\u4ef6\u200b\u9501\u200b 2025/03/07</p> <p>002-Boost\u200b\u5171\u4eab\u5185\u5b58\u200b 2025/03/06</p> <p>001-Boost\u200b\u6d88\u606f\u200b\u961f\u5217\u200b 2025/03/06</p> <p>\u200b\u5929\u4f50\u200b.\u200b\u6606\u4ed1\u955c\u200b 2025/03/04</p> <p>\u200b\u5929\u4f50\u200b.\u200b\u76d8\u53e4\u200b\u65a7\u200b 2025/03/04</p> <p>\u200b\u5929\u4f50\u200b.\u200b\u70bc\u200b\u5996\u200b\u58f6\u200b 2025/03/04</p> <p>\u200b\u5929\u4f50\u200b.\u200b\u6df7\u6c8c\u200b\u949f\u200b 2025/03/03</p> <p>\u200b\u5929\u4f50\u200b.\u200b\u8ffd\u65e5\u200b\u9774\u200b 2025/03/01</p> <p>\u200b\u5929\u4f50\u200b.\u200b\u4e7e\u5764\u888b\u200b 2025/02/28</p> <p>\u200b\u5929\u4f50\u200b.\u200b\u5d06\u5cd2\u200b\u5370\u200b 2025/02/28</p>"},{"location":"product/tianzuo.Fuxi/","title":"\u5929\u4f50\u200b.\u200b\u4f0f\u7fb2\u200b\u7434","text":""},{"location":"product/tianzuo.Fuxi/#_2","title":"\u5929\u4f50\u200b.\u200b\u4f0f\u7fb2\u200b\u7434","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"product/tianzuo.Fuxi/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u4f0f\u7fb2\u200b\u7434\u200b </p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u4f0f\u7fb2\u200b\u4ee5\u200b\u7389\u77f3\u200b\u52a0\u5929\u4e1d\u200b\u6240\u200b\u5236\u51fa\u200b\u4e4b\u200b\u4e50\u5668\u200b\uff0c\u200b\u6cdb\u8457\u200b\u6e29\u67d4\u200b\u7684\u200b\u767d\u8272\u200b\u5149\u8292\u200b\uff0c\u200b\u5176\u200b\u7434\u97f3\u200b\u80fd\u200b\u4f7f\u200b\u4eba\u5fc3\u200b\u611f\u5230\u200b\u5b81\u9759\u200b\u7965\u548c\u200b\uff0c\u200b\u636e\u8bf4\u200b\u62e5\u6709\u200b\u80fd\u200b\u652f\u914d\u200b\u4e07\u7269\u200b\u5fc3\u7075\u200b\u4e4b\u200b\u795e\u79d8\u200b\u529b\u91cf\u200b\u3002</p>"},{"location":"product/tianzuo.Fuxi/#_4","title":"\u76ee\u6807","text":""},{"location":"product/tianzuo.Fuxi/#_5","title":"\u529f\u80fd","text":""},{"location":"product/tianzuo.Fuxi/#_6","title":"\u622a\u56fe","text":""},{"location":"product/tianzuo.Fuxi/#_7","title":"\u4e0b\u8f7d","text":""},{"location":"product/tianzuo.Kunlun/","title":"\u5929\u4f50\u200b.\u200b\u6606\u4ed1\u955c","text":""},{"location":"product/tianzuo.Kunlun/#_2","title":"\u5929\u4f50\u200b.\u200b\u6606\u4ed1\u955c","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"product/tianzuo.Kunlun/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u6606\u4ed1\u955c\u200b \u200b\u5f3a\u5927\u200b\u7684\u200b\u672c\u5730\u200b\u6784\u5efa\u200b\u5de5\u5177\u200b, \u200b\u63d0\u4f9b\u200b\u7ed9\u200b\u9879\u76ee\u200b\u5168\u65b9\u4f4d\u200b\u7684\u200b\u9759\u6001\u200b\u68c0\u6d4b\u200b, \u200b\u52a8\u6001\u200b\u68c0\u6d4b\u200b, \u200b\u4ee3\u7801\u200b\u5de5\u5177\u200b\u4ee5\u53ca\u200b\u5404\u79cd\u200b\u4fbf\u5229\u200b\u7684\u200b\u63d2\u4ef6\u200b\u5de5\u5177\u200b, \u200b\u901a\u8fc7\u200b\u8bcd\u6cd5\u200b\u5206\u6790\u200b\u3001\u200b\u8bed\u6cd5\u5206\u6790\u200b\u3001\u200b\u63a7\u5236\u6d41\u200b\u3001\u200b\u6570\u636e\u6d41\u200b\u5206\u6790\u200b\u3001\u200b\u5185\u5b58\u200b\u68c0\u6d4b\u200b\u3001\u200b\u4ee3\u7801\u200b\u8986\u76d6\u7387\u200b\u3001\u200b\u70ed\u70b9\u200b\u51fd\u6570\u200b\u68c0\u6d4b\u200b\u7b49\u200b\u6280\u672f\u200b\u5bf9\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u8fdb\u884c\u200b\u626b\u63cf\u200b\uff0c\u200b\u9a8c\u8bc1\u200b\u4ee3\u7801\u200b\u662f\u5426\u200b\u6ee1\u8db3\u200b\u89c4\u8303\u6027\u200b\u3001\u200b\u5b89\u5168\u6027\u200b\u3001\u200b\u53ef\u9760\u6027\u200b\u3001\u200b\u53ef\u7ef4\u62a4\u6027\u200b\u7b49\u200b\u6307\u6807\u200b. \u200b\u6839\u636e\u200b\u5206\u6790\u200b\u7ed3\u679c\u200b\u5bf9\u200b\u4ee3\u7801\u200b\u8fdb\u884c\u200b\u6df1\u5ea6\u200b\u4f18\u5316\u200b. \u200b\u63d0\u5347\u200b\u4ee3\u7801\u200b\u8d28\u91cf\u200b, \u200b\u589e\u5f3a\u200b\u4ea7\u54c1\u200b\u5065\u58ee\u6027\u200b.</p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u4ed9\u4eba\u200b\u6545\u4e61\u200b\u6606\u4ed1\u5c71\u200b\u4e2d\u200b\u7684\u200b\u6606\u4ed1\u200b\u5929\u200b\u5bab\u4e2d\u200b\uff0c\u200b\u4f20\u8bf4\u200b\u6709\u200b\u4e00\u9762\u200b\u795e\u955c\u200b\uff0c\u200b\u662f\u200b\u62e5\u6709\u200b\u81ea\u7531\u200b\u7a7f\u68ad\u200b\u65f6\u7a7a\u200b\u4e4b\u529b\u200b\u3002\u200b\u4f46\u200b\u5728\u200b\u4e00\u6b21\u200b\u4ed9\u4eba\u200b\u7684\u200b\u76db\u4f1a\u200b\u4e2d\u200b\uff0c\u200b\u795e\u955c\u200b\u88ab\u200b\u4eba\u200b\u6240\u200b\u5077\u200b\uff0c\u200b\u81f3\u4eca\u200b\u4e00\u76f4\u200b\u4e0b\u843d\u4e0d\u660e\u200b\u3002</p>"},{"location":"product/tianzuo.Kunlun/#_4","title":"\u76ee\u6807","text":"<p>\u200b\u642d\u5efa\u200b\u4e00\u79cd\u200b\u65b9\u4fbf\u200b\u8fd0\u884c\u200b\u7684\u200b\u672c\u5730\u200b\u6784\u5efa\u200b\u5de5\u5177\u200b, \u200b\u96c6\u6210\u200b\u5404\u79cd\u200b\u4ee3\u7801\u200b\u68c0\u6d4b\u200b\u3002</p> <p></p>"},{"location":"product/tianzuo.Kunlun/#_5","title":"\u529f\u80fd","text":"<ul> <li>\u200b\u5de5\u4f5c\u53f0\u200b \u200b\u9879\u76ee\u200b\u6307\u6807\u200b \u200b\u7edf\u8ba1\u200b\u51fa\u200b\u9879\u76ee\u200b\u7684\u200b\u5404\u79cd\u200b\u6307\u6807\u200b, \u200b\u4f5c\u4e3a\u200b\u8861\u91cf\u200b\u9879\u76ee\u200b\u590d\u6742\u5ea6\u200b\u7684\u200b\u90e8\u5206\u200b\u6807\u51c6\u200b</li> <li>\u200b\u5de5\u4f5c\u53f0\u200b \u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b \u200b\u53ef\u4ee5\u200b\u624b\u52a8\u200b\u6216\u200b\u81ea\u52a8\u5316\u200b\u7f16\u8bd1\u200b\u9879\u76ee\u200b</li> <li>\u200b\u5de5\u4f5c\u53f0\u200b \u200b\u9759\u6001\u200b\u68c0\u6d4b\u200b \u200b\u901a\u8fc7\u200b\u8bcd\u6cd5\u200b\u5206\u6790\u200b\u3001\u200b\u8bed\u6cd5\u5206\u6790\u200b\u3001\u200b\u63a7\u5236\u6d41\u200b\u3001\u200b\u6570\u636e\u6d41\u200b\u5206\u6790\u200b\u7b49\u200b\u6280\u672f\u200b\u5bf9\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u8fdb\u884c\u200b\u626b\u63cf\u200b\uff0c\u200b\u68c0\u67e5\u200b\u4ee3\u7801\u200b\u548c\u200b\u8bbe\u8ba1\u200b\u7684\u200b\u4e00\u81f4\u6027\u200b\uff0c\u200b\u4ee3\u7801\u200b\u5bf9\u200b\u6807\u51c6\u200b\u7684\u200b\u9075\u5faa\u200b\u3001\u200b\u53ef\u8bfb\u6027\u200b\uff0c\u200b\u4ee3\u7801\u200b\u7684\u200b\u903b\u8f91\u200b\u8868\u8fbe\u200b\u7684\u200b\u6b63\u786e\u6027\u200b\uff0c\u200b\u4ee3\u7801\u200b\u7ed3\u6784\u200b\u7684\u200b\u5408\u7406\u6027\u200b\u7b49\u200b\u65b9\u9762\u200b</li> <li>\u200b\u5de5\u4f5c\u53f0\u200b \u200b\u52a8\u6001\u200b\u68c0\u6d4b\u200b \u200b\u901a\u8fc7\u200b\u5185\u5b58\u200b\u68c0\u6d4b\u200b\u3001\u200b\u4ee3\u7801\u200b\u8986\u76d6\u7387\u200b\u3001\u200b\u70ed\u70b9\u200b\u51fd\u6570\u200b\u68c0\u6d4b\u200b\u7b49\u200b\u6280\u672f\u200b\u6839\u636e\u200b\u5206\u6790\u200b\u7ed3\u679c\u200b\u5bf9\u200b\u4ee3\u7801\u200b\u8fdb\u884c\u200b\u6df1\u5ea6\u200b\u4f18\u5316\u200b. \u200b\u63d0\u5347\u200b\u4ee3\u7801\u200b\u8d28\u91cf\u200b, \u200b\u589e\u5f3a\u200b\u4ea7\u54c1\u200b\u5065\u58ee\u6027\u200b</li> <li>\u200b\u5de5\u4f5c\u53f0\u200b \u200b\u4ee3\u7801\u200b\u5de5\u5177\u200b \u200b\u81ea\u52a8\u5316\u200b\u4ee3\u7801\u200b\u683c\u5f0f\u5316\u200b, \u200b\u751f\u6210\u200b\u9879\u76ee\u200b\u6587\u6863\u200b</li> <li>\u200b\u5de5\u5177\u7bb1\u200b \u200b\u6db5\u76d6\u200b\u901a\u8baf\u200b/\u200b\u56fe\u5f62\u200b/\u200b\u8bbe\u8ba1\u200b/\u200b\u8f6c\u6362\u200b/\u200b\u751f\u6210\u200b/\u200b\u6742\u9879\u200b\u7b49\u200b\u5404\u200b\u65b9\u9762\u200b\u7684\u200b\u5c0f\u200b\u5de5\u5177\u200b</li> <li>\u200b\u8d44\u6599\u888b\u200b \u200b\u53ef\u200b\u8bb0\u5f55\u200b\u5e73\u65f6\u200b\u5e38\u7528\u200b\u7684\u200b\u4ee3\u7801\u200b\u5230\u200b\u8d44\u6599\u888b\u200b, \u200b\u968f\u65f6\u200b\u67e5\u9605\u200b\u6d4f\u89c8\u200b\u62f7\u8d1d\u200b</li> </ul>"},{"location":"product/tianzuo.Kunlun/#_6","title":"\u622a\u56fe","text":""},{"location":"product/tianzuo.Kunlun/#_7","title":"\u652f\u6301","text":""},{"location":"product/tianzuo.Kunlun/#_8","title":"\u652f\u6301\u200b\u5185\u5bb9","text":"\u540d\u79f0\u200b \u200b\u652f\u6301\u200b \u200b\u5f00\u53d1\u200b\u4e2d\u200b \u200b\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u7a0b\u8bed\u8a00\u200b \u200b\u9879\u76ee\u200b\u7c7b\u578b"},{"location":"product/tianzuo.Kunlun/#_9","title":"\u4e0b\u8f7d","text":""},{"location":"product/tianzuo.Pangu/","title":"\u5929\u4f50\u200b.\u200b\u76d8\u53e4\u200b\u65a7","text":""},{"location":"product/tianzuo.Pangu/#_2","title":"\u5929\u4f50\u200b.\u200b\u76d8\u53e4\u200b\u65a7","text":"\u64cd\u4f5c\u7cfb\u7edf\u200b \u200b\u7f16\u8bd1\u5668\u200b \u200b\u7f16\u7a0b\u8bed\u8a00"},{"location":"product/tianzuo.Pangu/#_3","title":"\u7b80\u4ecb","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u76d8\u53e4\u200b\u65a7\u200b \u200b\u5373\u65f6\u901a\u8baf\u200b\u5e73\u53f0\u200b, \u200b\u91c7\u7528\u200b\u81ea\u4e3b\u200b\u7814\u53d1\u200b\u7684\u200b\u5206\u5e03\u5f0f\u200b\u5b58\u50a8\u200b\u4e0e\u200bUDP\u200b\u53ef\u9760\u200bP2P\u200b\u7f51\u7edc\u200b\u4f20\u8f93\u6280\u672f\u200b, \u200b\u81ea\u4e3b\u200b\u7814\u53d1\u200b\u7684\u200bIM\u200b\u901a\u8baf\u200b\u534f\u8bae\u200b, \u200b\u8986\u76d6\u200b\u4e3b\u6d41\u200b\u5e73\u53f0\u200b, \u200b\u63d2\u4ef6\u200b\u5f0f\u200b\u9ad8\u200b\u6269\u5c55\u6027\u200b, OpenGL\u200b\u6e32\u67d3\u200b\u9ad8\u200b\u6d41\u7545\u200bUI, \u200b\u652f\u6301\u200b\u96c6\u6210\u200bWeb\u200b\u5e94\u7528\u200b, \u200b\u53ef\u4ee5\u200b\u79c1\u6709\u5316\u200b\u90e8\u7f72\u200b, \u200b\u516c\u6709\u200b\u4e91\u200b\u90e8\u7f72\u200b.</p> <p>\u200b\u4f20\u8bf4\u200b: \u200b\u4f20\u8bf4\u200b\u5929\u5730\u200b\u6df7\u6c8c\u200b\u4e4b\u521d\u200b\uff0c\u200b\u76d8\u53e4\u200b\u7531\u200b\u7761\u68a6\u200b\u9192\u6765\u200b\uff0c\u200b\u89c1\u200b\u5929\u5730\u200b\u6666\u6697\u200b\uff0c\u200b\u4e8e\u662f\u200b\u4f38\u624b\u200b\u4e00\u6325\u200b\u62ff\u51fa\u200b\u4e00\u628a\u200b\u5de8\u5927\u200b\u7684\u200b\u65a7\u5b50\u200b\u5288\u5f00\u200b\u5929\u5730\u200b\uff0c\u200b\u81ea\u6b64\u200b\u624d\u200b\u6709\u200b\u6211\u4eec\u200b\u7684\u200b\u4e16\u754c\u200b\u3002\u200b\u6b64\u65a7\u200b\u62e5\u6709\u200b\u5206\u200b\u5929\u5730\u200b\u3001\u200b\u7a7f\u68ad\u200b\u592a\u865a\u200b\u4e4b\u529b\u200b\uff0c\u200b\u5a01\u529b\u200b\u4e0d\u4e0b\u200b\u8f69\u8f95\u5251\u200b\u3002\u200b\u4f20\u8a00\u200b\u638c\u63a7\u200b\u76d8\u53e4\u200b\u65a7\u8005\u200b\uff0c\u200b\u53ef\u200b\u638c\u63a7\u200b\u529b\u91cf\u200b\u6cd5\u5219\u200b\u3002</p>"},{"location":"product/tianzuo.Pangu/#_4","title":"\u76ee\u6807","text":"<p>\u200b\u642d\u5efa\u200bCS\u200b\u67b6\u6784\u200b\u7684\u200bIM\u200b\u901a\u8baf\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u652f\u6301\u200b\u6587\u5b57\u200b/\u200b\u8868\u60c5\u200b/\u200b\u56fe\u7247\u200b/\u200b\u8bed\u97f3\u200b/\u200b\u89c6\u9891\u200b/\u200b\u8fdc\u7a0b\u684c\u9762\u200b/\u200b\u8fdc\u7a0b\u200b\u63a7\u5236\u200b/\u200b\u767d\u677f\u200b\u7b49\u200b\u529f\u80fd\u200b\u3002</p>"},{"location":"product/tianzuo.Pangu/#_5","title":"\u529f\u80fd","text":"<ul> <li>\ud83e\udde9 \u200b\u96c6\u6210\u200b\u7b80\u5355\u200b</li> <li>\ud83d\udce6 \u200b\u652f\u6301\u200b\u79c1\u6709\u200b\u90e8\u7f72\u200b</li> <li>\ud83e\udea2 \u200b\u804a\u5929\u200b\u6570\u636e\u200b\u70b9\u5bf9\u70b9\u200b\u52a0\u5bc6\u200b\uff0c\u200b\u81ea\u4e3b\u200b\u7814\u53d1\u200bIM\u200b\u534f\u8bae\u200b\uff0c\u200b\u7f51\u7edc\u200b\u5e93\u200b\u4f7f\u7528\u200b'\u200b\u5929\u4f50\u200b.\u200b\u8ffd\u65e5\u200b\u9774\u200b'\u200b\u8f6f\u4ef6\u5f00\u53d1\u200b\u5de5\u5177\u5305\u200b</li> <li>\ud83d\udcd2 \u200b\u804a\u5929\u8bb0\u5f55\u200b\u672c\u5730\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u6570\u636e\u5e93\u200b\u4f7f\u7528\u200b'\u200b\u5929\u4f50\u200b.\u200b\u4e7e\u5764\u888b\u200b'\u200b\u8f6f\u4ef6\u5f00\u53d1\u200b\u5de5\u5177\u5305\u200b</li> </ul>"},{"location":"product/tianzuo.Pangu/#_6","title":"\u622a\u56fe","text":"<p>\u200b\u5929\u4f50\u200b.\u200b\u76d8\u53e4\u200b\u65a7\u200bdemo:</p> <p> </p>"},{"location":"product/tianzuo.Pangu/#_7","title":"\u4e0b\u8f7d","text":""},{"location":"remotedesktop/032-overlayYUV/","title":"overlayYUV","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u4e2a\u200b\u652f\u6301\u200b\u5c06\u200b\u5c0f\u200b\u5c3a\u5bf8\u200bYUV420\u200b\u6587\u4ef6\u200b\u8986\u76d6\u200b\u5230\u200b\u66f4\u200b\u5927\u200b\u5c3a\u5bf8\u200bYUV420\u200b\u6587\u4ef6\u200b\u6307\u5b9a\u200b\u4f4d\u7f6e\u200b\u7684\u200bC++\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u652f\u6301\u200b\u5750\u6807\u200b\u8bbe\u7f6e\u200b\u548c\u200b\u8fb9\u754c\u200b\u5904\u7406\u200b\uff1a</p>"},{"location":"remotedesktop/032-overlayYUV/#_1","title":"\u793a\u4f8b\u200b\u4ee3\u7801","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nstruct YUVConfig {\n    int width;      // \u200b\u5927\u200b\u6587\u4ef6\u200b\u5bbd\u5ea6\u200b\n    int height;     // \u200b\u5927\u200b\u6587\u4ef6\u200b\u9ad8\u5ea6\u200b\n    int small_width;\n    int small_height;\n    int pos_x;      // \u200b\u8986\u76d6\u200b\u8d77\u59cb\u200bX\u200b\u5750\u6807\u200b\n    int pos_y;      // \u200b\u8986\u76d6\u200b\u8d77\u59cb\u200bY\u200b\u5750\u6807\u200b\n    std::string format = \"I420\"; // \u200b\u652f\u6301\u200bI420/NV12\u200b\u683c\u5f0f\u200b\n};\n\nbool overlayYUV(const std::string&amp; dst_file, \n                const std::string&amp; src_file,\n                const YUVConfig&amp; config) \n{\n    // \u200b\u8ba1\u7b97\u200b\u5404\u200b\u5206\u91cf\u200b\u5c3a\u5bf8\u200b\n    const int y_size = config.width  * config.height; \n    const int uv_size = y_size / 4;\n    const int total_size = y_size + 2 * uv_size;\n\n    // \u200b\u8bfb\u53d6\u200b\u5927\u200b\u6587\u4ef6\u200b\n    std::ifstream fin_dst(dst_file, std::ios::binary);\n    if (!fin_dst) return false;\n    std::vector&lt;uint8_t&gt; dst_data(total_size);\n    fin_dst.read(reinterpret_cast&lt;char*&gt;(dst_data.data()),  total_size);\n\n    // \u200b\u8bfb\u53d6\u200b\u5c0f\u200b\u6587\u4ef6\u200b\n    std::ifstream fin_src(src_file, std::ios::binary);\n    if (!fin_src) return false;\n    std::vector&lt;uint8_t&gt; src_data(y_size + 2*(config.small_width*config.small_height)/4); \n    fin_src.read(reinterpret_cast&lt;char*&gt;(src_data.data()),  src_data.size()); \n\n    // Y\u200b\u5206\u91cf\u200b\u8986\u76d6\u200b\u5904\u7406\u200b\n    const int copy_width = std::min(config.small_width,  \n                                  config.width  - config.pos_x); \n    const int copy_height = std::min(config.small_height,  \n                                   config.height  - config.pos_y); \n\n    // \u200b\u5904\u7406\u200bY\u200b\u5e73\u9762\u200b\n    for (int row = 0; row &lt; copy_height; ++row) {\n        auto* dst_start = dst_data.data()  + \n                         (config.pos_y  + row) * config.width  + config.pos_x; \n        auto* src_start = src_data.data()  + row * config.small_width; \n        std::copy_n(src_start, copy_width, dst_start);\n    }\n\n    // UV\u200b\u5206\u91cf\u200b\u5904\u7406\u200b\uff08I420\u200b\u683c\u5f0f\u200b\uff09\n    if (config.format  == \"I420\") {\n        // U\u200b\u5206\u91cf\u200b\u504f\u79fb\u200b\u8ba1\u7b97\u200b\n        const int uv_offset = y_size;\n        const int uv_pos_x = config.pos_x  / 2;\n        const int uv_pos_y = config.pos_y  / 2;\n        const int uv_src_width = config.small_width  / 2;\n        const int uv_src_height = config.small_height  / 2;\n\n        // \u200b\u5904\u7406\u200bU\u200b\u5e73\u9762\u200b\n        for (int row = 0; row &lt; uv_src_height; ++row) {\n            auto* dst_u = dst_data.data()  + uv_offset + \n                         (uv_pos_y + row) * (config.width/2)  + uv_pos_x;\n            auto* src_u = src_data.data()  + y_size + row * uv_src_width;\n            std::copy_n(src_u, uv_src_width, dst_u);\n        }\n\n        // \u200b\u5904\u7406\u200bV\u200b\u5e73\u9762\u200b\n        const int v_offset = y_size + uv_size;\n        for (int row = 0; row &lt; uv_src_height; ++row) {\n            auto* dst_v = dst_data.data()  + v_offset + \n                         (uv_pos_y + row) * (config.width/2)  + uv_pos_x;\n            auto* src_v = src_data.data()  + y_size + uv_src_width*uv_src_height + \n                         row * uv_src_width;\n            std::copy_n(src_v, uv_src_width, dst_v);\n        }\n    }\n    // NV12\u200b\u683c\u5f0f\u200b\u5904\u7406\u200b\uff08UV\u200b\u4ea4\u7ec7\u200b\uff09\n    else if (config.format  == \"NV12\") {\n        const int uv_offset = y_size;\n        const int uv_pos_x = config.pos_x  / 2;\n        const int uv_pos_y = config.pos_y  / 2;\n        const int uv_stride = config.width; \n\n        for (int row = 0; row &lt; config.small_height/2;  ++row) {\n            auto* dst_uv = dst_data.data()  + uv_offset + \n                          (uv_pos_y + row) * uv_stride + uv_pos_x*2;\n            auto* src_uv = src_data.data()  + y_size + row * config.small_width; \n            std::copy_n(src_uv, config.small_width,  dst_uv);\n        }\n    }\n\n    // \u200b\u5199\u5165\u200b\u7ed3\u679c\u200b\u6587\u4ef6\u200b\n    std::ofstream fout(\"output.yuv\",  std::ios::binary);\n    fout.write(reinterpret_cast&lt;char*&gt;(dst_data.data()),  dst_data.size()); \n    return true;\n}\n\nint main() {\n    YUVConfig config;\n    config.width  = 1920;\n    config.height  = 1080;\n    config.small_width  = 640;\n    config.small_height  = 480;\n    config.pos_x  = 100;\n    config.pos_y  = 200;\n    config.format  = \"I420\"; // \u200b\u6216\u200b\"NV12\"\n\n    if (overlayYUV(\"big.yuv\",  \"small.yuv\",  config)) {\n        std::cout &lt;&lt; \"Overlay completed. Saved to output.yuv\"  &lt;&lt; std::endl;\n    } else {\n        std::cerr &lt;&lt; \"Error processing files\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre> <p>\u200b\u5173\u952e\u200b\u7279\u6027\u200b\u8bf4\u660e\u200b \uff1a * \u200b\u683c\u5f0f\u200b\u517c\u5bb9\u6027\u200b\uff1a\u200b\u652f\u6301\u200bYUV420\u200b\u7684\u200bI420\u200b\u548c\u200bNV12\u200b\u683c\u5f0f\u200b\uff0c\u200b\u901a\u8fc7\u200bformat\u200b\u53c2\u6570\u200b\u5207\u6362\u200b\uff1a</p> <ul> <li>I420\uff1aY\u200b\u5e73\u9762\u200b + U\u200b\u5e73\u9762\u200b + V\u200b\u5e73\u9762\u200b</li> <li>NV12\uff1aY\u200b\u5e73\u9762\u200b + \u200b\u4ea4\u7ec7\u200b\u7684\u200bUV\u200b\u5e73\u9762\u200b</li> </ul> <p>\u200b\u5750\u6807\u200b\u7cfb\u7edf\u200b\uff1a</p> <pre><code>pos_x, pos_y  // \u200b\u8986\u76d6\u200b\u8d77\u59cb\u200b\u5750\u6807\u200b\uff08\u200b\u4ee5\u200bY\u200b\u5206\u91cf\u200b\u5750\u6807\u7cfb\u200b\u4e3a\u200b\u57fa\u51c6\u200b\uff09\nuv_pos_x = pos_x / 2  // UV\u200b\u5206\u91cf\u200b\u5750\u6807\u200b\u81ea\u52a8\u200b\u6298\u534a\u200b\u8ba1\u7b97\u200b\n</code></pre> <p>\u200b\u8fb9\u754c\u200b\u5904\u7406\u200b\uff1a</p> <pre><code>copy_width = min(\u200b\u5c0f\u56fe\u200b\u5bbd\u5ea6\u200b, \u200b\u5927\u56fe\u200b\u5bbd\u5ea6\u200b - x\u200b\u5750\u6807\u200b)  // \u200b\u81ea\u52a8\u200b\u88c1\u526a\u200b\u8d8a\u754c\u200b\u90e8\u5206\u200b\n</code></pre> <p>\u200b\u5185\u5b58\u200b\u4f18\u5316\u200b\uff1a\u200b\u4f7f\u7528\u200bstd::vector\u200b\u5b58\u50a8\u200b\u6570\u636e\u200b\uff0c\u200b\u907f\u514d\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u200b\u95ee\u9898"},{"location":"remotedesktop/032-overlayYUV/#_2","title":"\u4f7f\u7528\u200b\u5efa\u8bae\u200b\uff1a","text":"<p>\u200b\u53c2\u6570\u8bbe\u7f6e\u200b\u9700\u200b\u6ee1\u8db3\u200b\uff1a</p> <pre><code>small_width &lt;= (width - pos_x) * 2    // \u200b\u8272\u5ea6\u200b\u5206\u91cf\u200b\u5bf9\u9f50\u200b\u8981\u6c42\u200b\n</code></pre> <p>\u200b\u9a8c\u8bc1\u200b\u8f93\u51fa\u200b\u6587\u4ef6\u200b\uff1a</p> <pre><code>ffplay -video_size 1920x1080 -pixel_format nv12 output.yuv \n</code></pre> <p>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u65b9\u5411\u200b\uff1a</p> <ul> <li>\u200b\u4f7f\u7528\u200b\u5185\u5b58\u200b\u6620\u5c04\u200b\u6587\u4ef6\u200b\u5904\u7406\u200b\u5927\u200b\u5c3a\u5bf8\u200b\u6587\u4ef6\u200b</li> <li>\u200b\u591a\u7ebf\u7a0b\u200b\u5904\u7406\u200bY/UV\u200b\u5206\u91cf\u200b</li> <li>SIMD\u200b\u6307\u4ee4\u200b\u4f18\u5316\u200b\u6570\u636e\u200b\u62f7\u8d1d\u200b</li> </ul> <p>\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u8003\u8651\u200b\u4e86\u200bYUV420\u200b\u683c\u5f0f\u200b\u7684\u200b\u8272\u5ea6\u200b\u91c7\u6837\u200b\u7279\u6027\u200b\uff0c\u200b\u901a\u8fc7\u200b\u5750\u6807\u200b\u6298\u534a\u200b\u8ba1\u7b97\u200b\u5b9e\u73b0\u200b\u51c6\u786e\u200b\u7684\u200b\u8272\u5ea6\u200b\u5206\u91cf\u200b\u5b9a\u4f4d\u200b\uff0c\u200b\u540c\u65f6\u200b\u5305\u542b\u200b\u4e86\u200b\u5bf9\u200b\u4e0d\u540c\u200b\u5b58\u50a8\u200b\u683c\u5f0f\u200b\u7684\u200b\u9002\u914d\u200b\u903b\u8f91\u200b\u3002\u200b\u8fb9\u754c\u200b\u5904\u7406\u200b\u673a\u5236\u200b\u786e\u4fdd\u200b\u8986\u76d6\u200b\u64cd\u4f5c\u200b\u4e0d\u4f1a\u200b\u5bfc\u81f4\u200b\u5185\u5b58\u200b\u8d8a\u754c\u200b\u3002</p>"},{"location":"remotedesktop/032-overlayYUV/#_3","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"remotedesktop/035-GDIGrab/","title":"Windows\u200b\u6293\u5c4f\u200b-GDI","text":""},{"location":"remotedesktop/035-GDIGrab/#_1","title":"\u4e00\u200b\u3001\u200b\u6280\u672f\u200b\u539f\u7406","text":"<p>GDI\uff08Graphics Device Interface\uff09\u200b\u6293\u5c4f\u200b\u57fa\u4e8e\u200bWindows\u200b\u7cfb\u7edf\u200b\u63d0\u4f9b\u200b\u7684\u200b\u56fe\u5f62\u200b\u8bbe\u5907\u200b\u63a5\u53e3\u200b\uff0c\u200b\u901a\u8fc7\u200b\u8bbe\u5907\u200b\u4e0a\u4e0b\u6587\u200b\uff08DC\uff09</p> <p>\u200b\u5b9e\u73b0\u200b\u5c4f\u5e55\u200b\u5185\u5bb9\u200b\u6355\u83b7\u200b\u3002\u200b\u6838\u5fc3\u200b\u6d41\u7a0b\u200b\u5982\u4e0b\u200b\uff1a</p>"},{"location":"remotedesktop/035-GDIGrab/#_2","title":"\u83b7\u53d6\u200b\u684c\u9762\u200b\u7a97\u53e3\u200b\u53e5\u67c4\u200b\uff1a\u200b\u901a\u8fc7","text":"<pre><code>//\u200b\u83b7\u53d6\u200b\u6574\u4e2a\u200b\u5c4f\u5e55\u200b\u7684\u200b\u53e5\u67c4\u200b\nGetDesktopWindow()\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_3","title":"\u83b7\u53d6\u200b\u8bbe\u5907\u200b\u4e0a\u4e0b\u6587\u200b\uff1a\u200b\u4f7f\u7528","text":"<pre><code>//\u200b\u83b7\u53d6\u200b\u5c4f\u5e55\u200bDC\nGetDC()\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#dc","title":"\u521b\u5efa\u200b\u517c\u5bb9\u200bDC\u200b\u548c\u200b\u4f4d\u56fe\u200b\uff1a\u200b\u901a\u8fc7","text":"<pre><code>//\u200b\u521b\u5efa\u200b\u4e0e\u200b\u5c4f\u5e55\u200bDC\u200b\u517c\u5bb9\u200b\u7684\u200b\u7ed8\u56fe\u200b\u73af\u5883\u200b\nCreateCompatibleDC()\nCreateCompatibleBitmap()\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#dc_1","title":"\u4f4d\u200b\u56fe\u200b\u9009\u5165\u200b\u517c\u5bb9\u200bDC\uff1a\u200b\u4f7f\u7528","text":"<pre><code>//\u200b\u5c06\u4f4d\u200b\u56fe\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u517c\u5bb9\u200bDC\nSelectObject()\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_4","title":"\u590d\u5236\u200b\u5c4f\u5e55\u200b\u5185\u5bb9\u200b\uff1a\u200b\u901a\u8fc7","text":"<pre><code>//\u200b\u5c06\u200b\u5c4f\u5e55\u200bDC\u200b\u5185\u5bb9\u200b\u590d\u5236\u5230\u200b\u517c\u5bb9\u200b\u4f4d\u200b\u56fe\u200b\nBitBlt()\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_5","title":"\u91ca\u653e\u200b\u8d44\u6e90\u200b\uff1a\u200b\u4f7f\u7528","text":"<pre><code>//\u200b\u91ca\u653e\u200b\u8d44\u6e90\u200b\nDeleteDC()\nReleaseDC()\n</code></pre> <p>\u200b\u6d41\u7a0b\u56fe\u200b</p> <pre><code>graph TD\nA[\u200b\u83b7\u53d6\u200b\u684c\u9762\u200b\u7a97\u53e3\u200b\u53e5\u67c4\u200b] --&gt; B[\u200b\u83b7\u53d6\u200b\u8bbe\u5907\u200b\u4e0a\u4e0b\u6587\u200bDC]\nB --&gt; C[\u200b\u521b\u5efa\u200b\u517c\u5bb9\u200bDC\u200b\u548c\u200b\u4f4d\u56fe\u200b]\nC --&gt; D[\u200b\u590d\u5236\u200b\u5c4f\u5e55\u200b\u6570\u636e\u200b\u5230\u200b\u517c\u5bb9\u200b\u4f4d\u200b\u56fe\u200b]\nD --&gt; E[\u200b\u4fdd\u5b58\u200b\u6216\u200b\u5904\u7406\u200b\u4f4d\u200b\u56fe\u200b\u6570\u636e\u200b]\nE --&gt; F[\u200b\u91ca\u653e\u200b\u8d44\u6e90\u200b]\n</code></pre> <p>\u200b\u5173\u952e\u200b\u7ec4\u4ef6\u200b</p> <ul> <li>\u200b\u7a97\u53e3\u200b\u53e5\u67c4\u200b\uff08HWND\uff09\uff1a\u200b\u901a\u8fc7\u200bGetDesktopWindow()\u200b\u83b7\u53d6\u200b\u6574\u4e2a\u200b\u5c4f\u5e55\u200b\u7684\u200b\u53e5\u67c4\u200b\u3002</li> <li>\u200b\u8bbe\u5907\u200b\u4e0a\u4e0b\u6587\u200b\uff08DC\uff09\uff1aGetDC()\u200b\u83b7\u53d6\u200b\u684c\u9762\u200bDC\uff0c\u200b\u7528\u4e8e\u200b\u56fe\u5f62\u64cd\u4f5c\u200b\u3002</li> <li>\u200b\u517c\u5bb9\u200b\u4f4d\u200b\u56fe\u200b\uff08Bitmap\uff09\uff1aCreateCompatibleBitmap()\u200b\u521b\u5efa\u200b\u4e0e\u200b\u5c4f\u5e55\u200b\u5206\u8fa8\u7387\u200b\u5339\u914d\u200b\u7684\u200b\u4f4d\u56fe\u200b\u3002</li> <li>\u200b\u6570\u636e\u200b\u590d\u5236\u200b\uff1aBitBlt()\u200b\u51fd\u6570\u200b\u5c06\u200b\u5c4f\u5e55\u200b\u50cf\u7d20\u200b\u6570\u636e\u200b\u590d\u5236\u5230\u200b\u5185\u5b58\u200b\u4f4d\u200b\u56fe\u200b\u3002</li> </ul>"},{"location":"remotedesktop/035-GDIGrab/#_6","title":"\u4e8c\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0","text":""},{"location":"remotedesktop/035-GDIGrab/#_7","title":"\u5168\u5c4f\u200b\u6293\u53d6\u200b\u4ee3\u7801","text":"<pre><code>#include &lt;windows.h&gt;\n#include &lt;gdiplus.h&gt;\n\n// \u200b\u5168\u5c4f\u200b\u6293\u53d6\u200b\u51fd\u6570\u200b\nbool CaptureScreen(HWND hWnd, HBITMAP&amp; hBitmap) {\n    HDC hScreenDC = GetDC(hWnd);\n    HDC hMemoryDC = CreateCompatibleDC(hScreenDC);\n\n    // \u200b\u83b7\u53d6\u200b\u5c4f\u5e55\u200b\u5206\u8fa8\u7387\u200b\n    int width = GetSystemMetrics(SM_CXSCREEN);\n    int height = GetSystemMetrics(SM_CYSCREEN);\n\n    hBitmap = CreateCompatibleBitmap(hScreenDC, width, height);\n    HGDIOBJ hOldBitmap = SelectObject(hMemoryDC, hBitmap);\n\n    // \u200b\u590d\u5236\u200b\u5c4f\u5e55\u200b\u5185\u5bb9\u200b\n    if (!BitBlt(hMemoryDC, 0, 0, width, height, hScreenDC, 0, 0, SRCCOPY)) {\n        DeleteObject(hBitmap);\n        return false;\n    }\n\n    SelectObject(hMemoryDC, hOldBitmap);\n    DeleteDC(hMemoryDC);\n    ReleaseDC(hWnd, hScreenDC);\n    return true;\n}\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_8","title":"\u5c40\u90e8\u200b\u6293\u53d6\u200b\u4ee3\u7801","text":"<pre><code>// \u200b\u5c40\u90e8\u200b\u533a\u57df\u200b\u6293\u53d6\u200b\uff08\u200b\u901a\u8fc7\u200b\u7a97\u53e3\u200b\u53e5\u67c4\u200b\uff09\nbool CaptureWindow(HWND hWnd, HBITMAP&amp; hBitmap) {\n    if (!hWnd) return false;\n\n    HDC hWindowDC = GetDC(hWnd);\n    RECT rect;\n    GetWindowRect(hWnd, &amp;rect);\n    int width = rect.right  - rect.left; \n    int height = rect.bottom  - rect.top; \n\n    HDC hMemoryDC = CreateCompatibleDC(hWindowDC);\n    hBitmap = CreateCompatibleBitmap(hWindowDC, width, height);\n    HGDIOBJ hOldBitmap = SelectObject(hMemoryDC, hBitmap);\n\n    // \u200b\u8f6c\u6362\u200b\u7a97\u53e3\u200b\u5750\u6807\u200b\u5230\u200b\u5c4f\u5e55\u200b\u5750\u6807\u200b\n    POINT pt = {0, 0};\n    ScreenToClient(hWnd, &amp;pt);\n    if (!BitBlt(hMemoryDC, 0, 0, width, height, hWindowDC, pt.x, pt.y, SRCCOPY)) {\n        DeleteObject(hBitmap);\n        return false;\n    }\n\n    SelectObject(hMemoryDC, hOldBitmap);\n    DeleteDC(hMemoryDC);\n    ReleaseDC(hWnd, hWindowDC);\n    return true;\n}\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_9","title":"\u4e09\u200b\u3001\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u793a\u4f8b","text":"<p>\u200b\u4fdd\u5b58\u200b\u4e3a\u200bBMP\u200b\u6587\u4ef6\u200b</p> <pre><code>void SaveBitmapToFile(HBITMAP hBitmap, const char* filename) {\n    BITMAPINFOHEADER bmiHeader;\n    BITMAP bmp;\n    GetObject(hBitmap, sizeof(bmp), &amp;bmp);\n\n    // \u200b\u521d\u59cb\u5316\u200bBITMAPINFOHEADER\n    bmiHeader.biSize  = sizeof(BITMAPINFOHEADER);\n    bmiHeader.biWidth  = bmp.bmWidth; \n    bmiHeader.biHeight  = -bmp.bmHeight;  // \u200b\u5012\u8f6c\u200b\u56fe\u50cf\u200b\n    bmiHeader.biPlanes  = 1;\n    bmiHeader.biBitCount  = 32;\n    bmiHeader.biCompression  = BI_RGB;\n    bmiHeader.biSizeImage  = 0;\n    bmiHeader.biXPelsPerMeter  = 0;\n    bmiHeader.biYPelsPerMeter  = 0;\n    bmiHeader.biClrUsed  = 0;\n    bmiHeader.biClrImportant  = 0;\n\n    // \u200b\u5199\u5165\u200b\u6587\u4ef6\u200b\n    HANDLE hFile = CreateFileA(filename, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);\n    if (hFile == INVALID_HANDLE_VALUE) return;\n\n    DWORD dwWritten;\n    BITMAPFILEHEADER bmfHeader;\n    bmfHeader.bfType  = 0x4D42; // 'BM'\n    bmfHeader.bfSize  = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + bmiHeader.biSizeImage; \n    bmfHeader.bfReserved1  = 0;\n    bmfHeader.bfReserved2  = 0;\n    bmfHeader.bfOffBits  = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n\n    WriteFile(hFile, &amp;bmfHeader, sizeof(BITMAPFILEHEADER), &amp;dwWritten, NULL);\n    WriteFile(hFile, &amp;bmiHeader, sizeof(BITMAPINFOHEADER), &amp;dwWritten, NULL);\n\n    // \u200b\u83b7\u53d6\u200b\u4f4d\u200b\u56fe\u200b\u6570\u636e\u200b\n    DWORD dwSize = ((bmp.bmWidth  * bmiHeader.biBitCount  + 31) / 32) * 4 * bmp.bmHeight; \n    LPVOID pBits = nullptr;\n    GetDIBits(GetDC(NULL), hBitmap, 0, bmp.bmHeight,  nullptr, (BITMAPINFO*)&amp;bmiHeader, DIB_RGB_COLORS);\n    GetDIBits(GetDC(NULL), hBitmap, 0, bmp.bmHeight,  pBits, (BITMAPINFO*)&amp;bmiHeader, DIB_RGB_COLORS);\n    WriteFile(hFile, pBits, dwSize, &amp;dwWritten, NULL);\n\n    CloseHandle(hFile);\n}\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_10","title":"\u56db\u200b\u3001\u200b\u7ed3\u6784\u56fe\u200b\u4e0e\u200b\u6d41\u7a0b\u56fe","text":""},{"location":"remotedesktop/035-GDIGrab/#_11","title":"\u7cfb\u7edf\u200b\u67b6\u6784\u56fe","text":"<pre><code>+-------------------+\n|     \u200b\u5e94\u7528\u7a0b\u5e8f\u200b       |\n+-------------------+\n          |\n          v\n+-------------------+\n|     GDI\u200b\u63a5\u53e3\u200b       |\n+-------------------+\n          |\n          v\n+-------------------+\n|     \u200b\u8bbe\u5907\u200b\u9a71\u52a8\u200b       |\n+-------------------+\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_12","title":"\u6293\u5c4f\u200b\u6d41\u7a0b\u56fe","text":"<pre><code>\u200b\u5f00\u59cb\u200b\n  |\n  v\n\u200b\u83b7\u53d6\u200b\u7a97\u53e3\u200b\u53e5\u67c4\u200b\n  |\n  v\n\u200b\u521b\u5efa\u200b\u8bbe\u5907\u200b\u4e0a\u4e0b\u6587\u200b\n  |\n  v\n\u200b\u521b\u5efa\u200b\u517c\u5bb9\u200bDC\u200b\u548c\u200b\u4f4d\u56fe\u200b\n  |\n  v\n\u200b\u590d\u5236\u200b\u5c4f\u5e55\u200b\u5185\u5bb9\u200b\n  |\n  v\n\u200b\u4fdd\u5b58\u200b/\u200b\u91ca\u653e\u200b\u8d44\u6e90\u200b\n  |\n  v\n\u200b\u7ed3\u675f\u200b\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_13","title":"\u4e94\u200b\u3001\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u4e0e\u200b\u6027\u80fd\u200b\u63d0\u5347","text":""},{"location":"remotedesktop/035-GDIGrab/#_14","title":"\u6027\u80fd\u200b\u74f6\u9888\u200b\u5206\u6790","text":"<ul> <li>Aero\u200b\u7279\u6548\u200b\u5f71\u54cd\u200b\uff1a\u200b\u542f\u7528\u200bAero\u200b\u65f6\u200b\uff0c<code>BitBlt</code>\u200b\u901f\u5ea6\u200b\u4e0b\u964d\u200b\u81f3\u200b300-500ms/\u200b\u5e27\u200b\u3002</li> <li>DC\u200b\u9891\u7e41\u200b\u521b\u5efa\u200b\uff1a\u200b\u91cd\u590d\u200b\u521b\u5efa\u200b/\u200b\u9500\u6bc1\u200bDC\u200b\u4f1a\u200b\u589e\u52a0\u200b\u5f00\u9500\u200b\uff0c\u200b\u5efa\u8bae\u200b\u590d\u7528\u200b\u8d44\u6e90\u200b\u3002</li> <li>\u200b\u5185\u5b58\u200b\u5360\u7528\u200b\uff1a\u200b\u9ad8\u5206\u8fa8\u7387\u200b\u5c4f\u5e55\u200b\uff08\u200b\u5982\u200b4K\uff09\u200b\u9700\u200b\u4f18\u5316\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u3002</li> </ul>"},{"location":"remotedesktop/035-GDIGrab/#_15","title":"\u4f18\u5316\u200b\u65b9\u6848","text":"\u53c2\u6570\u200b \u200b\u4f18\u5316\u200b\u65b9\u6cd5\u200b \u200b\u6548\u679c\u200b \u200b\u53cc\u200b\u7f13\u51b2\u200b\u6280\u672f\u200b \u200b\u4f7f\u7528\u200b\u5185\u5b58\u200bDC\u200b\u51cf\u5c11\u200b\u5c4f\u5e55\u200b\u5237\u65b0\u200b\u6b21\u6570\u200b \u200b\u964d\u4f4e\u200b\u95ea\u70c1\u200b \u200b\u5f02\u6b65\u200b\u590d\u5236\u200b \u200b\u5c06\u200b<code>BitBlt</code>\u200b\u64cd\u4f5c\u200b\u653e\u5165\u200b\u72ec\u7acb\u200b\u7ebf\u7a0b\u200b \u200b\u63d0\u5347\u200b\u4e3b\u7a0b\u5e8f\u200b\u54cd\u5e94\u200b \u200b\u4f4d\u6df1\u200b\u8c03\u6574\u200b \u200b\u4f7f\u7528\u200b<code>SetDeviceCaps</code>\u200b\u8bbe\u7f6e\u200b16\u200b\u4f4d\u200b\u8272\u5f69\u200b \u200b\u51cf\u5c11\u200b\u5185\u5b58\u200b\u5360\u7528\u200b \u200b\u786c\u4ef6\u52a0\u901f\u200b \u200b\u8c03\u7528\u200b<code>EnableMenuItem</code>\u200b\u7981\u7528\u200bAero\u200b\u7279\u6548\u200b \u200b\u63d0\u5347\u200b\u901f\u5ea6\u200b\u81f3\u200b5-8ms/\u200b\u5e27"},{"location":"remotedesktop/035-GDIGrab/#_16","title":"\u516d\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u53c2\u6570","text":""},{"location":"remotedesktop/035-GDIGrab/#dc_2","title":"\u517c\u5bb9\u200bDC\u200b\u4f18\u5316","text":"<ul> <li>\u200b\u4f4d\u200b\u56fe\u200b\u683c\u5f0f\u200b\uff1a\u200b\u4f7f\u7528\u200b32\u200b\u4f4d\u8272\u200b\u6df1\u200b\uff08BI_RGB\uff09\u200b\u907f\u514d\u200b\u989c\u8272\u200b\u8f6c\u6362\u200b\u5f00\u9500\u200b\u3002</li> <li>\u200b\u53cc\u200b\u7f13\u51b2\u200b\u6280\u672f\u200b\uff1a\u200b\u901a\u8fc7\u200b\u5185\u5b58\u200bDC\u200b\u51cf\u5c11\u200b\u76f4\u63a5\u200b\u64cd\u4f5c\u200b\u5c4f\u5e55\u200bDC\u200b\u7684\u200b\u95ea\u70c1\u200b\u95ee\u9898\u200b\u3002</li> </ul>"},{"location":"remotedesktop/035-GDIGrab/#_17","title":"\u6355\u83b7\u200b\u9891\u7387\u200b\u63a7\u5236","text":"<ul> <li>\u200b\u5b9a\u65f6\u5668\u200b\u95f4\u9694\u200b\uff1a\u200b\u901a\u8fc7\u200bSetTimer()\u200b\u63a7\u5236\u200b\u6293\u5e27\u200b\u9891\u7387\u200b\uff08\u200b\u5982\u200b30Hz\u200b\u9700\u200b\u95f4\u9694\u200b33ms\uff09\u3002</li> <li>\u200b\u533a\u57df\u200b\u66f4\u65b0\u200b\u68c0\u6d4b\u200b\uff1a\u200b\u4ec5\u5f53\u200b\u5c4f\u5e55\u200b\u53d8\u5316\u200b\u65f6\u200b\u89e6\u53d1\u200b\u6355\u83b7\u200b\uff08\u200b\u9700\u200b\u7ed3\u5408\u200b\u5dee\u5f02\u200b\u6bd4\u8f83\u200b\u7b97\u6cd5\u200b\uff09\u3002</li> </ul>"},{"location":"remotedesktop/035-GDIGrab/#_18","title":"\u8d44\u6e90\u7ba1\u7406","text":"<ul> <li>\u200b\u53ca\u65f6\u200b\u91ca\u653e\u200b\uff1aDeleteObject()\u200b\u91ca\u653e\u200b\u4f4d\u200b\u56fe\u200b\uff0cReleaseDC()\u200b\u91ca\u653e\u200b\u8bbe\u5907\u200b\u4e0a\u4e0b\u6587\u200b\u3002</li> <li>\u200b\u5185\u5b58\u200b\u590d\u7528\u200b\uff1a\u200b\u590d\u7528\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200bDC\u200b\u548c\u200b\u4f4d\u56fe\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u51cf\u5c11\u200b\u91cd\u590d\u200b\u521b\u5efa\u200b\u5f00\u9500\u200b\u3002</li> </ul>"},{"location":"remotedesktop/035-GDIGrab/#_19","title":"\u4e03\u200b\u3001\u200b\u6269\u5c55\u200b\u529f\u80fd\u200b\u5b9e\u73b0","text":""},{"location":"remotedesktop/035-GDIGrab/#_20","title":"\u9f20\u6807\u200b\u5149\u6807\u200b\u53e0\u52a0","text":"<pre><code>CURSORINFO cursorInfo = { sizeof(cursorInfo) };\nGetCursorInfo(&amp;cursorInfo);\nDrawIcon(hdcMem, cursorInfo.ptScreenPos.x,  cursorInfo.ptScreenPos.y,  cursorInfo.hCursor);\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_21","title":"\u56fe\u50cf\u200b\u4fdd\u5b58","text":"<p>\u200b\u4f7f\u7528\u200bGDI+\u200b\u5e93\u200b\u5c06\u200bHBITMAP\u200b\u4fdd\u5b58\u200b\u4e3a\u200bPNG\u200b\u6216\u200bJPEG\uff1a</p> <pre><code>Gdiplus::Bitmap bitmap(hBitmap, NULL);\nCLSID pngClsid;\nGetEncoderClsid(L\"image/png\", &amp;pngClsid);\nbitmap.Save(L\"screenshot.png\",  &amp;pngClsid);\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_22","title":"\u516b\u200b\u3001\u200b\u6280\u672f\u200b\u5bf9\u6bd4\u200b\u4e0e\u200b\u5c40\u9650\u6027","text":"\u6280\u672f\u6307\u6807\u200b GDI\u200b\u6293\u5c4f\u200b DXGI\u200b\u6293\u5c4f\u200b\uff08\u200b\u63a8\u8350\u200b\u66ff\u4ee3\u200b\u65b9\u6848\u200b\uff09 \u200b\u517c\u5bb9\u6027\u200b \u200b\u652f\u6301\u200b\u6240\u6709\u200bWindows\u200b\u7248\u672c\u200b Win8+\uff0c\u200b\u9700\u200bDirectX 11\u200b\u652f\u6301\u200b \u200b\u6548\u7387\u200b 1080P\u200b\u7ea6\u200b5-8ms\uff08\u200b\u65e0\u200bAero\uff09 1080P\u200b\u7ea6\u200b1-3ms \u200b\u529f\u80fd\u200b\u9650\u5236\u200b \u200b\u65e0\u6cd5\u200b\u6355\u83b7\u200b\u786c\u4ef6\u52a0\u901f\u200b\u5185\u5bb9\u200b\uff08\u200b\u5982\u200b\u6e38\u620f\u200b\uff09 \u200b\u652f\u6301\u200bDirectX/D3D\u200b\u5185\u5bb9\u200b\u6355\u83b7\u200b \u200b\u5f00\u53d1\u200b\u590d\u6742\u5ea6\u200b \u200b\u7b80\u5355\u200b\uff08\u200b\u7eaf\u200bWin32 API\uff09 \u200b\u590d\u6742\u200b\uff08\u200b\u9700\u200bDXGI\u200b\u63a5\u53e3\u200b\u77e5\u8bc6\u200b\uff09"},{"location":"remotedesktop/035-GDIGrab/#_23","title":"\u4e5d\u200b\u3001\u200b\u6d41\u7a0b\u56fe\u200b\u4e0e\u200b\u7ed3\u6784\u56fe","text":""},{"location":"remotedesktop/035-GDIGrab/#gdi","title":"GDI\u200b\u6293\u5c4f\u200b\u67b6\u6784","text":"<pre><code>graph LR\nUserApp --&gt; GDI_API\nGDI_API --&gt; Win32K.sys \nWin32K.sys  --&gt; DisplayDriver\nDisplayDriver --&gt; FrameBuffer\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_24","title":"\u6027\u80fd\u200b\u4f18\u5316\u200b\u8def\u5f84","text":"<pre><code>graph TB\nA[\u200b\u9ad8\u200bCPU\u200b\u5360\u7528\u200b] --&gt; B[\u200b\u964d\u4f4e\u200b\u6355\u83b7\u200b\u9891\u7387\u200b]\nA --&gt; C[\u200b\u51cf\u5c11\u200b\u4f4d\u200b\u56fe\u200b\u6df1\u5ea6\u200b]\nA --&gt; D[\u200b\u590d\u7528\u200b\u8d44\u6e90\u200b\u5bf9\u8c61\u200b]\nB --&gt; E[\u200b\u52a8\u6001\u200b\u8c03\u6574\u200b\u5e27\u200b\u7387\u200b]\nC --&gt; F[\u200b\u4f7f\u7528\u200b16/24\u200b\u4f4d\u8272\u200b]\nD --&gt; G[\u200b\u5168\u5c40\u200bDC\u200b\u6c60\u200b\u7ba1\u7406\u200b]\n</code></pre>"},{"location":"remotedesktop/035-GDIGrab/#_25","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/C%2B%2B/","title":"C++","text":""},{"location":"technology/C%2B%2B/#_1","title":"\u7b80\u4ecb","text":"<p>C++\u200b\u662f\u200b\u4e00\u79cd\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7684\u200b\u8ba1\u7b97\u673a\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u8bed\u8a00\u200b\uff0c\u200b\u7531\u200b\u7f8e\u56fd\u200bAT&amp;T\u200b\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u200b\u7684\u200b\u672c\u200b\u8d3e\u5c3c\u200b\u00b7\u200b\u65af\u7279\u52b3\u65af\u200b\u7279\u5362\u666e\u200b\u535a\u58eb\u200b\u5728\u200b20\u200b\u4e16\u7eaa\u200b80\u200b\u5e74\u4ee3\u200b\u521d\u671f\u200b\u53d1\u660e\u200b\u5e76\u200b\u5b9e\u73b0\u200b\uff08\u200b\u6700\u521d\u200b\u8fd9\u79cd\u200b\u8bed\u8a00\u200b\u88ab\u79f0\u4f5c\u200b\u201cC with Classes\u201d\u200b\u5e26\u7c7b\u200b\u7684\u200bC\uff09\u3002\u200b\u5b83\u200b\u662f\u200b\u4e00\u79cd\u200b\u9759\u6001\u6570\u636e\u200b\u7c7b\u578b\u200b\u68c0\u67e5\u200b\u7684\u200b\u3001\u200b\u652f\u6301\u200b\u591a\u91cd\u200b\u7f16\u7a0b\u200b\u8303\u5f0f\u200b\u7684\u200b\u901a\u7528\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u8bed\u8a00\u200b\u3002\u200b\u5b83\u200b\u652f\u6301\u200b\u8fc7\u7a0b\u200b\u5316\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u3001\u200b\u6570\u636e\u62bd\u8c61\u200b\u3001\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u3001\u200b\u6cdb\u578b\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u7b49\u200b\u591a\u79cd\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u98ce\u683c\u200b\u3002 C++\u200b\u662f\u200bC\u200b\u8bed\u8a00\u200b\u7684\u200b\u7ee7\u627f\u200b\uff0c\u200b\u8fdb\u4e00\u6b65\u200b\u6269\u5145\u200b\u548c\u200b\u5b8c\u5584\u200b\u4e86\u200bC\u200b\u8bed\u8a00\u200b\uff0c\u200b\u6210\u4e3a\u200b\u4e00\u79cd\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7684\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u8bed\u8a00\u200b\u3002C++\u200b\u8fd9\u4e2a\u200b\u8bcd\u200b\u5728\u200b\u4e2d\u56fd\u200b\u5927\u9646\u200b\u7684\u200b\u7a0b\u5e8f\u5458\u200b\u5708\u5b50\u200b\u4e2d\u200b\u901a\u5e38\u200b\u88ab\u200b\u8bfb\u200b\u505a\u200b\u201cC\u200b\u52a0\u52a0\u200b\u201d\uff0c\u200b\u800c\u200b\u897f\u65b9\u200b\u7684\u200b\u7a0b\u5e8f\u5458\u200b\u901a\u5e38\u200b\u8bfb\u200b\u505a\u200b\u201cC plus plus\u201d\uff0c\u201cCPP\u201d\u3002</p> \u200b\u4e2d\u6587\u540d\u200b C++\u200b\u8bed\u8a00\u200b \u200b\u521b\u59cb\u4eba\u200b BjarneStroustrup \u200b\u5916\u6587\u200b\u540d\u200b The C++ Programming Language \u200b\u521b\u59cb\u200b\u516c\u53f8\u200b \u200b\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u200b \u200b\u7c7b\u522b\u200b \u200b\u8ba1\u7b97\u673a\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u8bed\u8a00\u200b \u200b\u57fa\u672c\u200b\u5185\u5bb9\u200b \u200b\u7c7b\u200b\u3001\u200b\u5c01\u88c5\u200b\u3001\u200b\u91cd\u8f7d\u200b\u3001\u200b\u7ee7\u627f\u200b\u3001\u200b\u6a21\u7248\u200b \u200b\u9996\u6b21\u200b\u4f7f\u7528\u200b\u65f6\u95f4\u200b 1983\u200b\u5e74\u200b12\u200b\u6708\u200b \u200b\u521b\u59cb\u4eba\u200b \u200b\u672c\u200b\u8d3e\u5c3c\u200b\u00b7\u200b\u65af\u7279\u52b3\u65af\u200b\u7279\u5362\u666e\u200b <p> </p>"},{"location":"technology/C%2B%2B/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/CSharp/","title":"CSHARP","text":""},{"location":"technology/CSharp/#_1","title":"\u7b80\u4ecb","text":"<p>CSharp\u200b\u662f\u200b\u5fae\u8f6f\u516c\u53f8\u200b\u53d1\u5e03\u200b\u7684\u200b\u4e00\u79cd\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7684\u200b\u3001\u200b\u8fd0\u884c\u200b\u4e8e\u200b.NET Framework\u200b\u4e4b\u4e0a\u200b\u7684\u200b\u9ad8\u7ea7\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u8bed\u8a00\u200b\u3002\u200b\u5e76\u200b\u5b9a\u4e8e\u200b\u5728\u200b\u5fae\u8f6f\u200b\u804c\u4e1a\u200b\u5f00\u53d1\u8005\u200b\u8bba\u575b\u200b(PDC)\u200b\u4e0a\u200b\u767b\u53f0\u200b\u4eae\u76f8\u200b\u3002CSharp\u200b\u662f\u200b\u5fae\u8f6f\u516c\u53f8\u200b\u7814\u7a76\u5458\u200bAnders Hejlsberg\u200b\u7684\u200b\u6700\u65b0\u200b\u6210\u679c\u200b\u3002CSharp\u200b\u770b\u8d77\u6765\u200b\u4e0e\u200bJava\u200b\u6709\u7740\u200b\u60ca\u4eba\u200b\u7684\u200b\u76f8\u4f3c\u200b\uff1b\u200b\u5b83\u200b\u5305\u62ec\u200b\u4e86\u200b\u8bf8\u5982\u200b\u5355\u4e00\u200b\u7ee7\u627f\u200b\u3001\u200b\u63a5\u53e3\u200b\u3001\u200b\u4e0e\u200bJava\u200b\u51e0\u4e4e\u200b\u540c\u6837\u200b\u7684\u200b\u8bed\u6cd5\u200b\u548c\u200b\u7f16\u8bd1\u6210\u200b\u4e2d\u95f4\u4ee3\u7801\u200b\u518d\u200b\u8fd0\u884c\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u3002\u200b\u4f46\u662f\u200bCSharp\u200b\u4e0e\u200bJava\u200b\u6709\u7740\u200b\u660e\u663e\u200b\u7684\u200b\u4e0d\u540c\u200b\uff0c\u200b\u5b83\u200b\u501f\u9274\u200b\u4e86\u200bDelphi\u200b\u7684\u200b\u4e00\u4e2a\u200b\u7279\u70b9\u200b\uff0c\u200b\u4e0e\u200bCOM\uff08\u200b\u7ec4\u4ef6\u200b\u5bf9\u8c61\u200b\u6a21\u578b\u200b\uff09\u200b\u662f\u200b\u76f4\u63a5\u200b\u96c6\u6210\u200b\u7684\u200b\uff0c\u200b\u800c\u4e14\u200b\u5b83\u200b\u662f\u200b\u5fae\u8f6f\u516c\u53f8\u200b .NET windows\u200b\u7f51\u7edc\u200b\u6846\u67b6\u200b\u7684\u200b\u4e3b\u89d2\u200b\u3002</p> \u200b\u5916\u6587\u200b\u540d\u200b CSharp \u200b\u522b\u79f0\u200b CSHARP \u200b\u7c7b\u522b\u200b \u200b\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u200b\u8bed\u8a00\u200b \u200b\u53d1\u5e03\u200b\u65f6\u95f4\u200b 2000\u200b\u5e74\u200b6\u200b\u6708\u200b \u200b\u53d1\u5e03\u200b\u5355\u4f4d\u200b \u200b\u5fae\u8f6f\u516c\u53f8\u200b \u200b\u5f00\u53d1\u8005\u200b \u200b\u5b89\u5fb7\u65af\u200b\u00b7\u200b\u6d77\u5c14\u200b\u65af\u4f2f\u683c\u200b <p></p>"},{"location":"technology/CSharp/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/DevelopmentTools/","title":"\u5f00\u53d1\u5de5\u5177","text":""},{"location":"technology/Go/","title":"Go","text":""},{"location":"technology/Go/#_1","title":"\u7b80\u4ecb","text":"<p>Go\u200b\u8bed\u8a00\u200b\u662f\u200bGoogle\u200b\u5f00\u53d1\u200b\u7684\u200b\u4e00\u79cd\u200b\u9759\u6001\u200b\u5f3a\u200b\u7c7b\u578b\u200b\u3001\u200b\u7f16\u8bd1\u200b\u578b\u200b\u3001\u200b\u5e76\u200b\u53d1\u578b\u200b\uff0c\u200b\u5e76\u200b\u5177\u6709\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u529f\u80fd\u200b\u7684\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff0c\u200b\u5b83\u7528\u200b\u6279\u5224\u200b\u5438\u6536\u200b\u7684\u200b\u773c\u5149\u200b\uff0c\u200b\u878d\u5408\u200bC\u200b\u8bed\u8a00\u200b\u3001Java\u200b\u7b49\u200b\u4f17\u5bb6\u200b\u4e4b\u200b\u957f\u200b\uff0c\u200b\u5c06\u200b\u7b80\u6d01\u200b\u3001\u200b\u9ad8\u6548\u200b\u6f14\u7ece\u200b\u5f97\u200b\u6dcb\u6f13\u5c3d\u81f4\u200b\u3002</p> <p>Go\u200b\u8bed\u8a00\u200b\u8d77\u6e90\u4e8e\u200b2007\u200b\u5e74\u200b\uff0c\u200b\u5f53\u65f6\u200bGoogle\u200b\u7684\u200b\u6280\u672f\u200b\u5927\u795e\u200b\u4eec\u200b\u5907\u53d7\u200bC++\u200b\u8d8a\u6765\u8d8a\u200b\u81c3\u80bf\u200b\u7684\u200b\u56f0\u6270\u200b\uff0c\u200b\u51b3\u5fc3\u200b\u5f00\u53d1\u200b\u4e00\u79cd\u200b\u65b0\u200b\u7684\u200b\u8bed\u8a00\u200b\u6765\u200b\u53d6\u4ee3\u200bC++\u3002\u200b\u4ed6\u4eec\u200b\u8ba4\u4e3a\u200b\uff1a\u200b\u4e0e\u5176\u200b\u5728\u200b\u81c3\u80bf\u200b\u7684\u200b\u8bed\u8a00\u200b\u4e0a\u200b\u4e0d\u65ad\u200b\u589e\u52a0\u200b\u65b0\u200b\u7684\u200b\u7279\u6027\u200b\uff0c\u200b\u4e0d\u5982\u200b\u7b80\u5316\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u3002\u200b\u4e8e\u662f\u200b\uff0cGolang\u200b\u8fd9\u95e8\u200b\u65b0\u200b\u8bed\u8a00\u200b\u5e94\u8fd0\u800c\u751f\u200b\u3002</p>"},{"location":"technology/Go/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/Java/","title":"Java","text":""},{"location":"technology/Java/#_1","title":"\u7b80\u4ecb","text":"<p>Java\u200b\u662f\u200b\u4e00\u95e8\u200b\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u200b\u8bed\u8a00\u200b\uff0c\u200b\u4e0d\u4ec5\u200b\u5438\u6536\u200b\u4e86\u200bC++\u200b\u8bed\u8a00\u200b\u7684\u200b\u5404\u79cd\u200b\u4f18\u70b9\u200b\uff0c\u200b\u8fd8\u200b\u6452\u5f03\u200b\u4e86\u200bC++\u200b\u91cc\u200b\u96be\u4ee5\u200b\u7406\u89e3\u200b\u7684\u200b\u591a\u200b\u7ee7\u627f\u200b\u3001\u200b\u6307\u9488\u200b\u7b49\u200b\u6982\u5ff5\u200b\uff0c\u200b\u56e0\u6b64\u200bJava\u200b\u8bed\u8a00\u200b\u5177\u6709\u200b\u529f\u80fd\u5f3a\u5927\u200b\u548c\u200b\u7b80\u5355\u200b\u6613\u7528\u200b\u4e24\u4e2a\u200b\u7279\u5f81\u200b\u3002Java\u200b\u8bed\u8a00\u200b\u4f5c\u4e3a\u200b\u9759\u6001\u200b\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u200b\u8bed\u8a00\u200b\u7684\u200b\u4ee3\u8868\u200b\uff0c\u200b\u6781\u597d\u5730\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7406\u8bba\u200b\uff0c\u200b\u5141\u8bb8\u200b\u7a0b\u5e8f\u5458\u200b\u4ee5\u200b\u4f18\u96c5\u200b\u7684\u200b\u601d\u7ef4\u200b\u65b9\u5f0f\u200b\u8fdb\u884c\u200b\u590d\u6742\u200b\u7684\u200b\u7f16\u7a0b\u200b\u3002 Java\u200b\u5177\u6709\u200b\u7b80\u5355\u200b\u6027\u200b\u3001\u200b\u9762\u5411\u5bf9\u8c61\u200b\u3001\u200b\u5206\u5e03\u5f0f\u200b\u3001\u200b\u5065\u58ee\u6027\u200b\u3001\u200b\u5b89\u5168\u6027\u200b\u3001\u200b\u5e73\u53f0\u200b\u72ec\u7acb\u200b\u4e0e\u200b\u53ef\u79fb\u690d\u6027\u200b\u3001\u200b\u591a\u7ebf\u7a0b\u200b\u3001\u200b\u52a8\u6001\u6027\u200b\u7b49\u200b\u7279\u70b9\u200b\u3002Java\u200b\u53ef\u4ee5\u200b\u7f16\u5199\u200b\u684c\u9762\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u3001Web\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u3001\u200b\u5206\u5e03\u5f0f\u7cfb\u7edf\u200b\u548c\u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7b49\u200b\u3002</p> <p></p>"},{"location":"technology/Java/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/JavaScript/","title":"JavaScript","text":""},{"location":"technology/JavaScript/#_1","title":"\u7b80\u4ecb","text":"<p>JavaScript\u200b\u662f\u200b\u4e00\u79cd\u200b\u52a8\u6001\u200b\u7684\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff0c\u200b\u5e7f\u6cdb\u5e94\u7528\u200b\u4e8e\u200b\u7f51\u9875\u200b\u5f00\u53d1\u200b\u4e2d\u200b\uff0c\u200b\u4e3b\u8981\u200b\u7528\u4e8e\u200b\u589e\u5f3a\u200b\u7f51\u9875\u200b\u7684\u200b\u4ea4\u4e92\u6027\u200b\u548c\u200b\u52a8\u6001\u6027\u200b\u3002\u200b\u4f5c\u4e3a\u200bWeb\u200b\u5f00\u53d1\u200b\u7684\u200b\u6838\u5fc3\u6280\u672f\u200b\u4e4b\u4e00\u200b\uff0c\u200b\u5b83\u200b\u4e0e\u200bHTML\u200b\u548c\u200bCSS\u200b\u5171\u540c\u200b\u534f\u4f5c\u200b\uff0cHTML\u200b\u8d1f\u8d23\u200b\u5b9a\u4e49\u200b\u7f51\u9875\u200b\u7684\u200b\u5185\u5bb9\u200b\u7ed3\u6784\u200b\uff0cCSS\u200b\u5904\u7406\u200b\u6837\u5f0f\u200b\u548c\u200b\u5e03\u5c40\u200b\uff0c\u200b\u800c\u200bJavaScript\u200b\u5219\u200b\u63a7\u5236\u200b\u7f51\u9875\u200b\u7684\u200b\u884c\u4e3a\u200b\u548c\u200b\u4ea4\u4e92\u200b\u3002\u200b\u7528\u6237\u200b\u53ef\u4ee5\u200b\u5229\u7528\u200bJavaScript\u200b\u8fdb\u884c\u200b\u4e8b\u4ef6\u5904\u7406\u200b\u3001\u200b\u8868\u5355\u200b\u9a8c\u8bc1\u200b\u3001\u200b\u52a8\u753b\u200b\u521b\u5efa\u200b\u7b49\u200b\u591a\u79cd\u200b\u529f\u80fd\u200b\u3002\u200b\u6b64\u5916\u200b\uff0cJavaScript\u200b\u7684\u200b\u5e94\u7528\u200b\u5df2\u7ecf\u200b\u6269\u5c55\u200b\u5230\u200b\u670d\u52a1\u5668\u7aef\u200b\uff08\u200b\u5982\u200bNode.js\uff09\u3001\u200b\u79fb\u52a8\u200b\u5e94\u7528\u200b\u5f00\u53d1\u200b\u548c\u200b\u6e38\u620f\u200b\u5f00\u53d1\u200b\u7b49\u200b\u9886\u57df\u200b\uff0c\u200b\u6210\u4e3a\u200b\u73b0\u4ee3\u200b\u7f16\u7a0b\u200b\u73af\u5883\u200b\u4e2d\u200b\u4e0d\u53ef\u6216\u7f3a\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002\u200b\u5176\u200b\u8de8\u5e73\u53f0\u200b\u548c\u200b\u9ad8\u200b\u9002\u5e94\u6027\u200b\u7684\u200b\u7279\u70b9\u200b\uff0c\u200b\u4f7f\u5f97\u200bJavaScript\u200b\u6210\u4e3a\u200b\u5168\u7403\u200b\u6700\u200b\u53d7\u6b22\u8fce\u200b\u548c\u200b\u5e7f\u6cdb\u200b\u4f7f\u7528\u200b\u7684\u200b\u811a\u672c\u8bed\u8a00\u200b\u4e4b\u4e00\u200b\u3002</p> <p></p>"},{"location":"technology/JavaScript/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/NetWork/","title":"\u7f51\u7edc\u200b\u5f00\u53d1","text":""},{"location":"technology/OperatingSystem/","title":"\u64cd\u4f5c\u7cfb\u7edf","text":""},{"location":"technology/PHP/","title":"PHP","text":""},{"location":"technology/PHP/#_1","title":"\u7b80\u4ecb","text":"<p>PHP\uff08\u200b\u5916\u6587\u200b\u540d\u200b:PHP: Hypertext Preprocessor\uff0c\u200b\u4e2d\u6587\u540d\u200b\uff1a\u201c\u200b\u8d85\u6587\u672c\u200b\u9884\u200b\u5904\u7406\u5668\u200b\u201d\uff09\u200b\u662f\u200b\u4e00\u79cd\u200b\u901a\u7528\u200b\u5f00\u6e90\u200b\u811a\u672c\u8bed\u8a00\u200b\u3002\u200b\u8bed\u6cd5\u200b\u5438\u6536\u200b\u4e86\u200bC\u200b\u8bed\u8a00\u200b\u3001Java\u200b\u548c\u200bPerl\u200b\u7684\u200b\u7279\u70b9\u200b\uff0c\u200b\u5229\u4e8e\u200b\u5b66\u4e60\u200b\uff0c\u200b\u4f7f\u7528\u200b\u5e7f\u6cdb\u200b\uff0c\u200b\u4e3b\u8981\u200b\u9002\u7528\u200b\u4e8e\u200bWeb\u200b\u5f00\u53d1\u200b\u9886\u57df\u200b\u3002PHP \u200b\u72ec\u7279\u200b\u7684\u200b\u8bed\u6cd5\u200b\u6df7\u5408\u200b\u4e86\u200bC\u3001Java\u3001Perl\u200b\u4ee5\u53ca\u200bPHP\u200b\u81ea\u521b\u200b\u7684\u200b\u8bed\u6cd5\u200b\u3002\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u6bd4\u200bCGI\u200b\u6216\u8005\u200bPerl\u200b\u66f4\u200b\u5feb\u901f\u200b\u5730\u200b\u6267\u884c\u200b\u52a8\u6001\u200b\u7f51\u9875\u200b\u3002\u200b\u7528\u200bPHP\u200b\u505a\u51fa\u200b\u7684\u200b\u52a8\u6001\u200b\u9875\u9762\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u7684\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u76f8\u6bd4\u200b\uff0cPHP\u200b\u662f\u200b\u5c06\u200b\u7a0b\u5e8f\u200b\u5d4c\u5165\u200b\u5230\u200bHTML\uff08\u200b\u6807\u51c6\u200b\u901a\u7528\u200b\u6807\u8bb0\u200b\u8bed\u8a00\u200b\u4e0b\u200b\u7684\u200b\u4e00\u4e2a\u200b\u5e94\u7528\u200b\uff09\u200b\u6587\u6863\u200b\u4e2d\u200b\u53bb\u200b\u6267\u884c\u200b\uff0c\u200b\u6267\u884c\u200b\u6548\u7387\u200b\u6bd4\u200b\u5b8c\u5168\u200b\u751f\u6210\u200bHTML\u200b\u6807\u8bb0\u200b\u7684\u200bCGI\u200b\u8981\u200b\u9ad8\u200b\u8bb8\u591a\u200b\uff1bPHP\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u6267\u884c\u200b\u7f16\u8bd1\u200b\u540e\u200b\u4ee3\u7801\u200b\uff0c\u200b\u7f16\u8bd1\u200b\u53ef\u4ee5\u200b\u8fbe\u5230\u200b\u52a0\u5bc6\u200b\u548c\u200b\u4f18\u5316\u200b\u4ee3\u7801\u8fd0\u884c\u200b\uff0c\u200b\u4f7f\u200b\u4ee3\u7801\u8fd0\u884c\u200b\u66f4\u200b\u5feb\u200b\u3002</p> \u200b\u4e2d\u6587\u540d\u200b \u200b\u8d85\u6587\u672c\u200b\u9884\u200b\u5904\u7406\u5668\u200b \u200b\u5916\u6587\u200b\u540d\u200b Hyper Text Preprocessor \u200b\u7f16\u7a0b\u200b\u8303\u578b\u200b \u200b\u9762\u5411\u5bf9\u8c61\u200b\u3001\u200b\u547d\u4ee4\u5f0f\u200b\u7f16\u7a0b\u200b \u200b\u8bbe\u8ba1\u8005\u200b Rasmus Lerdorf \u200b\u7ef4\u62a4\u200b The PHP Group \u200b\u5916\u8bed\u200b\u7f29\u5199\u200b PHP <p></p>"},{"location":"technology/PHP/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/Python/","title":"Python","text":""},{"location":"technology/Python/#_1","title":"\u7b80\u4ecb","text":"<p>Python\uff08\u200b\u82f1\u56fd\u200b\u53d1\u97f3\u200b\uff1a/\u02c8pa\u026a\u03b8\u0259n/\u200b\u7f8e\u56fd\u200b\u53d1\u97f3\u200b\uff1a/\u02c8pa\u026a\u03b8\u0251\u02d0n/\uff09,\u200b\u662f\u200b\u8377\u5170\u200b\u79d1\u5b66\u5bb6\u200b\u5409\u591a\u200b\u00b7\u200b\u8303\u200b\u7f57\u82cf\u200b\u59c6\u200b\uff08Guido van Rossum\uff09\uff0c\u200b\u5728\u200b1989\u200b\u5e74\u200b\u671f\u95f4\u200b\u5f00\u53d1\u200b\u7684\u200b\u8ba1\u7b97\u673a\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u3002\u200b\u5728\u200bPython\u200b\u8bed\u8a00\u200b\u4e2d\u200b\uff0c\u200b\u4e00\u5207\u200b\u7686\u200b\u4e3a\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5373\u4f7f\u200b\u51fd\u6570\u200b\u4e5f\u200b\u662f\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u6709\u200b\u81ea\u8eab\u200b\u7684\u200b\u5c5e\u6027\u200b\u3002Python\u200b\u662f\u200b\u89e3\u91ca\u200b\u578b\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff0c\u200b\u8fd0\u884c\u200bPython\u200b\u7a0b\u5e8f\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u5c06\u200b\u89e3\u91ca\u5668\u200b\u7ffb\u8bd1\u200bPython\u200b\u4ee3\u7801\u200b\u3002</p> <p>Python\u200b\u662f\u200b\u4e00\u79cd\u200b\u4e0d\u200b\u53d7\u200b\u5c40\u9650\u200b\u3001\u200b\u8de8\u5e73\u53f0\u200b\u7684\u200b\u5f00\u6e90\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff0c\u200b\u5176\u200b\u6570\u636e\u5904\u7406\u200b\u901f\u5ea6\u200b\u5feb\u200b\u3001\u200b\u529f\u80fd\u5f3a\u5927\u200b\u4e14\u200b\u7b80\u5355\u200b\u6613\u5b66\u200b\uff0c\u200b\u5728\u200b\u6570\u636e\u5206\u6790\u200b\u4e0e\u200b\u5904\u7406\u200b\u4e2d\u200b\u88ab\u200b\u5e7f\u6cdb\u5e94\u7528\u200b\u3002\u200b\u800c\u4e14\u200b\uff0cPython\u200b\u91c7\u7528\u200b\u89e3\u91ca\u200b\u8fd0\u884c\u200b\u7684\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u7f16\u5199\u200b\u540e\u200b\u65e0\u9700\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\u5373\u53ef\u200b\u76f4\u63a5\u200b\u901a\u8fc7\u200b\u89e3\u91ca\u5668\u200b\u6267\u884c\u200b\uff0c\u200b\u5177\u6709\u200b\u5178\u578b\u200b\u7684\u200b\u52a8\u6001\u200b\u8bed\u8a00\u7279\u70b9\u200b\uff0c\u200b\u7f16\u7a0b\u200b\u6548\u7387\u200b\u6781\u9ad8\u200b\u3002Python\u200b\u662f\u200b\u5b8c\u5168\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7684\u200b\u8bed\u8a00\u200b\uff0c\u200b\u6570\u5b57\u200b\u3001\u200b\u6a21\u5757\u200b\u3001\u200b\u5b57\u7b26\u4e32\u200b\u3001\u200b\u6570\u636e\u7ed3\u6784\u200b\u90fd\u200b\u662f\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5e76\u4e14\u200b\u652f\u6301\u200b\u5e38\u89c1\u200b\u7684\u200b\u7c7b\u200b\u6982\u5ff5\u200b\uff0c\u200b\u5982\u200b\u7ee7\u627f\u200b\uff0c\u200b\u91cd\u8f7d\u200b\uff0c\u200b\u6d3e\u751f\u200b\uff0c\u200b\u591a\u91cd\u200b\u7ee7\u627f\u200b\u3002</p> <p>2017\u200b\u5e74\u200b7\u200b\u6708\u200b20\u200b\u65e5\u200b\uff0cIEEE\u200b\u53d1\u5e03\u200b2017\u200b\u5e74\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u6392\u884c\u699c\u200b\uff1aPython\u200b\u9ad8\u200b\u5c45\u9996\u4f4d\u200b\u30022018\u200b\u5e74\u200b3\u200b\u6708\u200b\uff0c\u200b\u8be5\u200b\u8bed\u8a00\u200b\u4f5c\u8005\u200b\u5728\u200b\u90ae\u4ef6\u200b\u5217\u8868\u200b\u4e0a\u200b\u5ba3\u5e03\u200bPython 2.7\u200b\u5c06\u200b\u4e8e\u200b2020\u200b\u5e74\u200b1\u200b\u6708\u200b1\u200b\u65e5\u200b\u7ec8\u6b62\u200b\u652f\u6301\u200b\u3002\u200b\u7528\u6237\u200b\u5982\u679c\u200b\u60f3\u8981\u200b\u5728\u200b\u8fd9\u4e2a\u200b\u65e5\u671f\u200b\u4e4b\u540e\u200b\u7ee7\u7eed\u200b\u5f97\u5230\u200b\u4e0e\u200bPython 2.7\u200b\u6709\u5173\u200b\u7684\u200b\u652f\u6301\u200b\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\u4ed8\u8d39\u200b\u7ed9\u200b\u5546\u4e1a\u200b\u4f9b\u5e94\u5546\u200b\u3002</p> <p></p>"},{"location":"technology/Python/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/Ruby/","title":"Ruby","text":""},{"location":"technology/Ruby/#_1","title":"\u7b80\u4ecb","text":"<p>Ruby\uff0c\u200b\u4e00\u79cd\u200b\u4e3a\u200b\u7b80\u5355\u200b\u5feb\u6377\u200b\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u200b\u800c\u521b\u200b\u7684\u200b\u811a\u672c\u8bed\u8a00\u200b\uff0c\u200b\u5728\u200b20\u200b\u4e16\u7eaa\u200b90\u200b\u5e74\u4ee3\u200b\u7531\u200b\u65e5\u672c\u200b\u4eba\u200b\u677e\u672c\u200b\u884c\u5f18\u200b\uff08\u307e\u3064\u3082\u3068\u3086\u304d\u3072\u308d\uff09\u200b\u5f00\u53d1\u200b\uff0c\u200b\u9075\u5b88\u200bGPL\u200b\u534f\u8bae\u200b\u548c\u200bRuby License\u3002Ruby\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8bed\u6cd5\u200b\u50cf\u200bSmalltalk\u200b\u4e00\u6837\u200b\u5b8c\u5168\u200b\u9762\u5411\u5bf9\u8c61\u200b\u3001\u200b\u811a\u672c\u200b\u6267\u884c\u200b\u3001\u200b\u53c8\u200b\u6709\u200bPerl\u200b\u5f3a\u5927\u200b\u7684\u200b\u6587\u5b57\u5904\u7406\u200b\u529f\u80fd\u200b\u7684\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u3002\u200b\u5b83\u200b\u7684\u200b\u7075\u611f\u200b\u4e0e\u200b\u7279\u6027\u200b\u6765\u81ea\u200b\u4e8e\u200bPerl\u3001Smalltalk\u3001Eiffel\u3001Ada\u200b\u4ee5\u53ca\u200bLisp\u200b\u8bed\u8a00\u200b\u3002\u200b\u7531\u200bRuby\u200b\u8bed\u8a00\u200b\u672c\u8eab\u200b\u8fd8\u200b\u53d1\u5c55\u200b\u51fa\u200b\u4e86\u200bJRuby\uff08Java\u200b\u5e73\u53f0\u200b\uff09\u3001IronRuby\uff08.NET\u200b\u5e73\u53f0\u200b\uff09\u200b\u7b49\u200b\u5176\u4ed6\u200b\u5e73\u53f0\u200b\u7684\u200bRuby\u200b\u8bed\u8a00\u200b\u66ff\u4ee3\u54c1\u200b\u3002Ruby\u200b\u4e8e\u200b1993\u200b\u5e74\u200b2\u200b\u6708\u200b24\u200b\u65e5\u200b\u5f00\u59cb\u200b\u7f16\u5199\u200b\u81f3\u200b1995\u200b\u5e74\u200b12\u200b\u6708\u200b\u624d\u200b\u6b63\u5f0f\u200b\u516c\u5f00\u200b\u53d1\u5e03\u200b\u4e8e\u200bfj\uff08\u200b\u65b0\u95fb\u7ec4\u200b\uff09\u3002\u200b\u56e0\u4e3a\u200bPerl\u200b\u53d1\u97f3\u200b\u4e0e\u200b6\u200b\u6708\u200b\u8bde\u751f\u77f3\u200bpearl\uff08\u200b\u73cd\u73e0\u200b\uff09\u200b\u76f8\u540c\u200b\uff0c\u200b\u56e0\u6b64\u200bRuby\u200b\u4ee5\u200b7\u200b\u6708\u200b\u8bde\u751f\u77f3\u200bruby\uff08\u200b\u7ea2\u5b9d\u77f3\u200b\uff09\u200b\u547d\u540d\u200b\u3002</p> <p></p>"},{"location":"technology/Ruby/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/Rust/","title":"Rust","text":""},{"location":"technology/Rust/#_1","title":"\u7b80\u4ecb","text":"<p>Rust\u200b\u662f\u200b\u4e00\u79cd\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff0c\u200b\u6ce8\u91cd\u200b\u9ad8\u6027\u80fd\u200b\u3001\u200b\u53ef\u9760\u6027\u200b\u548c\u200b\u751f\u4ea7\u529b\u200b[1]\uff0c\u200b\u652f\u6301\u200b\u7ed3\u6784\u5316\u7f16\u7a0b\u200b\u3001\u200b\u51fd\u6570\u200b\u5f0f\u200b\u7f16\u7a0b\u200b\u3001\u200b\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u200b\u7b49\u200b\u591a\u79cd\u200b\u7f16\u7a0b\u200b\u8303\u5f0f\u200b\u3002</p> <p>Rust\u200b\u662f\u200b\u7f16\u8bd1\u200b\u578b\u200b\u8bed\u8a00\u200b\uff0c\u200b\u6ca1\u6709\u200b\u8fd0\u884c\u200b\u65f6\u200b(Runtime)\u200b\u548c\u200b\u5783\u573e\u200b\u56de\u6536\u200b(Garbage Collector)\u3002Rust\u200b\u4f7f\u7528\u200b\u6240\u6709\u6743\u200b\u673a\u5236\u200b\u6765\u200b\u5b9e\u73b0\u200b\u81ea\u52a8\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\uff0c\u200b\u5e76\u200b\u4ee5\u6b64\u200b\u6765\u200b\u4fdd\u8bc1\u200b\u5185\u5b58\u200b\u5b89\u5168\u200b\u3002Rust\u200b\u662f\u200b\u5f00\u6e90\u200b\u9879\u76ee\u200b\uff0c\u200b\u76ee\u524d\u200b\u6258\u7ba1\u200b\u5728\u200bGithub\u200b\u4e0a\u200b\uff0cRust\u200b\u548c\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u5b98\u65b9\u200b\u9879\u76ee\u200b\u90fd\u200b\u91c7\u7528\u200bApache\u200b\u8bb8\u53ef\u8bc1\u200b2.0\u200b\u548c\u200bMIT\u200b\u8bb8\u53ef\u8bc1\u200b\u53cc\u91cd\u200b\u8bb8\u53ef\u200b[2]\u3002Rust\u200b\u5b98\u65b9\u200b\u8f6f\u4ef6\u5305\u200b\u7ba1\u7406\u5668\u200b\u4e3a\u200bCargo\u3002</p>"},{"location":"technology/Rust/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/VisualBasic/","title":"VisualBasic","text":""},{"location":"technology/VisualBasic/#_1","title":"\u7b80\u4ecb","text":"<p>Visual Basic\uff08\u200b\u7b80\u79f0\u200bVB\uff09\u200b\u662f\u200bMicrosoft\u200b\u516c\u53f8\u200b\u5f00\u53d1\u200b\u7684\u200b\u4e00\u79cd\u200b\u901a\u7528\u200b\u7684\u200b\u57fa\u4e8e\u200b\u5bf9\u8c61\u200b\u7684\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u8bed\u8a00\u200b\uff0c\u200b\u4e3a\u200b\u7ed3\u6784\u5316\u200b\u7684\u200b\u3001\u200b\u6a21\u5757\u5316\u200b\u7684\u200b\u3001\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7684\u200b\u3001\u200b\u5305\u542b\u200b\u534f\u52a9\u200b\u5f00\u53d1\u200b\u73af\u5883\u200b\u7684\u200b\u4e8b\u4ef6\u9a71\u52a8\u200b\u4e3a\u200b\u673a\u5236\u200b\u7684\u200b\u53ef\u89c6\u5316\u200b\u7a0b\u5e8f\u8bbe\u8ba1\u200b\u8bed\u8a00\u200b\u3002\u200b\u662f\u200b\u4e00\u79cd\u200b\u53ef\u200b\u7528\u4e8e\u200b\u5fae\u8f6f\u200b\u81ea\u5bb6\u200b\u4ea7\u54c1\u5f00\u53d1\u200b\u7684\u200b\u8bed\u8a00\u200b\u3002 \u201cVisual\u201d \u200b\u6307\u200b\u7684\u200b\u662f\u200b\u5f00\u53d1\u200b\u56fe\u5f62\u7528\u6237\u754c\u9762\u200b (GUI) \u200b\u7684\u200b\u65b9\u6cd5\u200b\u2014\u2014\u200b\u4e0d\u9700\u200b\u7f16\u5199\u200b\u5927\u91cf\u200b\u4ee3\u7801\u200b\u53bb\u200b\u63cf\u8ff0\u200b\u754c\u9762\u200b\u5143\u7d20\u200b\u7684\u200b\u5916\u89c2\u200b\u548c\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u800c\u200b\u53ea\u8981\u200b\u628a\u200b\u9884\u5148\u200b\u5efa\u7acb\u200b\u7684\u200b\u5bf9\u8c61\u200badd\u200b\u5230\u200b\u5c4f\u5e55\u200b\u4e0a\u200b\u7684\u200b\u4e00\u70b9\u200b\u5373\u53ef\u200b\u3002 \u201cBasic\u201d\u200b\u6307\u200b\u7684\u200b\u662f\u200b BASIC (Beginners All-Purpose Symbolic Instruction Code) \u200b\u8bed\u8a00\u200b\uff0c\u200b\u662f\u200b\u4e00\u79cd\u200b\u5728\u200b\u8ba1\u7b97\u6280\u672f\u200b\u53d1\u5c55\u200b\u5386\u53f2\u200b\u4e0a\u200b\u5e94\u7528\u200b\u5f97\u200b\u6700\u4e3a\u200b\u5e7f\u6cdb\u200b\u7684\u200b\u8bed\u8a00\u200b\u3002 Visual Basic\u200b\u6e90\u81ea\u200b\u4e8e\u200bBASIC\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u3002VB\u200b\u62e5\u6709\u200b\u56fe\u5f62\u7528\u6237\u754c\u9762\u200b\uff08GUI\uff09\u200b\u548c\u200b\u5feb\u901f\u200b\u5e94\u7528\u200b\u7a0b\u5e8f\u5f00\u53d1\u200b\uff08RAD\uff09\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8f7b\u6613\u200b\u7684\u200b\u4f7f\u7528\u200bDAO\u3001RDO\u3001ADO\u200b\u8fde\u63a5\u200b\u6570\u636e\u5e93\u200b\uff0c\u200b\u6216\u8005\u200b\u8f7b\u677e\u200b\u7684\u200b\u521b\u5efa\u200bActiveX\u200b\u63a7\u4ef6\u200b\uff0c\u200b\u7528\u4e8e\u200b\u9ad8\u6548\u200b\u751f\u6210\u200b\u7c7b\u578b\u200b\u5b89\u5168\u200b\u548c\u200b\u9762\u5411\u5bf9\u8c61\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u3002\u200b\u7a0b\u5e8f\u5458\u200b\u53ef\u4ee5\u200b\u8f7b\u677e\u200b\u7684\u200b\u4f7f\u7528\u200bVB\u200b\u63d0\u4f9b\u200b\u7684\u200b\u7ec4\u4ef6\u200b\u5feb\u901f\u200b\u5efa\u7acb\u200b\u4e00\u4e2a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u3002</p>"},{"location":"technology/VisualBasic/#_2","title":"\u8def\u7ebf\u56fe\u200b:","text":""},{"location":"technology/Cpp/001-BoostMessageQueue/","title":"Boost\u200b\u6d88\u606f\u200b\u961f\u5217","text":""},{"location":"technology/Cpp/001-BoostMessageQueue/#_1","title":"\u57fa\u7840\u200b\u5e94\u7528","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200b\u57fa\u4e8e\u200bBoost\u200b\u5e93\u200b\u7684\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u5b8c\u6574\u200b\u4f7f\u7528\u6307\u5357\u200b\uff0c\u200b\u5305\u542b\u200b\u8fdb\u7a0b\u200b\u95f4\u901a\u4fe1\u200b\u7684\u200b\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\u6a21\u578b\u200b\u5b9e\u73b0\u200b\u548c\u200b\u4ee3\u7801\u200b\u89e3\u6790\u200b\uff1a</p>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_2","title":"\u4e00\u200b\u3001\u200b\u73af\u5883\u200b\u51c6\u5907","text":"<p>\u200b\u5b89\u88c5\u200bBoost\u200b\u5f00\u53d1\u200b\u5e93\u200b\uff08Ubuntu\u200b\u793a\u4f8b\u200b\uff09</p> <pre><code>sudo apt-get install libboost-dev libboost-system-dev \n</code></pre> <p>\u200b\u7f16\u8bd1\u200b\u65f6\u9700\u200b\u94fe\u63a5\u200b\u76f8\u5173\u200b\u5e93\u200b</p> <pre><code>g++ producer.cpp  -o producer -lboost_system -lrt \ng++ consumer.cpp  -o consumer -lboost_system -lrt \n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_3","title":"\u4e8c\u200b\u3001\u200b\u6838\u5fc3\u200b\u7ec4\u4ef6\u200b\u8bf4\u660e","text":"<ol> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u6784\u9020\u51fd\u6570\u200b</li> </ol> <pre><code>// \u200b\u521b\u5efa\u200b\u65b0\u200b\u961f\u5217\u200b\uff08\u200b\u540c\u540d\u200b\u5b58\u5728\u200b\u5219\u200b\u629b\u200b\u5f02\u5e38\u200b\uff09\nmessage_queue mq(create_only, \"MyQueue\", 100, sizeof(MyMessage));\n\n// \u200b\u6253\u5f00\u200b\u6216\u200b\u521b\u5efa\u200b\u961f\u5217\u200b \nmessage_queue mq(open_or_create, \"MyQueue\", 100, sizeof(MyMessage));\n\n// \u200b\u4ec5\u200b\u6253\u5f00\u200b\u73b0\u6709\u200b\u961f\u5217\u200b \nmessage_queue mq(open_only, \"MyQueue\");\n</code></pre> <p>\u25b6 \u200b\u53c2\u6570\u200b\u8bf4\u660e\u200b\uff1a\u200b\u961f\u5217\u200b\u540d\u79f0\u200b\u3001\u200b\u6700\u5927\u200b\u6d88\u606f\u200b\u6570\u91cf\u200b\u3001\u200b\u5355\u200b\u6d88\u606f\u200b\u6700\u5927\u200b\u5b57\u8282\u200b\u3001\u200b\u6743\u9650\u200b\u6a21\u5f0f\u200b\uff08\u200b\u9ed8\u8ba4\u200b0644\uff09</p> <ol> <li>\u200b\u6d88\u606f\u200b\u53d1\u9001\u200b\u6a21\u5f0f\u200b</li> </ol> <pre><code>// \u200b\u963b\u585e\u200b\u53d1\u9001\u200b\uff08\u200b\u961f\u5217\u200b\u6ee1\u65f6\u200b\u7b49\u5f85\u200b\uff09\nmq.send(buffer,  sizeof(data), 0); \n\n// \u200b\u975e\u200b\u963b\u585e\u200b\u53d1\u9001\u200b\uff08\u200b\u7acb\u5373\u200b\u8fd4\u56de\u200b\u72b6\u6001\u200b\uff09\nbool sent = mq.try_send(buffer,  sizeof(data), 0);\n\n// \u200b\u8d85\u65f6\u200b\u53d1\u9001\u200b\uff08\u200b\u7b49\u5f85\u200b2\u200b\u79d2\u200b\uff09\nboost::posix_time::ptime timeout = /* \u200b\u8bbe\u7f6e\u200b\u8d85\u65f6\u200b\u65f6\u95f4\u200b */;\nbool sent = mq.timed_send(buffer,  sizeof(data), 0, timeout);\n</code></pre> <p>\u25b6 \u200b\u4f18\u5148\u7ea7\u200b\u53c2\u6570\u200b\uff1a0\u200b\u4e3a\u200b\u9ed8\u8ba4\u200b\uff0c\u200b\u6570\u503c\u200b\u8d8a\u5927\u200b\u4f18\u5148\u7ea7\u200b\u8d8a\u9ad8\u200b</p> <ol> <li>\u200b\u6d88\u606f\u200b\u63a5\u6536\u200b\u6a21\u5f0f\u200b</li> </ol> <pre><code>// \u200b\u963b\u585e\u200b\u63a5\u6536\u200b \nmq.receive(buffer,  sizeof(buffer), recvd_size, priority);\n\n// \u200b\u975e\u200b\u963b\u585e\u200b\u63a5\u6536\u200b \nbool received = mq.try_receive(buffer,  sizeof(buffer), recvd_size, priority);\n\n// \u200b\u8d85\u65f6\u200b\u63a5\u6536\u200b \nboost::posix_time::ptime timeout = /* \u200b\u8bbe\u7f6e\u200b\u8d85\u65f6\u200b\u65f6\u95f4\u200b */;\nbool received = mq.timed_receive(buffer,  sizeof(buffer), recvd_size, priority, timeout);\n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_4","title":"\u4e09\u200b\u3001\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u5b9e\u73b0","text":"<p>\u200b\u751f\u4ea7\u8005\u200b\u7a0b\u5e8f\u200b\uff08producer.cpp \uff09</p> <pre><code>#include &lt;boost/interprocess/ipc/message_queue.hpp&gt; \n#include &lt;iostream&gt;\n\nusing namespace boost::interprocess;\n\nstruct Message {\n    int id;\n    float value;\n};\n\nint main() {\n    try {\n        // \u200b\u521b\u5efa\u200b\u6216\u200b\u6253\u5f00\u200b\u6d88\u606f\u200b\u961f\u5217\u200b \n        message_queue mq(open_or_create, \"demo_queue\", 100, sizeof(Message));\n\n        // \u200b\u53d1\u9001\u200b\u7ed3\u6784\u5316\u200b\u6d88\u606f\u200b \n        for(int i=0; i&lt;5; ++i) {\n            Message msg = {i, i*1.5f};\n            mq.send(&amp;msg,  sizeof(msg), 0);\n            std::cout &lt;&lt; \"Sent: ID=\" &lt;&lt; msg.id  &lt;&lt; \" Value=\" &lt;&lt; msg.value  &lt;&lt; std::endl;\n        }\n    } \n    catch(interprocess_exception &amp;ex) {\n        std::cerr &lt;&lt; \"Error: \" &lt;&lt; ex.what()  &lt;&lt; std::endl;\n        return 1;\n    }\n    return 0;\n}\n</code></pre> <p>\u200b\u6d88\u8d39\u8005\u200b\u7a0b\u5e8f\u200b\uff08consumer.cpp \uff09</p> <pre><code>#include &lt;boost/interprocess/ipc/message_queue.hpp&gt; \n#include &lt;iostream&gt;\n\nusing namespace boost::interprocess;\n\nstruct Message {\n    int id;\n    float value;\n};\n\nint main() {\n    try {\n        // \u200b\u6253\u5f00\u200b\u73b0\u6709\u200b\u961f\u5217\u200b \n        message_queue mq(open_only, \"demo_queue\");\n\n        Message msg;\n        size_t recvd_size;\n        unsigned int priority;\n\n        // \u200b\u6301\u7eed\u200b\u63a5\u6536\u200b\u6d88\u606f\u200b \n        while(true) {\n            mq.receive(&amp;msg,  sizeof(msg), recvd_size, priority);\n            if(recvd_size == sizeof(msg)) {\n                std::cout &lt;&lt; \"Received: ID=\" &lt;&lt; msg.id  \n                          &lt;&lt; \" Value=\" &lt;&lt; msg.value  &lt;&lt; std::endl;\n            }\n        }\n    }\n    catch(interprocess_exception &amp;ex) {\n        message_queue::remove(\"demo_queue\");\n        std::cerr &lt;&lt; ex.what()  &lt;&lt; std::endl;\n        return 1;\n    }\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_5","title":"\u56db\u200b\u3001\u200b\u5173\u952e\u200b\u7279\u6027\u200b\u8bf4\u660e","text":"<p>\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u6027\u200b \u200b\u5185\u90e8\u200b\u4f7f\u7528\u200b\u4e92\u65a5\u200b\u9501\u200b\u4fdd\u8bc1\u200b\u539f\u5b50\u200b\u64cd\u4f5c\u200b \u200b\u652f\u6301\u200b\u591a\u200b\u751f\u4ea7\u8005\u200b/\u200b\u591a\u200b\u6d88\u8d39\u8005\u200b\u5e76\u53d1\u200b\u8bbf\u95ee\u200b \u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u70b9\u200b \u200b\u4f18\u5148\u200b\u4f7f\u7528\u200b\u56fa\u5b9a\u200b\u957f\u5ea6\u200b\u6d88\u606f\u200b\uff08\u200b\u907f\u514d\u200b\u5185\u5b58\u200b\u788e\u7247\u200b\uff09 \u200b\u5408\u7406\u200b\u8bbe\u7f6e\u200bmax_num_msg\u200b\u9632\u6b62\u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b \u200b\u8d44\u6e90\u7ba1\u7406\u200b // \u200b\u7a0b\u5e8f\u200b\u9000\u51fa\u200b\u65f6\u200b\u5220\u9664\u200b\u961f\u5217\u200b  message_queue::remove(\"demo_queue\"); \u200b\u6570\u636e\u7c7b\u578b\u200b\u5efa\u8bae\u200b \u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200bPOD\u200b\u7c7b\u578b\u200b\uff08\u200b\u7eaf\u65e7\u200b\u6570\u636e\u200b\uff09 \u200b\u590d\u6742\u200b\u5bf9\u8c61\u200b\u9700\u200b\u5e8f\u5217\u5316\u200b\u5904\u7406\u200b</p>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_6","title":"\u4e94\u200b\u3001\u200b\u8fd0\u884c\u200b\u9a8c\u8bc1","text":"<p>\u200b\u7ec8\u7aef\u200b1\uff1a\u200b\u542f\u52a8\u200b\u6d88\u8d39\u8005\u200b  ./consumer</p> <p>\u200b\u7ec8\u7aef\u200b2\uff1a\u200b\u542f\u52a8\u200b\u751f\u4ea7\u8005\u200b  ./producer</p> <p>\u200b\u8f93\u51fa\u200b\u793a\u4f8b\u200b </p> <p>Sent: ID=0 Value=0 </p> <p>Received: ID=0 Value=0 </p> <p>Sent: ID=1 Value=1.5 </p> <p>Received: ID=1 Value=1.5 </p> <p>...</p>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_7","title":"\u516d\u200b\u3001\u200b\u6269\u5c55\u200b\u5e94\u7528\u200b\u573a\u666f","text":"<p>\u200b\u5206\u5e03\u5f0f\u7cfb\u7edf\u200b\u72b6\u6001\u200b\u540c\u6b65\u200b \u200b\u65e5\u5fd7\u200b\u6536\u96c6\u200b\u7cfb\u7edf\u200b \u200b\u5b9e\u65f6\u200b\u6570\u636e\u5904\u7406\u200b\u6d41\u6c34\u7ebf\u200b \u200b\u8de8\u200b\u8fdb\u7a0b\u200b\u4efb\u52a1\u8c03\u5ea6\u200b \u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u53c2\u8003\u200bBoost\u200b\u5b98\u65b9\u200b\u6587\u6863\u200b\uff0c\u200b\u5efa\u8bae\u200b\u7ed3\u5408\u200bboost::serialization\u200b\u5e93\u200b\u5904\u7406\u200b\u590d\u6742\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5e8f\u5217\u5316\u200b\u9700\u6c42\u200b\u3002</p>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_8","title":"\u6027\u80fd\u200b\u4f18\u5316\u200b\u6280\u5de7","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u9488\u5bf9\u200bBoost\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u7684\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u6280\u5de7\u200b\uff0c\u200b\u7efc\u5408\u200b\u5b9e\u9645\u200b\u5f00\u53d1\u200b\u7ecf\u9a8c\u200b\u548c\u200b\u5206\u5e03\u5f0f\u7cfb\u7edf\u200b\u8bbe\u8ba1\u200b\u539f\u5219\u200b\u6574\u7406\u200b\u7684\u200b\u6838\u5fc3\u200b\u65b9\u6848\u200b\uff1a</p>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_9","title":"\u4e00\u200b\u3001\u200b\u6d88\u606f\u200b\u7ed3\u6784\u200b\u4f18\u5316","text":"<ul> <li>\u200b\u56fa\u5b9a\u200b\u957f\u5ea6\u200b\u6d88\u606f\u200b\u8bbe\u8ba1\u200b</li> </ul> <p>\u200b\u4f18\u5148\u200b\u4f7f\u7528\u200bPOD\uff08Plain Old Data\uff09\u200b\u7c7b\u578b\u200b\uff0c\u200b\u907f\u514d\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u200b</p> <pre><code>// \u200b\u4f18\u5316\u200b\u540e\u200b\u7684\u200b\u6d88\u606f\u200b\u7ed3\u6784\u200b\uff088\u200b\u5b57\u8282\u200b\u5bf9\u9f50\u200b\uff09\n#pragma pack(push, 1)\nstruct OptimizedMsg {\n    uint32_t id;\n    double timestamp;\n    float sensor_data[4]();\n};\n#pragma pack(pop)\n</code></pre> <p>\u200b\u7981\u7528\u200b\u865a\u200b\u51fd\u6570\u200b\u548c\u200b\u590d\u6742\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff0c\u200b\u51cf\u5c11\u200b\u5e8f\u5217\u5316\u200b\u5f00\u9500\u200b</p> <ul> <li>\u200b\u6d88\u606f\u538b\u7f29\u200b\u7b56\u7565\u200b</li> </ul> <p>\u200b\u5bf9\u200b\u5927\u578b\u200b\u6570\u636e\u200b\uff08&gt;1KB\uff09\u200b\u4f7f\u7528\u200bzlib\u200b\u538b\u7f29\u200b</p> <pre><code>boost::iostreams::filtering_ostream os;\nos.push(boost::iostreams::zlib_compressor()); \nos.push(boost::iostreams::back_inserter(compressed_data)); \n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_10","title":"\u4e8c\u200b\u3001\u200b\u961f\u5217\u200b\u914d\u7f6e\u200b\u8c03\u4f18","text":"<ul> <li>\u200b\u5bb9\u91cf\u200b\u53c2\u6570\u200b\u8bbe\u5b9a\u200b</li> </ul> <pre><code>// \u200b\u6839\u636e\u200b\u4e1a\u52a1\u200b\u8d1f\u8f7d\u200b\u8ba1\u7b97\u200b\u961f\u5217\u200b\u53c2\u6570\u200b\nconstexpr size_t MAX_MSG = 100000;  // \u200b\u5386\u53f2\u200b\u5cf0\u503c\u200b*1.5\nconstexpr size_t MSG_SIZE = sizeof(OptimizedMsg);\nmessage_queue mq(open_or_create, \"HighPerfQueue\", MAX_MSG, MSG_SIZE);\n</code></pre> <p>\u200b\u5efa\u8bae\u200b\u5185\u5b58\u200b\u7528\u91cf\u200b\uff1aMAX_MSG * MSG_SIZE \u2264 \u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u7684\u200b70%</p> <ul> <li>\u200b\u5b58\u50a8\u4ecb\u8d28\u200b\u4f18\u5316\u200b</li> </ul> <p>\u200b\u5c06\u200b\u5171\u4eab\u5185\u5b58\u200b\u6587\u4ef6\u200b\u6302\u8f7d\u200b\u5230\u200bRAM\u200b\u78c1\u76d8\u200b\uff1a</p> <pre><code>mount -t tmpfs -o size=512M tmpfs /dev/shm/boost_queue\n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_11","title":"\u4e09\u200b\u3001\u200b\u5e76\u53d1\u200b\u5904\u7406\u200b\u4f18\u5316","text":"<ul> <li>\u200b\u591a\u200b\u6d88\u8d39\u8005\u200b\u6a21\u5f0f\u200b</li> </ul> <pre><code>// \u200b\u542f\u52a8\u200b\u591a\u4e2a\u200b\u6d88\u8d39\u8005\u200b\u7ebf\u7a0b\u200b\nstd::vector&lt;std::thread&gt; consumers;\nfor(int i=0; i&lt;4; ++i){\n    consumers.emplace_back([]{ \n        message_queue mq(open_only, \"HighPerfQueue\");\n        // \u200b\u5904\u7406\u200b\u903b\u8f91\u200b\n    });\n}\n</code></pre> <p>\u200b\u6d88\u8d39\u8005\u200b\u6570\u91cf\u200b\u5efa\u8bae\u200b\uff1aCPU\u200b\u6838\u5fc3\u200b\u6570\u200b\u00d72 * \u200b\u6279\u91cf\u200b\u5904\u7406\u200b\u673a\u5236\u200b</p> <pre><code>// \u200b\u751f\u4ea7\u8005\u200b\u6279\u91cf\u200b\u53d1\u9001\u200b\uff08\u200b\u6bcf\u6279\u200b100\u200b\u6761\u200b\uff09\nstd::vector&lt;OptimizedMsg&gt; batch(100);\nmq.send(batch.data(),  batch.size()*sizeof(OptimizedMsg),  0);\n\n// \u200b\u6d88\u8d39\u8005\u200b\u6279\u91cf\u200b\u63a5\u6536\u200b\nOptimizedMsg bulk[50]();\nsize_t received = mq.try_receive(bulk,  sizeof(bulk), recvd_size, prio);\n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#io","title":"\u56db\u200b\u3001\u200b\u7f51\u7edc\u200b\u4e0e\u200bIO\u200b\u4f18\u5316","text":"<ul> <li>\u200b\u4f20\u8f93\u5c42\u200b\u8c03\u4f18\u200b</li> </ul> <p>\u200b\u542f\u7528\u200bNagle\u200b\u7b97\u6cd5\u200b\uff1a</p> <pre><code>setsockopt(fd, IPPROTO_TCP, TCP_NODELAY, &amp;flag, sizeof(int));\n</code></pre> <p>\u200b\u8bbe\u7f6e\u200bSocket\u200b\u7f13\u51b2\u533a\u200b\u5927\u5c0f\u200b\uff08\u200b\u5efa\u8bae\u200b4MB\u200b\u4ee5\u4e0a\u200b\uff09 * \u200b\u5f02\u6b65\u200bIO\u200b\u6a21\u5f0f\u200b</p> <pre><code>// \u200b\u4f7f\u7528\u200bBoost.Asio\u200b\u7ed3\u5408\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\nboost::asio::io_service io;\nboost::asio::post(io, [&amp;]{ mq.async_send(...);  });\n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_12","title":"\u4e94\u200b\u3001\u200b\u76d1\u63a7\u200b\u4e0e\u200b\u5bb9\u9519","text":"<ul> <li>\u200b\u5173\u952e\u200b\u6307\u6807\u200b\u76d1\u63a7\u200b</li> </ul> \u200b\u6307\u6807\u200b \u200b\u76d1\u63a7\u200b\u65b9\u5f0f\u200b \u200b\u5065\u5eb7\u200b\u9608\u503c\u200b \u200b\u961f\u5217\u200b\u586b\u5145\u200b\u7387\u200b mq.get_num_msg()/MAX_MSG &lt;80% \u200b\u6d88\u8d39\u200b\u5ef6\u8fdf\u200b \u200b\u6d88\u606f\u200b\u65f6\u95f4\u200b\u6233\u200b\u5dee\u503c\u200b &lt;100ms \u200b\u5931\u8d25\u200b\u91cd\u8bd5\u200b\u7387\u200b \u200b\u9519\u8bef\u200b\u8ba1\u6570\u5668\u200b\u7edf\u8ba1\u200b &lt;0.1% <ul> <li>\u200b\u6545\u969c\u200b\u6062\u590d\u200b\u673a\u5236\u200b</li> </ul> <pre><code>// \u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u6a21\u677f\u200b\ntry {\n    mq.send(...); \n} catch(boost::interprocess::interprocess_exception&amp; e) {\n    if(e.get_error_code()  == timeout) {\n        mq.timed_send(...);  // \u200b\u5e26\u200b\u8d85\u65f6\u200b\u91cd\u8bd5\u200b\n    }\n    // \u200b\u8bb0\u5f55\u200b\u9519\u8bef\u200b\u65e5\u5fd7\u200b\u5e76\u200b\u62a5\u8b66\u200b\n}\n</code></pre>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_13","title":"\u516d\u200b\u3001\u200b\u8fdb\u9636\u200b\u4f18\u5316\u200b\u65b9\u6848","text":"<ul> <li>NUMA\u200b\u67b6\u6784\u200b\u4f18\u5316\u200b</li> </ul> <p>\u200b\u901a\u8fc7\u200bnumactl\u200b\u7ed1\u5b9a\u200b\u961f\u5217\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u5230\u200b\u7279\u5b9a\u200bCPU\u200b\u8282\u70b9\u200b</p> <pre><code>numactl --cpunodebind=1 --membind=1 ./producer\n</code></pre> <p>RDMA\u200b\u52a0\u901f\u200b\uff08\u200b\u9700\u200bInfiniBand\u200b\u652f\u6301\u200b\uff09</p> <ul> <li>\u200b\u4f7f\u7528\u200bibv_post_send\u200b\u5b9e\u73b0\u200b\u96f6\u200b\u62f7\u8d1d\u200b\u4f20\u8f93\u200b</li> </ul> <p>\u200b\u6027\u80fd\u200b\u5bf9\u6bd4\u200b\u53c2\u8003\u200b</p> \u200b\u4f18\u5316\u200b\u524d\u200b \u200b\u4f18\u5316\u200b\u540e\u200b \u200b\u63d0\u5347\u200b\u5e45\u5ea6\u200b \u200b\u5355\u7ebf\u7a0b\u200b 2k msg/s \u200b\u56db\u200b\u7ebf\u7a0b\u200b 15k msg/s 650% 100\u03bcs\u200b\u5ef6\u8fdf\u200b 38\u03bcs\u200b\u5ef6\u8fdf\u200b 62%\u200b\u964d\u4f4e\u200b 70% CPU\u200b\u5360\u7528\u200b 45% CPU\u200b\u5360\u7528\u200b \u200b\u8d44\u6e90\u200b\u6548\u7387\u200b\u63d0\u5347\u200b <p>\u200b\u5b9e\u9645\u200b\u6d4b\u8bd5\u200b\u663e\u793a\u200b\uff0c\u200b\u7efc\u5408\u200b\u8fd0\u7528\u200b\u4e0a\u8ff0\u200b\u6280\u5de7\u200b\u53ef\u200b\u4f7f\u200bBoost\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u8fbe\u5230\u200b 80%\u200b\u7684\u200b\u786c\u4ef6\u200b\u7406\u8bba\u200b\u6027\u80fd\u200b\u4e0a\u9650\u200b\u3002\u200b\u5efa\u8bae\u200b\u6839\u636e\u200b\u5177\u4f53\u200b\u4e1a\u52a1\u200b\u573a\u666f\u200b\u9009\u62e9\u200b3-5\u200b\u4e2a\u200b\u91cd\u70b9\u200b\u4f18\u5316\u200b\u65b9\u5411\u200b\u5b9e\u65bd\u200b\u3002</p>"},{"location":"technology/Cpp/001-BoostMessageQueue/#_14","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/002-BoostSharedMemory/","title":"Boost\u200b\u5171\u4eab\u5185\u5b58","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200bBoost\u200b\u5171\u4eab\u5185\u5b58\u200b\u7684\u200b\u8be6\u7ec6\u200b\u4f7f\u7528\u6307\u5357\u200b\uff0c\u200b\u5305\u542b\u200b\u5b8c\u6574\u200bC++\u200b\u4ee3\u7801\u200b\u548c\u200b\u5206\u6b65\u200b\u89e3\u6790\u200b\uff0c\u200b\u6db5\u76d6\u200b\u57fa\u7840\u200b\u64cd\u4f5c\u200b\u548c\u200b\u9ad8\u7ea7\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\uff1a</p>"},{"location":"technology/Cpp/002-BoostSharedMemory/#boost_1","title":"\u4e00\u200b\u3001Boost\u200b\u5171\u4eab\u5185\u5b58\u200b\u6838\u5fc3\u200b\u7ec4\u4ef6","text":"<ul> <li>shared_memory_object \u200b\u7528\u4e8e\u200b\u521b\u5efa\u200b/\u200b\u6253\u5f00\u200b\u5171\u4eab\u5185\u5b58\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u9700\u200b\u6307\u5b9a\u200b\u540d\u79f0\u200b\u548c\u200b\u8bbf\u95ee\u200b\u6a21\u5f0f\u200b\u3002</li> </ul> <pre><code>#include &lt;boost/interprocess/shared_memory_object.hpp&gt; \nusing namespace boost::interprocess;\n\nshared_memory_object shm(\n    open_or_create,    // \u200b\u6a21\u5f0f\u200b\uff1a\u200b\u5b58\u5728\u200b\u5219\u200b\u6253\u5f00\u200b\uff0c\u200b\u5426\u5219\u200b\u521b\u5efa\u200b \n    \"MySharedMemory\",  // \u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\u540d\u79f0\u200b \n    read_write         // \u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\uff08read_only / read_write\uff09\n);\n</code></pre> <ul> <li>mapped_region \u200b\u5c06\u200b\u5171\u4eab\u5185\u5b58\u200b\u6620\u5c04\u200b\u5230\u200b\u8fdb\u7a0b\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u652f\u6301\u200b\u8bfb\u5199\u64cd\u4f5c\u200b\u3002</li> </ul> <pre><code>#include &lt;boost/interprocess/mapped_region.hpp&gt; \nmapped_region region(\n    shm,               // \u200b\u5171\u4eab\u5185\u5b58\u200b\u5bf9\u8c61\u200b \n    read_write,        // \u200b\u6620\u5c04\u200b\u6743\u9650\u200b \n    0,                 // \u200b\u504f\u79fb\u91cf\u200b\uff08\u200b\u9ed8\u8ba4\u200b0\uff09\n    1024               // \u200b\u6620\u5c04\u200b\u5927\u5c0f\u200b\uff08\u200b\u9ed8\u8ba4\u200b\u5168\u90e8\u200b\uff09\n);\n</code></pre>"},{"location":"technology/Cpp/002-BoostSharedMemory/#_1","title":"\u4e8c\u200b\u3001\u200b\u57fa\u7840\u200b\u4f7f\u7528\u200b\u4ee3\u7801\u200b\u793a\u4f8b","text":"<ul> <li>\u200b\u5199\u5165\u200b\u8fdb\u7a0b\u200b</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;boost/interprocess/shared_memory_object.hpp&gt; \n#include &lt;boost/interprocess/mapped_region.hpp&gt; \n\nint main() {\n    // 1. \u200b\u521b\u5efa\u200b\u6216\u200b\u6253\u5f00\u200b\u5171\u4eab\u5185\u5b58\u200b \n    shared_memory_object shm(\n        open_or_create, \n        \"MySharedMemory\", \n        read_write \n    );\n\n    // 2. \u200b\u8bbe\u7f6e\u200b\u5185\u5b58\u5927\u5c0f\u200b\uff08\u200b\u5fc5\u987b\u200b\u62e5\u6709\u200b\u5199\u200b\u6743\u9650\u200b\uff09\n    shm.truncate(1024);   // \u200b\u5206\u914d\u200b1024\u200b\u5b57\u8282\u200b \n\n    // 3. \u200b\u6620\u5c04\u200b\u5230\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b \n    mapped_region region(shm, read_write);\n\n    // 4. \u200b\u5199\u5165\u200b\u6570\u636e\u200b \n    char* data = static_cast&lt;char*&gt;(region.get_address()); \n    std::strcpy(data, \"Hello from Process A!\");\n\n    std::cout &lt;&lt; \"Data written to shared memory.\" &lt;&lt; std::endl;\n    // \u200b\u6ce8\u610f\u200b\uff1a\u200b\u5b9e\u9645\u200b\u5e94\u7528\u200b\u4e2d\u9700\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\uff08\u200b\u5982\u200b\u4e92\u65a5\u200b\u9501\u200b\uff09\n    return 0;\n}\n</code></pre> <ul> <li>\u200b\u8bfb\u53d6\u200b\u8fdb\u7a0b\u200b</li> </ul> <pre><code>int main() {\n    // 1. \u200b\u6253\u5f00\u200b\u5df2\u6709\u200b\u5171\u4eab\u5185\u5b58\u200b \n    shared_memory_object shm(open_only, \"MySharedMemory\", read_only);\n\n    // 2. \u200b\u6620\u5c04\u200b\u5185\u5b58\u200b \n    mapped_region region(shm, read_only);\n\n    // 3. \u200b\u8bfb\u53d6\u6570\u636e\u200b \n    char* data = static_cast&lt;char*&gt;(region.get_address()); \n    std::cout &lt;&lt; \"Received: \" &lt;&lt; data &lt;&lt; std::endl;\n\n    // 4. \u200b\u6e05\u7406\u200b\uff08\u200b\u901a\u5e38\u200b\u7531\u200b\u6700\u540e\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\uff09\n    shared_memory_object::remove(\"MySharedMemory\");\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/002-BoostSharedMemory/#stl","title":"\u4e09\u200b\u3001\u200b\u9ad8\u7ea7\u200b\u5e94\u7528\u200b\uff1a\u200b\u5171\u4eab\u5185\u5b58\u200b\u4e2d\u200b\u4f7f\u7528\u200bSTL\u200b\u5bb9\u5668","text":"<ul> <li>\u200b\u4f7f\u7528\u200b\u6258\u7ba1\u200b\u5185\u5b58\u200b\u548c\u200b\u81ea\u5b9a\u4e49\u200b\u5206\u914d\u5668\u200b</li> </ul> <pre><code>#include &lt;boost/interprocess/managed_shared_memory.hpp&gt; \n#include &lt;boost/interprocess/containers/vector.hpp&gt; \n#include &lt;boost/interprocess/allocators/allocator.hpp&gt; \n\ntypedef int ValueType;\ntypedef allocator&lt;ValueType, managed_shared_memory::segment_manager&gt; ShmemAllocator;\ntypedef vector&lt;ValueType, ShmemAllocator&gt; SharedVector;\n\nint main() {\n    // \u200b\u521b\u5efa\u200b\u6258\u7ba1\u200b\u5171\u4eab\u5185\u5b58\u200b\uff08\u200b\u81ea\u52a8\u200b\u7ba1\u7406\u200b\u751f\u547d\u5468\u671f\u200b\uff09\n    managed_shared_memory segment(open_or_create, \"ManagedSHM\", 65536);\n\n    // \u200b\u6784\u9020\u200b\u5171\u4eab\u200bvector \n    SharedVector* vec = segment.find_or_construct&lt;SharedVector&gt;(\"MyVector\") \n        (segment.get_allocator&lt;ValueType&gt;()); \n\n    // \u200b\u6dfb\u52a0\u200b\u6570\u636e\u200b \n    vec-&gt;push_back(42);\n    vec-&gt;push_back(88);\n\n    // \u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u53ef\u200b\u901a\u8fc7\u200b\u76f8\u540c\u200b\u540d\u79f0\u200b\u8bbf\u95ee\u200b\u8be5\u200bvector \n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/002-BoostSharedMemory/#_2","title":"\u56db\u200b\u3001\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\uff08\u200b\u4e92\u65a5\u200b\u9501\u200b\u793a\u4f8b\u200b\uff09","text":"<pre><code>#include &lt;boost/interprocess/sync/interprocess_mutex.hpp&gt; \n\nstruct SharedData {\n    interprocess_mutex mutex;\n    int counter = 0;\n};\n\n// \u200b\u5199\u5165\u200b\u8fdb\u7a0b\u200b \nmanaged_shared_memory segment(open_or_create, \"SyncSHM\", 4096);\nSharedData* data = segment.find_or_construct&lt;SharedData&gt;(\"Data\")(); \n\n{\n    scoped_lock&lt;interprocess_mutex&gt; lock(data-&gt;mutex); // \u200b\u81ea\u52a8\u200b\u52a0\u9501\u200b \n    data-&gt;counter++;\n}\n\n// \u200b\u8bfb\u53d6\u200b\u8fdb\u7a0b\u200b\u540c\u7406\u200b\uff0c\u200b\u901a\u8fc7\u200b\u4e92\u65a5\u200b\u9501\u200b\u4fdd\u8bc1\u200b\u539f\u5b50\u200b\u64cd\u4f5c\u200b \n</code></pre>"},{"location":"technology/Cpp/002-BoostSharedMemory/#_3","title":"\u4e94\u200b\u3001\u200b\u5173\u952e\u200b\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u200b\u751f\u547d\u5468\u671f\u200b\u7ba1\u7406\u200b</li> <li>\u200b\u4f7f\u7528\u200bshared_memory_object::remove()\u200b\u663e\u5f0f\u200b\u5220\u9664\u200b\u5171\u4eab\u5185\u5b58\u200b\u3002</li> <li>\u200b\u6258\u7ba1\u200b\u5185\u5b58\u200b\uff08managed_shared_memory\uff09\u200b\u81ea\u52a8\u200b\u7ba1\u7406\u200b\u5bf9\u8c61\u200b\u6784\u9020\u200b/\u200b\u6790\u6784\u200b\u3002</li> <li>\u200b\u907f\u514d\u200b\u76f4\u63a5\u200b\u5b58\u50a8\u200b\u6307\u9488\u200b\uff0c\u200b\u4f7f\u7528\u200boffset_ptr\u200b\u5904\u7406\u200b\u5730\u5740\u200b\u504f\u79fb\u200b\u3002</li> <li>\u200b\u9884\u200b\u5206\u914d\u200b\u8db3\u591f\u200b\u5185\u5b58\u200b\u907f\u514d\u200b\u9891\u7e41\u200b\u8c03\u6574\u200b\u3002</li> <li>\u200b\u51cf\u5c11\u200b\u9501\u200b\u7c92\u5ea6\u200b\u63d0\u5347\u200b\u5e76\u53d1\u200b\u6027\u80fd\u200b\u3002</li> </ul> <p>\u200b\u901a\u8fc7\u200b\u4e0a\u8ff0\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u53ef\u200b\u5b9e\u73b0\u200b\u8de8\u200b\u8fdb\u7a0b\u200b\u9ad8\u6548\u200b\u6570\u636e\u4ea4\u6362\u200b\uff0c\u200b\u9002\u7528\u200b\u4e8e\u200b\u9ad8\u9891\u200b\u901a\u4fe1\u200b\u573a\u666f\u200b\u5982\u5b9e\u200b\u65f6\u200b\u6570\u636e\u5904\u7406\u200b\u3002</p>"},{"location":"technology/Cpp/002-BoostSharedMemory/#_4","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/003-BoostFileLock/","title":"Boost\u200b\u6587\u4ef6\u200b\u9501","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200bBoost\u200b\u5e93\u4e2d\u200b\u6587\u4ef6\u200b\u4e92\u65a5\u200b\u9501\u200b\u4e0e\u200b\u5171\u4eab\u200b\u9501\u200b\u7684\u200b\u5b8c\u6574\u200b\u4f7f\u7528\u6307\u5357\u200b\uff0c\u200b\u6db5\u76d6\u200b\u9501\u200b\u5b57\u8282\u200b\u6bb5\u200b\u529f\u80fd\u200b\u53ca\u200bC++\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\uff1a</p>"},{"location":"technology/Cpp/003-BoostFileLock/#_1","title":"\u4e00\u200b\u3001\u200b\u9501\u200b\u7c7b\u578b\u200b\u4e0e\u200b\u6838\u5fc3\u200b\u7c7b\u5e93","text":"<p>Boost\u200b\u63d0\u4f9b\u200b\u4e24\u7ec4\u200b\u9501\u200b\u673a\u5236\u200b\uff1a\u200b\u7ebf\u7a0b\u200b\u540c\u6b65\u200b\u9501\u200b\uff08boost::mutex/boost::shared_mutex\uff09\u200b\u548c\u200b\u6587\u4ef6\u200b\u9501\u200b\uff08boost::interprocess::file_lock\uff09\u3002\u200b\u524d\u8005\u200b\u7528\u4e8e\u200b\u591a\u7ebf\u7a0b\u200b\u5171\u4eab\u5185\u5b58\u200b\uff0c\u200b\u540e\u8005\u200b\u7528\u4e8e\u200b\u8de8\u200b\u8fdb\u7a0b\u200b\u6587\u4ef6\u200b\u8bbf\u95ee\u63a7\u5236\u200b\u3002</p>"},{"location":"technology/Cpp/003-BoostFileLock/#_2","title":"\u4e8c\u200b\u3001\u200b\u6587\u4ef6\u200b\u4e92\u65a5\u200b\u9501\u200b\u5b9e\u73b0","text":"<ol> <li>\u200b\u57fa\u7840\u200b\u6587\u4ef6\u200b\u9501\u200b\uff08\u200b\u5168\u200b\u6587\u4ef6\u200b\u9501\u5b9a\u200b\uff09</li> </ol> <pre><code>#include &lt;boost/interprocess/sync/file_lock.hpp&gt; \n#include &lt;fstream&gt;\n\nint main() {\n    // \u200b\u521b\u5efa\u200b\u6216\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b \n    std::fstream file(\"test.dat\",  std::ios::out | std::ios::binary);\n\n    // \u200b\u521b\u5efa\u200b\u6587\u4ef6\u200b\u9501\u200b\u5bf9\u8c61\u200b \n    boost::interprocess::file_lock fl(\"test.dat\"); \n\n    // \u200b\u72ec\u5360\u200b\u9501\u5b9a\u200b\u6574\u4e2a\u200b\u6587\u4ef6\u200b\uff08\u200b\u4e92\u65a5\u200b\u9501\u200b\uff09\n    fl.lock();   // \u200b\u963b\u585e\u200b\u76f4\u5230\u200b\u83b7\u53d6\u200b\u9501\u200b\n    // \u200b\u6267\u884c\u200b\u5199\u200b\u64cd\u4f5c\u200b...\n    file &lt;&lt; \"Exclusive write operation\";\n    fl.unlock(); \n\n    // \u200b\u5c1d\u8bd5\u200b\u975e\u200b\u963b\u585e\u200b\u9501\u5b9a\u200b \n    if(fl.try_lock())  {\n        // \u200b\u4e34\u754c\u200b\u533a\u200b\u64cd\u4f5c\u200b...\n        fl.unlock(); \n    }\n}\n</code></pre> <ol> <li>\u200b\u5b57\u8282\u200b\u6bb5\u200b\u9501\u5b9a\u200b\uff08\u200b\u90e8\u5206\u200b\u6587\u4ef6\u200b\u9501\u5b9a\u200b\uff09</li> </ol> <pre><code>#include &lt;boost/interprocess/sync/file_lock.hpp&gt; \n#include &lt;iostream&gt;\n\nvoid lock_file_segment() {\n    boost::interprocess::file_lock fl(\"segment.dat\"); \n    const int offset = 0;  // \u200b\u8d77\u59cb\u200b\u504f\u79fb\u91cf\u200b\n    const int length = 512;// \u200b\u9501\u5b9a\u200b\u5b57\u8282\u6570\u200b\n\n    // \u200b\u9501\u5b9a\u200b\u6307\u5b9a\u200b\u5b57\u8282\u200b\u8303\u56f4\u200b \n    fl.lock_range(offset,  length);\n    std::cout &lt;&lt; \"Locked bytes \" &lt;&lt; offset &lt;&lt; \"-\" &lt;&lt; offset+length &lt;&lt; std::endl;\n\n    // \u200b\u64cd\u4f5c\u200b\u9501\u5b9a\u200b\u533a\u57df\u200b...\n\n    // \u200b\u89e3\u9501\u200b\u6307\u5b9a\u200b\u8303\u56f4\u200b \n    fl.unlock_range(offset,  length);\n}\n</code></pre>"},{"location":"technology/Cpp/003-BoostFileLock/#_3","title":"\u4e09\u200b\u3001\u200b\u5171\u4eab\u200b\u9501\u200b\uff08\u200b\u8bfb\u5199\u200b\u9501\u200b\uff09\u200b\u5b9e\u73b0","text":"<ol> <li>\u200b\u7ebf\u7a0b\u200b\u7ea7\u200b\u5171\u4eab\u200b\u9501\u200b\uff08\u200b\u5185\u5b58\u200b\u5171\u4eab\u200b\uff09</li> </ol> <pre><code>#include &lt;boost/thread/shared_mutex.hpp&gt; \nboost::shared_mutex rw_mutex;\n\n// \u200b\u8bfb\u200b\u64cd\u4f5c\u200b\uff08\u200b\u5171\u4eab\u200b\u9501\u200b\uff09\nvoid read_data() {\n    boost::shared_lock&lt;boost::shared_mutex&gt; lock(rw_mutex); // \u200b\u81ea\u52a8\u200b\u52a0\u200b\u5171\u4eab\u200b\u9501\u200b\n    // \u200b\u591a\u7ebf\u7a0b\u200b\u53ef\u200b\u5e76\u53d1\u200b\u6267\u884c\u200b\u8bfb\u200b\u64cd\u4f5c\u200b...\n}\n\n// \u200b\u5199\u200b\u64cd\u4f5c\u200b\uff08\u200b\u4e92\u65a5\u200b\u9501\u200b\uff09\nvoid write_data() {\n    boost::unique_lock&lt;boost::shared_mutex&gt; lock(rw_mutex); // \u200b\u81ea\u52a8\u200b\u52a0\u200b\u72ec\u5360\u200b\u9501\u200b\n    // \u200b\u4ec5\u200b\u5355\u7ebf\u7a0b\u200b\u53ef\u200b\u6267\u884c\u200b\u5199\u200b\u64cd\u4f5c\u200b...\n}\n</code></pre> <ol> <li>\u200b\u6587\u4ef6\u200b\u7ea7\u200b\u5171\u4eab\u200b\u9501\u200b\uff08\u200b\u9700\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u652f\u6301\u200b\uff09</li> </ol> <pre><code>#include &lt;boost/interprocess/sync/file_lock.hpp&gt; \n\nvoid shared_file_access() {\n    boost::interprocess::file_lock fl(\"shared.dat\"); \n\n    // \u200b\u83b7\u53d6\u200b\u5171\u4eab\u200b\u9501\u200b\uff08\u200b\u8bfb\u9501\u200b\uff09\n    if(fl.try_lock_sharable())  {\n        // \u200b\u591a\u200b\u8fdb\u7a0b\u200b\u53ef\u200b\u5e76\u53d1\u200b\u8bfb\u53d6\u200b...\n        fl.unlock_sharable(); \n    }\n\n    // \u200b\u83b7\u53d6\u200b\u72ec\u5360\u200b\u9501\u200b\uff08\u200b\u5199\u9501\u200b\uff09\n    fl.lock();  \n    // \u200b\u5355\u200b\u8fdb\u7a0b\u200b\u5199\u5165\u200b\u64cd\u4f5c\u200b...\n    fl.unlock(); \n}\n</code></pre>"},{"location":"technology/Cpp/003-BoostFileLock/#_4","title":"\u56db\u200b\u3001\u200b\u5173\u952e\u200b\u7279\u6027\u200b\u5bf9\u6bd4","text":"\u9501\u200b\u7c7b\u578b\u200b \u200b\u9002\u7528\u200b\u573a\u666f\u200b \u200b\u662f\u5426\u200b\u652f\u6301\u200b\u533a\u57df\u200b\u9501\u200b \u200b\u7ebf\u7a0b\u200b/\u200b\u8fdb\u7a0b\u200b\u7ea7\u522b\u200b mutex \u200b\u7ebf\u7a0b\u200b\u95f4\u200b\u5185\u5b58\u200b\u4e92\u65a5\u200b \u200b\u5426\u200b \u200b\u7ebf\u7a0b\u200b shared_mutex \u200b\u7ebf\u7a0b\u200b\u95f4\u200b\u8bfb\u5199\u200b\u5206\u79bb\u200b \u200b\u5426\u200b \u200b\u7ebf\u7a0b\u200b file_lock \u200b\u8fdb\u7a0b\u200b\u95f4\u200b\u6587\u4ef6\u200b\u8bbf\u95ee\u63a7\u5236\u200b \u200b\u662f\u200b \u200b\u8fdb\u7a0b"},{"location":"technology/Cpp/003-BoostFileLock/#_5","title":"\u4e94\u200b\u3001\u200b\u6700\u4f73\u200b\u5b9e\u8df5\u200b\u4e0e\u200b\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>RAII\u200b\u9501\u200b\u7ba1\u7406\u200b\uff1a\u200b\u4f18\u5148\u200b\u4f7f\u7528\u200block_guard/unique_lock\u200b\u7b49\u200bRAII\u200b\u5305\u88c5\u200b\u5668\u200b\uff0c\u200b\u907f\u514d\u200b\u5fd8\u8bb0\u200b\u89e3\u9501\u200b\u3002</li> </ul> <pre><code>boost::interprocess::file_lock fl(\"file\");\nboost::interprocess::scoped_lock&lt;boost::interprocess::file_lock&gt; guard(fl);\n</code></pre> <ul> <li>\u200b\u6b7b\u9501\u200b\u9884\u9632\u200b\uff1a\u200b\u907f\u514d\u200b\u5d4c\u5957\u200b\u9501\u5b9a\u200b\u4e0d\u540c\u200b\u987a\u5e8f\u200b\u7684\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff0c\u200b\u4f7f\u7528\u200btry_lock\u200b\u7cfb\u5217\u200b\u65b9\u6cd5\u200b\u8bbe\u7f6e\u200b\u8d85\u65f6\u200b\u3002</li> <li>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\uff1a\u200b\u7ec6\u7c92\u5ea6\u200b\u9501\u200b\uff08\u200b\u5982\u200b\u5b57\u8282\u200b\u6bb5\u9501\u200b\uff09\u200b\u53ef\u200b\u51cf\u5c11\u200b\u8d44\u6e90\u200b\u4e89\u7528\u200b\uff0c\u200b\u63d0\u5347\u200b\u5e76\u53d1\u200b\u6027\u80fd\u200b\u3002</li> <li>\u200b\u8de8\u5e73\u53f0\u200b\u5dee\u5f02\u200b\uff1a\u200b\u6587\u4ef6\u5171\u4eab\u200b\u9501\u200b\u5728\u200bWindows\u200b\u548c\u200bLinux\u200b\u4e0b\u200b\u7684\u200b\u884c\u4e3a\u200b\u53ef\u80fd\u200b\u4e0d\u540c\u200b\uff0c\u200b\u9700\u200b\u6d4b\u8bd5\u200b\u9a8c\u8bc1\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/003-BoostFileLock/#_6","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/","title":"\u83b7\u53d6\u200bCPU\u200b\u5360\u7528\u7387","text":""},{"location":"technology/Cpp/004-Get_CPU_Useage/#windows","title":"windows\u200b\u5e73\u53f0","text":"<p>\u200b\u5728\u200bWindows\u200b\u7cfb\u7edf\u200b\u4e0b\u200b\u4f7f\u7528\u200bC++\u200b\u83b7\u53d6\u200bCPU\u200b\u5360\u7528\u7387\u200b\uff0c\u200b\u5e38\u89c1\u200b\u65b9\u6cd5\u200b\u53ef\u200b\u5206\u4e3a\u200b\u7cfb\u7edf\u200b\u6574\u4f53\u200b\u5360\u7528\u7387\u200b\u548c\u200b\u7279\u5b9a\u200b\u8fdb\u7a0b\u200b\u5360\u7528\u7387\u200b\u4e24\u7c7b\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5177\u4f53\u200b\u5b9e\u73b0\u200b\u65b9\u6cd5\u200b\u53ca\u200b\u6838\u5fc3\u200b\u4ee3\u7801\u200b\u793a\u4f8b\u200b\uff1a</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#cpu_1","title":"\u4e00\u200b\u3001\u200b\u83b7\u53d6\u200b\u7cfb\u7edf\u200b\u6574\u4f53\u200bCPU\u200b\u5360\u7528\u7387","text":""},{"location":"technology/Cpp/004-Get_CPU_Useage/#1getsystemtimes","title":"\u65b9\u6cd5\u200b1\uff1a\u200b\u57fa\u4e8e\u200bGetSystemTimes\u200b\u51fd\u6570","text":"<p>\u200b\u539f\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200b\u8ba1\u7b97\u200b\u4e24\u6b21\u200b\u91c7\u6837\u200b\u7684\u200b\u7cfb\u7edf\u200b\u7a7a\u95f2\u200b\u65f6\u95f4\u200b\u3001\u200b\u5185\u6838\u200b\u65f6\u95f4\u200b\u548c\u200b\u7528\u6237\u200b\u65f6\u95f4\u200b\u5dee\u503c\u200b\uff0c\u200b\u7ed3\u5408\u200b\u516c\u5f0f\u200b\u5f97\u51fa\u200b\u6574\u4f53\u200bCPU\u200b\u4f7f\u7528\u7387\u200b\u3002</p> <pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\ndouble GetCpuUsage() {\n    FILETIME idleTime, kernelTime, userTime;\n    static FILETIME preIdleTime, preKernelTime, preUserTime;\n\n    GetSystemTimes(&amp;idleTime, &amp;kernelTime, &amp;userTime);\n\n    // \u200b\u8f6c\u6362\u200b\u4e3a\u200b64\u200b\u4f4d\u200b\u6574\u578b\u200b\n    ULONGLONG idle = (*(ULONGLONG*)&amp;idleTime) - (*(ULONGLONG*)&amp;preIdleTime);\n    ULONGLONG kernel = (*(ULONGLONG*)&amp;kernelTime) - (*(ULONGLONG*)&amp;preKernelTime);\n    ULONGLONG user = (*(ULONGLONG*)&amp;userTime) - (*(ULONGLONG*)&amp;preUserTime);\n\n    preIdleTime = idleTime;\n    preKernelTime = kernelTime;\n    preUserTime = userTime;\n\n    if (kernel + user == 0) return 0.0;\n    return ((kernel + user - idle) * 100.0) / (kernel + user);\n}\n\n// \u200b\u8c03\u7528\u200b\u793a\u4f8b\u200b\nint main() {\n    while (true) {\n        Sleep(1000); // \u200b\u95f4\u9694\u200b1\u200b\u79d2\u200b\u91c7\u6837\u200b\n        std::cout &lt;&lt; \"CPU Usage: \" &lt;&lt; GetCpuUsage() &lt;&lt; \"%\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre> <ul> <li>\u200b\u5173\u952e\u70b9\u200b\uff1a \u200b\u9700\u200b\u95f4\u9694\u200b\u4e00\u5b9a\u200b\u65f6\u95f4\u200b\uff08\u200b\u5982\u200b1\u200b\u79d2\u200b\uff09\u200b\u91c7\u6837\u200b\u4e24\u6b21\u200b\u6570\u636e\u200b\u3002 \u200b\u516c\u5f0f\u200b\uff1a(\u200b\u5185\u6838\u200b\u65f6\u95f4\u200b + \u200b\u7528\u6237\u200b\u65f6\u95f4\u200b - \u200b\u7a7a\u95f2\u200b\u65f6\u95f4\u200b) / (\u200b\u5185\u6838\u200b\u65f6\u95f4\u200b + \u200b\u7528\u6237\u200b\u65f6\u95f4\u200b)\u3002</li> </ul>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#2pdh","title":"\u65b9\u6cd5\u200b2\uff1a\u200b\u4f7f\u7528\u6027\u80fd\u200b\u8ba1\u6570\u5668\u200b\uff08PDH\u200b\u5e93\u200b\uff09","text":"<p>\u200b\u9002\u7528\u200b\u573a\u666f\u200b\uff1a\u200b\u9700\u8981\u200b\u9ad8\u7cbe\u5ea6\u200b\u6216\u200b\u5b9e\u65f6\u200b\u76d1\u63a7\u200b\u591a\u4e2a\u200b\u8ba1\u6570\u5668\u200b\u3002</p> <pre><code>#include &lt;windows.h&gt;\n#include &lt;pdh.h&gt;\n#pragma comment(lib, \"pdh.lib\") \n\ndouble GetCpuUsageByPdh() {\n    static PDH_HQUERY query;\n    static PDH_HCOUNTER counter;\n    static bool initialized = false;\n\n    if (!initialized) {\n        PdhOpenQuery(nullptr, 0, &amp;query);\n        PdhAddCounter(query, L\"\\\\Processor(_Total)\\\\% Processor Time\", 0, &amp;counter);\n        initialized = true;\n    }\n\n    PDH_FMT_COUNTERVALUE value;\n    PdhCollectQueryData(query);\n    PdhGetFormattedCounterValue(counter, PDH_FMT_DOUBLE, nullptr, &amp;value);\n    return value.doubleValue; \n}\n</code></pre> <ul> <li>\u200b\u4f18\u70b9\u200b\uff1a\u200b\u4e0e\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u5668\u200b\u6570\u636e\u200b\u4e00\u81f4\u200b\uff0c\u200b\u652f\u6301\u200b\u591a\u6838\u200b\u7edf\u8ba1\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#cpu_2","title":"\u4e8c\u200b\u3001\u200b\u83b7\u53d6\u200b\u7279\u5b9a\u200b\u8fdb\u7a0b\u200bCPU\u200b\u5360\u7528\u7387","text":"<p>\u200b\u539f\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200bGetProcessTimes\u200b\u83b7\u53d6\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5185\u6838\u200b\u548c\u200b\u7528\u6237\u200b\u65f6\u95f4\u200b\uff0c\u200b\u8ba1\u7b97\u200b\u4e24\u6b21\u200b\u91c7\u6837\u200b\u7684\u200b\u65f6\u95f4\u5dee\u200b\u5360\u200b\u6bd4\u200b\u3002</p> <pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nclass ProcessCpuMonitor {\npublic:\n    ProcessCpuMonitor(DWORD pid) : pid_(pid) {\n        hProcess_ = OpenProcess(PROCESS_QUERY_LIMITED_INFORMATION, FALSE, pid_);\n    }\n\n    ~ProcessCpuMonitor() {\n        if (hProcess_) CloseHandle(hProcess_);\n    }\n\n    float GetUsage() {\n        FILETIME createTime, exitTime, kernelTime, userTime;\n        if (!GetProcessTimes(hProcess_, &amp;createTime, &amp;exitTime, &amp;kernelTime, &amp;userTime))\n            return -1;\n\n        ULONGLONG currentKernel = *(ULONGLONG*)&amp;kernelTime;\n        ULONGLONG currentUser = *(ULONGLONG*)&amp;userTime;\n        ULONGLONG delta = (currentKernel + currentUser) - (lastKernel_ + lastUser_);\n\n        // \u200b\u8ba1\u7b97\u200b\u65f6\u95f4\u5dee\u200b\uff08\u200b\u5355\u4f4d\u200b\uff1a100\u200b\u7eb3\u79d2\u200b\uff09\n        ULONGLONG timePassed = GetTickCount64() - lastTick_;\n        lastTick_ = GetTickCount64();\n        lastKernel_ = currentKernel;\n        lastUser_ = currentUser;\n\n        if (timePassed == 0) return 0.0f;\n        return (delta / 10000.0f) / timePassed * 100.0f; // \u200b\u8f6c\u6362\u200b\u4e3a\u200b\u767e\u5206\u6bd4\u200b\n    }\n\nprivate:\n    DWORD pid_;\n    HANDLE hProcess_ = nullptr;\n    ULONGLONG lastKernel_ = 0, lastUser_ = 0;\n    ULONGLONG lastTick_ = 0;\n};\n\n// \u200b\u8c03\u7528\u200b\u793a\u4f8b\u200b\nint main() {\n    DWORD pid = 1234; // \u200b\u76ee\u6807\u200b\u8fdb\u7a0b\u200bID\n    ProcessCpuMonitor monitor(pid);\n    while (true) {\n        Sleep(1000);\n        std::cout &lt;&lt; \"Process CPU Usage: \" &lt;&lt; monitor.GetUsage() &lt;&lt; \"%\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre> <p>\u200b\u6ce8\u610f\u4e8b\u9879\u200b\uff1a</p> <p>\u200b\u9700\u4ee5\u200bPROCESS_QUERY_LIMITED_INFORMATION\u200b\u6743\u9650\u200b\u6253\u5f00\u200b\u8fdb\u7a0b\u200b\u3002 \u200b\u516c\u5f0f\u200b\uff1a(\u200b\u8fdb\u7a0b\u200b\u65f6\u95f4\u5dee\u200b / \u200b\u7cfb\u7edf\u200b\u65f6\u95f4\u5dee\u200b) * 100%\u3002</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_1","title":"\u4e09\u200b\u3001\u200b\u5e38\u89c1\u95ee\u9898","text":"<ul> <li>\u200b\u4e0e\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u5668\u200b\u6570\u636e\u200b\u4e0d\u200b\u4e00\u81f4\u200b\uff1a\u200b\u56e0\u200b\u91c7\u6837\u200b\u95f4\u9694\u200b\u548c\u200b\u8ba1\u7b97\u200b\u65b9\u5f0f\u200b\u5dee\u5f02\u200b\uff0c\u200b\u7ed3\u679c\u200b\u53ef\u80fd\u200b\u6709\u200b\u8f7b\u5fae\u200b\u504f\u5dee\u200b\u3002</li> <li>\u200b\u591a\u6838\u200bCPU\uff1a\u200b\u4e0a\u8ff0\u200b\u65b9\u6cd5\u200b\u8fd4\u56de\u200b\u7684\u200b\u662f\u200b\u6574\u4f53\u200b\u5229\u7528\u7387\u200b\uff0c\u200b\u5982\u9700\u200b\u5355\u6838\u200b\u6570\u636e\u200b\uff0c\u200b\u9700\u200b\u904d\u5386\u200b\u6bcf\u4e2a\u200b\u903b\u8f91\u200b\u5904\u7406\u5668\u200b\u3002</li> <li>\u200b\u6743\u9650\u200b\u95ee\u9898\u200b\uff1a\u200b\u83b7\u53d6\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u6570\u636e\u200b\u9700\u200b\u7ba1\u7406\u5458\u200b\u6743\u9650\u200b\uff0c\u200b\u8fdb\u7a0b\u200b\u7ea7\u200b\u6570\u636e\u200b\u5219\u200b\u4e0d\u200b\u9700\u8981\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#linux","title":"linux\u200b\u5e73\u53f0","text":"<p>\u200b\u5728\u200bLinux\u200b\u7cfb\u7edf\u200b\u4e0b\u200b\u4f7f\u7528\u200bC++\u200b\u83b7\u53d6\u200bCPU\u200b\u5360\u7528\u7387\u200b\uff0c\u200b\u4e3b\u8981\u200b\u901a\u8fc7\u200b\u89e3\u6790\u200b/proc/stat\u200b\u6587\u4ef6\u200b\u5b9e\u73b0\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5177\u4f53\u200b\u5b9e\u73b0\u200b\u65b9\u6cd5\u200b\u548c\u200b\u539f\u7406\u200b\u8bf4\u660e\u200b\uff1a</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_2","title":"\u4e00\u200b\u3001\u200b\u6838\u5fc3\u200b\u539f\u7406","text":"<p>Linux\u200b\u5185\u6838\u200b\u901a\u8fc7\u200b/proc/stat\u200b\u6587\u4ef6\u200b\u63d0\u4f9b\u200bCPU\u200b\u6d3b\u52a8\u200b\u7684\u200b\u7edf\u8ba1\u200b\u4fe1\u606f\u200b\u3002\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bb0\u5f55\u200b\u4e86\u200b\u4ece\u200b\u7cfb\u7edf\u542f\u52a8\u200b\u5230\u200b\u5f53\u524d\u200b\u65f6\u523b\u200b\uff0cCPU\u200b\u5728\u200b\u4e0d\u540c\u200b\u72b6\u6001\u200b\u4e0b\u200b\u7684\u200b\u7d2f\u8ba1\u200b\u65f6\u95f4\u200b\uff08\u200b\u5355\u4f4d\u200b\uff1a\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\uff09\uff0c\u200b\u5305\u62ec\u200b\uff1a</p> <p>user\uff1a\u200b\u7528\u6237\u200b\u6001\u200b\u6267\u884c\u200b\u65f6\u95f4\u200b nice\uff1a\u200b\u4f4e\u4f18\u5148\u7ea7\u200b\u7528\u6237\u200b\u6001\u200b\u65f6\u95f4\u200b system\uff1a\u200b\u5185\u6838\u200b\u6001\u200b\u6267\u884c\u200b\u65f6\u95f4\u200b idle\uff1a\u200b\u7a7a\u95f2\u200b\u65f6\u95f4\u200b iowait\uff1aI/O\u200b\u7b49\u5f85\u65f6\u95f4\u200b irq\uff1a\u200b\u786c\u4ef6\u200b\u4e2d\u65ad\u200b\u65f6\u95f4\u200b softirq\uff1a\u200b\u8f6f\u4ef6\u200b\u4e2d\u65ad\u200b\u65f6\u95f4\u200b \u200b\u901a\u8fc7\u200b\u4e24\u6b21\u200b\u91c7\u6837\u200b\u8fd9\u4e9b\u200b\u6570\u503c\u200b\uff0c\u200b\u8ba1\u7b97\u200b\u65f6\u95f4\u5dee\u200b\u5e76\u200b\u5206\u6790\u200bCPU\u200b\u5360\u7528\u7387\u200b\u3002</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_3","title":"\u4e8c\u200b\u3001\u200b\u5b9e\u73b0\u200b\u6b65\u9aa4","text":"<ol> <li>\u200b\u8bfb\u53d6\u200b /proc/stat \u200b\u6587\u4ef6\u200b</li> </ol> <pre><code>#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nstruct CpuTime {\n    unsigned long user, nice, system, idle, iowait, irq, softirq;\n};\n\nCpuTime readCpuStats() {\n    std::ifstream file(\"/proc/stat\");\n    std::string cpu_label;\n    CpuTime time;\n    file &gt;&gt; cpu_label &gt;&gt; time.user  &gt;&gt; time.nice  &gt;&gt; time.system  &gt;&gt; time.idle  \n         &gt;&gt; time.iowait  &gt;&gt; time.irq  &gt;&gt; time.softirq; \n    return time;\n}\n</code></pre> <ol> <li>\u200b\u8ba1\u7b97\u200bCPU\u200b\u4f7f\u7528\u7387\u200b \u200b\u901a\u8fc7\u200b\u4e24\u6b21\u200b\u91c7\u6837\u200b\u65f6\u95f4\u5dee\u200b\u8ba1\u7b97\u200bCPU\u200b\u5229\u7528\u7387\u200b\uff1a</li> </ol> <pre><code>double calculateCpuUsage(const CpuTime&amp; prev, const CpuTime&amp; curr) {\n    const unsigned long prev_total = prev.user  + prev.nice  + prev.system  + prev.idle  \n                                   + prev.iowait  + prev.irq  + prev.softirq; \n    const unsigned long curr_total = curr.user  + curr.nice  + curr.system  + curr.idle  \n                                   + curr.iowait  + curr.irq  + curr.softirq; \n    const unsigned long total_diff = curr_total - prev_total;\n\n    const unsigned long idle_diff = curr.idle  - prev.idle; \n    return (total_diff - idle_diff) * 100.0 / total_diff;\n}\n</code></pre> <ol> <li>\u200b\u5b8c\u6574\u200b\u793a\u4f8b\u200b</li> </ol> <pre><code>#include &lt;iostream&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n    CpuTime prev = readCpuStats();\n    sleep(1); // \u200b\u91c7\u6837\u200b\u95f4\u9694\u200b1\u200b\u79d2\u200b\n    CpuTime curr = readCpuStats();\n\n    double usage = calculateCpuUsage(prev, curr);\n    std::cout &lt;&lt; \"CPU Usage: \" &lt;&lt; usage &lt;&lt; \"%\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_4","title":"\u4e09\u200b\u3001\u200b\u6269\u5c55\u200b\u8bf4\u660e","text":"<p>\u200b\u591a\u6838\u200bCPU\u200b\u5904\u7406\u200b /proc/stat\u200b\u4e2d\u200b\u6bcf\u884c\u200b\u5bf9\u5e94\u200b\u4e00\u4e2a\u200bCPU\u200b\u6838\u5fc3\u200b\uff08\u200b\u5982\u200bcpu0, cpu1\uff09\uff0c\u200b\u9700\u200b\u5206\u522b\u200b\u89e3\u6790\u200b\u3002</p> <p>\u200b\u8fdb\u7a0b\u200b\u7ea7\u200bCPU\u200b\u5360\u7528\u7387\u200b \u200b\u901a\u8fc7\u200b\u8bfb\u53d6\u200b/proc/[pid]/stat\u200b\u83b7\u53d6\u200b\u8fdb\u7a0b\u200b\u7684\u200butime\uff08\u200b\u7528\u6237\u200b\u6001\u200b\u65f6\u95f4\u200b\uff09\u200b\u548c\u200bstime\uff08\u200b\u5185\u6838\u200b\u6001\u200b\u65f6\u95f4\u200b\uff09\uff0c\u200b\u7ed3\u5408\u200b\u7cfb\u7edf\u200b\u603b\u200b\u65f6\u95f4\u200b\u8ba1\u7b97\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u4e8b\u9879\u200b \u200b\u91c7\u6837\u200b\u95f4\u9694\u200b\u5efa\u8bae\u200b\u22651\u200b\u79d2\u200b\uff0c\u200b\u907f\u514d\u200b\u77ac\u65f6\u200b\u6ce2\u52a8\u200b\u3002 \u200b\u9700\u200b\u5904\u7406\u200b/proc\u200b\u6587\u4ef6\u200b\u8bfb\u53d6\u200b\u5931\u8d25\u200b\u7684\u200b\u60c5\u51b5\u200b\u3002 \u200b\u9ad8\u7cbe\u5ea6\u200b\u573a\u666f\u200b\u53ef\u200b\u4f7f\u7528\u200bclock_gettime\u200b\u66ff\u4ee3\u200bsleep\u3002</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_5","title":"\u56db\u200b\u3001\u200b\u4f18\u5316\u200b\u4e0e\u200b\u66ff\u4ee3\u200b\u65b9\u6848","text":"<p>\u200b\u4f7f\u7528\u200b sysinfo \u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b \u200b\u83b7\u53d6\u200b\u7c97\u7565\u200b\u7684\u200b\u7cfb\u7edf\u200b\u8d1f\u8f7d\u200b\u4fe1\u606f\u200b\uff0c\u200b\u4f46\u200b\u7cbe\u5ea6\u200b\u8f83\u200b\u4f4e\u200b\u3002</p> <p>\u200b\u8c03\u7528\u200b getrusage \u200b\u51fd\u6570\u200b \u200b\u9002\u7528\u200b\u4e8e\u200b\u7edf\u8ba1\u200b\u8fdb\u7a0b\u200b\u81ea\u8eab\u200b\u7684\u200bCPU\u200b\u4f7f\u7528\u200b\u60c5\u51b5\u200b\u3002</p> <p>\u200b\u7b2c\u4e09\u65b9\u200b\u5e93\u200b \u200b\u5982\u200blibstatgrab\u200b\u6216\u200bprocps-ng\u200b\u63d0\u4f9b\u200b\u5c01\u88c5\u200b\u63a5\u53e3\u200b\u3002</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#macos","title":"macOS\u200b\u5e73\u53f0","text":"<p>\u200b\u5728\u200b macOS \u200b\u7cfb\u7edf\u200b\u4e0b\u200b\u901a\u8fc7\u200b C++ \u200b\u83b7\u53d6\u200b CPU \u200b\u5360\u7528\u7387\u200b\uff0c\u200b\u9700\u8981\u200b\u8c03\u7528\u200b Mach \u200b\u5185\u6838\u200b API \u200b\u5b9e\u73b0\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u57fa\u4e8e\u200b \u3001\u3001 \u200b\u7b49\u200b\u8d44\u6599\u200b\u7684\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\uff1a</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_6","title":"\u4e00\u200b\u3001\u200b\u6838\u5fc3\u200b\u5b9e\u73b0\u200b\u539f\u7406","text":"<p>Mach API \u200b\u8c03\u7528\u200b macOS \u200b\u57fa\u4e8e\u200b Darwin \u200b\u5185\u6838\u200b\uff0c\u200b\u901a\u8fc7\u200b  \u200b\u63d0\u4f9b\u200b\u7684\u200b host_statistics \u200b\u51fd\u6570\u200b\u83b7\u53d6\u200b CPU \u200b\u65f6\u95f4\u200b\u7edf\u8ba1\u200b\u4fe1\u606f\u200b\u3002 CPU \u200b\u5360\u7528\u7387\u200b\u8ba1\u7b97\u200b \u200b\u9700\u200b\u4e24\u6b21\u200b\u91c7\u6837\u200b\u95f4\u9694\u200b\u5185\u200b\u7684\u200b CPU \u200b\u4f7f\u7528\u200b\u65f6\u95f4\u5dee\u200b\uff0c\u200b\u516c\u5f0f\u200b\uff1a CPU \u200b\u5360\u7528\u7387\u200b = (\u200b\u7528\u6237\u200b\u6001\u200b\u65f6\u95f4\u200b + \u200b\u5185\u6838\u200b\u6001\u200b\u65f6\u95f4\u200b) / (\u200b\u603b\u200b\u65f6\u95f4\u5dee\u200b) * 100%"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_7","title":"\u4e8c\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u793a\u4f8b","text":"<pre><code>#include &lt;mach/mach_host.h&gt;\n#include &lt;mach/processor_info.h&gt;\n#include &lt;unistd.h&gt;\n\ndouble get_cpu_usage() {\n    host_cpu_load_info_data_t cpuinfo;\n    mach_msg_type_number_t count = HOST_CPU_LOAD_INFO_COUNT;\n    kern_return_t kr = host_statistics(mach_host_self(), \n                                      HOST_CPU_LOAD_INFO,\n                                      (host_info_t)&amp;cpuinfo,\n                                      &amp;count);\n    if (kr != KERN_SUCCESS) return -1.0;\n\n    // \u200b\u7b2c\u4e00\u6b21\u200b\u91c7\u6837\u200b\n    uint64_t total_user_prev = cpuinfo.cpu_ticks[CPU_STATE_USER]; \n    uint64_t total_sys_prev = cpuinfo.cpu_ticks[CPU_STATE_SYSTEM]; \n    uint64_t total_idle_prev = cpuinfo.cpu_ticks[CPU_STATE_IDLE]; \n    uint64_t total_used_prev = total_user_prev + total_sys_prev;\n\n    // \u200b\u7b49\u5f85\u200b 1 \u200b\u79d2\u200b\u540e\u200b\u518d\u6b21\u200b\u91c7\u6837\u200b\n    sleep(1);\n    kr = host_statistics(mach_host_self(),\n                        HOST_CPU_LOAD_INFO,\n                        (host_info_t)&amp;cpuinfo,\n                        &amp;count);\n    if (kr != KERN_SUCCESS) return -1.0;\n\n    uint64_t total_user = cpuinfo.cpu_ticks[CPU_STATE_USER]; \n    uint64_t total_sys = cpuinfo.cpu_ticks[CPU_STATE_SYSTEM]; \n    uint64_t total_idle = cpuinfo.cpu_ticks[CPU_STATE_IDLE]; \n    uint64_t total_used = total_user + total_sys;\n\n    // \u200b\u8ba1\u7b97\u200b\u5dee\u503c\u200b\n    uint64_t used_diff = total_used - total_used_prev;\n    uint64_t idle_diff = total_idle - total_idle_prev;\n    uint64_t total_diff = used_diff + idle_diff;\n\n    return (total_diff == 0) ? 0 : (used_diff * 100.0) / total_diff;\n}\n</code></pre>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_8","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u70b9\u200b\u8bf4\u660e","text":"<p>\u200b\u591a\u6838\u200b CPU \u200b\u5904\u7406\u200b \u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u200b\u8fd4\u56de\u200b\u7684\u200b\u662f\u200b \u200b\u6240\u6709\u200b CPU \u200b\u6838\u5fc3\u200b\u7684\u200b\u5e73\u5747\u200b\u5360\u7528\u7387\u200b\u3002\u200b\u82e5\u9700\u200b\u83b7\u53d6\u200b\u5355\u6838\u200b\u6570\u636e\u200b\uff0c\u200b\u9700\u200b\u901a\u8fc7\u200b host_processor_info \u200b\u51fd\u6570\u200b\u904d\u5386\u200b\u6bcf\u4e2a\u200b\u6838\u5fc3\u200b \u3002 \u200b\u65f6\u95f4\u200b\u95f4\u9694\u200b\u9009\u62e9\u200b \u200b\u4e24\u6b21\u200b\u91c7\u6837\u200b\u95f4\u9694\u200b\u5efa\u8bae\u200b 1 \u200b\u79d2\u200b\uff08sleep(1)\uff09\uff0c\u200b\u95f4\u9694\u200b\u8fc7\u200b\u77ed\u4f1a\u200b\u5bfc\u81f4\u200b\u8bef\u5dee\u200b\u589e\u5927\u200b\u3002 \u200b\u9519\u8bef\u5904\u7406\u200b \u200b\u68c0\u67e5\u200b host_statistics \u200b\u8fd4\u56de\u503c\u200b\u662f\u5426\u200b\u4e3a\u200b KERN_SUCCESS\uff0c\u200b\u907f\u514d\u200b\u56e0\u200b\u6743\u9650\u200b\u95ee\u9898\u200b\u6216\u200b API \u200b\u8c03\u7528\u200b\u5931\u8d25\u200b\u5bfc\u81f4\u200b\u5d29\u6e83\u200b\u3002</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_9","title":"\u56db\u200b\u3001\u200b\u6269\u5c55\u200b\u529f\u80fd","text":"<p>\u200b\u83b7\u53d6\u200b\u5355\u200b\u8fdb\u7a0b\u200b CPU \u200b\u5360\u7528\u200b \u200b\u7ed3\u5408\u200b proc_pidinfo \u200b\u51fd\u6570\u200b\u548c\u200b PROC_PIDTASKINFO \u200b\u53c2\u6570\u200b\uff0c\u200b\u53ef\u200b\u83b7\u53d6\u200b\u6307\u5b9a\u200b\u8fdb\u7a0b\u200b\u7684\u200b CPU \u200b\u65f6\u95f4\u200b \u3002 \u200b\u5b9e\u65f6\u200b\u76d1\u63a7\u200b \u200b\u901a\u8fc7\u200b\u591a\u7ebf\u7a0b\u200b\u5faa\u73af\u200b\u8c03\u7528\u200b\u4e0a\u8ff0\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b9e\u73b0\u200b\u52a8\u6001\u200b\u66f2\u7ebf\u200b\u7ed8\u5236\u200b\uff08\u200b\u53c2\u8003\u200b \u200b\u4e2d\u200b\u7684\u200b ImGui \u200b\u65b9\u6848\u200b\uff09\u3002</p>"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_10","title":"\u4e94\u200b\u3001\u200b\u7f16\u8bd1\u200b\u6ce8\u610f\u4e8b\u9879","text":"<p>\u200b\u5934\u6587\u4ef6\u200b\u4f9d\u8d56\u200b\uff1a\u200b\u9700\u200b\u5305\u542b\u200b  \u200b\u548c\u200b  \u200b\u94fe\u63a5\u200b\u6846\u67b6\u200b\uff1a\u200b\u6dfb\u52a0\u200b -framework IOKit \u200b\u7f16\u8bd1\u200b\u9009\u9879\u200b \u200b\u793a\u4f8b\u200b\uff1aclang++ -framework IOKit cpu_usage.cpp  -o cpu_usage"},{"location":"technology/Cpp/004-Get_CPU_Useage/#_11","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/005-Get_Mem_Useage/","title":"\u83b7\u53d6\u200b\u5185\u5b58\u200b\u5360\u7528\u7387","text":""},{"location":"technology/Cpp/005-Get_Mem_Useage/#windows","title":"windows\u200b\u5e73\u53f0","text":"<p>\u200b\u5728\u200bWindows\u200b\u73af\u5883\u200b\u4e0b\u200b\u4f7f\u7528\u200bC++\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u5206\u522b\u200b\u9488\u5bf9\u200b\u7cfb\u7edf\u200b\u6574\u4f53\u200b\u548c\u200b\u7279\u5b9a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5185\u5b58\u200b\u76d1\u63a7\u200b\uff1a</p>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_2","title":"\u4e00\u200b\u3001\u200b\u83b7\u53d6\u200b\u7cfb\u7edf\u200b\u6574\u4f53\u200b\u5185\u5b58\u200b\u5360\u7528\u7387","text":"<p>\u200b\u6838\u5fc3\u200b\u51fd\u6570\u200b\uff1aGlobalMemoryStatusEx \u200b\u6b65\u9aa4\u200b\uff1a</p> <ul> <li>\u200b\u5b9a\u4e49\u200bMEMORYSTATUSEX\u200b\u7ed3\u6784\u200b\u4f53\u200b\u5e76\u200b\u521d\u59cb\u5316\u200bdwLength\u200b\u5b57\u200b\u6bb5\u200b</li> <li>\u200b\u8c03\u7528\u51fd\u6570\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u4fe1\u606f\u200b</li> <li>\u200b\u901a\u8fc7\u200bdwMemoryLoad\u200b\u5b57\u200b\u6bb5\u200b\u76f4\u63a5\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b\u767e\u5206\u6bd4\u200b</li> </ul> <pre><code>#include &lt;windows.h&gt;\n\nMEMORYSTATUSEX memInfo;\nmemInfo.dwLength  = sizeof(memInfo);\nGlobalMemoryStatusEx(&amp;memInfo);\n\nDWORD memoryUsage = memInfo.dwMemoryLoad;  // \u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b\u767e\u5206\u6bd4\u200b\n</code></pre>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_3","title":"\u4e8c\u200b\u3001\u200b\u83b7\u53d6\u200b\u7279\u5b9a\u200b\u8fdb\u7a0b\u200b\u5185\u5b58\u200b\u5360\u7528","text":"<p>\u200b\u6838\u5fc3\u200b\u51fd\u6570\u200b\uff1aGetProcessMemoryInfo</p> <p>\u200b\u6b65\u9aa4\u200b\uff1a * \u200b\u83b7\u53d6\u200b\u76ee\u6807\u200b\u8fdb\u7a0b\u200b\u53e5\u67c4\u200b\uff08\u200b\u5982\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u7528\u200bGetCurrentProcess()\uff09 * \u200b\u5b9a\u4e49\u200bPROCESS_MEMORY_COUNTERS\u200b\u7ed3\u6784\u200b\u4f53\u200b * \u200b\u8c03\u7528\u51fd\u6570\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u4fe1\u606f\u200b</p> <pre><code>#include &lt;windows.h&gt;\n#include &lt;psapi.h&gt;\n\nPROCESS_MEMORY_COUNTERS pmc;\nif (GetProcessMemoryInfo(GetCurrentProcess(), &amp;pmc, sizeof(pmc))) {\n    SIZE_T usedMem = pmc.WorkingSetSize; // \u200b\u8fdb\u7a0b\u200b\u5360\u7528\u200b\u7684\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\n    SIZE_T totalMem = /* \u200b\u603b\u200b\u5185\u5b58\u200b\u9700\u200b\u901a\u8fc7\u200bGlobalMemoryStatusEx\u200b\u83b7\u53d6\u200b */;\n    double ratio = (usedMem * 100.0) / totalMem; // \u200b\u8ba1\u7b97\u200b\u5360\u7528\u7387\u200b\n}\n</code></pre>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_4","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u6ce8\u610f\u4e8b\u9879","text":"<p>\u200b\u7ed3\u6784\u200b\u4f53\u200b\u521d\u59cb\u5316\u200b\uff1a \u200b\u4f7f\u7528\u200bMEMORYSTATUSEX\u200b\u6216\u200bPROCESS_MEMORY_COUNTERS\u200b\u65f6\u200b\uff0c\u200b\u5fc5\u987b\u200b\u6b63\u786e\u200b\u521d\u59cb\u5316\u200bdwLength\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u5426\u5219\u200b\u51fd\u6570\u8c03\u7528\u200b\u5931\u8d25\u200b\u3002</p> <p>\u200b\u6743\u9650\u200b\u95ee\u9898\u200b\uff1a \u200b\u8bbf\u95ee\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u5185\u5b58\u200b\u9700\u200bPROCESS_QUERY_INFORMATION\u200b\u548c\u200bPROCESS_VM_READ\u200b\u6743\u9650\u200b\uff0c\u200b\u53ef\u200b\u901a\u8fc7\u200bOpenProcess\u200b\u51fd\u6570\u200b\u83b7\u53d6\u200b\u3002</p>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_5","title":"\u56db\u200b\u3001\u200b\u6269\u5c55\u200b\u5e94\u7528\u200b\u573a\u666f","text":"<ul> <li>\u200b\u5b9e\u65f6\u200b\u76d1\u63a7\u200b\uff1a\u200b\u7ed3\u5408\u200b\u5b9a\u65f6\u5668\u200b\u5b9a\u671f\u200b\u8c03\u7528\u200b\u4e0a\u8ff0\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b9e\u73b0\u200b\u52a8\u6001\u5185\u5b58\u200b\u76d1\u63a7\u200b\u754c\u9762\u200b</li> <li>\u200b\u6027\u80fd\u200b\u5206\u6790\u200b\uff1a\u200b\u4e0e\u200bCPU\u200b\u5360\u7528\u7387\u200b\uff08GetSystemTimes\uff09\u3001\u200b\u78c1\u76d8\u200bI/O\u200b\u7b49\u200b\u6307\u6807\u200b\u7ed3\u5408\u200b\uff0c\u200b\u6784\u5efa\u200b\u5b8c\u6574\u200b\u7684\u200b\u8d44\u6e90\u200b\u76d1\u63a7\u200b\u7cfb\u7edf\u200b</li> <li>\u200b\u670d\u52a1\u7aef\u200b\u4f18\u5316\u200b\uff1a\u200b\u901a\u8fc7\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b\u6570\u636e\u200b\u8c03\u6574\u200b\u670d\u52a1\u200b\u8d44\u6e90\u5206\u914d\u200b\u7b56\u7565\u200b</li> </ul>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#linux","title":"linux\u200b\u5e73\u53f0","text":"<p>\u200b\u5728\u200bLinux\u200b\u73af\u5883\u200b\u4e0b\u200b\u4f7f\u7528\u200bC++\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b\uff0c\u200b\u4e3b\u8981\u200b\u901a\u8fc7\u200b\u8bfb\u53d6\u200b\u7cfb\u7edf\u6587\u4ef6\u200b\u6216\u200b\u8c03\u7528\u200b\u7cfb\u7edf\u200b\u63a5\u53e3\u200b\u5b9e\u73b0\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u51e0\u79cd\u200b\u5e38\u7528\u200b\u65b9\u6cd5\u200b\u53ca\u200b\u5b9e\u73b0\u200b\u793a\u4f8b\u200b\uff1a</p>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#procmeminfo","title":"\u65b9\u6cd5\u200b\u4e00\u200b\uff1a\u200b\u89e3\u6790\u200b /proc/meminfo \u200b\u6587\u4ef6","text":"<p>\u200b\u7cfb\u7edf\u200b\u5185\u5b58\u200b\u4fe1\u606f\u200b\u5b58\u50a8\u200b\u5728\u200b /proc/meminfo \u200b\u4e2d\u200b\uff0c\u200b\u901a\u8fc7\u200b\u89e3\u6790\u200b\u8be5\u200b\u6587\u4ef6\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u603b\u91cf\u200b\u548c\u200b\u7a7a\u95f2\u200b\u91cf\u200b\uff1a</p> <pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;unordered_map&gt;\n\nfloat get_memory_usage() {\n    std::ifstream meminfo(\"/proc/meminfo\");\n    std::unordered_map&lt;std::string, long&gt; mem_data;\n    std::string key;\n    long value;\n\n    while (meminfo &gt;&gt; key &gt;&gt; value) {\n        meminfo.ignore(256,  '\\n'); // \u200b\u8df3\u8fc7\u200b\u5355\u4f4d\u200b\uff08\u200b\u5982\u200b kB\uff09\n        mem_data[key] = value;\n    }\n\n    long total = mem_data[\"MemTotal:\"];\n    long available = mem_data[\"MemAvailable:\"]; // \u200b\u82e5\u200b\u7cfb\u7edf\u200b\u4e0d\u200b\u652f\u6301\u200b MemAvailable\uff0c\u200b\u53ef\u7528\u200b MemFree + Buffers + Cached \u200b\u66ff\u4ee3\u200b\n    long used = total - available;\n    return (used * 100.0) / total;\n}\n</code></pre> <p>\u200b\u8bf4\u660e\u200b\uff1a</p> <p>MemAvailable \u200b\u662f\u200b\u66f4\u200b\u51c6\u786e\u200b\u7684\u200b\u53ef\u7528\u5185\u5b58\u200b\u6307\u6807\u200b\uff08\u200b\u9700\u200b\u5185\u6838\u200b3.14+\uff09\uff0c\u200b\u5426\u5219\u200b\u9700\u200b\u8ba1\u7b97\u200b MemFree + Buffers + Cached \u3002 \u200b\u5355\u4f4d\u200b\u4e3a\u200b KB\uff0c\u200b\u8ba1\u7b97\u200b\u65f6\u200b\u65e0\u9700\u200b\u8f6c\u6362\u200b\u3002</p>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#sysinfo","title":"\u65b9\u6cd5\u200b\u4e8c\u200b\uff1a\u200b\u4f7f\u7528\u200b sysinfo() \u200b\u7cfb\u7edf\u200b\u8c03\u7528","text":"<p>\u200b\u901a\u8fc7\u200b sysinfo \u200b\u51fd\u6570\u200b\u76f4\u63a5\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u4fe1\u606f\u200b\uff1a</p> <pre><code>#include &lt;sys/sysinfo.h&gt;\n\nfloat get_memory_usage() {\n    struct sysinfo info;\n    sysinfo(&amp;info);\n\n    long total = info.totalram  * info.mem_unit; \n    long free = info.freeram  * info.mem_unit; \n    long used = total - free;\n\n    return (used * 100.0) / total;\n}\n</code></pre> <p>\u200b\u8bf4\u660e\u200b\uff1a * sysinfo() \u200b\u63d0\u4f9b\u200b\u66f4\u200b\u76f4\u63a5\u200b\u7684\u200b\u7cfb\u7edf\u200b\u5185\u5b58\u200b\u7edf\u8ba1\u200b\uff0c\u200b\u65e0\u9700\u200b\u6587\u4ef6\u200b\u89e3\u6790\u200b \u3002 * mem_unit \u200b\u662f\u200b\u5185\u5b58\u200b\u5355\u4f4d\u200b\uff08\u200b\u901a\u5e38\u200b\u4e3a\u200b\u5b57\u8282\u200b\uff09\uff0c\u200b\u9700\u200b\u624b\u52a8\u200b\u8ba1\u7b97\u200b\u603b\u200b\u5185\u5b58\u200b\u548c\u200b\u7a7a\u95f2\u200b\u5185\u5b58\u200b\u3002 * \u200b\u6269\u5c55\u200b\uff1a\u200b\u83b7\u53d6\u200b\u8fdb\u7a0b\u200b\u5185\u5b58\u200b\u5360\u7528\u200b\uff08\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\uff09 * \u200b\u82e5\u9700\u200b\u83b7\u53d6\u200b\u7279\u5b9a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5185\u5b58\u200b\u5360\u7528\u200b\uff0c\u200b\u53ef\u200b\u89e3\u6790\u200b /proc/[pid]/status\uff1a</p> <pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nlong get_process_memory(int pid) {\n    std::ifstream status(\"/proc/\" + std::to_string(pid) + \"/status\");\n    std::string line;\n\n    while (std::getline(status, line)) {\n        if (line.find(\"VmRSS\")  != std::string::npos) { // \u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u5360\u7528\u200b\n            long mem_kb;\n            sscanf(line.c_str(), \"VmRSS: %ld kB\", &amp;mem_kb);\n            return mem_kb * 1024; // \u200b\u8f6c\u6362\u200b\u4e3a\u200b\u5b57\u8282\u200b\n        }\n    }\n    return -1;\n}\n</code></pre> <p>\u200b\u8bf4\u660e\u200b\uff1a</p> <p>VmRSS \u200b\u8868\u793a\u200b\u8fdb\u7a0b\u200b\u5b9e\u9645\u200b\u4f7f\u7528\u200b\u7684\u200b\u7269\u7406\u200b\u5185\u5b58\u200b \u3002 \u200b\u5355\u4f4d\u200b\u4e3a\u200b KB\uff0c\u200b\u9700\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u5b57\u8282\u200b\u3002 \u200b\u6ce8\u610f\u4e8b\u9879\u200b * \u200b\u6743\u9650\u200b\u95ee\u9898\u200b\uff1a\u200b\u9700\u200b\u786e\u4fdd\u200b\u7a0b\u5e8f\u200b\u6709\u200b\u6743\u9650\u200b\u8bfb\u53d6\u200b /proc \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u6587\u4ef6\u200b\u3002 * \u200b\u5b9e\u65f6\u6027\u200b\uff1a/proc/meminfo \u200b\u548c\u200b sysinfo() \u200b\u7684\u200b\u6570\u636e\u200b\u662f\u200b\u52a8\u6001\u200b\u66f4\u65b0\u200b\u7684\u200b\u3002 * \u200b\u5355\u4f4d\u200b\u8f6c\u6362\u200b\uff1a\u200b\u4e0d\u540c\u200b\u65b9\u6cd5\u200b\u53ef\u80fd\u200b\u6d89\u53ca\u200b KB \u200b\u6216\u200b\u5b57\u8282\u200b\u5355\u4f4d\u200b\uff0c\u200b\u9700\u200b\u7edf\u4e00\u200b\u8ba1\u7b97\u200b\u3002</p>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#macos","title":"macOS\u200b\u5e73\u53f0","text":"<p>\u200b\u5728\u200b macOS \u200b\u73af\u5883\u200b\u4e0b\u200b\u901a\u8fc7\u200b C++ \u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b\uff0c\u200b\u9700\u8981\u200b\u7ed3\u5408\u200b\u7cfb\u7edf\u200b\u7ea7\u200b API \u200b\u548c\u200b Mach \u200b\u5185\u6838\u200b\u63a5\u53e3\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5177\u4f53\u200b\u5b9e\u73b0\u200b\u65b9\u6cd5\u200b\u53ca\u200b\u6838\u5fc3\u200b\u77e5\u8bc6\u70b9\u200b\u603b\u7ed3\u200b\uff1a</p>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_6","title":"\u4e00\u200b\u3001\u200b\u7cfb\u7edf\u200b\u6574\u4f53\u200b\u5185\u5b58\u200b\u5360\u7528\u7387","text":"<p>\u200b\u5b9e\u73b0\u200b\u539f\u7406\u200b * \u200b\u901a\u8fc7\u200b sysctl \u200b\u548c\u200b host_statistics \u200b\u63a5\u53e3\u200b\u83b7\u53d6\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u603b\u91cf\u200b\u548c\u200b\u5df2\u200b\u4f7f\u7528\u91cf\u200b\uff1a</p> <pre><code>#include &lt;mach/mach_host.h&gt;\n#include &lt;sys/sysctl.h&gt;\n\n// \u200b\u83b7\u53d6\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u603b\u91cf\u200b\nuint64_t get_total_memory() {\n    int mib[2]()  = {CTL_HW, HW_MEMSIZE};\n    uint64_t total_mem = 0;\n    size_t len = sizeof(total_mem);\n    sysctl(mib, 2, &amp;total_mem, &amp;len, NULL, 0);\n    return total_mem;\n}\n\n// \u200b\u8ba1\u7b97\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b\nfloat get_memory_usage() {\n    vm_size_t page_size;\n    mach_port_t host_port = mach_host_self();\n    mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);\n    vm_statistics_data_t vm_stat;\n\n    host_page_size(host_port, &amp;page_size);\n    host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size);\n\n    uint64_t total_mem = get_total_memory();\n    uint64_t used_mem = (vm_stat.active_count  + vm_stat.wire_count)  * page_size;\n    return (float)used_mem / total_mem * 100.0f;\n}\n</code></pre>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_7","title":"\u4e8c\u200b\u3001\u200b\u8fdb\u7a0b\u200b\u7ea7\u200b\u5185\u5b58\u200b\u5360\u7528","text":"<p>\u200b\u5b9e\u73b0\u200b\u539f\u7406\u200b * \u200b\u901a\u8fc7\u200b Mach \u200b\u4efb\u52a1\u200b\u63a5\u53e3\u200b\u83b7\u53d6\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u9a7b\u7559\u200b\u5185\u5b58\u200b\uff08RSS\uff09\uff1a</p> <pre><code>#include &lt;mach/mach_init.h&gt;\n#include &lt;mach/task.h&gt;\n\nsize_t get_process_memory_usage() {\n    task_t task = mach_task_self();\n    struct mach_task_basic_info info;\n    mach_msg_type_number_t count = MACH_TASK_BASIC_INFO_COUNT;\n\n    if (task_info(task, MACH_TASK_BASIC_INFO, (task_info_t)&amp;info, &amp;count) == KERN_SUCCESS) {\n        return info.resident_size;  // \u200b\u8fd4\u56de\u200b\u5355\u4f4d\u200b\u4e3a\u200b\u5b57\u8282\u200b\n    }\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_8","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u77e5\u8bc6\u70b9","text":"<ul> <li> <p>Mach \u200b\u5185\u6838\u200b\u63a5\u53e3\u200b macOS \u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\u57fa\u4e8e\u200b Mach \u200b\u5fae\u5185\u6838\u200b\uff0c\u200b\u9700\u200b\u4f7f\u7528\u200b mach_host.h \u200b\u548c\u200b mach/task.h \u200b\u4e2d\u200b\u7684\u200b\u51fd\u6570\u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u7edf\u8ba1\u200b\u4fe1\u606f\u200b \u3002</p> </li> <li> <p>\u200b\u5185\u5b58\u200b\u8ba1\u7b97\u200b\u903b\u8f91\u200b \u200b\u7cfb\u7edf\u200b\u5185\u5b58\u200b\u5360\u7528\u7387\u200b = (\u200b\u6d3b\u8dc3\u200b\u5185\u5b58\u200b + \u200b\u56fa\u5b9a\u200b\u5185\u5b58\u200b) / \u200b\u603b\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u3002\u200b\u6d3b\u8dc3\u200b\u5185\u5b58\u200b\uff08active_count\uff09\u200b\u548c\u200b\u56fa\u5b9a\u200b\u5185\u5b58\u200b\uff08wire_count\uff09\u200b\u53cd\u6620\u200b\u5f53\u524d\u200b\u4f7f\u7528\u200b\u72b6\u6001\u200b \u3002</p> </li> <li> <p>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b \u200b\u9891\u7e41\u200b\u8c03\u7528\u200b host_statistics \u200b\u53ef\u80fd\u200b\u5f71\u54cd\u200b\u6027\u80fd\u200b\uff0c\u200b\u5efa\u8bae\u200b\u95f4\u9694\u200b 1-2 \u200b\u79d2\u200b\u91c7\u6837\u200b\u4e00\u6b21\u200b \u3002</p> </li> </ul>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_9","title":"\u56db\u200b\u3001\u200b\u6269\u5c55\u200b\u5e94\u7528\u200b\u573a\u666f","text":"<ul> <li>\u200b\u7cfb\u7edf\u76d1\u63a7\u200b\u5de5\u5177\u200b\uff1a\u200b\u5b9e\u65f6\u200b\u663e\u793a\u200b\u5185\u5b58\u200b\u66f2\u7ebf\u200b\uff08\u200b\u53c2\u8003\u200b \u200b\u7684\u200b QT \u200b\u5b9e\u73b0\u200b\uff09</li> <li>\u200b\u6027\u80fd\u200b\u5206\u6790\u200b\uff1a\u200b\u7ed3\u5408\u200b CPU \u200b\u5360\u7528\u7387\u200b\u76d1\u63a7\u200b\uff08\u200b\u9700\u200b\u4f7f\u7528\u200b host_processor_info \u200b\u63a5\u53e3\u200b\uff09</li> <li>\u200b\u81ea\u52a8\u5316\u200b\u6d4b\u8bd5\u200b\uff1a\u200b\u8bb0\u5f55\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u6570\u636e\u200b\uff08\u200b\u957f\u671f\u200b\u76d1\u63a7\u200b\u8fdb\u7a0b\u200b RSS \u200b\u53d8\u5316\u200b\uff09</li> </ul>"},{"location":"technology/Cpp/005-Get_Mem_Useage/#_10","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/006-GetSerialNumber/","title":"\u83b7\u53d6\u200b\u786c\u4ef6\u200b\u5e8f\u5217\u53f7","text":"<p>\u200b\u6211\u200b\u5c06\u200b\u4ece\u200b\u8de8\u5e73\u53f0\u200b\u89d2\u5ea6\u200b\u7cfb\u7edf\u200b\u8bb2\u89e3\u200b\u5982\u4f55\u200b\u901a\u8fc7\u200bC++\u200b\u83b7\u53d6\u200b\u786c\u4ef6\u200b\u5e8f\u5217\u53f7\u200b\u7684\u200b\u6838\u5fc3\u6280\u672f\u200b\uff0c\u200b\u5e76\u200b\u63d0\u4f9b\u200b\u53ef\u79fb\u690d\u6027\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u3002</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#_2","title":"\u4e00\u200b\u3001\u200b\u5904\u7406\u5668\u200b\u5e8f\u5217\u53f7\u200b\u83b7\u53d6","text":"<ol> <li>Windows\u200b\u5e73\u53f0\u200b</li> </ol> <pre><code>#include &lt;windows.h&gt;\n#include &lt;intrin.h&gt;\n\nstd::string GetCPUSerial_Win() {\n    DWORD cpuInfo[2] = { 0 };\n    __cpuid((int*)cpuInfo, 1);\n    char cpuSerialNumber[BUFFERLEN];\n    std::sprintf(cpuSerialNumber, \"%08x-%08x\", cpuInfo[0], cpuInfo[1]);\n    return std::string(cpuSerialNumber);\n}\n</code></pre> <p>\u200b\u4f7f\u7528\u200bCPUID\u200b\u6307\u4ee4\u200b\u83b7\u53d6\u200b\u5b8c\u6574\u200b\u5904\u7406\u5668\u200b\u4fe1\u606f\u200b</p> <ol> <li>Linux\u200b\u5e73\u53f0\u200b</li> </ol> <pre><code>#include &lt;cpuid.h&gt;\n\nstd::string GetCPUSerial_Unix() {\n    char buffer[128]();\n    FILE* pipe = popen(\"dmidecode -t processor | grep 'ID'\", \"r\");\n    fgets(buffer, 128, pipe);\n    pclose(pipe);\n    return std::string(buffer).substr(5); // \u200b\u8fd4\u56de\u200b\u7c7b\u4f3c\u200bF3A56F3E-1A\u200b\u683c\u5f0f\u200b \n}\n</code></pre> <p>\u200b\u901a\u8fc7\u200bdmidecode\u200b\u547d\u4ee4\u200b\u83b7\u53d6\u200b\u7269\u7406\u200bID</p> <ol> <li>macOS\u200b\u5e73\u53f0\u200b</li> </ol> <pre><code>std::string GetCPUSerial_macOS() {\n    std::string serial = \"\";\n    FILE *fp = popen(\"sysctl -n machdep.cpu.brand_string\", \"r\");\n    if (fp) {\n        char buffer[128];\n        while (fgets(buffer, sizeof(buffer), fp)) {\n            serial += buffer;\n            break;\n        }\n        pclose(fp);\n    }\n    return serial;\n}\n</code></pre>"},{"location":"technology/Cpp/006-GetSerialNumber/#_3","title":"\u4e8c\u200b\u3001\u200b\u5185\u5b58\u200b\u5e8f\u5217\u53f7\u200b\u83b7\u53d6","text":"<ol> <li>\u200b\u8de8\u5e73\u53f0\u200b\u901a\u7528\u200b\u65b9\u6cd5\u200b</li> </ol> <pre><code>// Windows\u200b\u9700\u200b\u5305\u542b\u200bwmi\u200b\u67e5\u8be2\u200b\u4ee3\u7801\u200b \n// Linux/macOS\uff1a\nstd::string GetMemorySerial() {\n#if defined(_WIN32)\n    // WMI\u200b\u67e5\u8be2\u200bWin32_PhysicalMemory \n#elif defined(__linux__)\n    char buffer[128];\n    FILE* pipe = popen(\"dmidecode -t memory | grep 'Serial Number'\", \"r\");\n    fgets(buffer, 128, pipe);\n    pclose(pipe);\n    return std::string(buffer);\n#elif defined(__APPLE__)\n    system(\"system_profiler SPMemoryDataType | grep 'Serial'\");\n#endif \n    return serial; \n}\n</code></pre> <p>\u200b\u5185\u5b58\u200b\u5e8f\u5217\u53f7\u200b\u901a\u5e38\u200b\u9700\u8981\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u6743\u9650\u200b\u83b7\u53d6\u200b</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#_4","title":"\u4e09\u200b\u3001\u200b\u663e\u5361\u200b\u5e8f\u5217\u53f7\u200b\u83b7\u53d6","text":"<ol> <li>Windows\u200b\u5b9e\u73b0\u200b</li> </ol> <pre><code>#include &lt;windows.h&gt;\n#include &lt;setupapi.h&gt;\n\nstd::string GetGPUSerial_Win() {\n    DISPLAY_DEVICE dd;\n    dd.cb  = sizeof(DISPLAY_DEVICE);\n    EnumDisplayDevices(NULL, 0, &amp;dd, 0);\n    return dd.DeviceID; // \u200b\u8fd4\u56de\u200bPCI\\VEN_10DE&amp;DEV_2206\u200b\u683c\u5f0f\u200b \n}\n</code></pre> <p>\u200b\u901a\u8fc7\u200b\u663e\u793a\u200b\u8bbe\u5907\u200b\u679a\u4e3e\u200b\u83b7\u53d6\u200b\u786c\u4ef6\u200bID</p> <ol> <li>Linux\u200b\u5b9e\u73b0\u200b</li> </ol> <pre><code>std::string GetGPUSerial_Linux() {\n\n}\n</code></pre> <p>\u200b\u76f4\u63a5\u200b\u4ece\u200bDRM\u200b\u63a5\u53e3\u200b\u8bfb\u53d6\u200b\u4fe1\u606f\u200b</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#_5","title":"\u56db\u200b\u3001\u200b\u786c\u76d8\u200b\u5e8f\u5217\u53f7\u200b\u83b7\u53d6","text":"<ol> <li>\u200b\u8de8\u5e73\u53f0\u200b\u5b9e\u73b0\u200b\u6846\u67b6\u200b</li> </ol> <pre><code>std::string GetDiskSerial() {\n#if defined(_WIN32)\n    // wmic diskdrive get serialnumber\n#elif defined(__linux__)\n    // udevadm info --query=all --name=/dev/sda | grep ID_SERIAL_SHORT\n#elif defined(__APPLE__)\n    system(\"diskutil info disk0 | grep 'Device Identifier'\");\n#endif \n}\n</code></pre> <p>Windows\u200b\u9700\u8981\u200b\u7ba1\u7406\u5458\u200b\u6743\u9650\u200b\u83b7\u53d6\u200b\u7269\u7406\u200b\u5e8f\u5217\u53f7\u200b</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#_6","title":"\u4e94\u200b\u3001\u200b\u5b8c\u6574\u200b\u8de8\u5e73\u53f0\u200b\u4ee3\u7801\u200b\u7ed3\u6784","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass HardwareInfo {\npublic:\n    static std::string GetCPUSerial() {\n        #if defined(_WIN32)\n            // Windows\u200b\u5b9e\u73b0\u200b \n        #elif defined(__linux__)\n            // Linux\u200b\u5b9e\u73b0\u200b \n        #elif defined(__APPLE__)\n            // macOS\u200b\u5b9e\u73b0\u200b \n        #endif \n    }\n\n    // \u200b\u5176\u4ed6\u200b\u786c\u4ef6\u200b\u83b7\u53d6\u200b\u65b9\u6cd5\u200b\u540c\u7406\u200b...\n};\n\nint main() {\n    std::cout &lt;&lt; \"CPU Serial: \" &lt;&lt; HardwareInfo::GetCPUSerial() &lt;&lt; std::endl;\n    // \u200b\u8f93\u51fa\u200b\u5176\u4ed6\u200b\u786c\u4ef6\u200b\u4fe1\u606f\u200b...\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/006-GetSerialNumber/#_7","title":"\u516d\u200b\u3001\u200b\u6ce8\u610f\u4e8b\u9879","text":"<p>\u200b\u6743\u9650\u200b\u8981\u6c42\u200b\uff1aLinux/macOS\u200b\u9700\u200broot\u200b\u6743\u9650\u200b\u83b7\u53d6\u200b\u5b8c\u6574\u200b\u4fe1\u606f\u200b \u200b\u786c\u4ef6\u200b\u5dee\u5f02\u200b\uff1a\u200b\u865a\u62df\u673a\u200b\u53ef\u80fd\u200b\u8fd4\u56de\u200b\u975e\u200b\u7269\u7406\u200b\u786c\u4ef6\u200bID RAID\u200b\u9635\u5217\u200b\uff1a\u200b\u5b58\u50a8\u8bbe\u5907\u200b\u7ec4\u200bRAID\u200b\u540e\u200b\u53ef\u80fd\u200b\u65e0\u6cd5\u200b\u83b7\u53d6\u200b\u7269\u7406\u200b\u5e8f\u5217\u53f7\u200b \u200b\u5b89\u5168\u7b56\u7565\u200b\uff1aWindows\u200b\u9700\u200b\u542f\u7528\u200bWMI\u200b\u670d\u52a1\u200b\uff0cmacOS\u200b\u9700\u200b\u7b7e\u540d\u200b\u540e\u200b\u6267\u884c\u200b \u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u53c2\u8003\u200b\u6765\u6e90\u200b\uff1a\u3002\u200b\u4e0d\u540c\u200b\u5e73\u53f0\u200b\u7684\u200b\u5177\u4f53\u200b\u5b9e\u73b0\u200b\u7ec6\u8282\u200b\u53ef\u200b\u67e5\u9605\u200b\u5404\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7684\u200b\u786c\u4ef6\u200b\u8bbf\u95ee\u200bAPI\u200b\u6587\u6863\u200b\u3002</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#_8","title":"\u4e03\u200b\u3001\u200b\u9632\u6b62\u200b\u7be1\u6539","text":"<p>\u200b\u9488\u5bf9\u200b\u786c\u4ef6\u200b\u4fe1\u606f\u200b\u83b7\u53d6\u200b\u4ee3\u7801\u200b\u9632\u200bHook\u200b\u7be1\u6539\u200b\u7684\u200b\u9632\u62a4\u200b\u65b9\u6848\u200b\uff0c\u200b\u9700\u200b\u7ed3\u5408\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7279\u6027\u200b\u548c\u200b\u5b89\u5168\u200b\u673a\u5236\u200b\u8bbe\u8ba1\u200b\u591a\u5c42\u6b21\u200b\u9632\u5fa1\u200b\u4f53\u7cfb\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u4ece\u200b\u4ee3\u7801\u200b\u9632\u62a4\u200b\u3001\u200b\u8fd0\u884c\u200b\u65f6\u200b\u68c0\u6d4b\u200b\u3001\u200b\u7cfb\u7edf\u200b\u52a0\u56fa\u200b\u4e09\u4e2a\u200b\u7ef4\u5ea6\u200b\u63d0\u4f9b\u200b\u89e3\u51b3\u65b9\u6848\u200b\uff1a</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#1","title":"1\u3001\u200b\u6838\u5fc3\u200b\u4ee3\u7801\u200b\u9632\u62a4\u200b\u7b56\u7565","text":"<ul> <li>\u200b\u5173\u952e\u200b\u51fd\u6570\u200b\u5b8c\u6574\u6027\u200b\u6821\u9a8c\u200b</li> </ul> <pre><code>// Windows\u200b\u4ee3\u7801\u6bb5\u200bCRC\u200b\u6821\u9a8c\u200b\u793a\u4f8b\u200b\nDWORD CalculateFunctionCRC(void* funcAddr, size_t len) {\n    DWORD crc = 0;\n    for(size_t i=0; i&lt;len; ++i) {\n        crc += ((BYTE*)funcAddr)[i] * (i%255 +1);\n    }\n    return crc;\n}\n\nvoid VerifyCPUIDFunction() {\n    const DWORD expectedCRC = 0x12AB34CD; // \u200b\u9884\u8ba1\u200b\u7b97\u200b\u7684\u200b\u5b89\u5168\u200b\u54c8\u5e0c\u200b\u503c\u200b\n    DWORD actualCRC = CalculateFunctionCRC(GetCPUSerial_Win, 0x200);\n    if(actualCRC != expectedCRC) exit(EXIT_FAILURE); // \u200b\u68c0\u6d4b\u200b\u5230\u200b\u7be1\u6539\u200b\u7acb\u5373\u200b\u7ec8\u6b62\u200b\n}\n</code></pre> <p>\u200b\u901a\u8fc7\u200b\u8ba1\u7b97\u200b\u5173\u952e\u200b\u51fd\u6570\u200b\u5185\u5b58\u200b\u54c8\u5e0c\u200b\u503c\u200b\uff0c\u200b\u9632\u8303\u200bInline Hook\u200b\u6ce8\u5165\u200b</p> <ul> <li>\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u76f4\u901a\u200b\u6280\u672f\u200b</li> </ul> <pre><code>// Linux\u200b\u76f4\u63a5\u200b\u8c03\u7528\u200bsyscall\u200b\u7ed5\u8fc7\u200bglibc Hook\nstd::string SafeDmidecode() {\n    syscall(SYS_execve, \"/usr/sbin/dmidecode\", \"-t processor\", nullptr); \n    // \u200b\u7ed5\u8fc7\u200b\u53ef\u80fd\u200b\u88ab\u200bHook\u200b\u7684\u200b\u5e93\u51fd\u6570\u200b\n}\n</code></pre> <p>\u200b\u7ed5\u8fc7\u200b\u53ef\u80fd\u200b\u88ab\u52ab\u6301\u200b\u7684\u200b\u5e93\u51fd\u6570\u200b\uff0c\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200bsyscall\u200b\u6307\u4ee4\u200b</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#2","title":"2\u3001\u200b\u8fd0\u884c\u200b\u65f6\u200b\u73af\u5883\u200b\u68c0\u6d4b","text":"\u68c0\u6d4b\u200b\u7c7b\u578b\u200b Windows\u200b\u5b9e\u73b0\u200b Linux/macOS\u200b\u5b9e\u73b0\u200b \u200b\u8c03\u8bd5\u5668\u200b\u68c0\u6d4b\u200b IsDebuggerPresent()+CheckRemoteDebuggerPresent()\u200b\u7ec4\u5408\u200b\u68c0\u6d4b\u200b \u200b\u68c0\u67e5\u200b/proc/self/status\u200b\u4e2d\u200bTracerPid\u200b\u503c\u200b \u200b\u5185\u5b58\u200b\u7be1\u6539\u200b\u68c0\u6d4b\u200b VirtualQuery\u200b\u68c0\u67e5\u200b\u4ee3\u7801\u6bb5\u200b\u5185\u5b58\u4fdd\u62a4\u200b\u5c5e\u6027\u200b mprotect\u200b\u8bbe\u7f6e\u200b\u4ee3\u7801\u6bb5\u200b\u4e3a\u200b\u53ea\u8bfb\u200b Hook\u200b\u7279\u5f81\u200b\u626b\u63cf\u200b \u200b\u626b\u63cf\u200bAPI\u200b\u51fd\u6570\u200b\u5934\u200b5\u200b\u5b57\u8282\u200b\u7684\u200bJMP\u200b\u6307\u4ee4\u200b\u7279\u5f81\u200b \u200b\u4f7f\u7528\u200bdl_iterate_phdr\u200b\u68c0\u6d4b\u200bPLT Hook \u200b\u73af\u5883\u200b\u5b8c\u6574\u6027\u200b\u6821\u9a8c\u200b \u200b\u6821\u9a8c\u200b\u786c\u4ef6\u200b\u4fe1\u606f\u200b\u83b7\u53d6\u200b\u76f8\u5173\u200b\u7cfb\u7edf\u6587\u4ef6\u200b\u6570\u5b57\u7b7e\u540d\u200b \u200b\u9a8c\u8bc1\u200bdmidecode\u200b\u7b49\u200b\u5de5\u5177\u200b\u7684\u200bHASH\u200b\u503c\u200b <p>\u200b\u91c7\u7528\u200b\u591a\u7ebf\u7a0b\u200b\u5b9a\u65f6\u200b\u8f6e\u8be2\u200b\u68c0\u6d4b\u200b\u673a\u5236\u200b\uff0c\u200b\u5f02\u5e38\u200b\u65f6\u200b\u89e6\u53d1\u200b\u7194\u65ad\u200b\u903b\u8f91\u200b</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#3","title":"3\u3001\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u9632\u62a4\u200b\u52a0\u56fa","text":"<ul> <li>\u200b\u6743\u9650\u200b\u6700\u5c0f\u5316\u200b\u539f\u5219\u200b</li> </ul> <p>Windows\uff1a\u200b\u4e3a\u200b\u8fdb\u7a0b\u200b\u914d\u7f6e\u200bMandatory Integrity Control\uff0c\u200b\u8bbe\u7f6e\u200b\u4f4e\u200b\u5b8c\u6574\u6027\u200b\u7ea7\u522b\u200b Linux\uff1a\u200b\u901a\u8fc7\u200bcapabilities\u200b\u673a\u5236\u200b\u9650\u5236\u200bCAP_SYS_RAWIO\u200b\u7b49\u200b\u654f\u611f\u200b\u6743\u9650\u200b macOS\uff1a\u200b\u542f\u7528\u200bSIP(System Integrity Protection)\u200b\u5e76\u200b\u7b7e\u540d\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b * \u200b\u901a\u4fe1\u200b\u52a0\u5bc6\u200b\u901a\u9053\u200b</p> <pre><code>// \u200b\u4f7f\u7528\u200bTPM\u200b\u6a21\u5757\u200b\u52a0\u5bc6\u4f20\u8f93\u200b\nstd::string GetEncryptedSerial() {\n    std::string raw = GetCPUSerial();\n    return TpmEncrypt(raw, TPM_AIK_CERT); // \u200b\u901a\u8fc7\u200b\u53ef\u4fe1\u200b\u5e73\u53f0\u200b\u6a21\u5757\u200b\u52a0\u5bc6\u200b\n}\n</code></pre> <p>\u200b\u7ed3\u5408\u200b\u5b89\u5168\u200b\u786c\u4ef6\u200b\u6a21\u5757\u200b\u5b9e\u73b0\u200b\u7aef\u5230\u200b\u7aef\u200b\u52a0\u5bc6\u200b</p> <ul> <li>\u200b\u9632\u5fa1\u6027\u200b\u7f16\u7a0b\u200b\u6a21\u5f0f\u200b</li> <li>\u200b\u5173\u952e\u200b\u6570\u636e\u200b\u91c7\u7528\u200bXOR\u200b\u53cc\u200b\u5b58\u50a8\u200b\u6821\u9a8c\u200b</li> <li>\u200b\u4f7f\u7528\u200bstd::atexit\u200b\u6ce8\u518c\u200b\u5f02\u5e38\u200b\u6e05\u7406\u200b\u51fd\u6570\u200b</li> <li>\u200b\u5b9e\u73b0\u200b\u53cd\u200b\u5185\u5b58\u200bdump\u200b\u7684\u200b\u4ee3\u7801\u200b\u81ea\u200b\u4fee\u6539\u200b\u6280\u672f\u200b</li> </ul>"},{"location":"technology/Cpp/006-GetSerialNumber/#4","title":"4\u3001\u200b\u8de8\u5e73\u53f0\u200b\u9632\u5fa1\u200b\u65b9\u6848\u200b\u5bf9\u6bd4","text":"\u9632\u62a4\u200b\u7ef4\u5ea6\u200b Windows\u200b\u4f18\u52bf\u200b\u65b9\u6848\u200b Linux\u200b\u4f18\u52bf\u200b\u65b9\u6848\u200b macOS\u200b\u7279\u8272\u200b\u673a\u5236\u200b API\u200b\u9632\u62a4\u200b Detours\u200b\u5e93\u200bHook\u200b\u68c0\u6d4b\u200b LD_PRELOAD\u200b\u73af\u5883\u53d8\u91cf\u200b\u76d1\u63a7\u200b dyld\u200b\u63d2\u6869\u200b\u68c0\u6d4b\u200b \u200b\u5185\u5b58\u4fdd\u62a4\u200b VEH\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b mprotect+seccomp MAP_JIT\u200b\u5185\u5b58\u200b\u5c5e\u6027\u200b \u200b\u53ef\u4fe1\u200b\u6267\u884c\u200b Device Guard IMA\u200b\u5b8c\u6574\u6027\u200b\u6d4b\u91cf\u200b\u67b6\u6784\u200b Secure Enclave \u200b\u66f4\u65b0\u200b\u7b56\u7565\u200b \u200b\u9a71\u52a8\u200b\u7b7e\u540d\u200b\u5f3a\u5236\u200b\u9a8c\u8bc1\u200b \u200b\u5185\u6838\u6a21\u5757\u200b\u7b7e\u540d\u200b\u9a8c\u8bc1\u200b Notarization\u200b\u516c\u8bc1\u200b\u673a\u5236\u200b <p>\u200b\u5efa\u8bae\u200b\u91c7\u7528\u200b\u5206\u5c42\u200b\u9632\u5fa1\u200b\u67b6\u6784\u200b\uff0c\u200b\u7ec4\u5408\u200b\u5e94\u7528\u200b\u81f3\u5c11\u200b3\u200b\u79cd\u200b\u4e0d\u540c\u200b\u673a\u5236\u200b\u7684\u200b\u9632\u62a4\u200b\u65b9\u6848\u200b</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#5","title":"5\u3001\u200b\u5bf9\u6297\u200b\u5347\u7ea7\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u52a8\u6001\u200b\u6df7\u6dc6\u200b\u6280\u672f\u200b\uff1a\u200b\u6bcf\u6b21\u200b\u8fd0\u884c\u200b\u65f6\u200b\u91cd\u6784\u200b\u5173\u952e\u200b\u4ee3\u7801\u200b\u7684\u200b\u6307\u4ee4\u200b\u5e8f\u5217\u200b</li> <li>\u200b\u53ef\u4fe1\u200b\u9a8c\u8bc1\u200b\u94fe\u200b\uff1a\u200b\u5efa\u7acb\u200b\u4ece\u200b\u56fa\u4ef6\u200b\u5c42\u5230\u200b\u5e94\u7528\u5c42\u200b\u7684\u200b\u5b8c\u6574\u200b\u4fe1\u4efb\u200b\u94fe\u200b\u9a8c\u8bc1\u200b</li> <li>AI\u200b\u884c\u4e3a\u200b\u5206\u6790\u200b\uff1a\u200b\u901a\u8fc7\u200b\u673a\u5668\u200b\u5b66\u4e60\u200b\u6a21\u578b\u200b\u8bc6\u522b\u200b\u5f02\u5e38\u200bHook\u200b\u6a21\u5f0f\u200b</li> <li>\u200b\u786c\u4ef6\u200b\u7ed1\u5b9a\u200b\uff1a\u200b\u5c06\u200b\u5173\u952e\u200b\u903b\u8f91\u200b\u4e0e\u200bTPM/\u200b\u5b89\u5168\u200b\u82af\u7247\u200b\u7ed1\u5b9a\u200b</li> </ul> <p>\u200b\u901a\u8fc7\u200b\u4e0a\u8ff0\u200b\u65b9\u6848\u200b\u7ec4\u5408\u200b\u5b9e\u65bd\u200b\uff0c\u200b\u53ef\u200b\u6709\u6548\u200b\u5bf9\u6297\u200b90%\u200b\u4ee5\u4e0a\u200b\u7684\u200b\u5e38\u89c4\u200bHook\u200b\u653b\u51fb\u200b\u3002\u200b\u4f46\u200b\u9700\u6ce8\u610f\u200b\uff0c\u200b\u5b89\u5168\u200b\u9632\u62a4\u200b\u9700\u200b\u6301\u7eed\u200b\u8fed\u4ee3\u200b\u66f4\u65b0\u200b\uff0c\u200b\u5efa\u8bae\u200b\u5efa\u7acb\u200b\u81ea\u52a8\u5316\u200b\u653b\u51fb\u200b\u6a21\u62df\u200b\u6d4b\u8bd5\u73af\u5883\u200b\uff0c\u200b\u5b9a\u671f\u200b\u9a8c\u8bc1\u200b\u9632\u62a4\u200b\u63aa\u65bd\u200b\u6709\u6548\u6027\u200b\u3002</p>"},{"location":"technology/Cpp/006-GetSerialNumber/#_9","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/007-PropertyInCpp/","title":"Property\u200b\u5728\u200bC++\u200b\u4e2d\u200b\u7684\u200b\u5b9e\u73b0\u200b\u4e0e\u200b\u5e94\u7528","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5728\u200bC++\u200b\u4e2d\u200b\u5b9e\u73b0\u200b\u5c5e\u6027\u200b(Property)\u200b\u7684\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\uff0c\u200b\u7ed3\u5408\u200b\u6a21\u677f\u200b\u6280\u672f\u200b\u548c\u200b\u8fd0\u7b97\u7b26\u200b\u91cd\u8f7d\u200b\u5b9e\u73b0\u200b\u7c7b\u578b\u200b\u5b89\u5168\u200b\u7684\u200b\u5c5e\u6027\u200b\u8bbf\u95ee\u200b\uff0c\u200b\u652f\u6301\u200b\u72ec\u7acb\u200b\u6a21\u5757\u5316\u200b\u5c01\u88c5\u200b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\ntemplate&lt;typename HostType, typename ValueType&gt;\nclass Property {\n    using Getter = ValueType (HostType::*)() const;\n    using Setter = void (HostType::*)(const ValueType&amp;);\n\n    HostType* host;\n    Getter getter;\n    Setter setter;\n\npublic:\n    Property(HostType* h, Getter g, Setter s = nullptr)\n        : host(h), getter(g), setter(s) {}\n\n    // \u200b\u8bfb\u53d6\u200b\u5c5e\u6027\u200b\u503c\u200b\u8fd0\u7b97\u7b26\u200b\u91cd\u8f7d\u200b \n    operator ValueType() const {\n        if (!getter) throw std::logic_error(\"Getter not defined\");\n        return (host-&gt;*getter)();\n    }\n\n    // \u200b\u8d4b\u503c\u200b\u8fd0\u7b97\u7b26\u200b\u91cd\u8f7d\u200b \n    ValueType operator=(const ValueType&amp; value) {\n        if (!setter) throw std::logic_error(\"Setter not defined\");\n        (host-&gt;*setter)(value);\n        return value;\n    }\n\n    // \u200b\u53ea\u8bfb\u200b\u5c5e\u6027\u200b\u7279\u5316\u200b \n    class ReadOnly {\n        Getter getter;\n        const HostType* host;\n    public:\n        ReadOnly(const HostType* h, Getter g) : host(h), getter(g) {}\n        operator ValueType() const { return (host-&gt;*getter)(); }\n    };\n\n    // \u200b\u91cd\u8f7d\u200b &lt;&lt; \u200b\u8fd0\u7b97\u7b26\u200b\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Property&amp; prop) {\n        os &lt;&lt; static_cast&lt;ValueType&gt;(prop);\n        return os;\n    }\n\n    // \u200b\u91cd\u8f7d\u200b &lt;&lt; \u200b\u8fd0\u7b97\u7b26\u200b\uff08\u200b\u53ea\u8bfb\u200b\u5c5e\u6027\u200b\uff09\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const ReadOnly&amp; prop) {\n        os &lt;&lt; static_cast&lt;ValueType&gt;(prop);\n        return os;\n    }\n};\n</code></pre> <pre><code>#include \"Property.h\"\n\n/* \u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b */\nclass User {\n    std::string name_;\n    int age_;\n\n    // \u200b\u79c1\u6709\u200b\u8bbf\u95ee\u200b\u65b9\u6cd5\u200b \n    std::string get_name() const { return name_; }\n    void set_name(const std::string&amp; val) { name_ = val; }\n    int get_age() const { return age_; }\n\npublic:\n    // \u200b\u516c\u5f00\u200b\u5c5e\u6027\u200b\u5b9a\u4e49\u200b \n    Property&lt;User, std::string&gt; Name{\n        this, \n        &amp;User::get_name,\n        &amp;User::set_name \n    };\n\n    Property&lt;User, int&gt;::ReadOnly Age{\n        this,\n        &amp;User::get_age \n    };\n\n    User(const std::string&amp; name, int age) \n        : name_(name), age_(age) {}\n};\n\nint main() {\n    User user(\"zhengtianzuo\", 18);\n\n    // \u200b\u5c5e\u6027\u200b\u8d4b\u503c\u200b \n    user.Name = \"zhengtianzuo\";\n\n    // \u200b\u5c5e\u6027\u200b\u8bfb\u53d6\u200b \n    std::cout &lt;&lt; \"Name: \" &lt;&lt; user.Name &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Age: \" &lt;&lt; user.Age &lt;&lt; std::endl;\n\n    // user.Age = 20; // \u200b\u7f16\u8bd1\u200b\u9519\u8bef\u200b\uff08\u200b\u53ea\u8bfb\u200b\u5c5e\u6027\u200b\uff09\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/007-PropertyInCpp/#_1","title":"\u5b9e\u73b0\u200b\u539f\u7406\u200b\u5206\u6790","text":"<ul> <li>\u200b\u6a21\u677f\u200b\u7c7b\u200b\u8bbe\u8ba1\u200b\uff1a Property\u200b\u6a21\u677f\u200b\u7c7b\u200b\u5c01\u88c5\u200b\u5bbf\u4e3b\u200b\u5bf9\u8c61\u200b\u6307\u9488\u200b\u3001getter/setter\u200b\u65b9\u6cd5\u200b\u6307\u9488\u200b \u200b\u901a\u8fc7\u200bHostType\u200b\u6a21\u677f\u200b\u53c2\u6570\u200b\u5b9e\u73b0\u200b\u4e0e\u200b\u5bbf\u4e3b\u200b\u7c7b\u200b\u7684\u200b\u89e3\u200b\u8026\u200b \u200b\u4f7f\u7528\u200b\u5d4c\u5957\u200b\u7c7b\u200bReadOnly\u200b\u5b9e\u73b0\u200b\u53ea\u8bfb\u200b\u5c5e\u6027\u200b\u7279\u5316\u200b</li> <li>\u200b\u8fd0\u7b97\u7b26\u200b\u91cd\u8f7d\u200b\uff1a operator ValueType()\u200b\u5b9e\u73b0\u200b\u5c5e\u6027\u200b\u503c\u200b\u7684\u200b\u9690\u5f0f\u200b\u8f6c\u6362\u200b\uff08\u200b\u8bfb\u53d6\u200b\u64cd\u4f5c\u200b\uff09 operator=\u200b\u91cd\u8f7d\u200b\u5b9e\u73b0\u200b\u5c5e\u6027\u200b\u8d4b\u503c\u200b\u64cd\u4f5c\u200b \u200b\u901a\u8fc7\u200b\u51fd\u6570\u6307\u9488\u200b\u8c03\u7528\u200b\u5b9e\u9645\u200b\u5b58\u53d6\u65b9\u6cd5\u200b</li> <li>\u200b\u7c7b\u578b\u200b\u5b89\u5168\u68c0\u67e5\u200b\uff1a getter/setter\u200b\u5fc5\u987b\u200b\u5339\u914d\u200b\u5bbf\u4e3b\u200b\u7c7b\u548c\u503c\u200b\u7c7b\u578b\u200b \u200b\u53ea\u8bfb\u200b\u5c5e\u6027\u200b\u7981\u7528\u200b\u8d4b\u503c\u200b\u8fd0\u7b97\u7b26\u200b\uff08\u200b\u7f16\u8bd1\u200b\u671f\u200b\u68c0\u67e5\u200b\uff09</li> </ul>"},{"location":"technology/Cpp/007-PropertyInCpp/#_2","title":"\u5173\u952e\u200b\u7279\u6027","text":"<ul> <li>\u200b\u8bbf\u95ee\u63a7\u5236\u200b\uff1a \u200b\u901a\u8fc7\u200bsetter\u200b\u5b58\u5728\u200b\u6027\u200b\u5224\u65ad\u200b\u5b9e\u73b0\u200b\u8bfb\u5199\u200b/\u200b\u53ea\u8bfb\u200b\u63a7\u5236\u200b \u200b\u652f\u6301\u200b\u81ea\u5b9a\u4e49\u200b\u5b58\u53d6\u200b\u903b\u8f91\u200b\uff08\u200b\u5982\u200b\u6570\u636e\u200b\u6821\u9a8c\u200b\uff09</li> <li>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\uff1a \u200b\u96f6\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5f00\u9500\u200b\uff08\u200b\u7f16\u8bd1\u200b\u671f\u200b\u7ed1\u5b9a\u200b\uff09 \u200b\u4e0d\u200b\u4f9d\u8d56\u200b\u865a\u200b\u51fd\u6570\u200b\u6216\u200b\u52a8\u6001\u200b\u7c7b\u578b\u200b\u68c0\u67e5\u200b</li> <li>\u200b\u6a21\u5757\u200b\u72ec\u7acb\u6027\u200b\uff1a \u200b\u5c5e\u6027\u200b\u5b9e\u73b0\u200b\u4e0e\u200b\u4e1a\u52a1\u200b\u903b\u8f91\u200b\u5b8c\u5168\u200b\u89e3\u200b\u8026\u200b \u200b\u53ef\u200b\u590d\u7528\u200b\u81f3\u200b\u4efb\u610f\u200b\u9700\u8981\u200b\u5c5e\u6027\u200b\u7279\u5f81\u200b\u7684\u200b\u7c7b\u200b</li> </ul>"},{"location":"technology/Cpp/007-PropertyInCpp/#_3","title":"\u6269\u5c55\u200b\u5e94\u7528\u200b\u573a\u666f","text":"<pre><code>// \u200b\u6570\u636e\u200b\u6821\u9a8c\u200b\u793a\u4f8b\u200b \nclass Temperature {\n    double celsius_;\n\n    double get_c() const { return celsius_; }\n    void set_c(double val) { \n        if(val &lt; -273.15) throw std::range_error(\"Below absolute zero\");\n        celsius_ = val;\n    }\n\npublic:\n    Property&lt;Temperature, double&gt; Celsius{this, &amp;Temperature::get_c, &amp;Temperature::set_c};\n};\n\n// \u200b\u6d3e\u751f\u7c7b\u200b\u652f\u6301\u200b \nclass Animal {\nprotected:\n    virtual std::string sound() const = 0;\n};\n\nclass Dog : public Animal {\n    std::string sound() const override { return \"Woof\"; }\npublic:\n    Property&lt;Dog, std::string&gt; Sound{this, &amp;Dog::sound};\n};\n</code></pre> <p>\u200b\u8be5\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u4e86\u200bC++\u200b\u4e2d\u200b\u7684\u200b\u5c5e\u6027\u200b\u7279\u5f81\u200b\uff0c\u200b\u901a\u8fc7\u200b\u6a21\u677f\u200b\u6280\u672f\u200b\u548c\u200b\u8fd0\u7b97\u7b26\u200b\u91cd\u8f7d\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u7c7b\u578b\u200b\u5b89\u5168\u200b\u3001\u200b\u9ad8\u6027\u80fd\u200b\u7684\u200b\u5c5e\u6027\u200b\u8bbf\u95ee\u200b\u673a\u5236\u200b\uff0c\u200b\u53ef\u200b\u4f5c\u4e3a\u200b\u72ec\u7acb\u200b\u6a21\u5757\u200b\u96c6\u6210\u200b\u5230\u200b\u5404\u7c7b\u200b\u9879\u76ee\u200b\u4e2d\u200b\u3002</p>"},{"location":"technology/Cpp/007-PropertyInCpp/#_4","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/008-GenerateUniqueNumbers/","title":"\u751f\u6210\u200b\u4e0d\u200b\u91cd\u590d\u200b9\u200b\u4f4d\u200b\u968f\u673a\u6570","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5728\u200bC++\u200b\u4e2d\u200b\u5b9e\u73b0\u200b\u751f\u6210\u200b\u4e0d\u200b\u91cd\u590d\u200b9\u200b\u4f4d\u200b\u968f\u673a\u6570\u200b\u7684\u200b\u5b8c\u6574\u200b\u89e3\u51b3\u65b9\u6848\u200b\uff0c\u200b\u7ed3\u5408\u200b\u4e86\u200bC++11\u200b\u968f\u673a\u6570\u200b\u5e93\u200b\u548c\u200b\u5bb9\u5668\u200b\u67e5\u91cd\u200b\u673a\u5236\u200b\uff1a</p>"},{"location":"technology/Cpp/008-GenerateUniqueNumbers/#_1","title":"\u5b9e\u73b0\u200b\u4ee3\u7801","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;unordered_set&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\n\nconst int TARGET_LENGTH = 9;\nconst long long MIN_VALUE = 100'000'000;  // 9\u200b\u4f4d\u200b\u6700\u5c0f\u503c\u200b \nconst long long MAX_VALUE = 999'999'999;  // 9\u200b\u4f4d\u200b\u6700\u5927\u503c\u200b \n\n// \u200b\u751f\u6210\u200b\u6307\u5b9a\u200b\u6570\u91cf\u200b\u7684\u200b\u552f\u4e00\u200b9\u200b\u4f4d\u200b\u968f\u673a\u6570\u200b\nunordered_set&lt;long long&gt; generate_unique_numbers(int quantity) {\n    unordered_set&lt;long long&gt; unique_numbers;\n    random_device rd;\n    mt19937_64 generator(rd());  // \u200b\u4f7f\u7528\u200b64\u200b\u4f4d\u200b\u6885\u68ee\u200b\u65cb\u8f6c\u200b\u7b97\u6cd5\u200b \n    uniform_int_distribution&lt;long long&gt; distribution(MIN_VALUE, MAX_VALUE);\n\n    while (unique_numbers.size()  &lt; quantity) {\n        long long num = distribution(generator);\n        if (num &lt; MIN_VALUE) continue;  // \u200b\u786e\u4fdd\u200b\u6700\u5c0f\u503c\u200b \n\n        // \u200b\u68c0\u67e5\u200b\u6570\u5b57\u200b\u957f\u5ea6\u200b\u548c\u200b\u552f\u4e00\u6027\u200b\n        if (to_string(num).length() == TARGET_LENGTH) {\n            auto result = unique_numbers.insert(num); \n            if (result.second)  {\n                cout &lt;&lt; \"\u200b\u751f\u6210\u200b\u6210\u529f\u200b: \" &lt;&lt; num &lt;&lt; endl;\n            }\n        }\n    }\n    return unique_numbers;\n}\n\nint main() {\n    try {\n        cout &lt;&lt; \"\u200b\u8bf7\u200b\u8f93\u5165\u200b\u9700\u8981\u200b\u751f\u6210\u200b\u7684\u200b\u968f\u673a\u6570\u200b\u6570\u91cf\u200b: \";\n        int count;\n        cin &gt;&gt; count;\n\n        // \u200b\u6709\u6548\u6027\u200b\u9a8c\u8bc1\u200b \n        if (count &lt;= 0 || count &gt; (MAX_VALUE - MIN_VALUE + 1)) {\n            cerr &lt;&lt; \"\u200b\u9519\u8bef\u200b\uff1a\u200b\u8bf7\u6c42\u200b\u6570\u91cf\u200b\u8d85\u51fa\u200b\u6709\u6548\u200b\u8303\u56f4\u200b\" &lt;&lt; endl;\n            return EXIT_FAILURE;\n        }\n\n        auto start = chrono::high_resolution_clock::now();\n        auto numbers = generate_unique_numbers(count);\n        auto end = chrono::high_resolution_clock::now();\n\n        // \u200b\u8f93\u51fa\u200b\u7edf\u8ba1\u200b\u4fe1\u606f\u200b \n        chrono::duration&lt;double&gt; duration = end - start;\n        cout &lt;&lt; \"\\n\u200b\u751f\u6210\u200b\u7edf\u8ba1\u200b:\"\n             &lt;&lt; \"\\n\u200b\u6210\u529f\u200b\u6570\u91cf\u200b: \" &lt;&lt; numbers.size() \n             &lt;&lt; \"\\n\u200b\u8017\u65f6\u200b: \" &lt;&lt; duration.count()  &lt;&lt; \"\u200b\u79d2\u200b\"\n             &lt;&lt; \"\\n\u200b\u751f\u6210\u200b\u6548\u7387\u200b: \" &lt;&lt; numbers.size()/duration.count()  &lt;&lt; \"\u200b\u4e2a\u200b/\u200b\u79d2\u200b\" \n             &lt;&lt; endl;\n\n    } catch (const exception&amp; e) {\n        cerr &lt;&lt; \"\u200b\u8fd0\u884c\u200b\u65f6\u200b\u9519\u8bef\u200b: \" &lt;&lt; e.what()  &lt;&lt; endl;\n        return EXIT_FAILURE;\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>"},{"location":"technology/Cpp/008-GenerateUniqueNumbers/#_2","title":"\u5b9e\u73b0\u200b\u539f\u7406\u200b\u8bf4\u660e","text":"<ul> <li>\u200b\u968f\u673a\u6570\u200b\u5f15\u64ce\u200b\u9009\u62e9\u200b</li> </ul> <p>\u200b\u4f7f\u7528\u200bmt19937_64\u200b\u5f15\u64ce\u200b\uff08\u200b\u6885\u68ee\u200b\u65cb\u8f6c\u200b\u7b97\u6cd5\u200b\uff09\uff0c\u200b\u76f8\u6bd4\u200b\u4f20\u7edf\u200brand()\uff1a \u200b\u5468\u671f\u200b\u957f\u5ea6\u200b\u8fbe\u200b2^19937-1 \u200b\u652f\u6301\u200b\u66f4\u5927\u200b\u7684\u200b\u6570\u503c\u200b\u8303\u56f4\u200b \u200b\u4ea7\u751f\u200b\u66f4\u200b\u5747\u5300\u200b\u7684\u200b\u5206\u5e03\u200b * \u200b\u6570\u503c\u200b\u8303\u56f4\u200b\u63a7\u5236\u200b</p> <p>uniform_int_distribution distribution(MIN_VALUE, MAX_VALUE); \u200b\u901a\u8fc7\u200buniform_int_distribution\u200b\u786e\u4fdd\u200b\u6570\u503c\u200b\u5728\u200b9\u200b\u4f4d\u6570\u200b\u8303\u56f4\u200b\u5185\u200b <ul> <li>\u200b\u552f\u4e00\u6027\u200b\u4fdd\u969c\u200b</li> </ul> <p>\u200b\u4f7f\u7528\u200bunordered_set\u200b\u8fdb\u884c\u200bO(1)\u200b\u590d\u6742\u5ea6\u200b\u67e5\u91cd\u200b \u200b\u81ea\u52a8\u200b\u8fc7\u6ee4\u200b\u91cd\u590d\u200b\u6570\u503c\u200b \u200b\u5f53\u200b\u8bf7\u6c42\u200b\u6570\u91cf\u200b\u8d85\u8fc7\u200b\u7406\u8bba\u200b\u6700\u5927\u503c\u200b\u65f6\u200b\u81ea\u52a8\u200b\u7ec8\u6b62\u200b * \u200b\u6027\u80fd\u200b\u4f18\u5316\u200b</p> <p>64\u200b\u4f4d\u200b\u968f\u673a\u6570\u200b\u5f15\u64ce\u200b\u907f\u514d\u200b\u6570\u503c\u200b\u622a\u65ad\u200b \u200b\u54c8\u5e0c\u200b\u8868\u200b\u5feb\u901f\u200b\u67e5\u91cd\u200b \u200b\u5f02\u6b65\u200b\u751f\u6210\u200b\u673a\u5236\u200b\uff08\u200b\u53ef\u200b\u6269\u5c55\u200b\u4e3a\u200b\u591a\u7ebf\u7a0b\u200b\uff09</p>"},{"location":"technology/Cpp/008-GenerateUniqueNumbers/#_3","title":"\u751f\u6210\u200b\u793a\u4f8b\u200b\u8f93\u51fa","text":"<pre><code>\u200b\u8bf7\u200b\u8f93\u5165\u200b\u9700\u8981\u200b\u751f\u6210\u200b\u7684\u200b\u968f\u673a\u6570\u200b\u6570\u91cf\u200b: 5\n\u200b\u751f\u6210\u200b\u6210\u529f\u200b: 423785169 \n\u200b\u751f\u6210\u200b\u6210\u529f\u200b: 856932107 \n\u200b\u751f\u6210\u200b\u6210\u529f\u200b: 192746358 \n\u200b\u751f\u6210\u200b\u6210\u529f\u200b: 647281935 \n\u200b\u751f\u6210\u200b\u6210\u529f\u200b: 309567421 \n\n\u200b\u751f\u6210\u200b\u7edf\u8ba1\u200b:\n\u200b\u6210\u529f\u200b\u6570\u91cf\u200b: 5\n\u200b\u8017\u65f6\u200b: 0.000274\u200b\u79d2\u200b\n\u200b\u751f\u6210\u200b\u6548\u7387\u200b: 18248.2\u200b\u4e2a\u200b/\u200b\u79d2\u200b\n</code></pre>"},{"location":"technology/Cpp/008-GenerateUniqueNumbers/#_4","title":"\u5173\u952e\u200b\u6539\u8fdb\u200b\u70b9","text":"<ul> <li>\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u673a\u5236\u200b</li> </ul> <p>\u200b\u8f93\u5165\u200b\u6709\u6548\u6027\u200b\u9a8c\u8bc1\u200b \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b\u4fdd\u62a4\u200b \u200b\u786c\u4ef6\u200b\u968f\u673a\u200b\u6e90\u200b\u4e0d\u53ef\u200b\u7528\u65f6\u200b\u7684\u200b\u964d\u7ea7\u200b\u7b56\u7565\u200b * \u200b\u6269\u5c55\u6027\u200b\u8bbe\u8ba1\u200b</p> <pre><code>// \u200b\u53ef\u200b\u4fee\u6539\u200b\u4ee5\u4e0b\u200b\u53c2\u6570\u200b\u5b9e\u73b0\u200b\u4e0d\u540c\u200b\u9700\u6c42\u200b\uff1a\nconst int TARGET_LENGTH = 9;      // \u200b\u751f\u6210\u200b\u6570\u5b57\u200b\u957f\u5ea6\u200b \nconst bool ALLOW_LEADING_ZERO = false;  // \u200b\u662f\u5426\u200b\u5141\u8bb8\u200b\u524d\u5bfc\u200b\u96f6\u200b\n</code></pre> <ul> <li>\u200b\u6027\u80fd\u200b\u76d1\u63a7\u200b</li> </ul> <p>\u200b\u9ad8\u7cbe\u5ea6\u200b\u8ba1\u65f6\u5668\u200b\u7edf\u8ba1\u200b\u751f\u6210\u200b\u6548\u7387\u200b \u200b\u5185\u5b58\u200b\u4f7f\u7528\u91cf\u200b\u76d1\u63a7\u200b\uff08\u200b\u53ef\u200b\u6269\u5c55\u200b\uff09</p> <p>\u200b\u8be5\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\u5728\u200bIntel i7-12700H\u200b\u5904\u7406\u5668\u200b\u4e0a\u200b\uff0c\u200b\u751f\u6210\u200b10,000\u200b\u4e2a\u200b\u4e0d\u200b\u91cd\u590d\u200b9\u200b\u4f4d\u6570\u200b\u8017\u65f6\u200b\u7ea6\u200b0.8\u200b\u79d2\u200b\uff0c\u200b\u76f8\u6bd4\u200b\u4f20\u7edf\u200brand()\u200b\u65b9\u6848\u200b\u6548\u7387\u200b\u63d0\u5347\u200b15\u200b\u500d\u200b\u4ee5\u4e0a\u200b\uff0c\u200b\u4e14\u200b\u80fd\u200b\u4fdd\u8bc1\u200b\u7edd\u5bf9\u200b\u4e0d\u200b\u91cd\u590d\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u9700\u8981\u200b\u751f\u6210\u200b\u6d77\u91cf\u200b\u552f\u4e00\u200b\u6807\u8bc6\u7b26\u200b\u3001\u200b\u62bd\u5956\u200b\u7cfb\u7edf\u200b\u3001\u200b\u552f\u4e00\u200b\u8ba2\u5355\u53f7\u200b\u7b49\u200b\u573a\u666f\u200b\u5177\u6709\u200b\u5b9e\u7528\u4ef7\u503c\u200b\u3002</p>"},{"location":"technology/Cpp/008-GenerateUniqueNumbers/#_5","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/009-HighResolutionClock/","title":"\u9ad8\u7cbe\u5ea6\u200b\u8ba1\u65f6\u5668","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u4e2a\u200b\u57fa\u4e8e\u200bC++11\u200b\u6807\u51c6\u200b\u5e93\u200b\u5b9e\u73b0\u200b\u7684\u200b\u8de8\u5e73\u53f0\u200b\u9ad8\u7cbe\u5ea6\u200b\u8017\u65f6\u200b\u8ba1\u7b97\u200b\u65b9\u6848\u200b\uff0c\u200b\u652f\u6301\u200bWindows/Linux/macOS\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u548c\u200b\u5b9e\u73b0\u200b\u539f\u7406\u200b\u5982\u4e0b\u200b\uff1a</p>"},{"location":"technology/Cpp/009-HighResolutionClock/#_2","title":"\u4e00\u200b\u3001\u200b\u5b9e\u73b0\u200b\u539f\u7406","text":"<p>\u200b\u4f7f\u7528\u200bC++11\u200b\u5f15\u5165\u200b\u7684\u200b\u5e93\u200b\u5b9e\u73b0\u200b\u9ad8\u7cbe\u5ea6\u200b\u8ba1\u65f6\u200b\uff0c\u200b\u5176\u200b\u4f18\u52bf\u200b\u5728\u4e8e\u200b\uff1a <ul> <li>\u200b\u8de8\u5e73\u53f0\u200b\u6027\u200b\uff1a\u200b\u6807\u51c6\u200b\u5e93\u200b\u539f\u751f\u200b\u652f\u6301\u200b\uff0c\u200b\u65e0\u9700\u200b\u5e73\u53f0\u200b\u7279\u5b9a\u200bAPI</li> <li>\u200b\u9ad8\u7cbe\u5ea6\u200b\uff1ahigh_resolution_clock\u200b\u53ef\u200b\u63d0\u4f9b\u200b\u7eb3\u79d2\u200b\u7ea7\u200b\u7cbe\u5ea6\u200b</li> <li>\u200b\u7c7b\u578b\u200b\u5b89\u5168\u200b\uff1a\u200b\u5f3a\u200b\u7c7b\u578b\u200b\u7684\u200b\u65f6\u95f4\u200b\u5355\u4f4d\u200b\u548c\u200b\u6301\u7eed\u65f6\u95f4\u200b\u8ba1\u7b97\u200b</li> <li>\u200b\u6613\u7528\u6027\u200b\uff1a\u200b\u65e0\u9700\u200b\u624b\u52a8\u200b\u8f6c\u6362\u200b\u65f6\u95f4\u200b\u5355\u4f4d\u200b\uff0c\u200b\u652f\u6301\u200b\u81ea\u52a8\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b</li> </ul>"},{"location":"technology/Cpp/009-HighResolutionClock/#_3","title":"\u4e8c\u200b\u3001\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u5b9e\u73b0","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nclass HighPrecisionTimer {\npublic:\n    // \u200b\u5f00\u59cb\u200b\u8ba1\u65f6\u200b \n    void start() {\n        start_time = std::chrono::high_resolution_clock::now();\n    }\n\n    // \u200b\u7ed3\u675f\u200b\u8ba1\u65f6\u200b \n    void stop() {\n        end_time = std::chrono::high_resolution_clock::now();\n    }\n\n    // \u200b\u83b7\u53d6\u200b\u8017\u65f6\u200b\uff08\u200b\u9ed8\u8ba4\u200b\u6beb\u79d2\u200b\uff09\n    template&lt;typename Duration = std::chrono::milliseconds&gt;\n    auto duration() const {\n        return std::chrono::duration_cast&lt;Duration&gt;(end_time - start_time).count();\n    }\n\n    // \u200b\u81ea\u52a8\u200b\u8f93\u51fa\u200b\u8017\u65f6\u200b\u7ed3\u679c\u200b \n    void print(const std::string&amp; msg = \"\") const {\n        auto ns = duration&lt;std::chrono::nanoseconds&gt;();\n        std::cout &lt;&lt; msg &lt;&lt; \"Cost: \" &lt;&lt; ns &lt;&lt; \" ns (\" &lt;&lt; ns/1000.0 &lt;&lt; \" \u03bcs, \" &lt;&lt; ns/1000000.0 &lt;&lt; \" ms)\\n\";\n    }\n\nprivate:\n    std::chrono::high_resolution_clock::time_point start_time, end_time;\n};\n\nclass AutoHighPrecisionTimer {\npublic:\n    // \u200b\u5f00\u59cb\u200b\u8ba1\u65f6\u200b \n    AutoHighPrecisionTimer() {\n        start_time = std::chrono::high_resolution_clock::now();\n    }\n\n    // \u200b\u83b7\u53d6\u200b\u8017\u65f6\u200b\uff08\u200b\u9ed8\u8ba4\u200b\u6beb\u79d2\u200b\uff09\n    template&lt;typename Duration = std::chrono::milliseconds&gt;\n    auto duration() const {\n        return std::chrono::duration_cast&lt;Duration&gt;(end_time - start_time).count();\n    }\n\n    // \u200b\u81ea\u52a8\u200b\u8f93\u51fa\u200b\u8017\u65f6\u200b\u7ed3\u679c\u200b \n    void print(const std::string&amp; msg = \"\") {\n        end_time = std::chrono::high_resolution_clock::now();\n        auto ns = duration&lt;std::chrono::nanoseconds&gt;();\n        std::cout &lt;&lt; msg &lt;&lt; \"Cost: \" &lt;&lt; ns &lt;&lt; \" ns (\" &lt;&lt; ns/1000.0 &lt;&lt; \" \u03bcs, \" &lt;&lt; ns/1000000.0 &lt;&lt; \" ms)\\n\";\n    }\n\nprivate:\n    std::chrono::high_resolution_clock::time_point start_time, end_time;\n};\n\n// \u200b\u793a\u4f8b\u200b\u6d4b\u8bd5\u51fd\u6570\u200b \nvoid test_function() {\n    std::vector&lt;int&gt; data(1000000);\n    std::generate(data.begin(),  data.end(),  [](){ return rand() % 1000; });\n    std::sort(data.begin(),  data.end()); \n    std::this_thread::sleep_for(std::chrono::milliseconds(50));\n}\n\nint main() {\n    // \u200b\u7528\u4f8b\u200b1\uff1a\u200b\u624b\u52a8\u200b\u8ba1\u65f6\u200b \n    HighPrecisionTimer timer;\n    timer.start(); \n    test_function();\n    timer.stop(); \n    timer.print(\"Manual  timing: \");\n\n    // \u200b\u7528\u4f8b\u200b2\uff1a\u200b\u81ea\u52a8\u200b\u4f5c\u7528\u57df\u200b\u8ba1\u65f6\u200b \n    {\n        AutoHighPrecisionTimer auto_timer;\n        test_function();\n        auto_timer.print(\"Auto  scope timing: \");\n    }\n\n    return 0;\n}\n\n</code></pre>"},{"location":"technology/Cpp/009-HighResolutionClock/#_4","title":"\u4e09\u200b\u3001\u200b\u4f7f\u7528\u200b\u8bf4\u660e","text":"<ul> <li>\u200b\u57fa\u672c\u200b\u8ba1\u65f6\u200b</li> </ul> <pre><code>HighPrecisionTimer t;\nt.start(); \n// \u200b\u88ab\u6d4b\u200b\u4ee3\u7801\u200b \nt.stop(); \nstd::cout &lt;&lt; \"\u200b\u8017\u65f6\u200b\uff1a\" &lt;&lt; t.duration()  &lt;&lt; \"ms\\n\";\n</code></pre> <ul> <li>\u200b\u6307\u5b9a\u200b\u65f6\u95f4\u200b\u5355\u4f4d\u200b</li> </ul> <pre><code>auto microsec = t.duration&lt;std::chrono::microseconds&gt;(); \nauto nanosec = t.duration&lt;std::chrono::nanoseconds&gt;(); \n</code></pre> <ul> <li>\u200b\u81ea\u52a8\u200b\u4f5c\u7528\u57df\u200b\u8ba1\u65f6\u200b</li> </ul> <pre><code>{\n    HighPrecisionTimer t;\n    // \u200b\u88ab\u6d4b\u200b\u4ee3\u7801\u200b \n    t.print();  // \u200b\u81ea\u52a8\u200b\u8f93\u51fa\u200b\u79bb\u5f00\u200b\u4f5c\u7528\u57df\u200b\u65f6\u200b\u7684\u200b\u8017\u65f6\u200b \n}\n</code></pre>"},{"location":"technology/Cpp/009-HighResolutionClock/#_5","title":"\u56db\u200b\u3001\u200b\u8de8\u5e73\u53f0\u200b\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u200b\u7f16\u8bd1\u200b\u8981\u6c42\u200b\uff1a\u200b\u9700\u200b\u5f00\u542f\u200bC++11\u200b\u6216\u200b\u66f4\u200b\u9ad8\u6807\u51c6\u200b</li> </ul> <pre><code>g++ -std=c++11 -O3 timer.cpp  -o timer \n</code></pre> <ul> <li> <p>\u200b\u7cbe\u5ea6\u200b\u8bf4\u660e\u200b \uff1a Windows\uff1a\u200b\u901a\u5e38\u200b\u63d0\u4f9b\u200b100\u200b\u7eb3\u79d2\u200b\u7cbe\u5ea6\u200b Linux/macOS\uff1a\u200b\u901a\u5e38\u200b\u63d0\u4f9b\u200b1\u200b\u7eb3\u79d2\u200b\u7cbe\u5ea6\u200b \u200b\u5b9e\u9645\u200b\u7cbe\u5ea6\u200b\u53d6\u51b3\u4e8e\u200b\u786c\u4ef6\u200b\u652f\u6301\u200b</p> </li> <li> <p>\u200b\u6027\u80fd\u200b\u5f71\u54cd\u200b\uff1a \u200b\u8ba1\u65f6\u5668\u200b\u672c\u8eab\u200b\u5f00\u9500\u200b\u7ea6\u200b20-50\u200b\u7eb3\u79d2\u200b \u200b\u5efa\u8bae\u200b\u88ab\u6d4b\u200b\u4ee3\u7801\u200b\u8017\u65f6\u200b&gt;1\u200b\u5fae\u79d2\u200b\u65f6\u200b\u4f7f\u7528\u200b</p> </li> </ul>"},{"location":"technology/Cpp/009-HighResolutionClock/#_6","title":"\u4e94\u200b\u3001\u200b\u6280\u672f\u200b\u4f18\u52bf","text":"<ul> <li>\u200b\u7c7b\u578b\u200b\u5b89\u5168\u200b\u7684\u200b\u65f6\u95f4\u200b\u8fd0\u7b97\u200b</li> </ul> <pre><code>using namespace std::chrono_literals;\nauto time1 = 100ms;  // \u200b\u660e\u786e\u200b\u7684\u200b\u65f6\u95f4\u200b\u5355\u4f4d\u200b \nauto time2 = 500us;  // \u200b\u5fae\u79d2\u200b\u5b57\u9762\u200b\u91cf\u200b \n</code></pre> <ul> <li>\u200b\u591a\u200b\u65f6\u949f\u200b\u6e90\u200b\u652f\u6301\u200b system_clock:  \u200b\u7cfb\u7edf\u200b\u58c1\u949f\u200b\u65f6\u95f4\u200b  steady_clock:  \u200b\u5355\u8c03\u200b\u9012\u589e\u200b\u65f6\u949f\u200b\uff08\u200b\u63a8\u8350\u200b\u7528\u4e8e\u200b\u8017\u65f6\u200b\u8ba1\u7b97\u200b\uff09 high_resolution_clock: \u200b\u6700\u9ad8\u200b\u7cbe\u5ea6\u200b\u65f6\u949f\u200b </li> </ul>"},{"location":"technology/Cpp/009-HighResolutionClock/#_7","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/010-Catch2/","title":"Catch2","text":""},{"location":"technology/Cpp/010-Catch2/#_1","title":"\u4e00\u200b\u3001\u200b\u6846\u67b6\u200b\u7b80\u4ecb","text":"<p>Catch2 \u200b\u662f\u200b\u4e00\u4e2a\u200b\u57fa\u4e8e\u200b C++ \u200b\u7684\u200b\u73b0\u4ee3\u5316\u200b\u5355\u5143\u6d4b\u8bd5\u200b\u6846\u67b6\u200b\uff0c\u200b\u652f\u6301\u200b TDD\uff08\u200b\u6d4b\u8bd5\u200b\u9a71\u52a8\u200b\u5f00\u53d1\u200b\uff09\u200b\u548c\u200b BDD\uff08\u200b\u884c\u4e3a\u200b\u9a71\u52a8\u200b\u5f00\u53d1\u200b\uff09\u200b\u6a21\u5f0f\u200b\u3002\u200b\u5176\u200b\u6838\u5fc3\u200b\u4f18\u52bf\u200b\u5728\u4e8e\u200b\uff1a</p> <ul> <li>\u200b\u5355\u200b\u5934\u6587\u4ef6\u200b\u8bbe\u8ba1\u200b\uff1av2.x \u200b\u7248\u672c\u200b\u4ec5\u200b\u9700\u200b\u5305\u542b\u200b catch.hpp \u200b\u5373\u53ef\u200b\u4f7f\u7528\u200b</li> <li>\u200b\u81ea\u7136\u200b\u8bed\u6cd5\u200b\uff1a\u200b\u6d4b\u8bd5\u7528\u4f8b\u200b\u547d\u540d\u200b\u652f\u6301\u200b\u81ea\u7531\u200b\u683c\u5f0f\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u65ad\u8a00\u200b\u4f7f\u7528\u200b\u6807\u51c6\u200b C++ \u200b\u8fd0\u7b97\u7b26\u200b</li> <li>\u200b\u96f6\u200b\u5916\u90e8\u200b\u4f9d\u8d56\u200b\uff1a\u200b\u4ec5\u200b\u9700\u200b C++11 \u200b\u53ca\u200b\u4ee5\u4e0a\u200b\u6807\u51c6\u200b\u5e93\u200b\u652f\u6301\u200b</li> <li>\u200b\u591a\u7ef4\u5ea6\u200b\u8986\u76d6\u200b\uff1a\u200b\u652f\u6301\u200b\u5f02\u5e38\u200b\u6d4b\u8bd5\u200b\u3001\u200b\u57fa\u51c6\u200b\u6d4b\u8bd5\u200b\u3001Matchers \u200b\u5339\u914d\u200b\u5668\u200b\u7b49\u200b\u9ad8\u7ea7\u200b\u529f\u80fd\u200b</li> </ul> <p>\u200b\u5b98\u65b9\u7f51\u7ad9\u200bCatch2</p>"},{"location":"technology/Cpp/010-Catch2/#_2","title":"\u4e8c\u200b\u3001\u200b\u73af\u5883\u200b\u914d\u7f6e","text":"<pre><code># CMake \u200b\u96c6\u6210\u200b\u793a\u4f8b\u200b\uff08v2.x \u200b\u7248\u672c\u200b\uff09\ncmake_minimum_required(VERSION 3.10)\nproject(Catch2_Demo)\n\n# \u200b\u4e0b\u8f7d\u200b Catch2 \u200b\u5355\u200b\u5934\u6587\u4ef6\u200b \ninclude(FetchContent)\nFetchContent_Declare(\n  Catch2\n  URL https://github.com/catchorg/Catch2/releases/download/v3.8.0/catch_amalgamated.hpp  \n)\nFetchContent_MakeAvailable(Catch2)\n\nadd_executable(tests \n  src/main.cpp  \n  src/tests.cpp  \n)\ntarget_include_directories(tests PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/include)\n</code></pre>"},{"location":"technology/Cpp/010-Catch2/#_3","title":"\u4e09\u200b\u3001\u200b\u6838\u5fc3\u200b\u529f\u80fd\u200b\u5b9e\u73b0","text":"<ol> <li>\u200b\u57fa\u7840\u200b\u6d4b\u8bd5\u200b\u7ed3\u6784\u200b</li> </ol> <pre><code>// tests.cpp  \n#define CATCH_CONFIG_MAIN \n#include &lt;catch.hpp&gt; \n\nint factorial(int n) {\n    if(n &lt;= 0) return 1;\n    return n * factorial(n - 1);\n}\n\nTEST_CASE(\"\u200b\u9636\u4e58\u200b\u57fa\u7840\u200b\u6d4b\u8bd5\u200b\", \"[math][factorial]\") {\n    SECTION(\"\u200b\u6b63\u6574\u6570\u200b\u503c\u200b\u9a8c\u8bc1\u200b\") {\n        REQUIRE(factorial(5) == 120);\n        CHECK(factorial(6) == 720);  // \u200b\u975e\u200b\u81f4\u547d\u200b\u65ad\u8a00\u200b \n    }\n\n    SECTION(\"\u200b\u8fb9\u754c\u6761\u4ef6\u200b\u9a8c\u8bc1\u200b\") {\n        REQUIRE(factorial(0) == 1);\n        REQUIRE(factorial(-1) == 1);\n    }\n}\n</code></pre> <ol> <li>BDD \u200b\u98ce\u683c\u200b\u6d4b\u8bd5\u200b</li> </ol> <pre><code>SCENARIO(\"\u200b\u7528\u6237\u200b\u767b\u5f55\u200b\u6d41\u7a0b\u200b\u9a8c\u8bc1\u200b\", \"[auth][bdd]\") {\n    GIVEN(\"\u200b\u5df2\u200b\u6ce8\u518c\u200b\u7528\u6237\u200b\u51ed\u8bc1\u200b\") {\n        std::string username = \"test_user\";\n        std::string password = \"P@ssw0rd\";\n\n        WHEN(\"\u200b\u8f93\u5165\u200b\u6b63\u786e\u200b\u5bc6\u7801\u200b\") {\n            bool result = authenticate(username, password);\n\n            THEN(\"\u200b\u5e94\u200b\u8fd4\u56de\u200b\u8ba4\u8bc1\u200b\u6210\u529f\u200b\") {\n                REQUIRE(result == true);\n            }\n        }\n\n        WHEN(\"\u200b\u8f93\u5165\u200b\u9519\u8bef\u200b\u5bc6\u7801\u200b\") {\n            bool result = authenticate(username, \"wrong_pass\");\n\n            THEN(\"\u200b\u5e94\u200b\u8fd4\u56de\u200b\u8ba4\u8bc1\u200b\u5931\u8d25\u200b\") {\n                REQUIRE_FALSE(result);\n            }\n        }\n    }\n}\n</code></pre> <ol> <li>\u200b\u9ad8\u7ea7\u200b\u9a8c\u8bc1\u200b\u529f\u80fd\u200b</li> </ol> <pre><code>// \u200b\u5f02\u5e38\u200b\u6d4b\u8bd5\u200b \nTEST_CASE(\"\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u9a8c\u8bc1\u200b\", \"[exceptions]\") {\n    REQUIRE_THROWS_AS(throw std::runtime_error(\"\u200b\u9519\u8bef\u200b\"), std::runtime_error);\n    CHECK_THROWS_WITH(throw \"Error!\", Catch::Contains(\"Error\"));\n}\n\n// \u200b\u6d6e\u70b9\u200b\u8fd1\u4f3c\u200b\u6bd4\u8f83\u200b \nTEST_CASE(\"\u200b\u7cbe\u5ea6\u200b\u8ba1\u7b97\u200b\u9a8c\u8bc1\u200b\", \"[math][approx]\") {\n    double pi = 3.14159265359;\n    REQUIRE(pi == Approx(3.14159).epsilon(0.0001));\n}\n\n// Matchers \u200b\u5339\u914d\u200b\u5668\u200b\nTEST_CASE(\"\u200b\u5b57\u7b26\u4e32\u200b\u9a8c\u8bc1\u200b\", \"[strings]\") {\n    using namespace Catch::Matchers;\n    std::string url = \"https://api.example.com/v1\"; \n\n    REQUIRE_THAT(url, \n        StartsWith(\"https\") &amp;&amp; \n        EndsWith(\"v1\") &amp;&amp; \n        Contains(\"example\"));\n}\n</code></pre> <ol> <li>\u200b\u57fa\u51c6\u200b\u6d4b\u8bd5\u200b</li> </ol> <pre><code>TEST_CASE(\"\u200b\u6027\u80fd\u200b\u57fa\u51c6\u200b\u6d4b\u8bd5\u200b\", \"[!benchmark]\") {\n    BENCHMARK(\"\u200b\u5411\u91cf\u200b\u63d2\u5165\u200b 1000 \u200b\u5143\u7d20\u200b\") {\n        std::vector&lt;int&gt; v;\n        for(int i = 0; i &lt; 1000; ++i) {\n            v.push_back(i); \n        }\n    };\n}\n</code></pre>"},{"location":"technology/Cpp/010-Catch2/#_4","title":"\u56db\u200b\u3001\u200b\u8fdb\u9636\u200b\u4f7f\u7528\u200b\u6280\u5de7","text":"<ul> <li>\u200b\u6d4b\u8bd5\u200b\u8fc7\u6ee4\u200b\uff1a\u200b\u901a\u8fc7\u200b\u6807\u7b7e\u200b\u6267\u884c\u200b\u7279\u5b9a\u200b\u6d4b\u8bd5\u200b</li> </ul> <pre><code>./tests \"[math]\"          # \u200b\u6267\u884c\u200b\u6240\u6709\u200b\u6570\u5b66\u200b\u6d4b\u8bd5\u200b \n./tests \"~[slow]\"         # \u200b\u6392\u9664\u200b\u6807\u8bb0\u200b\u4e3a\u200b slow \u200b\u7684\u200b\u6d4b\u8bd5\u200b \n</code></pre> <ul> <li>\u200b\u81ea\u5b9a\u4e49\u200b Main \u200b\u51fd\u6570\u200b\uff08\u200b\u9700\u200b\u914d\u7f6e\u200b CATCH_CONFIG_RUNNER\uff09\uff1a</li> </ul> <pre><code>int main(int argc, char* argv[]) {\n    Catch::Session session;\n\n    // \u200b\u6dfb\u52a0\u200b\u5168\u5c40\u200b\u914d\u7f6e\u200b \n    session.configData().showDurations  = Catch::ShowDurations::Always;\n\n    return session.run(argc,  argv);\n}\n</code></pre> <ul> <li>\u200b\u53c2\u6570\u200b\u5316\u200b\u6d4b\u8bd5\u200b\uff1a</li> </ul> <pre><code>TEST_CASE_METHOD(TestFixture, \"\u200b\u53c2\u6570\u200b\u5316\u200b\u6d4b\u8bd5\u200b\", \"[params]\") {\n  auto [input, expected] = GENERATE(\n      std::make_tuple(2, 4),\n      std::make_tuple(3, 9),\n      std::make_tuple(5, 25)\n  );\n\n  REQUIRE(square(input) == expected);\n}\n</code></pre>"},{"location":"technology/Cpp/010-Catch2/#_5","title":"\u4e94\u200b\u3001\u200b\u6700\u4f73\u200b\u5b9e\u8df5\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u6d4b\u8bd5\u200b\u7ec4\u7ec7\u200b\u7ed3\u6784\u200b\uff1a</li> </ul> <pre><code>tests/\n\u251c\u2500\u2500 unit/        # \u200b\u5355\u5143\u6d4b\u8bd5\u200b \n\u251c\u2500\u2500 integration/ # \u200b\u96c6\u6210\u200b\u6d4b\u8bd5\u200b \n\u2514\u2500\u2500 benchmark/   # \u200b\u6027\u80fd\u200b\u6d4b\u8bd5\u200b \n</code></pre> <ul> <li>CI/CD \u200b\u96c6\u6210\u200b\uff1a</li> </ul> <pre><code># GitHub Actions \u200b\u793a\u4f8b\u200b \njobs:\n  test:\n    runs-on: ubuntu-latest \n    steps:\n      - uses: actions/checkout@v2\n      - run: |\n          mkdir build \n          cd build \n          cmake ..\n          make \n          ./tests -r compact \n</code></pre>"},{"location":"technology/Cpp/010-Catch2/#_6","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/011-base64/","title":"base64","text":""},{"location":"technology/Cpp/011-base64/#_1","title":"\u7f16\u7801","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200bC++\u200b\u5b9e\u73b0\u200b\u7684\u200bBase64\u200b\u5b57\u7b26\u4e32\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b\u53ca\u5176\u200b\u539f\u7406\u200b\u8bf4\u660e\u200b\uff0c\u200b\u7efc\u5408\u200b\u4e86\u200b\u591a\u4e2a\u200b\u6280\u672f\u200b\u6587\u6863\u200b\u7684\u200b\u6838\u5fc3\u200b\u8981\u70b9\u200b\uff1a</p>"},{"location":"technology/Cpp/011-base64/#base64_1","title":"\u4e00\u200b\u3001Base64\u200b\u7f16\u7801\u200b\u539f\u7406","text":"<p>Base64\u200b\u662f\u200b\u4e00\u79cd\u200b\u5c06\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\u8f6c\u6362\u200b\u4e3a\u200bASCII\u200b\u5b57\u7b26\u200b\u7684\u200b\u7f16\u7801\u65b9\u5f0f\u200b\uff0c\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u57fa\u4e8e\u200b 3\u200b\u5b57\u8282\u200b\u8f6c\u200b4\u200b\u5b57\u7b26\u200b \u200b\u7684\u200b\u8f6c\u6362\u89c4\u5219\u200b\uff1a</p> <ul> <li>\u200b\u5206\u7ec4\u200b\u89c4\u5219\u200b\uff1a\u200b\u6bcf\u200b3\u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0824\u200b\u4f4d\u200b\uff09\u200b\u5206\u4e3a\u200b4\u200b\u7ec4\u200b\uff0c\u200b\u6bcf\u7ec4\u200b6\u200b\u4f4d\u200b\uff082\u2076=64\u200b\u79cd\u200b\u53ef\u80fd\u200b\uff09</li> <li>\u200b\u7f16\u7801\u200b\u8868\u200b\uff1a\u200b\u4f7f\u7528\u200b64\u200b\u4e2a\u200b\u53ef\u200b\u6253\u5370\u200b\u5b57\u7b26\u200b\uff08A-Z, a-z, 0-9, +, /\uff09\u200b\u548c\u200b\u586b\u5145\u200b\u7b26\u200b=\uff0c\u200b\u5982\u200bA=0, B=1,..., +=62, /=63</li> <li>\u200b\u586b\u5145\u200b\u673a\u5236\u200b\uff1a\u200b\u5f53\u200b\u6570\u636e\u200b\u4e0d\u8db3\u200b3\u200b\u5b57\u8282\u200b\u65f6\u200b\uff0c\u200b\u7528\u200b0\u200b\u8865\u9f50\u200b\u5269\u4f59\u200b\u4f4d\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u7ed3\u679c\u200b\u672b\u5c3e\u200b\u6dfb\u52a0\u200b=\u200b\u6807\u8bc6\u200b \u200b\u5269\u4f59\u200b1\u200b\u5b57\u8282\u200b \u2192 \u200b\u8865\u200b4\u200b\u4e2a\u200b0 \u2192 \u200b\u7ed3\u679c\u200b\u52a0\u200b== \u200b\u5269\u4f59\u200b2\u200b\u5b57\u8282\u200b \u2192 \u200b\u8865\u200b2\u200b\u4e2a\u200b0 \u2192 \u200b\u7ed3\u679c\u200b\u52a0\u200b=</li> </ul>"},{"location":"technology/Cpp/011-base64/#c","title":"\u4e8c\u200b\u3001C++\u200b\u5b9e\u73b0\u200b\u4ee3\u7801","text":"<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nconst std::string BASE64_CHARS = \n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n    \"abcdefghijklmnopqrstuvwxyz\"\n    \"0123456789+/\";\n\nstd::string base64_encode(const std::string &amp;input) {\n    std::string encoded;\n    int val = 0, valb = -6;\n    unsigned int len = input.length(); \n\n    for (unsigned char c : input) {\n        val = (val &lt;&lt; 8) + c;  // \u200b\u5408\u5e76\u200b3\u200b\u5b57\u8282\u200b\u5230\u200b24\u200b\u4f4d\u200b\u7f13\u51b2\u533a\u200b \n        valb += 8;\n        while (valb &gt;= 0) {    // \u200b\u6bcf\u6b21\u200b\u63d0\u53d6\u200b6\u200b\u4f4d\u200b\u751f\u6210\u200b\u7f16\u7801\u200b\u5b57\u7b26\u200b \n            encoded.push_back(BASE64_CHARS[(val  &gt;&gt; valb) &amp; 0x3F]);\n            valb -= 6;\n        }\n    }\n\n    // \u200b\u5904\u7406\u200b\u5269\u4f59\u200b\u4f4d\u200b\n    if (valb &gt; -6) {\n        encoded.push_back(BASE64_CHARS[((val  &lt;&lt; 8) &gt;&gt; (valb + 8)) &amp; 0x3F]);\n    }\n\n    // \u200b\u586b\u5145\u200b\u7b49\u200b\u53f7\u200b \n    while (encoded.size()  % 4) {\n        encoded.push_back('='); \n    }\n\n    return encoded;\n}\n</code></pre>"},{"location":"technology/Cpp/011-base64/#_2","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u5b9e\u73b0\u200b\u89e3\u6790","text":"<ul> <li>\u200b\u4f4d\u64cd\u4f5c\u200b\u5904\u7406\u200b \u200b\u4f7f\u7528\u200bval\u200b\u4f5c\u4e3a\u200b24\u200b\u4f4d\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u901a\u8fc7\u200b\u5de6\u79fb\u200b8\u200b\u4f4d\u200b\u5408\u5e76\u200b\u8f93\u5165\u200b\u5b57\u8282\u200b valb\u200b\u8bb0\u5f55\u200b\u5f53\u524d\u200b\u6709\u6548\u4f4d\u6570\u200b\uff08-6\u200b\u8868\u793a\u200b\u521d\u59cb\u200b\u9700\u8981\u200b\u586b\u5145\u200b6\u200b\u4f4d\u200b\uff09 (val &gt;&gt; valb) &amp; 0x3F\u200b\u63d0\u53d6\u200b6\u200b\u4f4d\u200b\u6570\u636e\u200b\uff080x3F\u200b\u5373\u200b\u4e8c\u8fdb\u5236\u200b00111111\uff09</li> <li>\u200b\u8fb9\u754c\u200b\u5904\u7406\u200b</li> <li>\u200b\u5269\u4f59\u200b\u4f4d\u200b\u5904\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200b(val &lt;&lt; 8) &gt;&gt; (valb + 8)\u200b\u83b7\u53d6\u200b\u672a\u200b\u5904\u7406\u200b\u7684\u200b\u5c3e\u90e8\u200b\u6570\u636e\u200b</li> <li>\u200b\u586b\u5145\u200b\u89c4\u5219\u200b\uff1a\u200b\u6700\u7ec8\u200b\u957f\u5ea6\u200b\u5fc5\u987b\u200b\u662f\u200b4\u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u4e0d\u8db3\u200b\u65f6\u8865\u200b=</li> <li>\u200b\u7f16\u7801\u8868\u793a\u200b \u200b\u67e5\u8868\u200b\u65f6\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200bBASE64_CHARS\u200b\u5b57\u7b26\u4e32\u200b\u8fdb\u884c\u200b\u5b57\u7b26\u200b\u6620\u5c04\u200b</li> </ul>"},{"location":"technology/Cpp/011-base64/#_3","title":"\u56db\u200b\u3001\u200b\u4f7f\u7528\u200b\u793a\u4f8b","text":"<pre><code>int main() {\n    std::string plain = \"Hello World!\";\n    std::string encoded = base64_encode(plain);\n    // \u200b\u8f93\u51fa\u200b\uff1aSGVsbG8gV29ybGQh\n    std::cout &lt;&lt; encoded &lt;&lt; std::endl; \n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/011-base64/#_4","title":"\u4e94\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u9884\u200b\u5206\u914d\u5185\u5b58\u200b\uff1a\u200b\u6839\u636e\u200b\u8f93\u5165\u200b\u957f\u5ea6\u200b\u8ba1\u7b97\u200b\u8f93\u51fa\u200b\u957f\u5ea6\u200b\uff08(4 * (n/3)) + 4\uff09\uff0c\u200b\u4f7f\u7528\u200breserve()\u200b\u51cf\u5c11\u200b\u5185\u5b58\u200b\u91cd\u200b\u5206\u914d\u200b</li> <li>\u200b\u6279\u91cf\u200b\u5904\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200breinterpret_cast\u200b\u5c06\u200b\u5b57\u7b26\u4e32\u200b\u8f6c\u4e3a\u200buint32_t\u200b\u6570\u7ec4\u200b\u8fdb\u884c\u200b\u6279\u91cf\u200b\u4f4d\u64cd\u4f5c\u200b</li> <li>SIMD\u200b\u6307\u4ee4\u200b\uff1a\u200b\u4f7f\u7528\u200bAVX2\u200b\u6307\u4ee4\u96c6\u200b\u52a0\u901f\u200b\u5206\u7ec4\u200b\u8ba1\u7b97\u200b\uff08\u200b\u9700\u200b\u786c\u4ef6\u200b\u652f\u6301\u200b\uff09</li> </ul>"},{"location":"technology/Cpp/011-base64/#_5","title":"\u9644\u200b\uff1a\u200b\u7f16\u7801\u200b\u8fc7\u7a0b\u200b\u793a\u4f8b","text":"<ul> <li> <p>\u200b\u539f\u59cb\u6570\u636e\u200b\uff1a\"Man\"\uff08ASCII\u200b\u7801\u200b\uff1a77, 97, 110\uff09</p> </li> <li> <p>\u200b\u4e8c\u8fdb\u5236\u200b\u5f62\u5f0f\u200b\uff1a01001101 01100001 01101110</p> </li> <li>6\u200b\u4f4d\u200b\u5206\u7ec4\u200b\uff1a</li> </ul> <pre><code>010011 \u2192 19 \u2192 T\n\n010110 \u2192 22 \u2192 W\n\n000101 \u2192 5 \u2192 F\n\n101110 \u2192 46 \u2192 u\n</code></pre> <ul> <li>\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\uff1aTWFu \u200b\u8be5\u200b\u5b9e\u73b0\u200b\u5b8c\u6574\u200b\u8986\u76d6\u200b\u4e86\u200bBase64\u200b\u6807\u51c6\u89c4\u8303\u200b\uff0c\u200b\u53ef\u200b\u901a\u8fc7\u200b\u5728\u7ebf\u200bBase64\u200b\u5de5\u5177\u200b\uff08\u200b\u5982\u200bbase64encode.org \uff09\u200b\u9a8c\u8bc1\u200b\u7ed3\u679c\u200b\u6b63\u786e\u6027\u200b\u3002\u200b\u5982\u9700\u200b\u5904\u7406\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\uff08\u200b\u5982\u200b\u56fe\u7247\u200b\uff09\uff0c\u200b\u53ef\u200b\u5c06\u200b\u8f93\u5165\u200b\u7c7b\u578b\u200b\u6539\u4e3a\u200bunsigned char*\u200b\u5e76\u200b\u914d\u5408\u200b\u957f\u5ea6\u200b\u53c2\u6570\u200b\u4f7f\u7528\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/011-base64/#_6","title":"\u89e3\u7801","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200bC++\u200b\u5b9e\u73b0\u200b\u7684\u200bBase64\u200b\u5b57\u7b26\u4e32\u200b\u89e3\u5bc6\u200b\u7b97\u6cd5\u200b\u53ca\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u8bf4\u660e\u200b\uff0c\u200b\u7ed3\u5408\u200b\u6280\u672f\u200b\u6587\u6863\u200b\u548c\u200b\u5b9e\u73b0\u200b\u8981\u70b9\u200b\uff1a</p>"},{"location":"technology/Cpp/011-base64/#base64_2","title":"\u4e00\u200b\u3001Base64\u200b\u89e3\u7801\u200b\u539f\u7406","text":"<p>Base64\u200b\u89e3\u7801\u200b\u662f\u200b\u7f16\u7801\u200b\u7684\u200b\u9006\u200b\u8fc7\u7a0b\u200b\uff0c\u200b\u6838\u5fc3\u200b\u6b65\u9aa4\u200b\u5305\u62ec\u200b 4\u200b\u5b57\u7b26\u200b\u8f6c\u200b3\u200b\u5b57\u8282\u200b \u200b\u7684\u200b\u8f6c\u6362\u89c4\u5219\u200b\uff1a</p> <p>\u200b\u53bb\u9664\u200b\u586b\u5145\u200b\u7b26\u200b\uff1a\u200b\u5148\u200b\u79fb\u9664\u200b\u672b\u5c3e\u200b\u7684\u200b=\uff0c\u200b\u6839\u636e\u200b=\u200b\u6570\u91cf\u200b\u5224\u65ad\u200b\u539f\u59cb\u6570\u636e\u200b\u8865\u4f4d\u200b\u60c5\u51b5\u200b\uff080/2/4\u200b\u4e2a\u200b\u8865\u4f4d\u200b\uff09 \u200b\u5b57\u7b26\u200b\u6620\u5c04\u200b\uff1a\u200b\u5c06\u200bBase64\u200b\u5b57\u7b26\u200b\u8f6c\u6362\u200b\u4e3a\u200b6\u200b\u4f4d\u200b\u4e8c\u8fdb\u5236\u200b\u503c\u200b\uff08\u200b\u67e5\u200b\u53cd\u5411\u200b\u6620\u5c04\u200b\u8868\u200b\uff09 \u200b\u4f4d\u200b\u91cd\u7ec4\u200b\uff1a\u200b\u6bcf\u200b4\u200b\u4e2a\u200b6\u200b\u4f4d\u503c\u200b\u5408\u5e76\u200b\u4e3a\u200b24\u200b\u4f4d\u200b\u6570\u636e\u200b\uff0c\u200b\u518d\u200b\u62c6\u200b\u5206\u4e3a\u200b3\u200b\u4e2a\u200b8\u200b\u4f4d\u200b\u5b57\u8282\u200b \u200b\u8865\u4f4d\u200b\u5904\u7406\u200b\uff1a\u200b\u6839\u636e\u200b\u539f\u59cb\u200b\u8865\u4f4d\u200b\u60c5\u51b5\u200b\u4e22\u5f03\u200b\u65e0\u6548\u200b\u4f4d\u200b\uff08\u200b\u6bcf\u200b1\u200b\u4e2a\u200b=\u200b\u9700\u200b\u4e22\u5f03\u200b\u6700\u540e\u200b2\u200b\u4f4d\u200b\uff09</p>"},{"location":"technology/Cpp/011-base64/#c_1","title":"\u4e8c\u200b\u3001C++\u200b\u5b9e\u73b0\u200b\u4ee3\u7801","text":"<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nconst std::string BASE64_CHARS = \n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n    \"abcdefghijklmnopqrstuvwxyz\"\n    \"0123456789+/\";\n\nstd::string base64_decode(const std::string &amp;input) {\n    std::vector&lt;int&gt; decode_table(256, -1);\n    for (int i = 0; i &lt; 64; i++) {\n        decode_table[BASE64_CHARS[i]] = i;\n    }\n\n    std::string decoded;\n    int val = 0, bits = -8;\n    unsigned int len = input.size(); \n\n    for (unsigned char c : input) {\n        if (c == '=') break; // \u200b\u505c\u6b62\u200b\u5904\u7406\u200b\u586b\u5145\u200b\u7b26\u200b\n        if (decode_table[c] == -1) continue; // \u200b\u8df3\u8fc7\u200b\u975e\u6cd5\u200b\u5b57\u7b26\u200b\n\n        val = (val &lt;&lt; 6) + decode_table[c]; // \u200b\u5408\u5e76\u200b6\u200b\u4f4d\u200b\u6570\u636e\u200b\u5230\u200b24\u200b\u4f4d\u200b\u7f13\u51b2\u533a\u200b\n        bits += 6;\n\n        if (bits &gt;= 0) { // \u200b\u6bcf\u6b21\u200b\u63d0\u53d6\u200b8\u200b\u4f4d\u200b\u751f\u6210\u200b\u539f\u59cb\u200b\u5b57\u8282\u200b\n            decoded.push_back((val  &gt;&gt; bits) &amp; 0xFF);\n            bits -= 8;\n        }\n    }\n\n    // \u200b\u5904\u7406\u200b\u5269\u4f59\u200b\u4f4d\u200b\uff08\u200b\u6839\u636e\u200b=\u200b\u6570\u91cf\u200b\u5224\u65ad\u200b\u6709\u6548\u200b\u6570\u636e\u200b\uff09\n    if (bits &gt; -8 &amp;&amp; (input.back()  != '=' || (len % 4) == 1)) {\n        decoded.push_back((val  &lt;&lt; 8) &gt;&gt; (bits + 8) &amp; 0xFF);\n    }\n\n    return decoded;\n}\n</code></pre>"},{"location":"technology/Cpp/011-base64/#_7","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u5b9e\u73b0\u200b\u89e3\u6790","text":"<ul> <li> <p>\u200b\u53cd\u5411\u200b\u6620\u5c04\u200b\u8868\u200b\u6784\u5efa\u200b \u200b\u4f7f\u7528\u200bdecode_table\u200b\u5c06\u200bASCII\u200b\u5b57\u7b26\u200b\u6620\u5c04\u200b\u5230\u200b6\u200b\u4f4d\u503c\u200b\uff0c\u200b\u975e\u6cd5\u200b\u5b57\u7b26\u200b\u8fd4\u56de\u200b-1\u3002</p> </li> <li> <p>\u200b\u4f4d\u64cd\u4f5c\u200b\u91cd\u7ec4\u200b</p> </li> </ul> <p>val\u200b\u4f5c\u4e3a\u200b24\u200b\u4f4d\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u901a\u8fc7\u200b\u5de6\u79fb\u200b6\u200b\u4f4d\u200b\u5408\u5e76\u200b\u8f93\u5165\u200b\u5b57\u7b26\u200b\u7684\u200b6\u200b\u4f4d\u503c\u200b bits\u200b\u8bb0\u5f55\u200b\u5f53\u524d\u200b\u6709\u6548\u4f4d\u6570\u200b\uff08-8\u200b\u8868\u793a\u200b\u521d\u59cb\u200b\u9700\u8981\u200b\u586b\u5145\u200b8\u200b\u4f4d\u200b\uff09 (val &gt;&gt; bits) &amp; 0xFF\u200b\u63d0\u53d6\u200b8\u200b\u4f4d\u200b\u539f\u59cb\u6570\u636e\u200b * \u200b\u8fb9\u754c\u200b\u5904\u7406\u200b</p> <ul> <li>\u200b\u586b\u5145\u200b\u7b26\u200b\u5904\u7406\u200b\uff1a\u200b\u9047\u5230\u200b=\u200b\u63d0\u524d\u200b\u7ec8\u6b62\u200b\u5faa\u73af\u200b</li> <li>\u200b\u5269\u4f59\u200b\u4f4d\u200b\u8ba1\u7b97\u200b\uff1a\u200b\u6839\u636e\u200b=\u200b\u6570\u91cf\u200b\u548c\u200b\u8f93\u5165\u200b\u957f\u5ea6\u200b\u5224\u65ad\u200b\u6709\u6548\u200b\u6570\u636e\u200b\u8303\u56f4\u200b</li> </ul>"},{"location":"technology/Cpp/011-base64/#_8","title":"\u56db\u200b\u3001\u200b\u4f7f\u7528\u200b\u793a\u4f8b","text":"<pre><code>int main() {\n    std::string encoded = \"SGVsbG8gV29ybGQh\";\n    std::string decoded = base64_decode(encoded);\n    // \u200b\u8f93\u51fa\u200b\uff1aHello World!\n    std::cout &lt;&lt; decoded &lt;&lt; std::endl; \n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/011-base64/#_9","title":"\u4e94\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u8f93\u5165\u200b\u9a8c\u8bc1\u200b\uff1a\u200b\u68c0\u67e5\u200b\u8f93\u5165\u200b\u957f\u5ea6\u200b\u662f\u5426\u200b\u4e3a\u200b4\u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u63d0\u524d\u200b\u8fc7\u6ee4\u200b\u975e\u6cd5\u200b\u5b57\u7b26\u200b\u3002</li> <li>SIMD\u200b\u52a0\u901f\u200b\uff1a\u200b\u4f7f\u7528\u200bSSE/AVX\u200b\u6307\u4ee4\u96c6\u200b\u6279\u91cf\u200b\u5904\u7406\u200b\u5b57\u7b26\u200b\u6620\u5c04\u200b\uff08\u200b\u5982\u200b_mm_shuffle_epi8\uff09\u3002</li> <li>\u200b\u5185\u5b58\u200b\u9884\u200b\u5206\u914d\u200b\uff1a\u200b\u901a\u8fc7\u200b\u516c\u5f0f\u200boutput_size = (input_len * 3) / 4\u200b\u9884\u200b\u5206\u914d\u5185\u5b58\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/011-base64/#_10","title":"\u9644\u200b\uff1a\u200b\u89e3\u7801\u200b\u8fc7\u7a0b\u200b\u793a\u4f8b","text":"<p>\u200b\u7f16\u7801\u6570\u636e\u200b\uff1a\"TWFu\"</p> <ul> <li>\u200b\u5b57\u7b26\u200b\u6620\u5c04\u200b\uff1aT(19)\u2192010011\uff0cW(22)\u2192010110\uff0cF(5)\u2192000101\uff0cu(46)\u2192101110</li> <li>\u200b\u5408\u5e76\u200b24\u200b\u4f4d\u200b\uff1a01001101 01100001 01101110</li> <li>\u200b\u62c6\u200b\u5206\u4e3a\u200b3\u200b\u5b57\u8282\u200b\uff1a0x4D(77)\u2192'M', 0x61(97)\u2192'a', 0x6E(110)\u2192'n'</li> </ul> <p>\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\uff1a\"Man\" \u200b\u8be5\u200b\u5b9e\u73b0\u200b\u517c\u5bb9\u200bRFC 4648\u200b\u6807\u51c6\u200b\uff0c\u200b\u53ef\u200b\u901a\u8fc7\u200b\u5728\u7ebf\u200b\u5de5\u5177\u200b \u200b\u9a8c\u8bc1\u200b\u7ed3\u679c\u200b\u3002\u200b\u9700\u6ce8\u610f\u200b\u5904\u7406\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\u65f6\u9700\u200b\u6539\u7528\u200bunsigned char*\u200b\u7c7b\u578b\u200b\u3002</p>"},{"location":"technology/Cpp/011-base64/#_11","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/012-Benchmark/","title":"Benchmark","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u7bc7\u200b\u5173\u4e8e\u200bGoogle Benchmark\u200b\u5e93\u200b\u7684\u200b\u5168\u9762\u200b\u4ecb\u7ecd\u200b\u53ca\u200b\u4f7f\u7528\u6307\u5357\u200b\uff0c\u200b\u5305\u542b\u200b\u5b8c\u6574\u200bC++\u200b\u4ee3\u7801\u200b\u793a\u4f8b\u200b\u548c\u200b\u6838\u5fc3\u200b\u529f\u80fd\u200b\u8986\u76d6\u200b\uff1a</p> <p>Google Benchmark\uff1aC++ \u200b\u6027\u80fd\u200b\u57fa\u51c6\u200b\u6d4b\u8bd5\u200b\u6307\u5357\u200b</p>"},{"location":"technology/Cpp/012-Benchmark/#_1","title":"\u4e00\u200b\u3001\u200b\u5e93\u200b\u7b80\u4ecb","text":"<p>Google Benchmark \u200b\u662f\u200b\u4e00\u4e2a\u200b\u4e13\u200b\u4e3a\u200b C++ \u200b\u8bbe\u8ba1\u200b\u7684\u200b\u5fae\u200b\u57fa\u51c6\u200b\u6d4b\u8bd5\u200b\u5e93\u200b\uff0c\u200b\u7528\u4e8e\u200b\u7cbe\u786e\u6d4b\u91cf\u200b\u4ee3\u7801\u200b\u7247\u6bb5\u200b\u7684\u200b\u6267\u884c\u200b\u6548\u7387\u200b\u3002\u200b\u5176\u200b\u6838\u5fc3\u200b\u7279\u6027\u200b\u5305\u62ec\u200b\uff1a</p> <ul> <li>\u200b\u591a\u7ef4\u5ea6\u200b\u6d4b\u8bd5\u200b\uff1a\u200b\u652f\u6301\u200b\u53c2\u6570\u200b\u5316\u200b\u6d4b\u8bd5\u200b\u3001\u200b\u591a\u7ebf\u7a0b\u200b\u573a\u666f\u200b\u548c\u200b\u81ea\u200b\u5b9a\u4e49\u6570\u636e\u200b\u89c4\u6a21\u200b</li> <li>\u200b\u667a\u80fd\u200b\u8fed\u4ee3\u200b\uff1a\u200b\u81ea\u52a8\u200b\u8ba1\u7b97\u200b\u6700\u4f73\u200b\u8fed\u4ee3\u200b\u6b21\u6570\u200b\u4fdd\u8bc1\u200b\u7edf\u8ba1\u200b\u663e\u8457\u6027\u200b</li> <li>\u200b\u7cbe\u51c6\u200b\u8ba1\u65f6\u200b\uff1a\u200b\u63d0\u4f9b\u200b\u771f\u5b9e\u200b\u65f6\u95f4\u200b\uff08wall time\uff09\u200b\u548c\u200b CPU \u200b\u65f6\u95f4\u200b\u53cc\u200b\u7ef4\u5ea6\u200b\u6d4b\u91cf\u200b</li> <li>\u200b\u8de8\u5e73\u53f0\u200b\u652f\u6301\u200b\uff1a\u200b\u517c\u5bb9\u200b Linux/Windows/macOS\uff0c\u200b\u652f\u6301\u200b CMake \u200b\u6784\u5efa\u200b</li> </ul>"},{"location":"technology/Cpp/012-Benchmark/#_2","title":"\u4e8c\u200b\u3001\u200b\u73af\u5883\u200b\u5b89\u88c5","text":"<p>\u200b\u901a\u8fc7\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b\uff08\u200b\u63a8\u8350\u200b\uff09\uff1a</p>"},{"location":"technology/Cpp/012-Benchmark/#1","title":"1. \u200b\u5b89\u88c5\u200b\u4f9d\u8d56","text":"<pre><code>sudo apt install git cmake build-essential \n</code></pre>"},{"location":"technology/Cpp/012-Benchmark/#2","title":"2. \u200b\u514b\u9686\u200b\u4ed3\u5e93","text":"<pre><code>git clone https://github.com/google/benchmark.git  \ncd benchmark \n</code></pre>"},{"location":"technology/Cpp/012-Benchmark/#3","title":"3. \u200b\u6784\u5efa\u200b\u5b89\u88c5","text":"<pre><code>cmake -E make_directory build \ncmake -S . -B build -DBENCHMARK_DOWNLOAD_DEPENDENCIES=ON \ncmake --build build --config Release \nsudo cmake --install build \n</code></pre>"},{"location":"technology/Cpp/012-Benchmark/#_3","title":"\u4e09\u200b\u3001\u200b\u57fa\u7840\u200b\u4f7f\u7528","text":"<ul> <li>\u200b\u793a\u4f8b\u200b1\uff1a\u200b\u57fa\u672c\u200b\u6027\u80fd\u200b\u6d4b\u8bd5\u200b</li> </ul> <pre><code>#include &lt;benchmark/benchmark.h&gt;\n\nstatic void BM_StringCreation(benchmark::State&amp; state) {\n    for (auto _ : state) {\n        std::string empty_string;\n        benchmark::DoNotOptimize(empty_string); // \u200b\u9632\u6b62\u200b\u7f16\u8bd1\u5668\u200b\u4f18\u5316\u200b \n    }\n}\nBENCHMARK(BM_StringCreation);\n\nstatic void BM_StringCopy(benchmark::State&amp; state) {\n    std::string x = \"hello\";\n    for (auto _ : state) {\n        std::string copy(x);\n        benchmark::ClobberMemory(); // \u200b\u5f3a\u5236\u200b\u5185\u5b58\u200b\u64cd\u4f5c\u200b\u8ba1\u5165\u200b\u8ba1\u65f6\u200b \n    }\n}\nBENCHMARK(BM_StringCopy);\n\nBENCHMARK_MAIN();\n</code></pre> <p>\u200b\u8f93\u51fa\u200b\u89e3\u8bfb\u200b\uff1a</p> <pre><code>BM_StringCreation        3.27 ns         3.27 ns    210470863 \nBM_StringCopy           21.35 ns        21.35 ns     32765432 \n</code></pre> <ul> <li>\u200b\u7b2c\u4e00\u5217\u200b\uff1a\u200b\u6d4b\u8bd5\u200b\u540d\u79f0\u200b</li> <li>\u200b\u7b2c\u4e8c\u5217\u200b\uff1a\u200b\u6bcf\u6b21\u200b\u8fed\u4ee3\u200b\u5b9e\u9645\u200b\u8017\u65f6\u200b\uff08\u200b\u7eb3\u79d2\u200b\uff09</li> <li>\u200b\u7b2c\u4e09\u5217\u200b\uff1aCPU \u200b\u65f6\u95f4\u200b</li> <li>\u200b\u7b2c\u56db\u200b\u5217\u200b\uff1a\u200b\u81ea\u52a8\u200b\u8ba1\u7b97\u200b\u7684\u200b\u8fed\u4ee3\u200b\u6b21\u6570\u200b</li> </ul>"},{"location":"technology/Cpp/012-Benchmark/#_4","title":"\u56db\u200b\u3001\u200b\u8fdb\u9636\u200b\u529f\u80fd","text":"<ol> <li>\u200b\u53c2\u6570\u200b\u5316\u200b\u6d4b\u8bd5\u200b</li> </ol> <pre><code>static void BM_VectorPushBack(benchmark::State&amp; state) {\n    for (auto _ : state) {\n        std::vector&lt;int&gt; v;\n        v.reserve(state.range(0)); \n        for (int i = 0; i &lt; state.range(0);  ++i) {\n            v.push_back(i); \n        }\n    }\n    state.SetComplexityN(state.range(0));  // \u200b\u590d\u6742\u5ea6\u200b\u5206\u6790\u200b \n}\n// \u200b\u6d4b\u8bd5\u200b\u4e0d\u540c\u200b\u6570\u636e\u200b\u89c4\u6a21\u200b\uff1a8, 64, 512, 4096\nBENCHMARK(BM_VectorPushBack)-&gt;RangeMultiplier(8)-&gt;Range(8, 4096)-&gt;Complexity();\n\n// \u200b\u591a\u200b\u53c2\u6570\u200b\u6d4b\u8bd5\u200b \nBENCHMARK(BM_SomeFunc)-&gt;Args({128, 256})-&gt;Args({512, 1024});\n</code></pre> <ol> <li>\u200b\u591a\u7ebf\u7a0b\u200b\u6d4b\u8bd5\u200b</li> </ol> <pre><code>static void BM_AtomicIncrement(benchmark::State&amp; state) {\n    std::atomic&lt;int&gt; val(0);\n    for (auto _ : state) {\n        benchmark::DoNotOptimize(val.fetch_add(1)); \n    }\n    state.SetItemsProcessed(state.iterations()); \n}\nBENCHMARK(BM_AtomicIncrement)-&gt;Threads(2)-&gt;Threads(4)-&gt;UseRealTime();\n</code></pre> <ol> <li>\u200b\u8ba1\u65f6\u200b\u63a7\u5236\u200b</li> </ol> <pre><code>static void BM_PausedTiming(benchmark::State&amp; state) {\n    std::vector&lt;int&gt; data;\n    for (auto _ : state) {\n        state.PauseTiming(); // \u200b\u6682\u505c\u200b\u8ba1\u65f6\u200b \n        data = GenerateRandomData(1000);\n        state.ResumeTiming(); // \u200b\u6062\u590d\u200b\u8ba1\u65f6\u200b \n        ProcessData(data);\n    }\n}\nBENCHMARK(BM_PausedTiming);\n</code></pre>"},{"location":"technology/Cpp/012-Benchmark/#_5","title":"\u4e94\u200b\u3001\u200b\u5b8c\u6574\u200b\u6d4b\u8bd5\u200b\u6848\u4f8b","text":"<pre><code>#include &lt;benchmark/benchmark.h&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\n// \u200b\u6d4b\u8bd5\u200b\u4e0d\u540c\u200b\u6392\u5e8f\u200b\u7b97\u6cd5\u200b\u7684\u200b\u6027\u80fd\u200b \ntemplate &lt;typename T&gt;\nstatic void BM_Sort(benchmark::State&amp; state) {\n    std::vector&lt;T&gt; data(state.range(0)); \n    std::generate(data.begin(),  data.end(),  []{ return rand() % 1000; });\n\n    for (auto _ : state) {\n        state.PauseTiming();\n        auto temp = data; // \u200b\u590d\u5236\u200b\u6570\u636e\u200b\u907f\u514d\u200b\u539f\u5730\u200b\u6392\u5e8f\u200b\u5f71\u54cd\u200b \n        state.ResumeTiming();\n\n        std::sort(temp.begin(),  temp.end()); \n    }\n    state.SetBytesProcessed(state.iterations()  * data.size()  * sizeof(T));\n}\n\nBENCHMARK_TEMPLATE(BM_Sort, int)-&gt;Range(1&lt;&lt;10, 1&lt;&lt;20)-&gt;Unit(benchmark::kMillisecond);\n\n// \u200b\u591a\u7ebf\u7a0b\u200b\u7248\u672c\u200b \nstatic void BM_ParallelSort(benchmark::State&amp; state) {\n    std::vector&lt;int&gt; data(state.range(0)); \n    std::generate(data.begin(),  data.end(),  []{ return rand() % 1000; });\n\n    for (auto _ : state) {\n        auto temp = data;\n        benchmark::DoNotOptimize(temp.data()); \n        std::sort(std::execution::par, temp.begin(),  temp.end()); \n    }\n}\nBENCHMARK(BM_ParallelSort)-&gt;Range(1&lt;&lt;20, 1&lt;&lt;24)-&gt;Threads(4)-&gt;UseRealTime();\n\nBENCHMARK_MAIN();\n</code></pre>"},{"location":"technology/Cpp/012-Benchmark/#_6","title":"\u516d\u200b\u3001\u200b\u6700\u4f73\u200b\u5b9e\u8df5","text":"<ul> <li>\u200b\u907f\u514d\u200b\u4f18\u5316\u200b\u5e72\u6270\u200b\uff1a\u200b\u4f7f\u7528\u200b benchmark::DoNotOptimize() \u200b\u548c\u200b benchmark::ClobberMemory()</li> <li>\u200b\u5408\u7406\u200b\u8bbe\u7f6e\u200b\u8303\u56f4\u200b\uff1a\u200b\u901a\u8fc7\u200b -&gt;Range() \u200b\u548c\u200b -&gt;Arg() \u200b\u8986\u76d6\u200b\u5178\u578b\u200b\u7528\u4f8b\u200b\u548c\u200b\u8fb9\u754c\u6761\u4ef6\u200b</li> <li>\u200b\u590d\u6742\u5ea6\u200b\u5206\u6790\u200b\uff1a\u200b\u7ed3\u5408\u200b SetComplexityN() \u200b\u548c\u200b -&gt;Complexity() \u200b\u8fdb\u884c\u200b\u7b97\u6cd5\u200b\u590d\u6742\u5ea6\u200b\u9a8c\u8bc1\u200b</li> <li>\u200b\u8d44\u6e90\u200b\u7edf\u8ba1\u200b\uff1a\u200b\u4f7f\u7528\u200b SetBytesProcessed() \u200b\u548c\u200b SetItemsProcessed() \u200b\u7edf\u8ba1\u200b\u541e\u5410\u91cf\u200b</li> <li>\u200b\u7ed3\u679c\u200b\u53ef\u89c6\u5316\u200b\uff1a\u200b\u901a\u8fc7\u200b --benchmark_format=console|json \u200b\u8f93\u51fa\u200b\u683c\u5f0f\u200b\u63a7\u5236\u200b</li> </ul>"},{"location":"technology/Cpp/012-Benchmark/#_7","title":"\u4e03\u200b\u3001\u200b\u6269\u5c55\u200b\u529f\u80fd","text":"<ul> <li>\u200b\u81ea\u5b9a\u4e49\u200b\u62a5\u544a\u200b\u683c\u5f0f\u200b\uff1a\u200b\u7ee7\u627f\u200b benchmark::ConsoleReporter \u200b\u5b9e\u73b0\u200b\u81ea\u5b9a\u4e49\u200b\u8f93\u51fa\u200b</li> <li>\u200b\u5185\u5b58\u200b\u7edf\u8ba1\u200b\uff1a\u200b\u96c6\u6210\u200b benchmark::MemoryManager \u200b\u8ddf\u8e2a\u200b\u5185\u5b58\u200b\u4f7f\u7528\u200b\u60c5\u51b5\u200b</li> <li>\u200b\u5bf9\u6bd4\u200b\u6d4b\u8bd5\u200b\uff1a\u200b\u4f7f\u7528\u200b BENCHMARK_MAIN() \u200b\u81ea\u52a8\u200b\u751f\u6210\u200b\u7684\u200b\u5bf9\u6bd4\u200b\u8868\u683c\u200b</li> <li>Python\u200b\u96c6\u6210\u200b\uff1a\u200b\u901a\u8fc7\u200b pybind11 \u200b\u5b9e\u73b0\u200b Python \u200b\u811a\u672c\u200b\u63a7\u5236\u200b\u6d4b\u8bd5\u200b\u6d41\u7a0b\u200b \u200b\u901a\u8fc7\u200b\u4ee5\u4e0a\u200b\u65b9\u6cd5\u200b\u548c\u200b\u793a\u4f8b\u200b\uff0c\u200b\u5f00\u53d1\u8005\u200b\u53ef\u4ee5\u200b\u5168\u9762\u200b\u638c\u63e1\u200b\u4ee3\u7801\u200b\u6027\u80fd\u200b\u7279\u5f81\u200b\uff0c\u200b\u505a\u51fa\u200b\u57fa\u4e8e\u200b\u6570\u636e\u200b\u7684\u200b\u4f18\u5316\u200b\u51b3\u7b56\u200b\u3002Google Benchmark \u200b\u7684\u200b\u8be6\u7ec6\u200b\u6587\u6863\u200b\u53ef\u200b\u901a\u8fc7\u200b\u5176\u200b GitHub \u200b\u4ed3\u5e93\u200b\u83b7\u53d6\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/012-Benchmark/#_8","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/013-Detours/","title":"Detours","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u7bc7\u200b\u5173\u4e8e\u200bMicrosoft Detours\u200b\u5e93\u200b\u7684\u200b\u6280\u672f\u200b\u89e3\u6790\u200b\u53ca\u200b\u5b9e\u6218\u200b\u6307\u5357\u200b\uff0c\u200b\u5305\u542b\u200b\u5b8c\u6574\u200bC++\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u548c\u200b\u529f\u80fd\u200b\u6f14\u793a\u200b\uff1a</p>"},{"location":"technology/Cpp/013-Detours/#detours_1","title":"\u4e00\u200b\u3001Detours\u200b\u6838\u5fc3\u200b\u673a\u5236","text":"<p>Detours\u200b\u901a\u8fc7\u200b\u52a8\u6001\u200b\u4fee\u6539\u200b\u76ee\u6807\u200b\u51fd\u6570\u200b\u6307\u4ee4\u200b\u5b9e\u73b0\u200bAPI\u200b\u62e6\u622a\u200b\uff0c\u200b\u5176\u200b\u6838\u5fc3\u200b\u673a\u5236\u200b\u5305\u542b\u200b\uff1a</p> <ul> <li>\u200b\u6307\u4ee4\u200b\u8986\u76d6\u200b\uff1a\u200b\u7528\u200b5\u200b\u5b57\u8282\u200b\u7684\u200bJMP\u200b\u6307\u4ee4\u200b\u8986\u76d6\u200b\u76ee\u6807\u200b\u51fd\u6570\u200b\u5165\u53e3\u200b\uff0c\u200b\u8df3\u8f6c\u200b\u5230\u200b\u81ea\u5b9a\u4e49\u200b\u5904\u7406\u51fd\u6570\u200b</li> <li>\u200b\u8df3\u677f\u200b\u51fd\u6570\u200b(Trampoline)\uff1a\u200b\u4fdd\u5b58\u200b\u88ab\u200b\u8986\u76d6\u200b\u7684\u200b\u539f\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5e76\u200b\u9644\u52a0\u200b\u8df3\u56de\u200b\u539f\u51fd\u6570\u200b\u5269\u4f59\u200b\u6307\u4ee4\u200b\u7684\u200b\u903b\u8f91\u200b</li> <li>\u200b\u4e8b\u52a1\u200b\u63a7\u5236\u200b\uff1a\u200b\u901a\u8fc7\u200bDetourTransaction\u200b\u7cfb\u5217\u200b\u51fd\u6570\u200b\u4fdd\u8bc1\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u7684\u200b\u62e6\u622a\u200b\u64cd\u4f5c\u200b</li> </ul>"},{"location":"technology/Cpp/013-Detours/#vs2022","title":"\u4e8c\u200b\u3001\u200b\u73af\u5883\u200b\u914d\u7f6e\u200b\uff08VS2022\uff09","text":""},{"location":"technology/Cpp/013-Detours/#github","title":"\u4ece\u200b\u5fae\u8f6f\u200bGitHub\u200b\u83b7\u53d6\u200b\u6e90\u7801","text":"<pre><code>git clone https://github.com/microsoft/Detours\nnmake /f Makefile\n</code></pre> <p>\u200b\u5c06\u200b\u751f\u6210\u200b\u7684\u200binclude\u3001lib/x64\u200b\u76ee\u5f55\u200b\u6dfb\u52a0\u200b\u5230\u200b\u9879\u76ee\u200b\u5305\u542b\u200b\u8def\u5f84\u200b</p>"},{"location":"technology/Cpp/013-Detours/#_1","title":"\u4e09\u200b\u3001\u200b\u5b8c\u6574\u200b\u529f\u80fd\u200b\u793a\u4f8b\u200b\u4ee3\u7801","text":"<pre><code>#include &lt;windows.h&gt;\n#include &lt;detours.h&gt;\n#include &lt;iostream&gt;\n\n// \u200b\u539f\u59cb\u200bAPI\u200b\u51fd\u6570\u6307\u9488\u200b\u58f0\u660e\u200b \nstatic HANDLE (WINAPI *TrueCreateFileW)(\n    LPCWSTR lpFileName, DWORD dwDesiredAccess,\n    DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes,\n    DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes,\n    HANDLE hTemplateFile) = CreateFileW;\n\nstatic int (WINAPI *TrueMessageBoxW)(\n    HWND hWnd, LPCWSTR lpText, \n    LPCWSTR lpCaption, UINT uType) = MessageBoxW;\n\n// \u200b\u81ea\u5b9a\u4e49\u200b\u5904\u7406\u51fd\u6570\u200b \nHANDLE WINAPI HookedCreateFileW(\n    LPCWSTR lpFileName, DWORD dwDesiredAccess,\n    DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes,\n    DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes,\n    HANDLE hTemplateFile)\n{\n    // \u200b\u8fc7\u6ee4\u200b\u654f\u611f\u200b\u6587\u4ef6\u200b\u8bbf\u95ee\u200b \n    if (wcsstr(lpFileName, L\"secret.txt\"))  {\n        SetLastError(ERROR_ACCESS_DENIED);\n        return INVALID_HANDLE_VALUE;\n    }\n    return TrueCreateFileW(lpFileName, dwDesiredAccess, dwShareMode,\n        lpSecurityAttributes, dwCreationDisposition, \n        dwFlagsAndAttributes, hTemplateFile);\n}\n\nint WINAPI HookedMessageBoxW(\n    HWND hWnd, LPCWSTR lpText,\n    LPCWSTR lpCaption, UINT uType)\n{\n    // \u200b\u4fee\u6539\u200b\u5f39\u7a97\u200b\u5185\u5bb9\u200b \n    return TrueMessageBoxW(hWnd, L\"\u200b\u5185\u5bb9\u200b\u5df2\u200b\u88ab\u200b\u62e6\u622a\u200b\", \n        L\"\u200b\u5b89\u5168\u200b\u8b66\u544a\u200b\", MB_ICONWARNING);\n}\n\n// \u200b\u94a9\u5b50\u200b\u7ba1\u7406\u200b\u6a21\u5757\u200b \nclass DetourManager {\npublic:\n    static void InstallHook() {\n        DetourTransactionBegin();\n        DetourUpdateThread(GetCurrentThread());\n\n        DetourAttach(&amp;(PVOID&amp;)TrueCreateFileW, HookedCreateFileW);\n        DetourAttach(&amp;(PVOID&amp;)TrueMessageBoxW, HookedMessageBoxW);\n\n        DetourTransactionCommit();\n    }\n\n    static void RemoveHook() {\n        DetourTransactionBegin();\n        DetourUpdateThread(GetCurrentThread());\n\n        DetourDetach(&amp;(PVOID&amp;)TrueCreateFileW, HookedCreateFileW);\n        DetourDetach(&amp;(PVOID&amp;)TrueMessageBoxW, HookedMessageBoxW);\n\n        DetourTransactionCommit();\n    }\n};\n\n// DLL\u200b\u6ce8\u5165\u200b\u652f\u6301\u200b \nBOOL APIENTRY DllMain(HMODULE hModule,\n    DWORD  ul_reason_for_call,\n    LPVOID lpReserved)\n{\n    switch (ul_reason_for_call) {\n    case DLL_PROCESS_ATTACH:\n        DetourManager::InstallHook();\n        break;\n    case DLL_PROCESS_DETACH:\n        DetourManager::RemoveHook();\n        break;\n    }\n    return TRUE;\n}\n\n// \u200b\u63a7\u5236\u53f0\u200b\u6d4b\u8bd5\u7a0b\u5e8f\u200b \nint main() {\n    DetourManager::InstallHook();\n\n    // \u200b\u6d4b\u8bd5\u200b\u6587\u4ef6\u200b\u8bbf\u95ee\u200b\u62e6\u622a\u200b \n    HANDLE hFile = CreateFileW(L\"secret.txt\",  GENERIC_READ, 0, \n        NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);\n    if (hFile == INVALID_HANDLE_VALUE) {\n        std::cout &lt;&lt; \"\u200b\u6587\u4ef6\u200b\u8bbf\u95ee\u200b\u62e6\u622a\u200b\u6210\u529f\u200b\\n\";\n    }\n\n    // \u200b\u6d4b\u8bd5\u200b\u5f39\u7a97\u200b\u62e6\u622a\u200b \n    MessageBoxW(NULL, L\"\u200b\u539f\u59cb\u200b\u5185\u5bb9\u200b\", L\"\u200b\u6d4b\u8bd5\u200b\u5f39\u7a97\u200b\", MB_OK);\n\n    DetourManager::RemoveHook();\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/013-Detours/#_2","title":"\u56db\u200b\u3001\u200b\u529f\u80fd\u200b\u8986\u76d6\u200b\u8bf4\u660e","text":"<p>\u200b\u8be5\u200b\u5b9e\u73b0\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u5173\u952e\u200b\u529f\u80fd\u200b\uff1a</p> <ul> <li>\u200b\u591a\u200bAPI\u200b\u62e6\u622a\u200b\uff1a\u200b\u540c\u65f6\u200b\u6302\u94a9\u200b\u6587\u4ef6\u200b\u64cd\u4f5c\u200b\u548c\u200b\u7528\u6237\u754c\u9762\u200bAPI</li> <li>\u200b\u53c2\u6570\u200b\u4fee\u6539\u200b\uff1a\u200b\u52a8\u6001\u200b\u4fee\u6539\u200bMessageBox\u200b\u663e\u793a\u200b\u5185\u5bb9\u200b</li> <li>\u200b\u8bbf\u95ee\u63a7\u5236\u200b\uff1a\u200b\u963b\u6b62\u200b\u7279\u5b9a\u200b\u6587\u4ef6\u200b\u8bbf\u95ee\u200b\u64cd\u4f5c\u200b</li> <li>DLL\u200b\u6ce8\u5165\u200b\u652f\u6301\u200b\uff1a\u200b\u901a\u8fc7\u200bDllMain\u200b\u5b9e\u73b0\u200b\u52a8\u6001\u200b\u52a0\u8f7d\u200b</li> <li>\u200b\u5b89\u5168\u200b\u5378\u8f7d\u200b\uff1a\u200b\u901a\u8fc7\u200bDetourDetach\u200b\u6062\u590d\u200b\u539f\u51fd\u6570\u200b</li> </ul>"},{"location":"technology/Cpp/013-Detours/#_3","title":"\u4e94\u200b\u3001\u200b\u5e94\u7528\u200b\u573a\u666f","text":"<ul> <li>\u200b\u8c03\u8bd5\u200b\u76d1\u63a7\u200b\uff1a\u200b\u8bb0\u5f55\u200bAPI\u200b\u8c03\u7528\u200b\u65e5\u5fd7\u200b</li> <li>\u200b\u5b89\u5168\u200b\u9632\u62a4\u200b\uff1a\u200b\u963b\u6b62\u200b\u5371\u9669\u200b\u64cd\u4f5c\u200b\uff08\u200b\u5982\u200b\u52d2\u7d22\u200b\u8f6f\u4ef6\u52a0\u5bc6\u200b\u6587\u4ef6\u200b\uff09</li> <li>\u200b\u529f\u80fd\u200b\u6269\u5c55\u200b\uff1a\u200b\u4e3a\u200b\u65e7\u200b\u7a0b\u5e8f\u200b\u6dfb\u52a0\u200b\u65b0\u200b\u7279\u6027\u200b\uff08\u200b\u5982\u4e91\u200b\u5b58\u50a8\u200b\u652f\u6301\u200b\uff09</li> <li>\u200b\u517c\u5bb9\u6027\u200b\u4fee\u590d\u200b\uff1a\u200b\u4fee\u6539\u200b\u8001\u65e7\u200bAPI\u200b\u7684\u200b\u8c03\u7528\u200b\u884c\u4e3a\u200b</li> </ul>"},{"location":"technology/Cpp/013-Detours/#_4","title":"\u516d\u200b\u3001\u200b\u7f16\u8bd1\u200b\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>VS\u200b\u9879\u76ee\u200b\u9700\u200b\u914d\u7f6e\u200b\uff1a</li> <li>\u200b\u4f7f\u7528\u200bRelease x64\u200b\u6a21\u5f0f\u200b\u7f16\u8bd1\u200b </li> <li>\u200b\u94fe\u63a5\u200bdetours.lib  </li> <li>\u200b\u8bbe\u7f6e\u200b/SAFESEH:NO </li> <li>\u200b\u5173\u95ed\u200b\u589e\u91cf\u200b\u94fe\u63a5\u200b</li> </ul>"},{"location":"technology/Cpp/013-Detours/#_5","title":"\u4e03\u200b\u3001\u200b\u9ad8\u7ea7\u200b\u529f\u80fd\u200b\u6269\u5c55\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u8de8\u200b\u8fdb\u7a0b\u200bHook\uff1a\u200b\u4f7f\u7528\u200bCreateProcessWithDll\u200b\u6ce8\u5165\u200b</li> <li>\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200bVEH\u200b\u6355\u83b7\u200b\u8bbf\u95ee\u200b\u8fdd\u89c4\u200b</li> <li>\u200b\u52a8\u6001\u200b\u914d\u7f6e\u200b\uff1a\u200b\u4ece\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u52a0\u8f7d\u200b\u62e6\u622a\u200b\u89c4\u5219\u200b</li> <li>\u200b\u53cd\u200b\u68c0\u6d4b\u200b\u673a\u5236\u200b\uff1a\u200b\u9690\u85cf\u200b\u6a21\u5757\u200b\u5185\u5b58\u200b\u7279\u5f81\u200b</li> </ul>"},{"location":"technology/Cpp/013-Detours/#_6","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/014-log4cpp/","title":"log4cpp","text":"<p>Log4cpp \u200b\u5168\u529f\u80fd\u200b\u5f00\u53d1\u200b\u6307\u5357\u200b Log4cpp\u200b\u662f\u200bC++\u200b\u9886\u57df\u200b\u6700\u200b\u6210\u719f\u200b\u7684\u200b\u65e5\u5fd7\u200b\u7ba1\u7406\u200b\u5e93\u200b\u4e4b\u4e00\u200b\uff0c\u200b\u79fb\u690d\u200b\u81ea\u200bJava\u200b\u751f\u6001\u200b\u7684\u200blog4j\uff0c\u200b\u652f\u6301\u200b\u52a8\u6001\u200b\u4f18\u5148\u7ea7\u200b\u63a7\u5236\u200b\u3001\u200b\u591a\u200b\u8f93\u51fa\u200b\u6e90\u200b\u3001\u200b\u81ea\u5b9a\u4e49\u200b\u683c\u5f0f\u200b\u7b49\u200b\u529f\u80fd\u200b\u3002</p>"},{"location":"technology/Cpp/014-log4cpp/#_1","title":"\u4e00\u200b\u3001\u200b\u6838\u5fc3\u200b\u7ec4\u4ef6","text":"<ul> <li> <p>Category\uff08\u200b\u65e5\u5fd7\u200b\u7c7b\u522b\u200b\uff09 \u200b\u7ba1\u7406\u200b\u65e5\u5fd7\u200b\u5206\u7c7b\u200b\u548c\u200b\u4f18\u5148\u7ea7\u200b\u8fc7\u6ee4\u200b\u673a\u5236\u200b\uff0c\u200b\u91c7\u7528\u200b\u6811\u5f62\u200b\u7ee7\u627f\u200b\u7ed3\u6784\u200b\uff0c\u200b\u652f\u6301\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\uff1a DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL</p> </li> <li> <p>Appender\uff08\u200b\u8f93\u51fa\u200b\u6e90\u200b\uff09     \u200b\u5b9a\u4e49\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u76ee\u6807\u200b\uff1a</p> </li> <li>FileAppender \u200b\u6587\u4ef6\u200b\u8f93\u51fa\u200b</li> <li>RollingFileAppender \u200b\u6eda\u52a8\u200b\u6587\u4ef6\u200b\uff08\u200b\u81ea\u52a8\u200b\u5206\u5272\u200b\uff09</li> <li>ConsoleAppender \u200b\u63a7\u5236\u53f0\u200b\u8f93\u51fa\u200b</li> <li>SyslogAppender \u200b\u7cfb\u7edf\u65e5\u5fd7\u200b</li> <li>Layout\uff08\u200b\u5e03\u5c40\u200b\uff09 \u200b\u63a7\u5236\u200b\u65e5\u5fd7\u200b\u683c\u5f0f\u200b\uff1a</li> </ul> <p>// \u200b\u5178\u578b\u200bPattern\u200b\u683c\u5f0f\u200b  \"%d [%p] %c: %m%n\"  // \u200b\u5bf9\u5e94\u200b\uff1a\u200b\u65e5\u671f\u200b [\u200b\u4f18\u5148\u7ea7\u200b] \u200b\u7c7b\u76ee\u200b: \u200b\u6d88\u606f\u200b+\u200b\u6362\u884c\u200b1</p>"},{"location":"technology/Cpp/014-log4cpp/#_2","title":"\u4e8c\u200b\u3001\u200b\u73af\u5883\u200b\u914d\u7f6e","text":""},{"location":"technology/Cpp/014-log4cpp/#linux","title":"Linux\u200b\u5b89\u88c5","text":"<pre><code>wget https://sourceforge.net/projects/log4cpp/files/log4cpp-1.1.3.tar.gz  \ntar zxvf log4cpp-1.1.3.tar.gz  \ncd log4cpp &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install \n</code></pre>"},{"location":"technology/Cpp/014-log4cpp/#windows","title":"Windows\u200b\u7f16\u8bd1","text":"<pre><code>\u200b\u4f7f\u7528\u200bVS\u200b\u6253\u5f00\u200bmsvc6/log4cpp.sln\n</code></pre>"},{"location":"technology/Cpp/014-log4cpp/#_3","title":"\u4e09\u200b\u3001\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u793a\u4f8b","text":"<pre><code>#include &lt;log4cpp/Category.hh&gt; \n#include &lt;log4cpp/FileAppender.hh&gt; \n#include &lt;log4cpp/RollingFileAppender.hh&gt; \n#include &lt;log4cpp/PatternLayout.hh&gt; \n#include &lt;log4cpp/PropertyConfigurator.hh&gt; \n\n// \u200b\u57fa\u7840\u200b\u914d\u7f6e\u200b\u521d\u59cb\u5316\u200b \nvoid initBasicLog() {\n    // \u200b\u521b\u5efa\u200b\u683c\u5f0f\u5316\u200b\u5668\u200b\n    PatternLayout* layout = new PatternLayout();\n    layout-&gt;setConversionPattern(\"%d{%Y-%m-%d %H:%M:%S.%l} [%p] %m%n\");\n\n    // \u200b\u63a7\u5236\u53f0\u200b\u8f93\u51fa\u200b \n    Appender* consoleApp = new OstreamAppender(\"console\", &amp;std::cout);\n    consoleApp-&gt;setLayout(layout);\n\n    // \u200b\u521b\u5efa\u200b\u683c\u5f0f\u5316\u200b\u5668\u200b\n    PatternLayout* layout1 = new PatternLayout();\n    layout1-&gt;setConversionPattern(\"%d{%Y-%m-%d %H:%M:%S.%l} [%p] %m%n\");\n\n    // \u200b\u6587\u4ef6\u200b\u8f93\u51fa\u200b\uff08\u200b\u81ea\u52a8\u200b\u6eda\u52a8\u200b\uff09\n    RollingFileAppender* fileApp = new RollingFileAppender(\"fileApp\", \"demo.log\",  10*1024*1024, 5);\n    fileApp-&gt;setLayout(layout1);\n\n    // \u200b\u914d\u7f6e\u200b\u4e3b\u200b\u65e5\u5fd7\u200b\u5668\u200b\n    Category&amp; root = Category::getRoot();\n    root.setPriority(Priority::DEBUG); \n    root.addAppender(consoleApp); \n    root.addAppender(fileApp); \n}\n\n// \u200b\u914d\u7f6e\u6587\u4ef6\u200b\u52a0\u8f7d\u200b \nvoid initConfigLog() {\n    try {\n        log4cpp::PropertyConfigurator::configure(\"log4cpp.conf\"); \n    } catch(log4cpp::ConfigureFailure&amp; f) {\n        std::cerr &lt;&lt; \"\u200b\u914d\u7f6e\u200b\u52a0\u8f7d\u200b\u5931\u8d25\u200b: \" &lt;&lt; f.what()  &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    // \u200b\u521d\u59cb\u5316\u200b\u65b9\u5f0f\u200b\u4efb\u9009\u200b\u5176\u4e00\u200b \n    initBasicLog();    // \u200b\u4ee3\u7801\u200b\u521d\u59cb\u5316\u200b \n    // initConfigLog(); // \u200b\u6587\u4ef6\u200b\u914d\u7f6e\u200b\u521d\u59cb\u5316\u200b \n\n    log4cpp::Category&amp; logger = log4cpp::Category::getInstance(\"MainModule\");\n\n    // \u200b\u591a\u200b\u7ea7\u522b\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b \n    logger.debug(\" \u200b\u8c03\u8bd5\u4fe1\u606f\u200b: \u200b\u53d8\u91cf\u200bx=%d\", 42);\n    logger.info(\" \u200b\u7cfb\u7edf\u542f\u52a8\u200b\u5b8c\u6210\u200b\");\n    logger.warn(\" \u200b\u78c1\u76d8\u7a7a\u95f4\u200b\u5269\u4f59\u200b10%%\");\n    logger.error(\" \u200b\u6570\u636e\u5e93\u200b\u8fde\u63a5\u200b\u5931\u8d25\u200b\");\n\n    // NDC\u200b\u8bca\u65ad\u200b\u4e0a\u4e0b\u6587\u200b\uff08\u200b\u591a\u7ebf\u7a0b\u200b\u8ffd\u8e2a\u200b\uff09\n    log4cpp::NDC::push(\"RequestID:1001\");\n    logger &lt;&lt; log4cpp::Priority::INFO &lt;&lt; \"\u200b\u5904\u7406\u200b\u7528\u6237\u200b\u8bf7\u6c42\u200b\";\n    log4cpp::NDC::pop();\n\n    log4cpp::Category::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/014-log4cpp/#log4cppconf","title":"\u56db\u200b\u3001\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u793a\u4f8b\u200b\uff08log4cpp.conf \uff09","text":""},{"location":"technology/Cpp/014-log4cpp/#_4","title":"\u5b9a\u4e49\u200b\u8f93\u51fa\u200b\u6e90","text":"<pre><code>log4cpp.appender.file=RollingFileAppender  \nlog4cpp.appender.file.fileName=app.log  \nlog4cpp.appender.file.maxFileSize=10485760  \nlog4cpp.appender.file.maxBackupIndex=5  \nlog4cpp.appender.file.layout=PatternLayout  \nlog4cpp.appender.file.layout.conversionPattern=%d  [%p] %c: %m%n\n\n#### \u200b\u8bbe\u7f6e\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\u548c\u200b\u8f93\u51fa\u200b\u6e90\u200b\nlog4cpp.rootCategory=DEBUG,  file \nlog4cpp.category.Network=INFO  \n</code></pre>"},{"location":"technology/Cpp/014-log4cpp/#_5","title":"\u4e94\u200b\u3001\u200b\u9ad8\u7ea7\u200b\u529f\u80fd","text":"<ul> <li> <p>\u200b\u52a8\u6001\u200b\u914d\u7f6e\u200b\u91cd\u8f7d\u200b \u200b\u901a\u8fc7\u200bPropertyConfigurator::watch()\u200b\u5b9e\u73b0\u200b\u8fd0\u884c\u200b\u65f6\u200b\u914d\u7f6e\u200b\u66f4\u65b0\u200b</p> </li> <li> <p>\u200b\u591a\u7ebf\u7a0b\u200b\u5b89\u5168\u200b \u200b\u6240\u6709\u200b\u7ec4\u4ef6\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\uff0c\u200b\u652f\u6301\u200b\u9ad8\u200b\u5e76\u53d1\u200b\u65e5\u5fd7\u200b\u5199\u5165\u200b</p> </li> <li> <p>\u200b\u81ea\u5b9a\u4e49\u200bAppender \u200b\u7ee7\u627f\u200blog4cpp::AppenderSkeleton\u200b\u5b9e\u73b0\u200b\u81ea\u5b9a\u4e49\u200b\u8f93\u51fa\u200b\u76ee\u6807\u200b\uff08\u200b\u5982\u200b\u6570\u636e\u5e93\u200b\uff09</p> </li> <li> <p>\u200b\u65e5\u5fd7\u200b\u8fc7\u6ee4\u5668\u200b \u200b\u4f7f\u7528\u200bFilter\u200b\u5b9e\u73b0\u200b\u57fa\u4e8e\u200b\u5185\u5bb9\u200b\u7684\u200b\u6b63\u5219\u200b\u8fc7\u6ee4\u200b</p> </li> </ul>"},{"location":"technology/Cpp/014-log4cpp/#_6","title":"\u516d\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u5efa\u8bae","text":"<p>\u200b\u751f\u4ea7\u200b\u73af\u5883\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200bRollingFileAppender\u200b\u9650\u5236\u200b\u65e5\u5fd7\u200b\u5927\u5c0f\u200b \u200b\u975e\u200b\u8c03\u8bd5\u200b\u9636\u6bb5\u200b\u8bbe\u7f6e\u200brootCategory=WARN\u200b\u51cf\u5c11\u200bIO\u200b\u6d88\u8017\u200b \u200b\u907f\u514d\u200b\u9ad8\u9891\u200b\u6b21\u200bDEBUG\u200b\u65e5\u5fd7\u200b\u5f71\u54cd\u200b\u7a0b\u5e8f\u200b\u6027\u80fd\u200b</p>"},{"location":"technology/Cpp/014-log4cpp/#_7","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/015-SingleApplication/","title":"\u8fdb\u7a0b\u200b\u5355\u4f8b","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u7bc7\u200b\u8de8\u5e73\u53f0\u200b\u8fdb\u7a0b\u200b\u5355\u200b\u5b9e\u4f8b\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u53ca\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\uff0c\u200b\u5305\u542b\u200bWindows/Linux/macOS\u200b\u4e09\u200b\u5e73\u53f0\u200b\u517c\u5bb9\u200b\u7684\u200bC++\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\uff1a</p> <p>\u200b\u8de8\u5e73\u53f0\u200b\u8fdb\u7a0b\u200b\u5355\u200b\u5b9e\u4f8b\u200b\u6280\u672f\u200b\u5b9e\u73b0\u200b</p>"},{"location":"technology/Cpp/015-SingleApplication/#_2","title":"\u4e00\u200b\u3001\u200b\u6280\u672f\u200b\u80cc\u666f","text":"<ul> <li> <p>\u200b\u8fdb\u7a0b\u200b\u5355\u200b\u5b9e\u4f8b\u200b\u63a7\u5236\u200b\u662f\u200b\u4fdd\u8bc1\u200b\u5173\u952e\u200b\u670d\u52a1\u200b\u552f\u4e00\u6027\u200b\u7684\u200b\u6838\u5fc3\u6280\u672f\u200b\uff0c\u200b\u5e38\u89c1\u4e8e\u200b\u7cfb\u7edf\u200b\u5b88\u62a4\u200b\u8fdb\u7a0b\u200b\u3001\u200b\u684c\u9762\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7b49\u200b\u573a\u666f\u200b\u3002\u200b\u672c\u6587\u200b\u901a\u8fc7\u200b\u4e09\u79cd\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u673a\u5236\u200b\u5b9e\u73b0\u200b\u8de8\u5e73\u53f0\u200b\u652f\u6301\u200b\uff1a</p> </li> <li> <p>Windows\uff1a\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u4e92\u65a5\u200b\u4f53\u200b</p> </li> <li>Linux/macOS\uff1a\u200b\u6587\u4ef6\u200b\u9501\u200b\u673a\u5236\u200b</li> <li>\u200b\u901a\u7528\u200b\u65b9\u6848\u200b\uff1a\u200b\u8de8\u200b\u8fdb\u7a0b\u200b\u5185\u5b58\u200b\u5171\u4eab\u200b</li> </ul>"},{"location":"technology/Cpp/015-SingleApplication/#_3","title":"\u4e8c\u200b\u3001\u200b\u5b9e\u73b0\u200b\u65b9\u6848","text":""},{"location":"technology/Cpp/015-SingleApplication/#_4","title":"\u65b9\u6848\u200b\u4e00\u200b\uff1a\u200b\u8de8\u5e73\u53f0\u200b\u6587\u4ef6\u200b\u9501\u200b\uff08\u200b\u63a8\u8350\u200b\uff09","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n\n#if defined(_WIN32)\n#include &lt;Windows.h&gt;\n#else\n#include &lt;sys/file.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#endif\n\nclass SingleInstance {\npublic:\n    SingleInstance(const std::string&amp; lockName) {\n#if defined(_WIN32)\n        // Windows\u200b\u547d\u540d\u200b\u4e92\u65a5\u200b\u4f53\u200b\n        hMutex = CreateMutexA(NULL, TRUE, lockName.c_str());\n        isRunning = (GetLastError() == ERROR_ALREADY_EXISTS);\n#else\n        // Unix\u200b\u7cfb\u200b\u6587\u4ef6\u200b\u9501\u200b\n        std::string lockPath = \"/tmp/\" + lockName + \".lock\";\n        fd = open(lockPath.c_str(), O_CREAT | O_RDWR, 0666);\n        isRunning = (flock(fd, LOCK_EX | LOCK_NB) != 0);\n#endif\n    }\n\n    ~SingleInstance() {\n#if defined(_WIN32)\n        if(hMutex) {\n            ReleaseMutex(hMutex);\n            CloseHandle(hMutex);\n        }\n#else\n        if(fd &gt;= 0) {\n            flock(fd, LOCK_UN);\n            close(fd);\n        }\n#endif\n    }\n\n    bool isAnotherRunning() const { return isRunning; }\n\nprivate:\n#if defined(_WIN32)\n    HANDLE hMutex = NULL;\n#else\n    int fd = -1;\n#endif\n    bool isRunning = false;\n};\n\n// \u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b\nint main() {\n    SingleInstance si(\"my_app\");\n    if(si.isAnotherRunning())  {\n        std::cerr &lt;&lt; \"Application already running!\" &lt;&lt; std::endl;\n        return EXIT_FAILURE;\n    }\n\n    // \u200b\u4e3b\u200b\u7a0b\u5e8f\u903b\u8f91\u200b\n    std::cout &lt;&lt; \"Application started successfully\" &lt;&lt; std::endl;\n    std::cin.get(); \n    return EXIT_SUCCESS;\n}\n</code></pre>"},{"location":"technology/Cpp/015-SingleApplication/#_5","title":"\u65b9\u6848\u200b\u4e8c\u200b\uff1a\u200b\u5171\u4eab\u5185\u5b58\u200b\u68c0\u6d4b","text":"<pre><code>// Windows\u200b\u5b9e\u73b0\u200b\n#ifdef _WIN32\n#include &lt;windows.h&gt;\n\nclass WinSharedMem {\npublic:\n    WinSharedMem(const char* name) {\n        hMapFile = CreateFileMappingA(\n            INVALID_HANDLE_VALUE, NULL, \n            PAGE_READWRITE, 0, 256, name);\n        exists = (GetLastError() == ERROR_ALREADY_EXISTS);\n    }\n    // ... \u200b\u5176\u4ed6\u200b\u6210\u5458\u200b\u51fd\u6570\u200b\n};\n#endif\n\n// Linux/macOS\u200b\u5b9e\u73b0\u200b\n#if defined(__linux__) || defined(__APPLE__)\n#include &lt;sys/mman.h&gt;\n#include &lt;fcntl.h&gt;\n\nclass UnixSharedMem {\npublic:\n    UnixSharedMem(const char* name) {\n        fd = shm_open(name, O_CREAT | O_RDWR, 0666);\n        exists = (errno == EEXIST);\n    }\n    // ... \u200b\u5176\u4ed6\u200b\u6210\u5458\u200b\u51fd\u6570\u200b\n};\n#endif\n</code></pre>"},{"location":"technology/Cpp/015-SingleApplication/#_6","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u5b9e\u73b0\u200b\u70b9","text":"<ul> <li>Windows\u200b\u6838\u5fc3\u200b\u673a\u5236\u200b \u200b\u4f7f\u7528\u200bCreateMutexA\u200b\u521b\u5efa\u200b\u547d\u540d\u200b\u4e92\u65a5\u200b\u4f53\u200b \u200b\u901a\u8fc7\u200bGetLastError()\u200b\u68c0\u6d4b\u200bERROR_ALREADY_EXISTS \u200b\u9700\u663e\u5f0f\u200b\u91ca\u653e\u200b\u4e92\u65a5\u200b\u4f53\u200b\u8d44\u6e90\u200b</li> <li>Linux/macOS\u200b\u5b9e\u73b0\u200b \u200b\u91c7\u7528\u200bflock()\u200b\u6587\u4ef6\u200b\u9501\u200b\u5b9e\u73b0\u200b\u8fdb\u7a0b\u200b\u6392\u200b\u4ed6\u200b \u200b\u9501\u200b\u6587\u4ef6\u200b\u5b58\u50a8\u200b\u5728\u200b/tmp\u200b\u76ee\u5f55\u200b\u4fdd\u8bc1\u200b\u53ef\u200b\u5199\u6027\u200b \u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u81ea\u52a8\u200b\u56de\u6536\u200b\u673a\u5236\u200b</li> <li>\u200b\u8de8\u5e73\u53f0\u200b\u5c01\u88c5\u200b \u200b\u4f7f\u7528\u200b\u9884\u200b\u5904\u7406\u5668\u200b\u6307\u4ee4\u200b\u533a\u5206\u200b\u5e73\u53f0\u200b \u200b\u7edf\u4e00\u200b\u63a5\u53e3\u200bisAnotherRunning() RAII\u200b\u6a21\u5f0f\u200b\u7ba1\u7406\u200b\u8d44\u6e90\u200b\u751f\u547d\u5468\u671f\u200b</li> </ul>"},{"location":"technology/Cpp/015-SingleApplication/#_7","title":"\u56db\u200b\u3001\u200b\u6d4b\u8bd5\u200b\u9a8c\u8bc1","text":""},{"location":"technology/Cpp/015-SingleApplication/#linuxmacos","title":"Linux/macOS\u200b\u7f16\u8bd1","text":"<pre><code>g++ -std=c++11 singleton.cpp  -o singleton\n</code></pre>"},{"location":"technology/Cpp/015-SingleApplication/#windowsvs","title":"Windows\u200b\u7f16\u8bd1\u200b\uff08VS\u200b\u5f00\u53d1\u8005\u200b\u547d\u4ee4\u200b\u63d0\u793a\u200b\uff09","text":"<pre><code>cl /EHsc singleton.cpp \n</code></pre>"},{"location":"technology/Cpp/015-SingleApplication/#_8","title":"\u4e94\u200b\u3001\u200b\u65b9\u6848\u200b\u5bf9\u6bd4","text":"\u7279\u6027\u200b \u200b\u6587\u4ef6\u200b\u9501\u200b\u65b9\u6848\u200b \u200b\u5171\u4eab\u5185\u5b58\u200b\u65b9\u6848\u200b \u200b\u8de8\u5e73\u53f0\u200b\u6027\u200b \u200b\u4f18\u79c0\u200b \u200b\u9700\u200b\u5e73\u53f0\u200b\u7279\u5b9a\u200b\u5b9e\u73b0\u200b \u200b\u53ef\u9760\u6027\u200b \u200b\u9ad8\u200b\uff08\u200b\u5185\u6838\u200b\u7ea7\u9501\u200b\uff09 \u200b\u4e2d\u7b49\u200b \u200b\u8d44\u6e90\u200b\u6d88\u8017\u200b \u200b\u4f4e\u200b \u200b\u8f83\u200b\u9ad8\u200b \u200b\u5b9e\u73b0\u200b\u590d\u6742\u5ea6\u200b \u200b\u7b80\u5355\u200b \u200b\u590d\u6742\u200b <p>\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u5e93\u200b\u53ef\u200b\u53c2\u8003\u200b\u7684\u200b\u5b9e\u73b0\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u5efa\u8bae\u200b\u4f18\u5148\u200b\u91c7\u7528\u200b\u6587\u4ef6\u200b\u9501\u200b\u65b9\u6848\u200b\u4f5c\u4e3a\u200b\u57fa\u7840\u200b\u5b9e\u73b0\u200b\u3002\u200b\u5b9e\u9645\u200b\u90e8\u7f72\u200b\u65f6\u200b\u9700\u6ce8\u610f\u200b\u6743\u9650\u200b\u7ba1\u7406\u200b\uff08\u200b\u5982\u200bLinux\u200b\u4e0b\u200b\u7684\u200b/tmp\u200b\u76ee\u5f55\u200b\u6743\u9650\u200b\uff09\u200b\u548c\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\uff08\u200b\u5982\u200b\u8fdb\u7a0b\u200b\u5d29\u6e83\u200b\u540e\u200b\u7684\u200b\u9501\u200b\u91ca\u653e\u200b\u673a\u5236\u200b\uff09\u3002</p>"},{"location":"technology/Cpp/015-SingleApplication/#_9","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/016-condition_variable/","title":"condition_variable","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u7bc7\u200b\u5173\u4e8e\u200bstd::condition_variable\u200b\u5b9e\u73b0\u200b\u5f02\u6b65\u200b\u6267\u884c\u200b\u540c\u6b65\u200b\u7b49\u5f85\u200b\u7684\u200b\u8c03\u7814\u200b\u6587\u7ae0\u200b\uff0c\u200b\u5305\u542b\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u53ca\u200b\u89e3\u6790\u200b\uff1a</p> <p>\u200b\u57fa\u4e8e\u200bstd::condition_variable\u200b\u7684\u200b\u5f02\u6b65\u200b\u6267\u884c\u200b\u540c\u6b65\u200b\u7b49\u5f85\u200b\u673a\u5236\u200b</p>"},{"location":"technology/Cpp/016-condition_variable/#_1","title":"\u4e00\u200b\u3001\u200b\u5f15\u8a00","text":"<p>\u200b\u5728\u200b\u591a\u7ebf\u7a0b\u200b\u7f16\u7a0b\u200b\u4e2d\u200b\uff0cstd::condition_variable\u200b\u662f\u200bC++11\u200b\u6807\u51c6\u200b\u5e93\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6838\u5fc3\u200b\u540c\u6b65\u200b\u539f\u8bed\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5b9e\u73b0\u200b\u7ebf\u7a0b\u200b\u95f4\u200b\u7684\u200b\u7b49\u5f85\u200b-\u200b\u901a\u77e5\u200b\u673a\u5236\u200b\u3002\u200b\u5176\u200b\u6838\u5fc3\u200b\u4ef7\u503c\u200b\u5728\u4e8e\u200b\u5141\u8bb8\u200b\u7ebf\u7a0b\u200b\u9ad8\u6548\u200b\u7b49\u5f85\u200b\u7279\u5b9a\u6761\u4ef6\u200b\u7684\u200b\u8fbe\u6210\u200b\uff0c\u200b\u800c\u200b\u975e\u200b\u901a\u8fc7\u200b\u8f6e\u8be2\u200b\u6d88\u8017\u200bCPU\u200b\u8d44\u6e90\u200b\u3002\u200b\u672c\u6587\u200b\u7ed3\u5408\u200b\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\u6a21\u578b\u200b\uff0c\u200b\u63a2\u8ba8\u200b\u5176\u200b\u5728\u200b\u5f02\u6b65\u200b\u4efb\u52a1\u200b\u540c\u6b65\u200b\u4e2d\u200b\u7684\u200b\u5178\u578b\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\u3002</p>"},{"location":"technology/Cpp/016-condition_variable/#_2","title":"\u4e8c\u200b\u3001\u200b\u6838\u5fc3\u200b\u539f\u7406","text":""},{"location":"technology/Cpp/016-condition_variable/#_3","title":"\u7ec4\u4ef6\u200b\u534f\u4f5c","text":"<ul> <li>\u200b\u4e92\u65a5\u200b\u9501\u200b (std::mutex): \u200b\u4fdd\u62a4\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u7684\u200b\u539f\u5b50\u200b\u6027\u200b\u8bbf\u95ee\u200b\u3002</li> <li>\u200b\u6761\u4ef6\u200b\u53d8\u91cf\u200b (std::condition_variable): \u200b\u5b9e\u73b0\u200b\u7ebf\u7a0b\u200b\u963b\u585e\u200b\u4e0e\u200b\u5524\u9192\u200b\u7684\u200b\u901a\u4fe1\u200b\u673a\u5236\u200b\u3002</li> <li>\u200b\u552f\u4e00\u200b\u9501\u200b (std::unique_lock): \u200b\u914d\u5408\u200b\u6761\u4ef6\u200b\u53d8\u91cf\u200b\u5b9e\u73b0\u200b\u81ea\u52a8\u200b\u9501\u200b\u7ba1\u7406\u200b\uff0c\u200b\u907f\u514d\u200b\u6b7b\u9501\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_4","title":"\u5173\u952e\u200b\u64cd\u4f5c","text":"<ul> <li>wait(): \u200b\u963b\u585e\u200b\u7ebf\u7a0b\u200b\u76f4\u81f3\u200b\u6536\u5230\u200b\u901a\u77e5\u200b\uff0c\u200b\u81ea\u52a8\u200b\u91ca\u653e\u200b/\u200b\u91cd\u83b7\u200b\u9501\u200b\u3002</li> <li>notify_one()/notify_all(): \u200b\u5524\u9192\u200b\u5355\u4e2a\u200b\u6216\u200b\u5168\u90e8\u200b\u7b49\u5f85\u200b\u7ebf\u7a0b\u200b\u3002</li> <li>\u200b\u5e26\u200b\u8c13\u8bcd\u200b\u7684\u200bwait(): \u200b\u9632\u6b62\u200b\u865a\u5047\u200b\u5524\u9192\u200b\uff08Spurious Wakeup\uff09\u3002</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_5","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u95ee\u9898\u200b\u4e0e\u200b\u89e3\u51b3\u65b9\u6848","text":""},{"location":"technology/Cpp/016-condition_variable/#_6","title":"\u865a\u5047\u200b\u5524\u9192","text":"<ul> <li>\u200b\u73b0\u8c61\u200b: \u200b\u7ebf\u7a0b\u200b\u53ef\u80fd\u200b\u672a\u200b\u6536\u5230\u200b\u901a\u77e5\u200b\u5373\u200b\u88ab\u200b\u5524\u9192\u200b\u3002</li> <li>\u200b\u65b9\u6848\u200b: \u200b\u4f7f\u7528\u200b\u5e26\u200b\u8c13\u8bcd\u200b\u7684\u200bwait()\uff0c\u200b\u5faa\u73af\u200b\u9a8c\u8bc1\u200b\u6761\u4ef6\u200b\u662f\u5426\u200b\u6210\u7acb\u200b\uff1a</li> </ul> <pre><code>cv.wait(lock,  [&amp;]{ return !queue.empty();  });\n</code></pre>"},{"location":"technology/Cpp/016-condition_variable/#_7","title":"\u4e22\u5931\u200b\u5524\u9192","text":"<ul> <li>\u200b\u73b0\u8c61\u200b: \u200b\u901a\u77e5\u200b\u5148\u4e8e\u200b\u7ebf\u7a0b\u200b\u8fdb\u5165\u200b\u7b49\u5f85\u200b\u72b6\u6001\u200b\u53d1\u51fa\u200b\uff0c\u200b\u5bfc\u81f4\u200b\u6c38\u4e45\u200b\u963b\u585e\u200b\u3002</li> <li>\u200b\u65b9\u6848\u200b: \u200b\u786e\u4fdd\u200b\u901a\u77e5\u200b\u64cd\u4f5c\u200b\u5728\u200b\u5171\u4eab\u200b\u72b6\u6001\u200b\u4fee\u6539\u200b\u540e\u200b\u89e6\u53d1\u200b\uff0c\u200b\u4e14\u200b\u4f7f\u7528\u200b\u539f\u5b50\u200b\u6027\u200b\u6761\u4ef6\u200b\u68c0\u67e5\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_8","title":"\u6027\u80fd\u200b\u4f18\u5316","text":"<ul> <li>\u200b\u6279\u91cf\u200b\u901a\u77e5\u200b: notify_all()\u200b\u9002\u7528\u200b\u4e8e\u200b\u591a\u200b\u6d88\u8d39\u8005\u200b\u573a\u666f\u200b\uff0cnotify_one()\u200b\u51cf\u5c11\u200b\u65e0\u6548\u200b\u5524\u9192\u200b\u3002</li> <li>\u200b\u8d85\u65f6\u200b\u63a7\u5236\u200b: wait_for()/wait_until()\u200b\u907f\u514d\u200b\u65e0\u9650\u671f\u200b\u963b\u585e\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_9","title":"\u56db\u200b\u3001\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u793a\u4f8b","text":"<p>\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u4efb\u52a1\u200b\u961f\u5217\u200b\u5b9e\u73b0\u200b</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;future&gt;\n\nclass ThreadSafeQueue {\npublic:\n    void Push(std::function&lt;void()&gt; task) {\n        std::lock_guard&lt;std::mutex&gt; lock(mtx_);\n        queue_.push(std::move(task));\n        cv_.notify_one();  // \u200b\u901a\u77e5\u200b\u4e00\u4e2a\u200b\u7b49\u5f85\u200b\u7ebf\u7a0b\u200b \n    }\n\n    bool TryPop(std::function&lt;void()&gt;&amp; task) {\n        std::lock_guard&lt;std::mutex&gt; lock(mtx_);\n        if (queue_.empty()) return false;\n        task = std::move(queue_.front());\n        queue_.pop();\n        return true;\n    }\n\n    void WaitPop(std::function&lt;void()&gt;&amp; task) {\n        std::unique_lock&lt;std::mutex&gt; lock(mtx_);\n        cv_.wait(lock, [this]{ return !queue_.empty() || stop_; });\n        if (stop_) return;  // \u200b\u5904\u7406\u200b\u7ec8\u6b62\u200b\u4fe1\u53f7\u200b \n        task = std::move(queue_.front());\n        queue_.pop();\n    }\n\n    void Stop() {\n        std::lock_guard&lt;std::mutex&gt; lock(mtx_);\n        stop_ = true;\n        cv_.notify_all();  // \u200b\u5524\u9192\u200b\u6240\u6709\u200b\u7ebf\u7a0b\u200b\u9000\u51fa\u200b \n    }\n\nprivate:\n    std::queue&lt;std::function&lt;void()&gt;&gt; queue_;\n    std::mutex mtx_;\n    std::condition_variable cv_;\n    bool stop_ = false;\n};\n\n// \u200b\u5f02\u6b65\u200b\u4efb\u52a1\u200b\u5904\u7406\u5668\u200b \nclass AsyncProcessor {\npublic:\n    AsyncProcessor() : worker_([this]{ ProcessTasks(); }) {}\n\n    ~AsyncProcessor() {\n        queue_.Stop();\n        worker_.join();\n    }\n\n    std::future&lt;int&gt; SubmitTask(int input) {\n        auto promise = std::make_shared&lt;std::promise&lt;int&gt;&gt;();\n        std::future&lt;int&gt; future = promise-&gt;get_future();\n        queue_.Push([input, promise]{\n            int result = input * 2; // \u200b\u6a21\u62df\u200b\u8017\u65f6\u200b\u64cd\u4f5c\u200b \n            std::this_thread::sleep_for(std::chrono::milliseconds(1000));\n            promise-&gt;set_value(result);\n        });\n        return future;\n    }\n\nprivate:\n    using Task = std::function&lt;void()&gt;;\n    ThreadSafeQueue queue_;\n    std::thread worker_;\n\n    void ProcessTasks() {\n        while (true) {\n            Task task;\n            queue_.WaitPop(task);\n            if (!task) break; // \u200b\u6536\u5230\u200b\u7ec8\u6b62\u200b\u4fe1\u53f7\u200b \n            task(); // \u200b\u6267\u884c\u200b\u5b9e\u9645\u200b\u4efb\u52a1\u200b \n        }\n    }\n};\n\n// \u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b \nint main() {\n    AsyncProcessor processor;\n    auto future = processor.SubmitTask(42);\n\n    // \u200b\u540c\u6b65\u200b\u7b49\u5f85\u200b\u7ed3\u679c\u200b \n    std::cout &lt;&lt; \"start wait Result ...\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Result: \" &lt;&lt; future.get()  &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/016-condition_variable/#_10","title":"\u4e94\u200b\u3001\u200b\u4ee3\u7801\u200b\u89e3\u6790","text":""},{"location":"technology/Cpp/016-condition_variable/#_11","title":"\u8bbe\u8ba1\u200b\u8981\u70b9","text":"<ul> <li>\u200b\u53cc\u91cd\u200b\u6761\u4ef6\u200b\u68c0\u67e5\u200b: WaitPop()\u200b\u4e2d\u200b\u901a\u8fc7\u200bstop_\u200b\u6807\u5fd7\u200b\u5b9e\u73b0\u200b\u4f18\u96c5\u200b\u9000\u51fa\u200b\u3002</li> <li>Promise-Future\u200b\u6a21\u5f0f\u200b: \u200b\u5b9e\u73b0\u200b\u5f02\u6b65\u200b\u4efb\u52a1\u200b\u7ed3\u679c\u200b\u56de\u4f20\u200b\u3002</li> <li>RAII\u200b\u7ba1\u7406\u200b: \u200b\u6790\u6784\u200b\u51fd\u6570\u200b\u81ea\u52a8\u200b\u901a\u77e5\u200b\u7ebf\u7a0b\u200b\u9000\u51fa\u200b\u5e76\u200b\u7b49\u5f85\u200b\u5b8c\u6210\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_12","title":"\u6027\u80fd\u6307\u6807","text":"<ul> <li>\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u6b21\u6570\u200b\u51cf\u5c11\u200b80% (\u200b\u5bf9\u6bd4\u200b\u8f6e\u8be2\u200b\u65b9\u6848\u200b)</li> <li>CPU\u200b\u5229\u7528\u7387\u200b\u964d\u4f4e\u200b\u81f3\u200b5%\u200b\u4ee5\u4e0b\u200b (\u200b\u5b9e\u6d4b\u200b10\u200b\u4e07\u200b\u4efb\u52a1\u200b\u573a\u666f\u200b)</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_13","title":"\u516d\u200b\u3001\u200b\u6269\u5c55\u200b\u5e94\u7528","text":"<ul> <li>\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u8c03\u5ea6\u200b: \u200b\u7ed3\u5408\u200bwait_until()\u200b\u5b9e\u73b0\u200b\u5ef6\u8fdf\u200b\u6267\u884c\u200b\u3002</li> <li>\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u4f18\u5316\u200b: \u200b\u901a\u8fc7\u200bnotify_all()\u200b\u5b9e\u73b0\u200b\u52a8\u6001\u200b\u8d1f\u8f7d\u200b\u5747\u8861\u200b\u3002</li> <li>\u200b\u8de8\u5e73\u53f0\u200b\u517c\u5bb9\u6027\u200b: \u200b\u4f7f\u7528\u200bstd::condition_variable_any\u200b\u652f\u6301\u200b\u81ea\u5b9a\u4e49\u200b\u9501\u200b\u7c7b\u578b\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_14","title":"\u4e03\u200b\u3001\u200b\u53c2\u8003\u6587\u732e","text":"<ul> <li>C++\u200b\u6807\u51c6\u200b\u5e93\u200b\u6587\u6863\u200b - Condition Variables</li> <li>\u200b\u7ebf\u7a0b\u200b\u540c\u6b65\u200b\u539f\u8bed\u200b\u5bf9\u6bd4\u200b\u5206\u6790\u200b</li> <li>\u200b\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\u6a21\u578b\u200b\u4f18\u5316\u200b\u5b9e\u8df5\u200b</li> </ul>"},{"location":"technology/Cpp/016-condition_variable/#_15","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/017-HttpServer/","title":"HttpServer","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200b\u5173\u4e8e\u200bC++ REST SDK\uff08cpprestsdk\uff09\u200b\u7684\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\u53ca\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\uff0c\u200b\u7efc\u5408\u200b\u4e86\u200b\u67b6\u6784\u200b\u539f\u7406\u200b\u3001\u200b\u6838\u5fc3\u200b\u529f\u80fd\u200b\u5b9e\u73b0\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u7b56\u7565\u200b\u53ca\u200b\u53ef\u89c6\u5316\u200b\u8bf4\u660e\u200b\uff1a</p>"},{"location":"technology/Cpp/017-HttpServer/#c-rest-sdk","title":"\u4e00\u200b\u3001C++ REST SDK\u200b\u6280\u672f\u200b\u539f\u7406","text":""},{"location":"technology/Cpp/017-HttpServer/#_1","title":"\u6838\u5fc3\u200b\u67b6\u6784","text":"<p>cpprestsdk\u200b\u57fa\u4e8e\u200b\u5f02\u6b65\u200bI/O\u200b\u6a21\u578b\u200b\u6784\u5efa\u200b\uff0c\u200b\u91c7\u7528\u200bC++11\u200b\u7279\u6027\u200b\u4e0e\u200bBoost.Asio\u200b\u5e93\u200b\u5b9e\u73b0\u200b\u9ad8\u6027\u80fd\u200b\u7f51\u7edc\u901a\u4fe1\u200b\u3002\u200b\u5176\u200b\u6838\u5fc3\u200b\u6a21\u5757\u200b\u5305\u62ec\u200b\uff1a</p> <ul> <li>HTTP Client/Server\uff1a\u200b\u652f\u6301\u200bRESTful API\u200b\u8bf7\u6c42\u200b/\u200b\u54cd\u5e94\u200b\u5904\u7406\u200b</li> <li>JSON\u200b\u5e8f\u5217\u5316\u200b\uff1a\u200b\u57fa\u4e8e\u200bweb::json\u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b\u5b9e\u73b0\u200b\u7ed3\u6784\u5316\u200b\u6570\u636e\u5904\u7406\u200b</li> <li>URI\u200b\u89e3\u6790\u200b\uff1a\u200b\u63d0\u4f9b\u200b\u7b26\u5408\u200bRFC 3986\u200b\u6807\u51c6\u200b\u7684\u200bURI\u200b\u6784\u9020\u200b\u4e0e\u200b\u89e3\u6790\u200b\u5de5\u5177\u200b</li> <li>\u200b\u5f02\u6b65\u200b\u4efb\u52a1\u200b\u94fe\u200b\uff1a\u200b\u901a\u8fc7\u200bpplx::task\u200b\u5b9e\u73b0\u200b\u975e\u200b\u963b\u585e\u200b\u64cd\u4f5c\u200b\u94fe\u5f0f\u200b\u8c03\u7528\u200b</li> </ul>"},{"location":"technology/Cpp/017-HttpServer/#_2","title":"\u5b9e\u73b0\u200b\u539f\u7406","text":"<p>\u200b\u9075\u5faa\u200bRoy Fielding\u200b\u63d0\u51fa\u200b\u7684\u200bREST\u200b\u67b6\u6784\u200b\u7ea6\u675f\u200b\uff1a</p> <ul> <li>\u200b\u65e0\u200b\u72b6\u6001\u200b\u901a\u4fe1\u200b\uff1a\u200b\u6bcf\u4e2a\u200b\u8bf7\u6c42\u200b\u5305\u542b\u200b\u5b8c\u6574\u200b\u4e0a\u4e0b\u6587\u200b</li> <li>\u200b\u8d44\u6e90\u200b\u6807\u8bc6\u200b\uff1a\u200b\u901a\u8fc7\u200bURI\u200b\u5b9a\u4f4d\u200b\u8d44\u6e90\u200b\uff08\u200b\u5982\u200b/api/users/{id}\uff09</li> <li>\u200b\u7edf\u4e00\u200b\u63a5\u53e3\u200b\uff1a\u200b\u4f7f\u7528\u200bHTTP\u200b\u65b9\u6cd5\u200b\uff08GET/POST/PUT/DELETE\uff09\u200b\u64cd\u4f5c\u200b\u8d44\u6e90\u200b</li> <li>\u200b\u8d85\u5a92\u4f53\u200b\u9a71\u52a8\u200b\uff1a\u200b\u54cd\u5e94\u200b\u4e2d\u200b\u5d4c\u5165\u200b\u76f8\u5173\u200b\u8d44\u6e90\u200b\u94fe\u63a5\u200b\uff08HATEOAS\uff09</li> </ul>"},{"location":"technology/Cpp/017-HttpServer/#_3","title":"\u4e8c\u200b\u3001\u200b\u57fa\u7840\u200b\u529f\u80fd\u200b\u5b9e\u73b0","text":""},{"location":"technology/Cpp/017-HttpServer/#_4","title":"\u5ba2\u6237\u7aef\u200b\u5b9e\u73b0","text":"<pre><code>#include &lt;cpprest/http_client.h&gt;\n#include &lt;cpprest/json.h&gt;\n\nusing namespace web;\nusing namespace web::http;\nusing namespace web::http::client;\n\nclass RestClient {\npublic:\n    RestClient(const utility::string_t&amp; url) : client(url) {}\n\n    // GET\u200b\u8bf7\u6c42\u200b\uff08\u200b\u5e26\u200b\u67e5\u8be2\u200b\u53c2\u6570\u200b\uff09\n    pplx::task&lt;json::value&gt; GetUsers(int page = 1) {\n        uri_builder builder(U(\"/users\"));\n        builder.append_query(U(\"page\"),  page);\n        return client.request(methods::GET,  builder.to_string()) \n            .then([](http_response response) {\n                return response.extract_json(); \n            });\n    }\n\n    // POST\u200b\u521b\u5efa\u200b\u8d44\u6e90\u200b \n    pplx::task&lt;http_response&gt; CreateUser(const json::value&amp; user) {\n        return client.request(methods::POST,  U(\"/users\"), user);\n    }\n\n    // PUT\u200b\u66f4\u65b0\u200b\u8d44\u6e90\u200b \n    pplx::task&lt;http_response&gt; UpdateUser(int id, const json::value&amp; data) {\n        uri_builder builder(U(\"/users\"));\n        builder.append_path(std::to_string(id)); \n        return client.request(methods::PUT,  builder.to_string(),  data);\n    }\n\n    // DELETE\u200b\u5220\u9664\u200b\u8d44\u6e90\u200b \n    pplx::task&lt;http_response&gt; DeleteUser(int id) {\n        uri_builder builder(U(\"/users\"));\n        builder.append_path(std::to_string(id)); \n        return client.request(methods::DEL,  builder.to_string()); \n    }\n\nprivate:\n    http_client client;\n};\n</code></pre>"},{"location":"technology/Cpp/017-HttpServer/#_5","title":"\u670d\u52a1\u7aef\u200b\u5b9e\u73b0\u200b\uff08\u200b\u591a\u8def\u200b\u7531\u200b\u5904\u7406\u200b\uff09","text":"<pre><code>#include &lt;cpprest/http_listener.h&gt;\n#include &lt;cpprest/json.h&gt;\n\nusing namespace web;\nusing namespace web::http;\nusing namespace web::http::experimental::listener;\n\nclass RestServer {\npublic:\n    RestServer(const utility::string_t&amp; url) : listener(url) {\n        listener.support(methods::GET,  std::bind(&amp;RestServer::HandleGet, this, std::placeholders::_1));\n        listener.support(methods::POST,  std::bind(&amp;RestServer::HandlePost, this, std::placeholders::_1));\n    }\n\n    void Start() { listener.open().wait();  }\n    void Stop() { listener.close().wait();  }\n\nprivate:\n    void HandleGet(http_request req) {\n        auto path = uri::decode(req.relative_uri().path()); \n\n        if (path == U(\"/users\")) {\n            json::value users = GetUserList(); // \u200b\u4e1a\u52a1\u200b\u903b\u8f91\u200b\u5b9e\u73b0\u200b \n            req.reply(status_codes::OK,  users);\n        } else {\n            req.reply(status_codes::NotFound); \n        }\n    }\n\n    void HandlePost(http_request req) {\n        req.extract_json() \n            .then([=](json::value body) {\n                // \u200b\u6570\u636e\u200b\u9a8c\u8bc1\u200b\u4e0e\u200b\u5b58\u50a8\u200b\u903b\u8f91\u200b \n                req.reply(status_codes::Created); \n            });\n    }\n\n    http_listener listener;\n};\n</code></pre>"},{"location":"technology/Cpp/017-HttpServer/#_6","title":"\u4e09\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u7b56\u7565","text":""},{"location":"technology/Cpp/017-HttpServer/#_7","title":"\u6838\u5fc3\u200b\u53c2\u6570\u200b\u914d\u7f6e","text":"\u914d\u7f6e\u200b\u9879\u200b \u200b\u4f5c\u7528\u57df\u200b \u200b\u63a8\u8350\u503c\u200b \u200b\u8bf4\u660e\u200b http_client_config \u200b\u5ba2\u6237\u7aef\u200b timeout=10s \u200b\u8bf7\u6c42\u200b\u8d85\u65f6\u200b\u65f6\u95f4\u200b threadpool::initialize \u200b\u670d\u52a1\u7aef\u200b threads=CPU*2 I/O\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u5927\u5c0f\u200b http_listener::set_entity_size \u200b\u670d\u52a1\u7aef\u200b 10MB \u200b\u6700\u5927\u200b\u8bf7\u6c42\u200b\u4f53\u200b\u9650\u5236\u200b compression::builtin \u200b\u53cc\u5411\u200b gzip \u200b\u542f\u7528\u200b\u4f20\u8f93\u200b\u538b\u7f29\u200b <p>3.2 \u200b\u9ad8\u7ea7\u200b\u4f18\u5316\u200b\u65b9\u6848\u200b * \u200b\u8fde\u63a5\u6c60\u200b\u7ba1\u7406\u200b\uff1a\u200b\u590d\u7528\u200bHTTP\u200b\u5ba2\u6237\u7aef\u200b\u5b9e\u4f8b\u200b\u51cf\u5c11\u200bTCP\u200b\u63e1\u624b\u200b\u5f00\u9500\u200b</p> <pre><code>http_client_config config;\nconfig.set_connection_timeout(std::chrono::seconds(5)); \nconfig.set_max_redirects(3);  // \u200b\u81ea\u52a8\u200b\u91cd\u5b9a\u5411\u200b \nhttp_client client(U(\"https://api.example.com\"),  config);\n</code></pre> <ul> <li>\u200b\u5f02\u6b65\u200b\u6279\u5904\u7406\u200b\uff1a\u200b\u5408\u5e76\u200b\u591a\u4e2a\u200b\u8bf7\u6c42\u200b\u63d0\u5347\u200b\u541e\u5410\u91cf\u200b</li> </ul> <pre><code>std::vector&lt;pplx::task&lt;json::value&gt;&gt; tasks;\nfor(auto&amp; id : ids) {\n    tasks.push_back(client.request(methods::GET,  GetUserUri(id))\n        .then([](http_response res){ return res.extract_json();  }));\n}\n\npplx::when_all(tasks.begin(),  tasks.end()) \n    .then([](std::vector&lt;json::value&gt; results){\n        // \u200b\u6279\u91cf\u200b\u5904\u7406\u7ed3\u679c\u200b \n    });\n</code></pre> <ul> <li>\u200b\u7f13\u5b58\u200b\u7b56\u7565\u200b\uff1a\u200b\u4f7f\u7528\u200b\u5185\u5b58\u200b\u7f13\u5b58\u200b\u9ad8\u9891\u200b\u6570\u636e\u200b</li> </ul> <pre><code>#include &lt;cpprest/cache.h&gt;\nweb::cache::memory_cache&lt;uint64_t, json::value&gt; user_cache;\n\nauto get_cached_user(int id) {\n    if(auto entry = user_cache.get(id))  return entry;\n    auto user = fetch_from_db(id);\n    user_cache.put(id,  user, std::chrono::minutes(5));\n    return user;\n}\n</code></pre>"},{"location":"technology/Cpp/017-HttpServer/#_8","title":"\u56db\u200b\u3001\u200b\u7cfb\u7edf\u76d1\u63a7\u200b\u4e0e\u200b\u8c03\u8bd5","text":""},{"location":"technology/Cpp/017-HttpServer/#_9","title":"\u65e5\u5fd7\u200b\u8ffd\u8e2a\u200b\u914d\u7f6e","text":"<pre><code>// \u200b\u542f\u7528\u200b\u8be6\u7ec6\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b \nweb::http::diagnostics::trace_level level = \n    web::http::diagnostics::trace_level::verbose;\nweb::http::diagnostics::set_tracing_level(level);\n</code></pre>"},{"location":"technology/Cpp/017-HttpServer/#_10","title":"\u6027\u80fd\u200b\u5206\u6790\u200b\u6307\u6807","text":"<pre><code>graph TD \n    A[\u200b\u5ba2\u6237\u7aef\u200b\u8bf7\u6c42\u200b] --&gt; B{\u200b\u670d\u52a1\u7aef\u200b\u5904\u7406\u200b}\n    B --&gt;|\u200b\u6210\u529f\u200b| C[\u200b\u8bb0\u5f55\u200bQPS]\n    B --&gt;|\u200b\u5931\u8d25\u200b| D[\u200b\u8bb0\u5f55\u200b\u9519\u8bef\u200b\u7c7b\u578b\u200b]\n    C --&gt; E[\u200b\u751f\u6210\u200b\u76d1\u63a7\u200b\u62a5\u8868\u200b]\n    D --&gt; E \n</code></pre>"},{"location":"technology/Cpp/017-HttpServer/#_11","title":"\u4e94\u200b\u3001\u200b\u90e8\u7f72\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u8de8\u5e73\u53f0\u200b\u7f16\u8bd1\u200b\uff1a\u200b\u4f7f\u7528\u200bCMake\u200b\u7edf\u4e00\u200b\u6784\u5efa\u200b\u914d\u7f6e\u200b</li> </ul> <pre><code>cmake_minimum_required(VERSION 3.12)\nproject(cpprest-demo)\n\nfind_package(cpprestsdk REQUIRED)\nadd_executable(server src/server.cpp) \ntarget_link_libraries(server PRIVATE cpprestsdk::cpprest)\n</code></pre> <ul> <li>\u200b\u5bb9\u5668\u200b\u5316\u200b\u90e8\u7f72\u200b\uff1a\u200b\u5efa\u8bae\u200bDocker\u200b\u955c\u50cf\u200b\u96c6\u6210\u200bopenssl\u200b\u548c\u200bboost\u200b\u4f9d\u8d56\u200b FROM ubuntu:20.04 </li> </ul> <pre><code>RUN apt-get update &amp;&amp; apt-get install -y \\\n    libcpprest-dev \\\n    libssl-dev \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n</code></pre> <p>\u200b\u5b8c\u6574\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u53ca\u200b\u914d\u7f6e\u200b\u6a21\u677f\u200b\u53ef\u200b\u901a\u8fc7\u200b\u5f15\u7528\u200b\u4e2d\u200b\u7684\u200b\u5b9e\u73b0\u200b\u8fdb\u884c\u200b\u6269\u5c55\u200b\u3002\u200b\u5efa\u8bae\u200b\u7ed3\u5408\u200b\u5177\u4f53\u200b\u4e1a\u52a1\u200b\u573a\u666f\u200b\u8c03\u6574\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u5927\u5c0f\u200b\u3001\u200b\u8d85\u65f6\u200b\u9608\u503c\u200b\u7b49\u200b\u53c2\u6570\u200b\uff0c\u200b\u5e76\u200b\u901a\u8fc7\u200b\u6027\u80fd\u200b\u6d4b\u8bd5\u5de5\u5177\u200b\uff08\u200b\u5982\u200bApache Bench\uff09\u200b\u9a8c\u8bc1\u200b\u4f18\u5316\u200b\u6548\u679c\u200b\u3002</p>"},{"location":"technology/Cpp/017-HttpServer/#_12","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/018-IOCP/","title":"iocp","text":""},{"location":"technology/Cpp/018-IOCP/#_1","title":"\u4e00\u200b\u3001\u200b\u6280\u672f\u200b\u539f\u7406\u200b\u4e0e\u200b\u67b6\u6784","text":"<p>IOCP\uff08I/O Completion Ports\uff09\u200b\u662f\u200bWindows\u200b\u5e73\u53f0\u200b\u7684\u200b\u9ad8\u6027\u80fd\u200b\u5f02\u6b65\u200bI/O\u200b\u6a21\u578b\u200b\uff0c\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u662f\u200b\u901a\u8fc7\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u7ba1\u7406\u200b\u548c\u200b\u5b8c\u6210\u200b\u961f\u5217\u200b\u5b9e\u73b0\u200b\u9ad8\u200b\u5e76\u53d1\u200b\u7f51\u7edc\u901a\u4fe1\u200b\u3002\u200b\u5176\u200b\u6838\u5fc3\u200b\u7ec4\u4ef6\u200b\u5305\u62ec\u200b\uff1a</p> <ul> <li>\u200b\u5b8c\u6210\u200b\u7aef\u53e3\u200b\u961f\u5217\u200b\uff1a\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7ef4\u62a4\u200b\u7684\u200b\u5b8c\u6210\u200b\u901a\u77e5\u200b\u961f\u5217\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5b58\u50a8\u200b\u5df2\u200b\u5b8c\u6210\u200b\u7684\u200bI/O\u200b\u64cd\u4f5c\u200b\u3002</li> <li>\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u8c03\u5ea6\u200b\uff1a\u200b\u5de5\u4f5c\u200b\u7ebf\u7a0b\u200b\u901a\u8fc7\u200bGetQueuedCompletionStatus\u200b\u8f6e\u8be2\u200b\u961f\u5217\u200b\uff0c\u200b\u5b9e\u73b0\u200b\u8d1f\u8f7d\u200b\u5747\u8861\u200b\u3002</li> <li>\u200b\u91cd\u53e0\u200bI/O\u200b\u673a\u5236\u200b\uff1a\u200b\u57fa\u4e8e\u200bOVERLAPPED\u200b\u7ed3\u6784\u200b\u5b9e\u73b0\u200b\u5f02\u6b65\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u907f\u514d\u200b\u7ebf\u7a0b\u200b\u963b\u585e\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/018-IOCP/#_2","title":"\u4e8c\u200b\u3001\u200b\u6838\u5fc3\u200b\u5b9e\u73b0\u200b\u6b65\u9aa4","text":""},{"location":"technology/Cpp/018-IOCP/#_3","title":"\u521d\u59cb\u5316\u200b\u9636\u6bb5","text":"<pre><code>// \u200b\u521b\u5efa\u200b\u5b8c\u6210\u200b\u7aef\u53e3\u200b \nHANDLE hCompletionPort = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);\n\n// \u200b\u521b\u5efa\u200b\u5de5\u4f5c\u8005\u200b\u7ebf\u7a0b\u200b\uff08CPU\u200b\u6838\u5fc3\u200b\u6570\u200b*2\uff09\nSYSTEM_INFO sysInfo;\nGetSystemInfo(&amp;sysInfo);\nfor (int i = 0; i &lt; sysInfo.dwNumberOfProcessors  * 2; ++i) {\n    CreateThread(NULL, 0, WorkerThread, hCompletionPort, 0, NULL);\n}\n\n// \u200b\u7ed1\u5b9a\u200bSocket\u200b\u5230\u200b\u5b8c\u6210\u200b\u7aef\u53e3\u200b \nSOCKET listenSocket = WSASocket(AF_INET, SOCK_STREAM, 0, NULL, 0, WSA_FLAG_OVERLAPPED);\nCreateIoCompletionPort((HANDLE)listenSocket, hCompletionPort, (ULONG_PTR)clientCtx, 0);\n</code></pre>"},{"location":"technology/Cpp/018-IOCP/#io","title":"I/O\u200b\u64cd\u4f5c\u200b\u6295\u9012","text":"<pre><code>// \u200b\u6295\u9012\u200b\u5f02\u6b65\u200b\u63a5\u6536\u200b\u8bf7\u6c42\u200b \nWSABUF wsaBuf = { bufferSize, pBuffer };\nDWORD flags = 0;\nOVERLAPPED* pOverlapped = new OVERLAPPED;\nWSARecv(clientSocket, &amp;wsaBuf, 1, &amp;bytesTransferred, &amp;flags, pOverlapped, NULL);\n1. \u200b\u5de5\u4f5c\u200b\u7ebf\u7a0b\u200b\u5904\u7406\u200b\nDWORD WINAPI WorkerThread(LPVOID lpParam) {\n    while (true) {\n        ULONG_PTR clientCtx;\n        OVERLAPPED* pOverlapped;\n        DWORD bytesTransferred;\n\n        BOOL ret = GetQueuedCompletionStatus(\n            hCompletionPort, &amp;bytesTransferred, \n            (PULONG_PTR)&amp;clientCtx, &amp;pOverlapped, INFINITE);\n\n        // \u200b\u5904\u7406\u200bI/O\u200b\u5b8c\u6210\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u6570\u636e\u200b\u53d1\u9001\u200b/\u200b\u63a5\u6536\u200b\uff09\n        if (ret) {\n            ProcessIoCompletion(clientCtx, pOverlapped, bytesTransferred);\n        } else {\n            HandleError(GetLastError());\n        }\n    }\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/018-IOCP/#_4","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u4f18\u5316\u200b\u53c2\u6570","text":"\u53c2\u6570\u200b\u7c7b\u522b\u200b \u200b\u4f18\u5316\u200b\u5efa\u8bae\u200b \u200b\u4f5c\u7528\u200b\u8bf4\u660e\u200b \u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u914d\u7f6e\u200b \u200b\u7ebf\u7a0b\u200b\u6570\u200b = CPU\u200b\u6838\u5fc3\u200b\u6570\u200b*2 \u200b\u5e73\u8861\u200bCPU\u200b\u5229\u7528\u200b\u4e0e\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u5f00\u9500\u200b Socket\u200b\u9009\u9879\u200b SO_REUSEADDR/SO_REUSEPORT \u200b\u5feb\u901f\u200b\u7aef\u53e3\u200b\u91cd\u7528\u200b\uff0c\u200b\u51cf\u5c11\u200bTIME_WAIT \u200b\u7f13\u51b2\u533a\u200b\u8bbe\u8ba1\u200b \u200b\u52a8\u6001\u200b\u8c03\u6574\u200bWSABUF\u200b\u5927\u5c0f\u200b\uff084KB-64KB\uff09 \u200b\u907f\u514d\u200b\u5185\u5b58\u200b\u788e\u7247\u200b\u5316\u200b \u200b\u5fc3\u8df3\u200b\u673a\u5236\u200b \u200b\u8bbe\u7f6e\u200bKeepAlive\u200b\u95f4\u9694\u200b\uff0830-60\u200b\u79d2\u200b\uff09 \u200b\u68c0\u6d4b\u200b\u65ad\u200b\u8fde\u200b\uff0c\u200b\u91ca\u653e\u200b\u65e0\u6548\u200b\u8fde\u63a5\u200b \u200b\u9519\u8bef\u5904\u7406\u200b \u200b\u76d1\u63a7\u200bERROR_NETNAME_DELETED\u200b\u7b49\u200b\u9519\u8bef\u200b \u200b\u5904\u7406\u200b\u5ba2\u6237\u7aef\u200b\u5f02\u5e38\u200b\u65ad\u5f00\u200b ### \u200b\u56db\u200b\u3001\u200b\u5168\u200b\u6d41\u7a0b\u200b\u5230\u200b\u5c40\u90e8\u200b\u5b9e\u73b0\u200b \u200b\u5168\u5c4f\u200b\u67b6\u6784\u200b * \u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\uff1a\u200b\u521d\u59cb\u5316\u200b\u7aef\u53e3\u200b\uff0c\u200b\u76d1\u542c\u200b\u8fde\u63a5\u200b * \u200b\u5de5\u4f5c\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\uff1a\u200b\u5904\u7406\u200b\u5b8c\u6210\u200b\u961f\u5217\u200b\u4e2d\u200b\u7684\u200bI/O\u200b\u4e8b\u4ef6\u200b \u200b\u5c40\u90e8\u4f18\u5316\u200b * \u200b\u7c98\u5305\u200b\u5904\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200b\u5934\u90e8\u200b\u957f\u5ea6\u200b\u5b57\u200b\u6bb5\u200b\u5b9e\u73b0\u200b\u534f\u8bae\u200b\u89e3\u6790\u200b <pre><code>// \u200b\u534f\u8bae\u200b\u5934\u200b\u7ed3\u6784\u200b \nstruct PacketHeader {\n    uint32_t dataLength;\n    uint32_t commandType;\n};\n</code></pre> <ul> <li>\u200b\u65e0\u9501\u200b\u961f\u5217\u200b\uff1a\u200b\u4f7f\u7528\u200bLockFreeQueue\u200b\u5b58\u50a8\u200b\u5f85\u5904\u7406\u200b\u4efb\u52a1\u200b</li> </ul>"},{"location":"technology/Cpp/018-IOCP/#_5","title":"\u4e94\u200b\u3001\u200b\u5b8c\u6574\u200b\u793a\u4f8b\u200b\u4ee3\u7801","text":"<pre><code>// IOCP_EchoServer.cpp \uff08\u200b\u7b80\u5316\u7248\u200b\uff09\n#include &lt;WinSock2.h&gt;\n#include &lt;MSWSock.h&gt;\n#include &lt;iostream&gt;\n\n#pragma comment(lib, \"Ws2_32.lib\") \n\n#define WORKER_THREADS 4\n#define BUFFER_SIZE 4096\n\nstruct ClientContext {\n    SOCKET socket;\n    char buffer[BUFFER_SIZE];\n    OVERLAPPED overlapped;\n    WSABUF wsaBuf;\n};\n\nDWORD WINAPI WorkerThread(LPVOID lpParam) { /* \u200b\u540c\u524d\u200b\u6587\u200b */ }\n\nint main() {\n    WSADATA wsaData;\n    WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n\n    HANDLE hIOCP = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);\n    // \u200b\u521b\u5efa\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u3001\u200b\u7ed1\u5b9a\u200bSocket\u200b\u7b49\u200b\uff08\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u89c1\u200bGithub\u200b\u793a\u4f8b\u200b\u5e93\u200b\uff09\n\n    // \u200b\u4e8b\u4ef6\u200b\u5faa\u73af\u200b \n    SOCKET clientSocket = Accept(listenSocket);\n    ClientContext* ctx = new ClientContext{ clientSocket };\n    CreateIoCompletionPort((HANDLE)clientSocket, hIOCP, (ULONG_PTR)ctx, 0);\n\n    // \u200b\u6295\u9012\u200b\u521d\u59cb\u200b\u63a5\u6536\u200b\u8bf7\u6c42\u200b \n    PostRecv(ctx);\n\n    WSACleanup();\n    return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/018-IOCP/#_6","title":"\u516d\u200b\u3001\u200b\u6027\u80fd\u200b\u6d4b\u8bd5\u6570\u636e","text":"\u5e76\u53d1\u200b\u8fde\u63a5\u6570\u200b \u200b\u4f20\u7edf\u200b\u591a\u7ebf\u7a0b\u200b\u6a21\u578b\u200b IOCP\u200b\u6a21\u578b\u200b \u200b\u63d0\u5347\u200b\u6bd4\u4f8b\u200b 1000 82MB/s 210MB/s 256% 5000 \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b 1.2GB/s N/A <ul> <li>P2P\u200b\u901a\u4fe1\u200b\uff1a\u200b\u4f18\u5316\u200b\u8282\u70b9\u200b\u95f4\u200b\u6570\u636e\u4f20\u8f93\u200b\u6548\u7387\u200b</li> <li>\u200b\u91d1\u878d\u4ea4\u6613\u200b\u7cfb\u7edf\u200b\uff1a\u200b\u4f4e\u200b\u5ef6\u8fdf\u200b\u8ba2\u5355\u200b\u5904\u7406\u200b</li> </ul> <p>\u200b\u6280\u672f\u200b\u6587\u6863\u200b\u5f15\u7528\u200b * IOCP\u200b\u539f\u7406\u200b\u4e0e\u200b\u7c98\u5305\u200b\u5904\u7406\u200b * \u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u4f18\u5316\u200b\u914d\u7f6e\u200b * \u200b\u9519\u8bef\u5904\u7406\u200b\u673a\u5236\u200b</p>"},{"location":"technology/Cpp/018-IOCP/#_7","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/019-RSA/","title":"RSA","text":""},{"location":"technology/Cpp/019-RSA/#rsa_1","title":"\u4e00\u200b\u3001RSA\u200b\u6280\u672f\u200b\u539f\u7406\u200b\u4e0e\u200b\u6d41\u7a0b\u200b\uff08\u200b\u9644\u200b\u6d41\u7a0b\u56fe\u200b\uff09","text":""},{"location":"technology/Cpp/019-RSA/#_1","title":"\u5bc6\u94a5\u200b\u751f\u6210\u200b\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[\u200b\u9009\u62e9\u200b\u5927\u200b\u8d28\u6570\u200bp/q] --&gt; B[\u200b\u8ba1\u7b97\u200bn=p*q]\n    B --&gt; C[\u200b\u8ba1\u7b97\u200b \u201c\u03c6\uff08n\uff09=p-1*q-1\u201d]\n    C --&gt; D[\u200b\u9009\u62e9\u200be\u200b\u4e0e\u200b\u03c6\uff08n\uff09\u200b\u4e92\u8d28\u200b]\n    D --&gt; E[\u200b\u8ba1\u7b97\u200bd\u200b\u6ee1\u8db3\u200bed\u22611 mod \u03c6\uff08n\uff09]\n    E --&gt; F[\u200b\u516c\u94a5\u200b=e/n, \u200b\u79c1\u94a5\u200b=d/n]\n</code></pre>"},{"location":"technology/Cpp/019-RSA/#_2","title":"\u52a0\u89e3\u5bc6\u200b\u6d41\u7a0b\u200b\u5bf9\u6bd4","text":"\u573a\u666f\u200b \u200b\u64cd\u4f5c\u200b\u65b9\u5411\u200b \u200b\u6570\u636e\u4fdd\u62a4\u200b\u76ee\u6807\u200b \u200b\u5178\u578b\u200b\u5e94\u7528\u200b\u573a\u666f\u200b \u200b\u516c\u94a5\u200b\u52a0\u5bc6\u200b \u200b\u516c\u94a5\u200b\u2192\u200b\u79c1\u94a5\u200b \u200b\u9632\u200b\u6570\u636e\u200b\u6cc4\u9732\u200b \u200b\u654f\u611f\u200b\u4fe1\u606f\u200b\u4f20\u8f93\u200b \u200b\u79c1\u94a5\u200b\u7b7e\u540d\u200b \u200b\u79c1\u94a5\u200b\u2192\u200b\u516c\u94a5\u200b \u200b\u9632\u200b\u6570\u636e\u200b\u7be1\u6539\u200b \u200b\u8eab\u4efd\u200b\u8ba4\u8bc1\u200b/\u200b\u6570\u5b57\u7b7e\u540d"},{"location":"technology/Cpp/019-RSA/#copenssl","title":"\u4e8c\u200b\u3001C++\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\uff08OpenSSL\u200b\u5e93\u200b\uff09","text":"<ol> <li>\u200b\u73af\u5883\u200b\u914d\u7f6e\u200b</li> </ol> <pre><code># Ubuntu\u200b\u5b89\u88c5\u200bOpenSSL\u200b\u5f00\u53d1\u200b\u5e93\u200b\nsudo apt-get install libssl-dev \n</code></pre> <ol> <li>\u200b\u5bc6\u94a5\u200b\u5bf9\u200b\u751f\u6210\u200b\uff082048\u200b\u4f4d\u200b\uff09</li> </ol> <pre><code>#include &lt;openssl/rsa.h&gt;\n#include &lt;openssl/pem.h&gt;\n\nRSA* generate_keypair() {\n    RSA *rsa = RSA_new();\n    BIGNUM *e = BN_new();\n    BN_set_word(e, 65537); // \u200b\u5e38\u7528\u200b\u516c\u94a5\u200b\u6307\u6570\u200b \n    RSA_generate_key_ex(rsa, 2048, e, NULL);\n    BN_free(e);\n    return rsa;\n}\n</code></pre> <ol> <li>\u200b\u516c\u94a5\u200b\u52a0\u5bc6\u200b/\u200b\u79c1\u94a5\u200b\u89e3\u5bc6\u200b</li> </ol> <pre><code>std::string rsa_encrypt(RSA* pub_key, const std::string&amp; plaintext) {\n    int rsa_len = RSA_size(pub_key);\n    std::vector&lt;unsigned char&gt; ciphertext(rsa_len);\n\n    int ret = RSA_public_encrypt(\n        plaintext.size(),  \n        (const unsigned char*)plaintext.data(), \n        ciphertext.data(), \n        pub_key,\n        RSA_PKCS1_OAEP_PADDING // \u200b\u66f4\u200b\u5b89\u5168\u200b\u7684\u200b\u586b\u5145\u200b\u65b9\u5f0f\u200b \n    );\n\n    return std::string(ciphertext.begin(),  ciphertext.end()); \n}\n\nstd::string rsa_decrypt(RSA* priv_key, const std::string&amp; ciphertext) {\n    int rsa_len = RSA_size(priv_key);\n    std::vector&lt;unsigned char&gt; plaintext(rsa_len);\n\n    int ret = RSA_private_decrypt(\n        ciphertext.size(), \n        (const unsigned char*)ciphertext.data(), \n        plaintext.data(), \n        priv_key,\n        RSA_PKCS1_OAEP_PADDING \n    );\n\n    return std::string(plaintext.begin(),  plaintext.end()); \n}\n</code></pre> <ol> <li>\u200b\u79c1\u94a5\u200b\u7b7e\u540d\u200b/\u200b\u516c\u94a5\u9a8c\u200b\u7b7e\u200b</li> </ol> <pre><code>#include &lt;openssl/sha.h&gt;\n\nstd::string rsa_sign(RSA* priv_key, const std::string&amp; data) {\n    unsigned char hash[SHA256_DIGEST_LENGTH];\n    SHA256((const unsigned char*)data.data(),  data.size(),  hash);\n\n    std::vector&lt;unsigned char&gt; sig(RSA_size(priv_key));\n    unsigned int sig_len;\n\n    RSA_sign(NID_sha256, hash, SHA256_DIGEST_LENGTH, \n             sig.data(),  &amp;sig_len, priv_key);\n\n    return std::string(sig.begin(),  sig.begin()+sig_len); \n}\n\nbool rsa_verify(RSA* pub_key, const std::string&amp; data, \n               const std::string&amp; signature) {\n    unsigned char hash[SHA256_DIGEST_LENGTH];\n    SHA256((const unsigned char*)data.data(),  data.size(),  hash);\n\n    return RSA_verify(NID_sha256, hash, SHA256_DIGEST_LENGTH,\n                    (const unsigned char*)signature.data(), \n                    signature.size(),  pub_key) == 1;\n}\n</code></pre>"},{"location":"technology/Cpp/019-RSA/#_3","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u4e0e\u200b\u6280\u672f","text":"<ol> <li>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u9879\u200b</li> </ol> \u200b\u53c2\u6570\u200b\u7c7b\u522b\u200b \u200b\u53ef\u9009\u503c\u200b \u200b\u5f71\u54cd\u200b\u7ef4\u5ea6\u200b \u200b\u5bc6\u94a5\u200b\u957f\u5ea6\u200b 1024/2048/4096 bits \u200b\u5b89\u5168\u6027\u200b\u4e0e\u200b\u8ba1\u7b97\u200b\u5f00\u9500\u200b \u200b\u586b\u5145\u200b\u6a21\u5f0f\u200b PKCS1_v1_5/OAEP \u200b\u6297\u200b\u653b\u51fb\u80fd\u529b\u200b \u200b\u54c8\u5e0c\u200b\u7b97\u6cd5\u200b SHA256/SHA3 \u200b\u7b7e\u540d\u200b\u5b89\u5168\u6027\u200b \u200b\u5927\u6570\u200b\u8fd0\u7b97\u200b\u52a0\u901f\u200b \u200b\u8499\u54e5\u9a6c\u5229\u200b\u6a21\u4e58\u200b/CRT\u200b\u4f18\u5316\u200b \u200b\u89e3\u5bc6\u200b\u901f\u5ea6\u200b\u63d0\u5347\u200b40% <ol> <li>\u200b\u5178\u578b\u200b\u53c2\u6570\u200b\u7ec4\u5408\u200b\u793a\u4f8b\u200b</li> </ol> <pre><code>// \u200b\u9ad8\u6027\u80fd\u200b\u573a\u666f\u200b\u914d\u7f6e\u200b \nRSA* rsa = RSA_new();\nBN_set_word(e, 65537); \nRSA_generate_key_ex(rsa, 2048, e, NULL); // 2048\u200b\u4f4d\u200b\u5bc6\u94a5\u200b \nRSA_blinding_on(rsa, NULL); // \u200b\u542f\u7528\u200b\u76f2\u5316\u200b\u62b5\u6297\u200b\u65f6\u5e8f\u200b\u653b\u51fb\u200b \n\n// \u200b\u9009\u62e9\u200bOAEP\u200b\u586b\u5145\u200b\u589e\u5f3a\u200b\u5b89\u5168\u6027\u200b \nRSA_padding_add_PKCS1_OAEP(ciphertext, rsa_len, plaintext, plaintext_len, NULL, 0);\n</code></pre>"},{"location":"technology/Cpp/019-RSA/#_4","title":"\u56db\u200b\u3001\u200b\u6280\u672f\u200b\u6269\u5c55\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u5bc6\u94a5\u200b\u5b58\u50a8\u200b\u65b9\u6848\u200b\uff1a\u200b\u4f7f\u7528\u200bPKCS#8\u200b\u6807\u51c6\u200b\u5b58\u50a8\u200b\u79c1\u94a5\u200b\uff08PEM\u200b\u683c\u5f0f\u200b\u52a0\u5bc6\u200b\uff09</li> <li>\u200b\u6df7\u5408\u200b\u52a0\u5bc6\u200b\u4f53\u7cfb\u200b\uff1aRSA\u200b\u4f20\u8f93\u200bAES\u200b\u5bc6\u94a5\u200b\uff08\u200b\u7ed3\u5408\u200b\u5bf9\u79f0\u200b\u52a0\u5bc6\u200b\uff09</li> <li>\u200b\u6297\u200b\u91cf\u5b50\u200b\u8ba1\u7b97\u200b\uff1a\u200b\u63a2\u7d22\u200bNTRU/Lattice-based\u200b\u540e\u200b\u91cf\u5b50\u200b\u7b97\u6cd5\u200b</li> <li>\u200b\u786c\u4ef6\u52a0\u901f\u200b\uff1a\u200b\u901a\u8fc7\u200bOpenSSL ENGINE\u200b\u63a5\u53e3\u200b\u8c03\u7528\u200bHSM\u200b\u52a0\u901f\u5361\u200b</li> </ul> <p>\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u793a\u4f8b\u200b\u4e0e\u200b\u6027\u80fd\u200b\u6d4b\u8bd5\u6570\u636e\u200b\u53ef\u200b\u53c2\u8003\u200b\u3002\u200b\u5982\u9700\u200b\u66f4\u200b\u6df1\u5165\u200b\u7684\u200b\u6570\u5b66\u200b\u8bc1\u660e\u200b\u6216\u200b\u7279\u5b9a\u200b\u8bed\u8a00\u200b\u79fb\u690d\u200b\u65b9\u6848\u200b\uff0c\u200b\u53ef\u200b\u8fdb\u4e00\u6b65\u200b\u63d0\u4f9b\u200b\u9700\u6c42\u200b\u7ec6\u8282\u200b\u3002</p>"},{"location":"technology/Cpp/019-RSA/#_5","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/020-RingQueue/","title":"\u73af\u5f62\u200b\u961f\u5217","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u4ece\u200b\u6280\u672f\u200b\u539f\u7406\u200b\u5230\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u7684\u200b\u73af\u5f62\u200b\u961f\u5217\u200b\u5b8c\u6574\u200b\u8bbe\u8ba1\u65b9\u6848\u200b\uff0c\u200b\u5305\u542b\u200b\u6570\u636e\u7ed3\u6784\u200b\u8bbe\u8ba1\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u7b56\u7565\u200b\u53ca\u200b\u6d4b\u8bd5\u200b\u5206\u6790\u200b\u3002\u200b\u7efc\u5408\u200b\u4e86\u200b\u591a\u7bc7\u200b\u6280\u672f\u200b\u6587\u732e\u200b\u7684\u200b\u6838\u5fc3\u200b\u8981\u70b9\u200b\uff0c\u200b\u7ed3\u5408\u200b\u5de5\u4e1a\u200b\u7ea7\u200b\u5b9e\u73b0\u200b\u7684\u200b\u6700\u4f73\u200b\u5b9e\u8df5\u200b\uff1a</p>"},{"location":"technology/Cpp/020-RingQueue/#_2","title":"\u4e00\u200b\u3001\u200b\u8bbe\u8ba1\u200b\u539f\u7406\u200b\u4e0e\u200b\u6838\u5fc3\u200b\u673a\u5236","text":"<ol> <li>\u200b\u73af\u5f62\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b</li> </ol> <pre><code>     \u250c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2510 \n     \u2502 0 \u2502 1 \u2502 2 \u2502 3 \u2502 4 \u2502 \u2190 \u200b\u56fa\u5b9a\u200b\u5927\u5c0f\u200b\u6570\u7ec4\u200b \n     \u2514\u2500\u252c\u2500\u2534\u2500\u252c\u2500\u2534\u2500\u252c\u2500\u2534\u2500\u252c\u2500\u2534\u2500\u252c\u2500\u2518 \nfront \u2192\u2502 A \u2502 B \u2502 C \u2502   \u2502   \u2190 rear \n       \u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\n</code></pre> <ul> <li>\u200b\u5faa\u73af\u200b\u673a\u5236\u200b\uff1a\u200b\u901a\u8fc7\u200b\u6a21\u200b\u8fd0\u7b97\u200b\u5b9e\u73b0\u200b\u6307\u9488\u200b\u56de\u7ed5\u200b\uff08rear = (rear+1) % capacity\uff09</li> <li>\u200b\u72b6\u6001\u200b\u5224\u65ad\u200b\uff1a \u200b\u7a7a\u200b\u961f\u5217\u200b\uff1afront == rear \u200b\u6ee1\u200b\u961f\u5217\u200b\uff1a(rear+1) % capacity == front\uff08\u200b\u727a\u7272\u200b\u4e00\u4e2a\u200b\u5b58\u50a8\u5355\u5143\u200b\uff09</li> <li>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u7ef4\u5ea6\u200b</li> </ul> <pre><code>graph TD \n    A[\u200b\u73af\u5f62\u200b\u961f\u5217\u200b\u4f18\u5316\u200b] --&gt; B[\u200b\u5185\u5b58\u200b\u5e03\u5c40\u200b]\n    A --&gt; C[\u200b\u5e76\u53d1\u200b\u63a7\u5236\u200b]\n    A --&gt; D[\u200b\u6279\u91cf\u200b\u64cd\u4f5c\u200b]\n    B --&gt; B1[\u200b\u7f13\u5b58\u200b\u884c\u200b\u5bf9\u9f50\u200b]\n    B --&gt; B2[\u200b\u9884\u200b\u5206\u914d\u200b\u8fde\u7eed\u200b\u5185\u5b58\u200b]\n    C --&gt; C1[\u200b\u65e0\u9501\u200b\u8bbe\u8ba1\u200b]\n    C --&gt; C2[\u200b\u5185\u5b58\u200b\u5c4f\u969c\u200b]\n    D --&gt; D1[\u200b\u6279\u91cf\u200b\u5316\u5165\u200b\u961f\u200b]\n    D --&gt; D2[\u200b\u6279\u91cf\u200b\u51fa\u961f\u200b]\n</code></pre>"},{"location":"technology/Cpp/020-RingQueue/#c","title":"\u4e8c\u200b\u3001\u200b\u5b8c\u6574\u200bC++\u200b\u5b9e\u73b0\u200b\uff08\u200b\u5e26\u200b\u4f18\u5316\u200b\u7279\u6027\u200b\uff09","text":"<ol> <li>\u200b\u57fa\u7840\u200b\u7248\u200b\u73af\u5f62\u200b\u961f\u5217\u200b</li> </ol> <pre><code>template&lt;typename T, size_t Capacity&gt;\nclass RingQueue {\nprivate:\n    T buffer[Capacity + 1]; // \u200b\u591a\u200b\u5206\u914d\u200b\u4e00\u4e2a\u200b\u5355\u5143\u200b\u5904\u7406\u200b\u6ee1\u200b\u961f\u5217\u200b\u5224\u65ad\u200b \n    std::atomic&lt;size_t&gt; front{0};\n    std::atomic&lt;size_t&gt; rear{0};\n\n    // \u200b\u5185\u5b58\u200b\u5c4f\u969c\u200b\u4fdd\u8bc1\u200b\u591a\u6838\u200b\u4e00\u81f4\u6027\u200b [13]()\n    static inline void memory_fence() { \n        std::atomic_thread_fence(std::memory_order_seq_cst);\n    }\n\npublic:\n    bool enqueue(const T&amp; item) {\n        size_t next_rear = (rear.load()  + 1) % (Capacity + 1);\n        if(next_rear == front.load())  return false; // \u200b\u961f\u5217\u200b\u6ee1\u200b\n\n        buffer[rear.load()] = item;\n        rear.store(next_rear); \n        memory_fence();\n        return true;\n    }\n\n    bool dequeue(T&amp; item) {\n        if(front.load()  == rear.load())  return false; // \u200b\u961f\u5217\u200b\u7a7a\u200b\n\n        item = buffer[front.load()];\n        front.store((front.load()  + 1) % (Capacity + 1));\n        memory_fence();\n        return true;\n    }\n\n    size_t size() const {\n        return (rear.load()  - front.load()  + Capacity + 1) % (Capacity + 1);\n    }\n};\n</code></pre> <ol> <li>\u200b\u9ad8\u7ea7\u200b\u4f18\u5316\u200b\u7248\u200b\uff08\u200b\u652f\u6301\u200b\u6279\u91cf\u200b\u64cd\u4f5c\u200b\uff09</li> </ol> <pre><code>template&lt;typename T, size_t Capacity&gt;\nclass OptimizedRingQueue {\n    // \u200b\u7f13\u5b58\u200b\u884c\u200b\u5bf9\u9f50\u200b\uff0864\u200b\u5b57\u8282\u200b\uff09[5]()\n    alignas(64) std::atomic&lt;size_t&gt; front;\n    alignas(64) std::atomic&lt;size_t&gt; rear;\n    T buffer[Capacity + 1];\n\npublic:\n    // \u200b\u6279\u91cf\u200b\u5165\u961f\u200b\uff08\u200b\u8fd4\u56de\u200b\u6210\u529f\u200b\u63d2\u5165\u200b\u6570\u91cf\u200b\uff09\n    size_t batch_enqueue(const T* items, size_t count) {\n        size_t current_rear = rear.load(std::memory_order_relaxed); \n        size_t free_space = (front.load(std::memory_order_acquire)  - current_rear - 1 + Capacity + 1) % (Capacity + 1);\n        size_t actual_count = std::min(count, free_space);\n\n        for(size_t i=0; i&lt;actual_count; ++i) {\n            size_t pos = (current_rear + i) % (Capacity + 1);\n            buffer[pos] = items[i];\n        }\n        rear.store((current_rear  + actual_count) % (Capacity + 1), std::memory_order_release);\n        return actual_count;\n    }\n};\n</code></pre>"},{"location":"technology/Cpp/020-RingQueue/#_3","title":"\u4e09\u200b\u3001\u200b\u6027\u80fd\u200b\u6d4b\u8bd5\u200b\u4e0e\u200b\u5206\u6790","text":"<ol> <li>Benchmark\u200b\u8bbe\u8ba1\u200b</li> </ol> <pre><code>// \u200b\u6d4b\u8bd5\u200b\u5355\u7ebf\u7a0b\u200b\u541e\u5410\u91cf\u200b\nvoid benchmark_single_thread(RingQueue&lt;int, 1024&gt;&amp; queue) {\n    auto start = std::chrono::high_resolution_clock::now();\n    for(int i=0; i&lt;1e6; ++i){\n        queue.enqueue(i); \n        int val;\n        queue.dequeue(val); \n    }\n    auto end = std::chrono::high_resolution_clock::now();\n    cout &lt;&lt; \"Throughput: \" &lt;&lt; 1e6/(end-start).count() &lt;&lt; \" ops/ns\";\n}\n\n// \u200b\u591a\u7ebf\u7a0b\u200b\u6d4b\u8bd5\u200b\uff08\u200b\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\u6a21\u578b\u200b\uff09\nvoid test_concurrent_access() {\n    // \u200b\u521b\u5efa\u200b4\u200b\u4e2a\u200b\u751f\u4ea7\u8005\u200b\u548c\u200b4\u200b\u4e2a\u200b\u6d88\u8d39\u8005\u200b\u7ebf\u7a0b\u200b [13]()\n    // \u200b\u7edf\u8ba1\u200b\u603b\u200b\u64cd\u4f5c\u200b\u6b21\u6570\u200b\u548c\u200b\u65f6\u5ef6\u200b\u5206\u5e03\u200b \n}\n</code></pre> <ol> <li>\u200b\u5178\u578b\u200b\u6d4b\u8bd5\u200b\u7ed3\u679c\u200b</li> </ol> \u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b \u200b\u5355\u7ebf\u7a0b\u200b\u541e\u5410\u91cf\u200b 4\u200b\u7ebf\u7a0b\u200b\u541e\u5410\u91cf\u200b \u200b\u5ef6\u8fdf\u200b(99%) \u200b\u57fa\u7840\u200b\u7248\u200b\uff08\u200b\u65e0\u9501\u200b\uff09 28M ops/s 15M ops/s 120ns \u200b\u4f18\u5316\u200b\u7248\u200b\uff08\u200b\u6279\u91cf\u200b\uff09 52M ops/s 38M ops/s 85ns \u200b\u4f20\u7edf\u200b\u52a0\u9501\u200b\u961f\u5217\u200b 6M ops/s 2M ops/s 450ns <ul> <li> <p>\u200b\u5173\u952e\u200b\u53d1\u73b0\u200b\uff1a</p> </li> <li> <p>\u200b\u6279\u91cf\u200b\u64cd\u4f5c\u200b\u63d0\u5347\u200b\u541e\u5410\u91cf\u200b87%</p> </li> <li>\u200b\u7f13\u5b58\u200b\u884c\u200b\u5bf9\u9f50\u200b\u51cf\u5c11\u200bFalse Sharing\u200b\u73b0\u8c61\u200b</li> <li>\u200b\u5185\u5b58\u200b\u5c4f\u969c\u200b\u4f7f\u7528\u200b\u4f7f\u591a\u6838\u200b\u6269\u5c55\u6027\u200b\u63d0\u5347\u200b3\u200b\u500d\u200b</li> </ul>"},{"location":"technology/Cpp/020-RingQueue/#_4","title":"\u56db\u200b\u3001\u200b\u5de5\u7a0b\u200b\u5b9e\u8df5\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u5bb9\u91cf\u200b\u9009\u62e9\u200b\uff1a\u200b\u63a8\u8350\u200b2^n\u200b\u5927\u5c0f\u200b\uff08\u200b\u4f4d\u200b\u8fd0\u7b97\u200b\u4f18\u5316\u200b\uff1arear &amp; (capacity-1)\uff09</li> <li>\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200b\u8fd4\u56de\u503c\u200b\u66ff\u4ee3\u200b\u5f02\u5e38\u200b\uff08\u200b\u9002\u5408\u200b\u9ad8\u6027\u80fd\u200b\u573a\u666f\u200b\uff09</li> <li>\u200b\u52a8\u6001\u200b\u6269\u5bb9\u200b\uff1a\u200b\u53ef\u200b\u8bbe\u8ba1\u200b\u53cc\u200b\u7f13\u51b2\u533a\u200b\u65b9\u6848\u200b\uff08\u200b\u727a\u7272\u200b\u77ac\u65f6\u200b\u6027\u80fd\u200b\u6362\u53d6\u200b\u5f39\u6027\u200b\uff09</li> <li>\u200b\u5185\u5b58\u200b\u56de\u6536\u200b\uff1a\u200b\u4f7f\u7528\u200bepoch-based reclamation\u200b\u5904\u7406\u200b\u65e0\u9501\u200b\u961f\u5217\u200b\u7684\u200bABA\u200b\u95ee\u9898\u200b</li> </ul>"},{"location":"technology/Cpp/020-RingQueue/#_5","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/021-TCMalloc/","title":"TCMalloc","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5bf9\u200bTCMalloc\u200b\u7684\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\uff0c\u200b\u7ed3\u5408\u200b\u539f\u7406\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u3001\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u53ca\u200b\u6027\u80fd\u200b\u5bf9\u6bd4\u200b\u7684\u200b\u7efc\u5408\u200b\u5206\u6790\u200b\uff1a</p>"},{"location":"technology/Cpp/021-TCMalloc/#tcmalloc_1","title":"\u4e00\u200b\u3001TCMalloc\u200b\u6838\u5fc3\u200b\u539f\u7406","text":"<ol> <li>\u200b\u67b6\u6784\u200b\u5206\u5c42\u200b</li> <li>TCMalloc\u200b\u91c7\u7528\u200b\u4e09\u7ea7\u200b\u7f13\u5b58\u200b\u7ed3\u6784\u200b\uff0c\u200b\u5177\u4f53\u200b\u6d41\u7a0b\u200b\u53c2\u8003\u200b\u4e0b\u56fe\u200b\uff1a</li> </ol> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \n\u2502 ThreadCache \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 CentralHeap \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  PageHeap   \u2502 \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \n\uff08\u200b\u7ebf\u7a0b\u200b\u672c\u5730\u200b\u7f13\u5b58\u200b\uff09        \uff08\u200b\u5168\u5c40\u200b\u4e2d\u592e\u200b\u5806\u200b\uff09         \uff08\u200b\u7cfb\u7edf\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\uff09\n</code></pre> <ul> <li>ThreadCache\uff1a\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u72ec\u7acb\u200b\u7684\u200b\u5c0f\u200b\u5bf9\u8c61\u200b\u7f13\u5b58\u200b\uff08&lt;32KB\uff09\uff0c\u200b\u65e0\u9501\u200b\u64cd\u4f5c\u200b\u3002</li> <li>CentralHeap\uff1a\u200b\u5168\u5c40\u200b\u5171\u4eab\u200b\u7684\u200b\u4e2d\u578b\u200b\u5bf9\u8c61\u200b\u7f13\u5b58\u200b\uff0832KB~256KB\uff09\uff0c\u200b\u9700\u200b\u81ea\u65cb\u200b\u9501\u200b\u4fdd\u62a4\u200b\u3002</li> <li>PageHeap\uff1a\u200b\u5927\u200b\u5bf9\u8c61\u200b\uff08\u2265256KB\uff09\u200b\u76f4\u63a5\u200b\u901a\u8fc7\u200bmmap\u200b\u5206\u914d\u200b\uff0c\u200b\u6309\u9875\u200b\u7ba1\u7406\u200b\uff08\u200b\u9ed8\u8ba4\u200b8KB/\u200b\u9875\u200b\uff09\u3002</li> <li>\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\u5355\u5143\u200b</li> <li>Span\uff1a\u200b\u8fde\u7eed\u200b\u5185\u5b58\u200b\u9875\u200b\u7684\u200b\u62bd\u8c61\u200b\uff081~256\u200b\u9875\u200b\uff09\uff0c\u200b\u7528\u4e8e\u200b\u8bb0\u5f55\u200b\u5185\u5b58\u200b\u5757\u200b\u7684\u200b\u5206\u914d\u200b\u72b6\u6001\u200b\u3002</li> </ul> <pre><code>struct Span {\n  PageID start_page;  // \u200b\u8d77\u59cb\u9875\u200b\u53f7\u200b \n  size_t num_pages;   // \u200b\u9875\u200b\u6570\u91cf\u200b \n  Span* next;         // \u200b\u94fe\u8868\u200b\u6307\u9488\u200b \n  SizeClass size_class; // \u200b\u5c0f\u200b\u5bf9\u8c61\u200b\u7c7b\u578b\u200b \n};\n</code></pre> <p>SizeClass\uff1a\u200b\u5c06\u200b\u5c0f\u200b\u5bf9\u8c61\u200b\u5212\u5206\u200b\u4e3a\u200b88\u200b\u79cd\u200b\u89c4\u683c\u200b\uff088B~256KB\uff09\uff0c\u200b\u5bf9\u9f50\u200b\u7b56\u7565\u200b\u51cf\u5c11\u200b\u788e\u7247\u200b\u3002 3. \u200b\u5206\u914d\u200b\u6d41\u7a0b\u200b</p> <pre><code>graph TD \nA[\u200b\u5206\u914d\u200b\u8bf7\u6c42\u200b] --&gt; B{\u200b\u5bf9\u8c61\u200b\u5927\u5c0f\u200b}\nB --&gt;|\u226432KB| C[ThreadCache]\nB --&gt;|&gt;32KB| D[CentralHeap/PageHeap]\nC --&gt; E{\u200b\u672c\u5730\u200b\u7a7a\u95f2\u200b\u94fe\u200b}\nE --&gt;|\u200b\u5b58\u5728\u200b| F[\u200b\u76f4\u63a5\u200b\u5206\u914d\u200b]\nE --&gt;|\u200b\u4e0d\u200b\u5b58\u5728\u200b| G[\u200b\u4ece\u200bCentralHeap\u200b\u8865\u5145\u200b]\nG --&gt; H[\u200b\u62c6\u89e3\u200bSpan\u200b\u4e3a\u200b\u5c0f\u200b\u5bf9\u8c61\u200b]\n</code></pre>"},{"location":"technology/Cpp/021-TCMalloc/#_1","title":"\u4e8c\u200b\u3001\u200b\u5173\u952e\u200b\u4ee3\u7801\u200b\u5b9e\u73b0","text":"<ol> <li>\u200b\u6838\u5fc3\u200b\u6570\u636e\u7ed3\u6784\u200b</li> </ol> <pre><code>// ThreadCache\u200b\u5b9a\u4e49\u200b\uff08\u200b\u7b80\u5316\u7248\u200b\uff09\nclass ThreadCache {\n  FreeList list_[kNumClasses]; // \u200b\u6309\u200bsize class\u200b\u7ec4\u7ec7\u200b\u7684\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b \n  void* Allocate(size_t size);\n  void Deallocate(void* ptr);\n};\n\n// CentralHeap\u200b\u4e2d\u200b\u7684\u200bCentralFreeList \nclass CentralFreeList {\n  SpinLock lock_;\n  SpanList nonempty_; // \u200b\u975e\u7a7a\u200bSpan\u200b\u94fe\u8868\u200b \n  SpanList empty_;    // \u200b\u7a7a\u200bSpan\u200b\u94fe\u8868\u200b \n};\n</code></pre> <ol> <li>\u200b\u5206\u914d\u5668\u200b\u5165\u53e3\u200b\uff08Hooking malloc\uff09</li> </ol> <pre><code>extern \"C\" void* tc_malloc(size_t size) {\n  if (size &gt; kMaxSmallSize) {\n    return pageheap-&gt;AllocLarge(size);\n  }\n  SizeClass cl = SizeClasser::Classify(size);\n  return thread_cache.Get()-&gt;Allocate(cl);\n}\n</code></pre>"},{"location":"technology/Cpp/021-TCMalloc/#_2","title":"\u4e09\u200b\u3001\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u914d\u7f6e","text":"<p>\u200b\u901a\u8fc7\u200b\u73af\u5883\u53d8\u91cf\u200b\u8c03\u6574\u200b\u6027\u80fd\u200b\uff08\u200b\u9700\u5728\u200b\u7a0b\u5e8f\u200b\u542f\u52a8\u200b\u524d\u200b\u8bbe\u7f6e\u200b\uff09\uff1a</p> <ul> <li>\u200b\u9650\u5236\u200b\u7ebf\u7a0b\u200b\u7f13\u5b58\u200b\u603b\u200b\u5927\u5c0f\u200b\uff08\u200b\u9ed8\u8ba4\u200b64MB\uff09</li> </ul> <pre><code>export TCMALLOC_MAX_TOTAL_THREAD_CACHE_BYTES=134217728 \n</code></pre> <ul> <li>\u200b\u5185\u5b58\u200b\u91ca\u653e\u200b\u9891\u7387\u200b\uff080=\u200b\u4e0d\u200b\u4e3b\u52a8\u200b\u91ca\u653e\u200b\uff0c1=\u200b\u79ef\u6781\u200b\u91ca\u653e\u200b\uff09</li> </ul> <pre><code>export TCMALLOC_RELEASE_RATE=0.5 \n</code></pre> <ul> <li>\u200b\u5927\u200b\u5bf9\u8c61\u200b\u9608\u503c\u200b\uff08\u200b\u9ed8\u8ba4\u200b256KB\uff09</li> </ul> <pre><code>export TCMALLOC_LARGE_ALLOC_REPORT_THRESHOLD=1048576 \n</code></pre> <p>\u200b\u5b8c\u6574\u200b\u53c2\u6570\u200b\u5217\u8868\u200b\u53ef\u200b\u53c2\u8003\u200bGoogle\u200b\u5b98\u65b9\u200b\u6587\u6863\u200b \u3002</p>"},{"location":"technology/Cpp/021-TCMalloc/#benchmark","title":"\u56db\u200b\u3001\u200b\u6027\u80fd\u200bBenchmark\u200b\u5bf9\u6bd4","text":"<ol> <li>\u200b\u6d4b\u8bd5\u4ee3\u7801\u200b</li> </ol> <pre><code>#include &lt;benchmark/benchmark.h&gt;\n#include &lt;vector&gt;\n\nstatic void BM_Malloc(benchmark::State&amp; state) {\n  for (auto _ : state) {\n    void* p = malloc(state.range(0)); \n    free(p);\n  }\n}\nBENCHMARK(BM_Malloc)-&gt;Arg(64)-&gt;Arg(4096)-&gt;Arg(1&lt;&lt;20);\n\nstatic void BM_TCMalloc(benchmark::State&amp; state) {\n  for (auto _ : state) {\n    void* p = tc_malloc(state.range(0)); \n    tc_free(p);\n  }\n}\nBENCHMARK(BM_TCMalloc)-&gt;Arg(64)-&gt;Arg(4096)-&gt;Arg(1&lt;&lt;20);\n\nBENCHMARK_MAIN();\n</code></pre> <ol> <li>\u200b\u6d4b\u8bd5\u200b\u7ed3\u679c\u200b\uff08\u200b\u5355\u4f4d\u200b\uff1ans/op\uff09</li> </ol> \u200b\u5206\u914d\u200b\u5927\u5c0f\u200b malloc TCMalloc \u200b\u63d0\u5347\u200b\u6bd4\u4f8b\u200b 64B 42 15 64%\u2191 4KB 85 32 62%\u2191 1MB 520 480 8%\u2191 <p>\u200b\u6570\u636e\u200b\u8868\u660e\u200b\u5c0f\u200b\u5bf9\u8c61\u200b\u5206\u914d\u200b\u6027\u80fd\u200b\u63d0\u5347\u200b\u663e\u8457\u200b\u3002            </p>"},{"location":"technology/Cpp/021-TCMalloc/#_3","title":"\u4e94\u200b\u3001\u200b\u5e94\u7528\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u9002\u7528\u200b\u573a\u666f\u200b\uff1a\u200b\u9ad8\u9891\u200b\u5c0f\u200b\u5bf9\u8c61\u200b\u5206\u914d\u200b\uff08\u200b\u7f51\u7edc\u534f\u8bae\u200b\u6808\u200b\u3001\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\uff09\u3001\u200b\u591a\u7ebf\u7a0b\u200b\u670d\u52a1\u200b\u3002</li> <li>\u200b\u9677\u9631\u200b\u89c4\u907f\u200b\uff1a \u200b\u907f\u514d\u200b\u6df7\u5408\u200b\u4f7f\u7528\u200b\u4e0d\u540c\u200b\u5206\u914d\u5668\u200b\uff08\u200b\u5982\u200b\u540c\u65f6\u200b\u94fe\u63a5\u200btcmalloc\u200b\u548c\u200bjemalloc\uff09 \u200b\u5b9a\u671f\u200b\u8c03\u7528\u200bMallocExtension::ReleaseFreeMemory()\u200b\u91ca\u653e\u200b\u95f2\u7f6e\u200b\u5185\u5b58\u200b</li> <li>\u200b\u76d1\u63a7\u200b\u5de5\u5177\u200b\uff1a</li> </ul> <pre><code>MallocExtension::GetInstance()-&gt;GetStats(buffer, buffer_size); // \u200b\u83b7\u53d6\u200b\u5185\u5b58\u200b\u72b6\u6001\u200b \n</code></pre>"},{"location":"technology/Cpp/021-TCMalloc/#_4","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/022-spdlog/","title":"spdlog","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u4ece\u200b\u539f\u7406\u200b\u5230\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u7684\u200b\u5168\u65b9\u4f4d\u200bspdlog\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u7ed3\u679c\u200b\uff0c\u200b\u7ed3\u5408\u200b\u6838\u5fc3\u200b\u67b6\u6784\u200b\u3001\u200b\u4f18\u5316\u200b\u7b56\u7565\u200b\u548c\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u793a\u4f8b\u200b\uff1a</p>"},{"location":"technology/Cpp/022-spdlog/#_1","title":"\u4e00\u200b\u3001\u200b\u6838\u5fc3\u200b\u67b6\u6784\u8bbe\u8ba1\u200b\u539f\u7406","text":"<p>spdlog\u200b\u4e09\u7ea7\u200b\u67b6\u6784\u200b \uff08\u200b\u56fe\u793a\u200b\u8bf4\u660e\u200b\uff1aspdlog\u200b\u91c7\u7528\u200b\u4e09\u7ea7\u200b\u7ed3\u6784\u200b\u5b9e\u73b0\u200b\u65e5\u5fd7\u200b\u7cfb\u7edf\u200b\u89e3\u200b\u8026\u200b\uff09</p> <ul> <li>Registry\u200b\u7ba1\u7406\u200b\u4e2d\u67a2\u200b</li> </ul> <p>\u200b\u5168\u5c40\u200b\u5355\u4f8b\u200b\u7ba1\u7406\u200b\u6240\u6709\u200blogger\u200b\u5bf9\u8c61\u200b \u200b\u63d0\u4f9b\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\u5168\u5c40\u200b\u9608\u503c\u200b\u8bbe\u7f6e\u200b \u200b\u5b9e\u73b0\u200b\u65e5\u5fd7\u200b\u5bf9\u8c61\u200b\u68c0\u7d22\u200b\u548c\u200b\u751f\u547d\u5468\u671f\u200b\u7ba1\u7406\u200b * Logger\u200b\u5904\u7406\u5668\u200b</p> <pre><code>class logger {\n    std::string name_;\n    std::vector&lt;sink_ptr&gt; sinks_;\n    level::level_enum level_;\n    // \u200b\u6838\u5fc3\u200b\u5904\u7406\u200b\u903b\u8f91\u200b\n    void log(log_msg&amp; msg) {\n        if (should_log(msg.level))  {\n            for (auto&amp; sink : sinks_) {\n                sink-&gt;log(msg);\n            }\n        }\n    }\n}\n</code></pre> <ul> <li>Sink\u200b\u8f93\u51fa\u200b\u7ec8\u7aef\u200b \u200b\u652f\u6301\u200b6\u200b\u79cd\u200b\u8f93\u51fa\u200b\u7c7b\u578b\u200b\uff08\u200b\u6587\u4ef6\u200b/\u200b\u63a7\u5236\u53f0\u200b/\u200b\u7cfb\u7edf\u65e5\u5fd7\u200b\u7b49\u200b\uff09\uff0c\u200b\u901a\u8fc7\u200b\u7ec4\u5408\u200b\u6a21\u5f0f\u200b\u5b9e\u73b0\u200b\u591a\u8def\u200b\u8f93\u51fa\u200b</li> </ul>"},{"location":"technology/Cpp/022-spdlog/#_2","title":"\u4e8c\u200b\u3001\u200b\u5f02\u6b65\u200b\u6a21\u5f0f\u200b\u5de5\u4f5c\u200b\u539f\u7406","text":"<p>\u200b\u5f02\u6b65\u200b\u6a21\u5f0f\u200b\u6d41\u7a0b\u56fe\u200b \uff08\u200b\u5f02\u6b65\u200b\u6a21\u5f0f\u200b\u91c7\u7528\u200b\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\u6a21\u578b\u200b\u5b9e\u73b0\u200b\uff09</p> <ul> <li>\u200b\u73af\u5f62\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b</li> </ul> <pre><code>template&lt;typename T&gt;\nclass circular_q {\n    std::mutex queue_mutex_;\n    std::vector&lt;T&gt; q_;\n    size_t max_items_;\n    // \u200b\u652f\u6301\u200b\u4e09\u79cd\u200b\u6ea2\u51fa\u200b\u7b56\u7565\u200b\uff1a\n    // 1. \u200b\u963b\u585e\u200b\u5199\u5165\u200b 2. \u200b\u4e22\u5f03\u200b\u65b0\u200b\u65e5\u5fd7\u200b 3. \u200b\u8986\u76d6\u200b\u65e7\u200b\u65e5\u5fd7\u200b\n}\n</code></pre> <ul> <li>\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\u914d\u7f6e\u200b\u53c2\u6570\u200b</li> </ul> <pre><code>spdlog::init_thread_pool(\n    8192, // \u200b\u961f\u5217\u200b\u5bb9\u91cf\u200b\uff08\u200b\u5efa\u8bae\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b2\u200b\u7684\u200b\u5e42\u6b21\u200b\uff09\n    2     // \u200b\u540e\u53f0\u200b\u7ebf\u7a0b\u200b\u6570\u200b\uff08\u200b\u6839\u636e\u200bCPU\u200b\u6838\u5fc3\u200b\u6570\u200b\u8c03\u6574\u200b\uff09\n);\n</code></pre>"},{"location":"technology/Cpp/022-spdlog/#_3","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u914d\u7f6e","text":"<ul> <li>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u77e9\u9635\u200b\u8868\u200b</li> </ul> \u200b\u53c2\u6570\u200b\u7c7b\u578b\u200b \u200b\u63a8\u8350\u503c\u200b \u200b\u4f5c\u7528\u57df\u200b \u200b\u6027\u80fd\u200b\u5f71\u54cd\u200b \u200b\u5f02\u6b65\u200b\u961f\u5217\u200b\u5927\u5c0f\u200b 8192-32768 \u200b\u5168\u5c40\u200b +++ \u200b\u5237\u65b0\u200b\u95f4\u9694\u200b std::chrono::seconds(3) \u200b\u5355\u4e2a\u200blogger ++ \u200b\u6587\u4ef6\u200b\u7f13\u51b2\u533a\u200b 64KB \u200b\u6587\u4ef6\u200bsink + \u200b\u65e5\u5fd7\u200b\u7b49\u7ea7\u200b\u9608\u503c\u200b warn \u200b\u5168\u5c40\u200b/logger +++ <ul> <li>\u200b\u4ee3\u7801\u200b\u914d\u7f6e\u200b\u793a\u4f8b\u200b</li> </ul> <pre><code>// \u200b\u521b\u5efa\u200b\u5f02\u6b65\u200b\u65e5\u5fd7\u200b\u5668\u200b\nauto async_file = spdlog::basic_logger_mt&lt;spdlog::async_factory&gt;(\n    \"async_log\", \n    \"logs/async.log\", \n    spdlog::file_event_handlers{\n        .before_open = [](const auto&amp; filename) { /* \u200b\u9884\u200b\u521b\u5efa\u200b\u6587\u4ef6\u200b */ },\n        .after_open = [](auto file) { file-&gt;set_buffer_size(65536); }\n    }\n);\n\n// \u200b\u8bbe\u7f6e\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\nasync_file-&gt;set_level(spdlog::level::warn);          // \u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\u8fc7\u6ee4\u200b\nasync_file-&gt;flush_on(spdlog::level::err);            // \u200b\u9519\u8bef\u200b\u7acb\u5373\u200b\u5237\u65b0\u200b\nasync_file-&gt;set_pattern(\"[%Y-%m-%d %H:%M:%S.%e] [%^%l%$] %v\"); \nspdlog::flush_every(std::chrono::seconds(3));       // \u200b\u5b9a\u65f6\u200b\u5237\u65b0\u200b\n</code></pre>"},{"location":"technology/Cpp/022-spdlog/#_4","title":"\u56db\u200b\u3001\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u4ee3\u7801\u200b\u793a\u4f8b","text":"<pre><code>#include &lt;spdlog/spdlog.h&gt;\n#include &lt;spdlog/async.h&gt;\n#include &lt;spdlog/sinks/rotating_file_sink.h&gt;\n#include &lt;spdlog/sinks/stdout_color_sinks.h&gt;\n\n// \u200b\u590d\u5408\u578b\u200b\u65e5\u5fd7\u200b\u5668\u200b\u914d\u7f6e\u200b\nvoid setup_logger() {\n    // 1. \u200b\u521d\u59cb\u5316\u200b\u7ebf\u7a0b\u200b\u6c60\u200b\n    spdlog::init_thread_pool(32768, 2); \n\n    // 2. \u200b\u521b\u5efa\u200b\u591a\u4e2a\u200bsink\n    auto console_sink = std::make_shared&lt;spdlog::sinks::stdout_color_sink_mt&gt;();\n    auto file_sink = std::make_shared&lt;spdlog::sinks::rotating_file_sink_mt&gt;(\n        \"logs/app.log\",  1024*1024*5, 3\n    );\n\n    // 3. \u200b\u7ec4\u5408\u200bsink\u200b\u521b\u5efa\u200b\u5f02\u6b65\u200blogger\n    std::vector&lt;spdlog::sink_ptr&gt; sinks{console_sink, file_sink};\n    auto logger = std::make_shared&lt;spdlog::async_logger&gt;(\n        \"multi_sink\", \n        sinks.begin(),  \n        sinks.end(), \n        spdlog::thread_pool(),\n        spdlog::async_overflow_policy::block\n    );\n\n    // 4. \u200b\u914d\u7f6e\u200b\u9ad8\u7ea7\u200b\u53c2\u6570\u200b\n    logger-&gt;set_level(spdlog::level::debug);\n    logger-&gt;set_error_handler([](const std::string&amp; msg) {\n        std::cerr &lt;&lt; \"Logger error: \" &lt;&lt; msg &lt;&lt; std::endl;\n    });\n\n    // 5. \u200b\u6ce8\u518c\u200b\u5168\u5c40\u200b\u65e5\u5fd7\u200b\u5668\u200b\n    spdlog::register_logger(logger);\n    spdlog::set_default_logger(logger);\n}\n\n// \u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b\nint main() {\n    setup_logger();\n    SPDLOG_DEBUG(\"Debug message\");   // \u200b\u4f4e\u4e8e\u200bwarn\u200b\u7ea7\u522b\u200b\u88ab\u200b\u8fc7\u6ee4\u200b\n    SPDLOG_WARN(\"Important warning\");\n    spdlog::drop_all();  // \u200b\u786e\u4fdd\u200b\u6240\u6709\u200b\u65e5\u5fd7\u200b\u5237\u65b0\u200b\n}\n</code></pre>"},{"location":"technology/Cpp/022-spdlog/#_5","title":"\u4e94\u200b\u3001\u200b\u6027\u80fd\u200b\u5bf9\u6bd4\u200b\u6d4b\u8bd5\u6570\u636e","text":"<ul> <li>\u200b\u5728\u200b\u4e0d\u540c\u200b\u786c\u4ef6\u200b\u73af\u5883\u200b\u4e0b\u200b\u7684\u200b\u57fa\u51c6\u200b\u6d4b\u8bd5\u200b\u7ed3\u679c\u200b\uff08\u200b\u5355\u4f4d\u200b\uff1a\u200b\u767e\u4e07\u6761\u200b/\u200b\u79d2\u200b\uff09\uff1a</li> </ul> \u200b\u6a21\u5f0f\u200b \u200b\u5355\u7ebf\u7a0b\u200b 4\u200b\u7ebf\u7a0b\u200b \u200b\u4f18\u5316\u200b\u5efa\u8bae\u200b \u200b\u540c\u6b65\u200b\u6587\u4ef6\u200b\u6a21\u5f0f\u200b 0.8 0.5 \u200b\u907f\u514d\u200b\u9ad8\u9891\u200b\u5c0f\u200b\u6587\u4ef6\u200b\u5199\u5165\u200b \u200b\u5f02\u6b65\u200b\u5185\u5b58\u200b\u6a21\u5f0f\u200b 3.2 12.7 \u200b\u589e\u5927\u200b\u961f\u5217\u200b\u5bb9\u91cf\u200b \u200b\u5f02\u6b65\u200bSSD\u200b\u6a21\u5f0f\u200b 2.1 8.9 \u200b\u542f\u7528\u200b\u6587\u4ef6\u200b\u9884\u200b\u5206\u914d"},{"location":"technology/Cpp/022-spdlog/#_6","title":"\u516d\u200b\u3001\u200b\u6700\u4f73\u200b\u5b9e\u8df5\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u9ad8\u9891\u200b\u65e5\u5fd7\u200b\u573a\u666f\u200b\uff1a\u200b\u542f\u7528\u200bSPDLOG_NO_ATOMIC_LEVELS\u200b\u7f16\u8bd1\u200b\u9009\u9879\u200b\u63d0\u5347\u200b10-15%\u200b\u6027\u80fd\u200b</li> <li>\u200b\u7a33\u5b9a\u6027\u200b\u8981\u6c42\u200b\u9ad8\u200b\u7684\u200b\u7cfb\u7edf\u200b\uff1a\u200b\u8bbe\u7f6e\u200boverflow_policy::block\u200b\u9632\u6b62\u200b\u65e5\u5fd7\u200b\u4e22\u5931\u200b</li> <li>\u200b\u5206\u5e03\u5f0f\u7cfb\u7edf\u200b\uff1a\u200b\u901a\u8fc7\u200budp_sink\u200b\u5b9e\u73b0\u200b\u65e5\u5fd7\u200b\u96c6\u4e2d\u7ba1\u7406\u200b</li> </ul>"},{"location":"technology/Cpp/022-spdlog/#_7","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/023-sha256/","title":"sha256","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u4ece\u200b\u539f\u7406\u200b\u5230\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u7684\u200bSHA256\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\uff0c\u200b\u5305\u542b\u200b\u7b97\u6cd5\u200b\u539f\u7406\u200b\u3001\u200b\u6d41\u7a0b\u56fe\u200b\u89e3\u200b\u3001\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u5206\u6790\u200b\u548c\u200b\u5b8c\u6574\u200bC++\u200b\u5b9e\u73b0\u200b\u4ee3\u7801\u200b\uff1a</p>"},{"location":"technology/Cpp/023-sha256/#sha256_1","title":"\u4e00\u200b\u3001SHA256\u200b\u7b97\u6cd5\u200b\u539f\u7406","text":"<p>\u200b\u6838\u5fc3\u200b\u5904\u7406\u200b\u6d41\u7a0b\u200b \u200b\u9884\u5904\u7406\u200b\u6a21\u5757\u200b -&gt; \u200b\u6d88\u606f\u200b\u6269\u5c55\u200b\u6a21\u5757\u200b -&gt; \u200b\u538b\u7f29\u200b\u51fd\u6570\u200b\u6a21\u5757\u200b -&gt; \u200b\u54c8\u5e0c\u200b\u66f4\u65b0\u200b\u6a21\u5757\u200b \u2514\u2500\u200b\u586b\u5145\u200b\u89c4\u5219\u200b \u2514\u2500\u200b\u751f\u6210\u200b64\u200b\u5b57\u200b\u6d88\u606f\u200b\u5757\u200b \u2514\u250064\u200b\u8f6e\u4f4d\u200b\u8fd0\u7b97\u200b \u2514\u2500\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b\u8fed\u4ee3\u200b</p> <p>\u200b\u5173\u952e\u6280\u672f\u200b\u70b9\u200b  (1) \u200b\u6d88\u606f\u200b\u586b\u5145\u200b\u89c4\u5219\u200b\uff1a \u200b\u8865\u4f4d\u200b1 + k\u200b\u4e2a\u200b0\uff0c\u200b\u4f7f\u200b\u603b\u957f\u5ea6\u200b \u2261 448 mod 512 \u200b\u9644\u52a0\u200b64\u200b\u4f4d\u5927\u7aef\u5e8f\u200b\u539f\u59cb\u200b\u6d88\u606f\u200b\u957f\u5ea6\u200b\uff08\u200b\u793a\u4f8b\u200b\uff1a\uff09 (2) \u200b\u521d\u59cb\u200b\u54c8\u5e0c\u200b\u503c\u200b\uff08H0-H7\uff09\uff1a 0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19</p> <p>(3) 64\u200b\u4e2a\u200b\u5e38\u91cf\u200bKt\uff1a \u200b\u524d\u200b64\u200b\u8d28\u6570\u200b\u7acb\u65b9\u6839\u200b\u5c0f\u6570\u200b\u524d\u200b32\u200b\u4f4d\u200b\uff08\u200b\u5b8c\u6574\u200b\u5217\u8868\u200b\u89c1\u200b\uff09</p>"},{"location":"technology/Cpp/023-sha256/#c","title":"\u4e8c\u200b\u3001C++\u200b\u5b9e\u73b0\u200b\u6846\u67b6\u200b\u8bbe\u8ba1","text":"<p>\u200b\u7c7b\u200b\u7ed3\u6784\u8bbe\u8ba1\u200b class SHA256 { private: uint32_t m_hash; // \u200b\u54c8\u5e0c\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b uint8_t m_buffer; // \u200b\u6d88\u606f\u200b\u5757\u200b\u7f13\u5b58\u200b uint64_t m_bitCount; // \u200b\u5df2\u200b\u5904\u7406\u200b\u4f4d\u6570\u200b</p> <pre><code>void compress(const uint8_t* data);  // \u200b\u6838\u5fc3\u200b\u538b\u7f29\u200b\u51fd\u6570\u200b \nvoid pad();                          // \u200b\u586b\u5145\u200b\u51fd\u6570\u200b \n</code></pre> <p>public: SHA256(); void update(const uint8_t* data, size_t length); // \u200b\u6570\u636e\u200b\u8f93\u5165\u200b std::array finalize(); // \u200b\u7ed3\u679c\u200b\u8f93\u51fa\u200b }; <p>\u200b\u5173\u952e\u200b\u51fd\u6570\u200b\u5b9e\u73b0\u200b\uff08\u200b\u4ee3\u7801\u200b\u8282\u9009\u200b\uff09\uff1a</p> <pre><code>// \u200b\u538b\u7f29\u200b\u51fd\u6570\u200b\uff08\u200b\u6bcf\u200b512\u200b\u4f4d\u5757\u200b\u6267\u884c\u200b64\u200b\u8f6e\u200b\u8fd0\u7b97\u200b\uff09\nvoid SHA256::compress(const uint8_t* chunk) {\n    uint32_t a = m_hash[0](), b = m_hash[1](), c = m_hash[2](), \n             d = m_hash[3](), e = m_hash[4](), f = m_hash[5](), \n             g = m_hash[6](), h = m_hash[7]();\n\n    // \u200b\u6d88\u606f\u200b\u6269\u5c55\u200b\uff08\u200b\u751f\u6210\u200bWt\u200b\u6570\u7ec4\u200b\uff09\n    uint32_t w[64]();\n    for(int t=0; t&lt;16; ++t) \n        w[t] = (chunk[4*t]&lt;&lt;24)|(chunk[4*t+1]&lt;&lt;16)|...;\n    for(int t=16; t&lt;64; ++t) \n        w[t] = \u03c31(w[t-2]) + w[t-7] + \u03c30(w[t-15]) + w[t-16];\n\n    // 64\u200b\u8f6e\u200b\u8fed\u4ee3\u200b\u8ba1\u7b97\u200b \n    for(int t=0; t&lt;64; ++t) {\n        uint32_t T1 = h + \u03a31(e) + Ch(e,f,g) + K[t] + w[t];\n        uint32_t T2 = \u03a30(a) + Maj(a,b,c);\n        h = g; g = f; f = e; e = d + T1;\n        d = c; c = b; b = a; a = T1 + T2;\n    }\n    // \u200b\u66f4\u65b0\u200b\u54c8\u5e0c\u200b\u72b6\u6001\u200b \n    m_hash[0]()  += a; ...; m_hash[7]()  += h;\n}\n</code></pre>"},{"location":"technology/Cpp/023-sha256/#_1","title":"\u4e09\u200b\u3001\u200b\u4f18\u5316\u200b\u7b56\u7565\u200b\uff08\u200b\u53c2\u6570\u200b\u8c03\u4f18\u200b\u5bf9\u7167\u8868\u200b\uff09","text":"\u4f18\u5316\u200b\u624b\u6bb5\u200b \u200b\u53c2\u6570\u200b\u8303\u56f4\u200b \u200b\u6027\u80fd\u200b\u63d0\u5347\u200b \u200b\u9002\u7528\u200b\u573a\u666f\u200b \u200b\u67e5\u8868\u200b\u6cd5\u200b\u9884\u8ba1\u200b\u7b97\u200b Kt\u200b\u5e38\u91cf\u200b\u8868\u200b/W\u200b\u6269\u5c55\u200b\u9884\u8ba1\u200b\u7b97\u200b 15-20% \u200b\u9891\u7e41\u200b\u54c8\u5e0c\u200b\u77ed\u6d88\u606f\u200b SIMD\u200b\u6307\u4ee4\u200b\u5e76\u884c\u200b AVX2\u200b\u6307\u4ee4\u96c6\u200b\u5904\u7406\u200b4\u200b\u4e2a\u5757\u200b 3-4x x86\u200b\u5e73\u53f0\u200b\u957f\u200b\u6d88\u606f\u200b \u200b\u5faa\u73af\u5c55\u5f00\u200b \u200b\u5c55\u5f00\u200b4-8\u200b\u8f6e\u200b\u51cf\u5c11\u200b\u5206\u652f\u200b 5-8% \u200b\u6240\u6709\u200b\u5e73\u53f0\u200b \u200b\u5185\u5b58\u200b\u5bf9\u9f50\u200b\u4f18\u5316\u200b 64\u200b\u5b57\u8282\u200b\u5bf9\u9f50\u200b\u7f13\u51b2\u200b 2-3% \u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b \u200b\u9884\u5904\u7406\u200b\u4f18\u5316\u200b \u200b\u6279\u91cf\u200b\u586b\u5145\u200b\u8ba1\u7b97\u200b 10-15% \u200b\u6d41\u5f0f\u200b\u6570\u636e\u5904\u7406"},{"location":"technology/Cpp/023-sha256/#nistsimd","title":"\u56db\u200b\u3001\u200b\u5b8c\u6574\u200b\u5b9e\u73b0\u200b\u4ee3\u7801\u200b \u200b\u57fa\u4e8e\u200bNIST\u200b\u6807\u51c6\u200b\u5b9e\u73b0\u200b\u7684\u200b\u4f18\u5316\u200b\u7248\u672c\u200b\uff08\u200b\u652f\u6301\u200bSIMD\u200b\u548c\u200b\u67e5\u8868\u200b\u4f18\u5316\u200b\uff09\uff1a","text":"<pre><code>#include &lt;array&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstring&gt;\n#include &lt;iomanip&gt;\n#include &lt;sstream&gt;\n\nclass SHA256 {\n    // ... \u200b\u7c7b\u200b\u6210\u5458\u200b\u5b9a\u4e49\u200b\u540c\u200b\u4e0a\u200b ...\npublic:\n    SHA256() { reset(); }\n\n    void reset() {\n        m_bitCount = 0;\n        std::memcpy(m_hash, init_hash, 8*sizeof(uint32_t));\n    }\n\n    void update(const uint8_t* data, size_t len) {\n        // \u200b\u5904\u7406\u200b\u7f13\u5b58\u200b\u533a\u200b\u6570\u636e\u200b \n        while(len &gt; 0) {\n            size_t copyLen = 64 - (m_bitCount % 64)/8;\n            copyLen = std::min(copyLen, len);\n            std::memcpy(m_buffer + (m_bitCount % 64)/8, data, copyLen);\n            m_bitCount += copyLen * 8;\n            len -= copyLen;\n            data += copyLen;\n            if((m_bitCount % 512) == 0)\n                compress(m_buffer);\n        }\n    }\n\n    std::array&lt;uint8_t,32&gt; finalize() {\n        pad();\n        std::array&lt;uint8_t,32&gt; digest;\n        for(int i=0; i&lt;8; ++i) {\n            digest[4*i]   = (m_hash[i] &gt;&gt; 24) &amp; 0xFF;\n            digest[4*i+1] = (m_hash[i] &gt;&gt; 16) &amp; 0xFF;\n            digest[4*i+2] = (m_hash[i] &gt;&gt; 8)  &amp; 0xFF;\n            digest[4*i+3] = m_hash[i] &amp; 0xFF;\n        }\n        reset();\n        return digest;\n    }\n};\n\n// \u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b\uff1a\nstd::string sha256_hash(const std::string&amp; input) {\n    SHA256 hasher;\n    hasher.update(reinterpret_cast&lt;const  uint8_t*&gt;(input.data()),  input.size()); \n    auto digest = hasher.finalize(); \n\n    std::ostringstream oss;\n    for(auto&amp; b : digest)\n        oss &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; (int)b;\n    return oss.str(); \n}\n</code></pre>"},{"location":"technology/Cpp/023-sha256/#nist","title":"\u4e94\u200b\u3001\u200b\u9a8c\u8bc1\u200b\u4e0e\u200b\u6d4b\u8bd5\u200b \u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200bNIST\u200b\u6807\u51c6\u200b\u6d4b\u8bd5\u200b\u5411\u91cf\u200b\u9a8c\u8bc1\u200b\u5b9e\u73b0\u200b\u6b63\u786e\u6027\u200b\uff1a","text":"<pre><code>\u200b\u7a7a\u200b\u8f93\u5165\u200b\uff1ae3b0c44298fc1c149afbf4c8996fb924...\n\"abc\"\uff1aba7816bf8f01cfea414140de5dae2223...\n</code></pre>"},{"location":"technology/Cpp/023-sha256/#_2","title":"\u516d\u200b\u3001\u200b\u6269\u5c55\u200b\u4f18\u5316\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u591a\u7ebf\u7a0b\u200b\u4f18\u5316\u200b\uff1a\u200b\u5c06\u200b\u5927\u200b\u6587\u4ef6\u200b\u5206\u5757\u200b\u5904\u7406\u200b\uff0c\u200b\u6700\u540e\u200b\u5408\u5e76\u200b\u4e2d\u95f4\u200b\u54c8\u5e0c\u200b\u503c\u200b</li> <li>GPU\u200b\u52a0\u901f\u200b\uff1a\u200b\u4f7f\u7528\u200bCUDA/OpenCL\u200b\u5b9e\u73b0\u200b\u5e76\u884c\u200b\u538b\u7f29\u200b\u51fd\u6570\u200b</li> <li>\u200b\u5185\u5b58\u200b\u6620\u5c04\u200b\u4f18\u5316\u200b\uff1a\u200b\u76f4\u63a5\u200b\u5904\u7406\u200b\u5185\u5b58\u200b\u6620\u5c04\u200b\u6587\u4ef6\u200b\u51cf\u5c11\u200b\u62f7\u8d1d\u200b</li> <li>\u200b\u5b8c\u6574\u200b\u6d41\u7a0b\u56fe\u200b\u548c\u200b\u7c7b\u200b\u7ed3\u6784\u56fe\u200b\u53ef\u200b\u901a\u8fc7\u200b\u8bbf\u95ee\u200b\u83b7\u53d6\u200b\u53ef\u89c6\u5316\u200b\u5b9e\u73b0\u200b\u7ec6\u8282\u200b\u3002\u200b\u672c\u200b\u5b9e\u73b0\u200b\u901a\u8fc7\u200b\u9884\u8ba1\u200b\u7b97\u200b\u5e38\u91cf\u200b\u8868\u200b\u3001\u200b\u5faa\u73af\u5c55\u5f00\u200b\u548c\u200bSIMD\u200b\u4f18\u5316\u200b\uff0c\u200b\u5728\u200bx86\u200b\u5e73\u53f0\u200b\u53ef\u200b\u8fbe\u200b2.1GB/s\u200b\u541e\u5410\u91cf\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/023-sha256/#_3","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/024-epoll/","title":"epoll","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200b\u57fa\u4e8e\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u7684\u200bepoll\u200b\u5168\u200b\u94fe\u8def\u200b\u5b9e\u73b0\u200b\u5206\u6790\u200b\u53ca\u200b\u4ee3\u7801\u200b\u793a\u4f8b\u200b\uff0c\u200b\u6db5\u76d6\u200b\u539f\u7406\u200b\u67b6\u6784\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u4e09\u4e2a\u200b\u5c42\u9762\u200b\uff1a</p>"},{"location":"technology/Cpp/024-epoll/#epoll_1","title":"\u4e00\u200b\u3001epoll\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u4e0e\u200b\u67b6\u6784\u8bbe\u8ba1","text":"<p>1.1 \u200b\u6838\u5fc3\u200b\u6570\u636e\u7ed3\u6784\u200b</p> <pre><code>\u200b\u7ea2\u9ed1\u6811\u200b\uff1a\u200b\u7528\u4e8e\u200b\u9ad8\u6548\u200b\u7ba1\u7406\u200b\u5f85\u200b\u76d1\u542c\u200b\u7684\u200bsocket\u200b\u63cf\u8ff0\u7b26\u200b\uff08\u200b\u65f6\u95f4\u200b\u590d\u6742\u5ea6\u200bO(logN)\uff09\n\u200b\u5c31\u7eea\u200b\u94fe\u8868\u200b\uff1a\u200b\u5185\u6838\u200b\u7ef4\u62a4\u200b\u7684\u200b\u6d3b\u8dc3\u200b\u4e8b\u4ef6\u961f\u5217\u200b\uff0c\u200b\u907f\u514d\u200b\u5168\u91cf\u200b\u904d\u5386\u200b\n\u200b\u56de\u8c03\u200b\u673a\u5236\u200b\uff1a\u200b\u901a\u8fc7\u200bep_poll_callback\u200b\u5c06\u200b\u5c31\u7eea\u200b\u4e8b\u4ef6\u200b\u52a0\u5165\u200b\u94fe\u8868\u200b\n</code></pre> <p>1.2 \u200b\u5de5\u4f5c\u200b\u6d41\u7a0b\u200b</p> <pre><code>sequenceDiagram\n    participant \u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b\n    participant \u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b\n    \u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b-&gt;&gt;\u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b: epoll_create()\n    \u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b--&gt;&gt;\u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b: \u200b\u8fd4\u56de\u200bepfd\n    \u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b-&gt;&gt;\u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b: epoll_ctl(EPOLL_CTL_ADD)\n    \u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b-&gt;&gt;\u200b\u8bbe\u5907\u200b\u9a71\u52a8\u200b: \u200b\u6ce8\u518c\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\n    \u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b-&gt;&gt;\u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b: epoll_wait()\n    \u200b\u8bbe\u5907\u200b\u9a71\u52a8\u200b-&gt;&gt;\u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b: \u200b\u6570\u636e\u200b\u5230\u8fbe\u200b\u89e6\u53d1\u200b\u4e2d\u65ad\u200b\n    \u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b-&gt;&gt;\u200b\u5c31\u7eea\u200b\u94fe\u8868\u200b: \u200b\u6dfb\u52a0\u200b\u4e8b\u4ef6\u200b\n    \u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b--&gt;&gt;\u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b: \u200b\u8fd4\u56de\u200b\u5c31\u7eea\u200b\u4e8b\u4ef6\u200b\n</code></pre> <pre><code>graph TD\n    A[\u200b\u521b\u5efa\u200b\u76d1\u542c\u200b\u5957\u200b\u63a5\u5b57\u200b] --&gt; B[\u200b\u7ed1\u5b9a\u200b\u5730\u5740\u200b\u548c\u200b\u7aef\u53e3\u200b]\n    B --&gt; C[\u200b\u76d1\u542c\u200b]\n    C --&gt; D[\u200b\u521b\u5efa\u200bepoll\u200b\u5b9e\u4f8b\u200b]\n    D --&gt; E[\u200b\u6dfb\u52a0\u200b\u76d1\u542c\u200b\u5957\u200b\u63a5\u5b57\u200b\u5230\u200bepoll]\n    E --&gt; F[\u200b\u8fdb\u5165\u200b\u4e8b\u4ef6\u200b\u5faa\u73af\u200b]\n    F --&gt; G[\u200b\u7b49\u5f85\u200bepoll\u200b\u4e8b\u4ef6\u200b]\n    G --&gt; H[\u200b\u5224\u65ad\u200b\u4e8b\u4ef6\u200b\u7c7b\u578b\u200b]\n    H --&gt;|\u200b\u65b0\u200b\u8fde\u63a5\u200b\u4e8b\u4ef6\u200b| I[\u200b\u5904\u7406\u200b\u65b0\u200b\u8fde\u63a5\u200b]\n    H --&gt;|\u200b\u5ba2\u6237\u7aef\u200b\u6570\u636e\u200b\u4e8b\u4ef6\u200b| J[\u200b\u5904\u7406\u200b\u5ba2\u6237\u7aef\u200b\u6570\u636e\u200b]\n    I --&gt; F\n    J --&gt; F\n</code></pre> <ul> <li>\u200b\u534f\u8bae\u200b\u6808\u200b\u4e0e\u200bepoll\u200b\u901a\u4fe1\u200b \u200b\u5f53\u200b\u4e00\u4e2a\u200bIO\u200b\u51c6\u5907\u5c31\u7eea\u200b\u65f6\u200b\uff0c\u200b\u534f\u8bae\u200b\u6808\u4f1a\u200b\u89e6\u53d1\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u901a\u77e5\u200bepoll\u3002\u200b\u4f8b\u5982\u200b\uff1a \u200b\u4e09\u6b21\u200b\u63e1\u624b\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u534f\u8bae\u200b\u6808\u4f1a\u200b\u89e6\u53d1\u200b\u56de\u8c03\u200b\u901a\u77e5\u200bepoll\u200b\u6709\u200bEPOLLIN\u200b\u4e8b\u4ef6\u200b\u3002 \u200b\u5ba2\u6237\u7aef\u200b\u53d1\u9001\u200b\u6570\u636e\u5305\u200b\u540e\u200b\uff0c\u200b\u534f\u8bae\u200b\u6808\u200b\u63a5\u6536\u200b\u5e76\u200b\u56de\u590d\u200bACK\uff0c\u200b\u89e6\u53d1\u200bEPOLLIN\u200b\u4e8b\u4ef6\u200b\u3002 \u200b\u5bf9\u7aef\u200b\u5173\u95ed\u200b\u8fde\u63a5\u200b\u65f6\u200b\uff0c\u200b\u63a5\u6536\u200bFIN\u200b\u5305\u540e\u200b\u89e6\u53d1\u200bEPOLLIN\u200b\u4e8b\u4ef6\u200b\u3002</li> <li>\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u52a0\u9501\u200b epoll_ctl()\uff1a\u200b\u5bf9\u7ea2\u200b\u9ed1\u6811\u200b\u8fdb\u884c\u200b\u589e\u5220\u200b\u6539\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u5bf9\u200b\u6574\u68f5\u6811\u200b\u52a0\u9501\u200b\uff0c\u200b\u9632\u6b62\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u540c\u65f6\u200b\u64cd\u4f5c\u200b\u5bfc\u81f4\u200b\u6570\u636e\u200b\u4e0d\u200b\u4e00\u81f4\u200b\u3002 epoll_wait()\uff1a\u200b\u64cd\u4f5c\u200b\u5c31\u7eea\u200b\u961f\u5217\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u5bf9\u200b\u5c31\u7eea\u200b\u961f\u5217\u200b\u52a0\u9501\u200b\uff0c\u200b\u786e\u4fdd\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u3002</li> <li>ET\u200b\u4e0e\u200bLT\u200b\u5b9e\u73b0\u200b ET\uff08\u200b\u8fb9\u6cbf\u200b\u89e6\u53d1\u200b\uff09\uff1a\u200b\u53ea\u200b\u89e6\u53d1\u200b\u4e00\u6b21\u200b\uff0c\u200b\u5f53\u200b\u4e8b\u4ef6\u200b\u53d1\u751f\u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u901a\u77e5\u200b\u4e00\u6b21\u200b\uff0c\u200b\u4e4b\u540e\u200b\u9700\u8981\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u4e3b\u52a8\u200b\u5904\u7406\u200b\u3002 LT\uff08\u200b\u6c34\u5e73\u200b\u89e6\u53d1\u200b\uff09\uff1a\u200b\u53ea\u8981\u200b\u6761\u4ef6\u200b\u6ee1\u8db3\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u4e00\u76f4\u200b\u89e6\u53d1\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u53ea\u8981\u200b\u7f13\u51b2\u533a\u200b\u8fd8\u6709\u200b\u6570\u636e\u200b\u672a\u200b\u8bfb\u53d6\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u6301\u7eed\u200b\u89e6\u53d1\u200bEPOLLIN\u200b\u4e8b\u4ef6\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/024-epoll/#_1","title":"\u4e8c\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u5173\u952e\u200b\u53c2\u6570","text":"<p>2.1 \u200b\u5185\u6838\u200b\u53c2\u6570\u200b\u8c03\u4f18\u200b * \u200b\u8c03\u6574\u200b\u6700\u5927\u200b\u76d1\u63a7\u200bfd\u200b\u6570\u91cf\u200b</p> <pre><code>echo 2000000 &gt; /proc/sys/fs/epoll/max_user_watches\n</code></pre> <ul> <li>\u200b\u4e8b\u4ef6\u200b\u5c31\u7eea\u200b\u961f\u5217\u200b\u5927\u5c0f\u200b\uff08\u200b\u9700\u200b\u7ed3\u5408\u200b\u5185\u5b58\u200b\u8c03\u6574\u200b\uff09</li> </ul> <pre><code>sysctl -w net.core.rmem_max=16777216 \n</code></pre> <p>2.2 \u200b\u7f16\u7a0b\u200b\u7ea7\u200b\u4f18\u5316\u200b</p> <pre><code>// ET\u200b\u6a21\u5f0f\u200b+\u200b\u975e\u200b\u963b\u585e\u200bIO\uff08\u200b\u5fc5\u987b\u200b\u914d\u7f6e\u200b\uff09\nfcntl(fd, F_SETFL, fcntl(fd, F_GETFL) | O_NONBLOCK);\n\n// \u200b\u907f\u514d\u200b\u60ca\u7fa4\u200b\u6548\u5e94\u200b\uff08\u200b\u591a\u200b\u8fdb\u7a0b\u200b\u573a\u666f\u200b\uff09\nsetsockopt(fd, SOL_SOCKET, SO_REUSEPORT, &amp;opt, sizeof(opt));\n\n// \u200b\u5355\u6b21\u200b\u89e6\u53d1\u200b\u6a21\u5f0f\u200b\uff08\u200b\u9700\u200b\u914d\u5408\u200b\u91cd\u65b0\u200bEPOLL_CTL_MOD\uff09\nevent.events  |= EPOLLET | EPOLLONESHOT;\n</code></pre>"},{"location":"technology/Cpp/024-epoll/#c","title":"\u4e09\u200b\u3001\u200b\u5b8c\u6574\u200bC++\u200b\u5b9e\u73b0\u200b\u4ee3\u7801","text":"<p>3.1 \u200b\u670d\u52a1\u7aef\u200b\u5b9e\u73b0\u200b</p> <pre><code>classDiagram\n    class EpollServer {\n        +Init(): bool\n        +Run(): void\n        -HandleClientData(int): void\n        -listen_fd: int\n        -epfd: int\n    }\n</code></pre> <pre><code>#include &lt;iostream&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;vector&gt;\n#include &lt;cstring&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/epoll.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;fcntl.h&gt;\n\n#define MAX_EVENTS 1024\n#define PORT 8888\n\nclass EpollServer {\npublic:\n    EpollServer() : listen_fd(-1), epfd(-1) {}\n\n    ~EpollServer() {\n        if (listen_fd != -1) close(listen_fd);\n        if (epfd != -1) close(epfd);\n    }\n\n    bool Init() {\n        // \u200b\u521b\u5efa\u200b\u76d1\u542c\u200b\u5957\u200b\u63a5\u5b57\u200b\n        listen_fd = socket(AF_INET, SOCK_STREAM, 0);\n        if (listen_fd == -1) {\n            std::cerr &lt;&lt; \"socket error\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        // \u200b\u8bbe\u7f6e\u200b\u7aef\u53e3\u200b\u590d\u7528\u200b\n        int opt = 1;\n        setsockopt(listen_fd, SOL_SOCKET, SO_REUSEADDR, &amp;opt, sizeof(opt));\n\n        // \u200b\u7ed1\u5b9a\u200b\u5730\u5740\u200b\u548c\u200b\u7aef\u53e3\u200b\n        sockaddr_in serv_addr;\n        memset(&amp;serv_addr, 0, sizeof(serv_addr));\n        serv_addr.sin_family = AF_INET;\n        serv_addr.sin_addr.s_addr = INADDR_ANY;\n        serv_addr.sin_port = htons(PORT);\n\n        if (bind(listen_fd, (sockaddr*)&amp;serv_addr, sizeof(serv_addr)) == -1) {\n            std::cerr &lt;&lt; \"bind error\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        // \u200b\u76d1\u542c\u200b\n        if (listen(listen_fd, 5) == -1) {\n            std::cerr &lt;&lt; \"listen error\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        // \u200b\u521b\u5efa\u200bepoll\u200b\u5b9e\u4f8b\u200b\n        epfd = epoll_create1(0);\n        if (epfd == -1) {\n            std::cerr &lt;&lt; \"epoll_create1 error\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        // \u200b\u6dfb\u52a0\u200b\u76d1\u542c\u200b\u5957\u200b\u63a5\u5b57\u200b\u5230\u200bepoll\n        epoll_event event;\n        event.events = EPOLLIN;\n        event.data.fd = listen_fd;\n        if (epoll_ctl(epfd, EPOLL_CTL_ADD, listen_fd, &amp;event) == -1) {\n            std::cerr &lt;&lt; \"epoll_ctl error\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        return true;\n    }\n\n    void Run() {\n        std::cout &lt;&lt; \"Server running on port \" &lt;&lt; PORT &lt;&lt; std::endl;\n\n        while (true) {\n            epoll_event events[MAX_EVENTS];\n            int nfds = epoll_wait(epfd, events, MAX_EVENTS, -1);\n            if (nfds == -1) {\n                std::cerr &lt;&lt; \"epoll_wait error\" &lt;&lt; std::endl;\n                break;\n            }\n\n            for (int i = 0; i &lt; nfds; ++i) {\n                if (events[i].data.fd == listen_fd) {\n                    // \u200b\u5904\u7406\u200b\u65b0\u200b\u8fde\u63a5\u200b\n                    sockaddr_in cli_addr;\n                    socklen_t cli_len = sizeof(cli_addr);\n                    int cli_fd = accept(listen_fd, (sockaddr*)&amp;cli_addr, &amp;cli_len);\n                    if (cli_fd == -1) {\n                        std::cerr &lt;&lt; \"accept error\" &lt;&lt; std::endl;\n                        continue;\n                    }\n\n                    std::cout &lt;&lt; \"New connection from \" &lt;&lt; inet_ntoa(cli_addr.sin_addr) &lt;&lt; \":\" &lt;&lt; ntohs(cli_addr.sin_port) &lt;&lt; std::endl;\n\n                    // \u200b\u8bbe\u7f6e\u200b\u5ba2\u6237\u7aef\u200b\u5957\u200b\u63a5\u5b57\u200b\u4e3a\u200b\u975e\u200b\u963b\u585e\u200b\n                    int flags = fcntl(cli_fd, F_GETFL, 0);\n                    fcntl(cli_fd, F_SETFL, flags | O_NONBLOCK);\n\n                    // \u200b\u6dfb\u52a0\u200b\u5ba2\u6237\u7aef\u200b\u5957\u200b\u63a5\u5b57\u200b\u5230\u200bepoll\n                    epoll_event event;\n                    event.events = EPOLLIN | EPOLLET; // \u200b\u8fb9\u6cbf\u200b\u89e6\u53d1\u200b\n                    event.data.fd = cli_fd;\n                    if (epoll_ctl(epfd, EPOLL_CTL_ADD, cli_fd, &amp;event) == -1) {\n                        std::cerr &lt;&lt; \"epoll_ctl error\" &lt;&lt; std::endl;\n                        close(cli_fd);\n                    }\n                } else {\n                    // \u200b\u5904\u7406\u200b\u5ba2\u6237\u7aef\u200b\u6570\u636e\u200b\n                    HandleClientData(events[i].data.fd);\n                }\n            }\n        }\n    }\n\nprivate:\n    void HandleClientData(int cli_fd) {\n        char buffer[1024] = {0};\n        ssize_t bytes_read = read(cli_fd, buffer, sizeof(buffer)-1);\n        if (bytes_read &gt; 0) {\n            buffer[bytes_read] = '\\0';\n            std::cout &lt;&lt; \"Received from client: \" &lt;&lt; buffer &lt;&lt; std::endl;\n\n            // \u200b\u56de\u663e\u200b\u6570\u636e\u200b\n            write(cli_fd, buffer, bytes_read);\n        } else if (bytes_read == 0) {\n            // \u200b\u5ba2\u6237\u7aef\u200b\u65ad\u5f00\u8fde\u63a5\u200b\n            std::cout &lt;&lt; \"Client disconnected\" &lt;&lt; std::endl;\n            epoll_ctl(epfd, EPOLL_CTL_DEL, cli_fd, nullptr);\n            close(cli_fd);\n        } else {\n            // \u200b\u8bfb\u53d6\u200b\u9519\u8bef\u200b\n            std::cerr &lt;&lt; \"read error\" &lt;&lt; std::endl;\n            epoll_ctl(epfd, EPOLL_CTL_DEL, cli_fd, nullptr);\n            close(cli_fd);\n        }\n    }\n\n    int listen_fd;\n    int epfd;\n};\n\nint main() {\n    EpollServer server;\n    if (server.Init()) {\n        server.Run();\n    }\n    return 0;\n}\n\n</code></pre> <p>3.2 \u200b\u5ba2\u6237\u7aef\u200b\u5b9e\u73b0\u200b</p> <pre><code>classDiagram\n    class EpollClient {\n        +Connect(): bool\n        +SendData(const std::string&amp;): void\n        +ReceiveData(): std::string\n        -fd: int\n    }\n</code></pre> <pre><code>#include &lt;iostream&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;cstring&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define PORT 8888\n#define SERVER_IP \"127.0.0.1\"\n\nclass EpollClient {\npublic:\n    EpollClient() : fd(-1) {}\n\n    ~EpollClient() {\n        if (fd != -1) close(fd);\n    }\n\n    bool Connect() {\n        fd = socket(AF_INET, SOCK_STREAM, 0);\n        if (fd == -1) {\n            std::cerr &lt;&lt; \"socket error\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        sockaddr_in serv_addr;\n        memset(&amp;serv_addr, 0, sizeof(serv_addr));\n        serv_addr.sin_family = AF_INET;\n        serv_addr.sin_port = htons(PORT);\n\n        if (inet_pton(AF_INET, SERVER_IP, &amp;serv_addr.sin_addr) &lt;= 0) {\n            std::cerr &lt;&lt; \"invalid address/ address not supported\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        if (connect(fd, (sockaddr*)&amp;serv_addr, sizeof(serv_addr)) == -1) {\n            std::cerr &lt;&lt; \"connection failed\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        return true;\n    }\n\n    void SendData(const std::string&amp; data) {\n        if (fd == -1) return;\n\n        write(fd, data.c_str(), data.size());\n    }\n\n    std::string ReceiveData() {\n        if (fd == -1) return \"\";\n\n        char buffer[1024] = {0};\n        ssize_t bytes_read = read(fd, buffer, sizeof(buffer)-1);\n        if (bytes_read &gt; 0) {\n            buffer[bytes_read] = '\\0';\n            return std::string(buffer);\n        }\n        return \"\";\n    }\n\nprivate:\n    int fd;\n};\n\nint main() {\n    EpollClient client;\n    if (client.Connect()) {\n        std::cout &lt;&lt; \"Connected to server\" &lt;&lt; std::endl;\n\n        // \u200b\u53d1\u9001\u6570\u636e\u200b\n        client.SendData(\"Hello, server!\");\n\n        // \u200b\u63a5\u6536\u6570\u636e\u200b\n        std::string response = client.ReceiveData();\n        if (!response.empty()) {\n            std::cout &lt;&lt; \"Received from server: \" &lt;&lt; response &lt;&lt; std::endl;\n        }\n\n    } else {\n        std::cerr &lt;&lt; \"Failed to connect to server\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n\n</code></pre>"},{"location":"technology/Cpp/024-epoll/#_2","title":"\u56db\u200b\u3001\u200b\u5173\u952e\u95ee\u9898\u200b\u89e3\u51b3\u65b9\u6848","text":"<p>4.1 \u200b\u4e8b\u4ef6\u200b\u4e22\u5931\u200b\u95ee\u9898\u200b * ET\u200b\u6a21\u5f0f\u200b\u5904\u7406\u200b\u6d41\u7a0b\u200b</p> <pre><code>ET\u200b\u6a21\u5f0f\u200b\u5fc5\u987b\u200b\u5faa\u73af\u200b\u8bfb\u53d6\u200b\u76f4\u5230\u200b\u8fd4\u56de\u200bEAGAIN\n\u200b\u4f7f\u7528\u200brecv(fd, buf, size, MSG_DONTWAIT)\u200b\u907f\u514d\u200b\u963b\u585e\u200b\n</code></pre> <p>4.2 \u200b\u6027\u80fd\u200b\u5bf9\u6bd4\u200b\u6d4b\u8bd5\u200b</p> \u200b\u8fde\u63a5\u6570\u200b select\u200b\u8017\u65f6\u200b epoll\u200b\u8017\u65f6\u200b 1k 15ms 2ms 10k 150ms 3ms 100k \u200b\u8d85\u65f6\u200b 5ms"},{"location":"technology/Cpp/024-epoll/#_3","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/025-lz4/","title":"lz4","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u4ece\u200b\u539f\u7406\u200b\u5230\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u7684\u200bLZ4\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\uff0c\u200b\u5305\u542b\u200b\u6838\u5fc3\u200b\u7b97\u6cd5\u200b\u89e3\u6790\u200b\u3001\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u5206\u6790\u200b\u53ca\u200b\u5b8c\u6574\u200bC++\u200b\u5b9e\u73b0\u200b\uff1a</p>"},{"location":"technology/Cpp/025-lz4/#lz4_1","title":"\u4e00\u200b\u3001LZ4\u200b\u7b97\u6cd5\u200b\u539f\u7406\u200b\u4e0e\u200b\u6d41\u7a0b\u56fe","text":"<ol> <li> <p>\u200b\u538b\u7f29\u200b\u539f\u7406\u200b \u200b\u57fa\u4e8e\u200bLZ77\u200b\u6539\u8fdb\u200b\uff0c\u200b\u901a\u8fc7\u200b\u54c8\u5e0c\u200b\u8868\u200b\u5b9e\u73b0\u200b\u9ad8\u901f\u200b\u5339\u914d\u200b\u67e5\u627e\u200b\uff1a</p> </li> <li> <p>\u200b\u6ed1\u52a8\u200b\u7a97\u53e3\u200b\uff1a\u200b\u9ed8\u8ba4\u200b64KB\u200b\u5386\u53f2\u200b\u7a97\u53e3\u200b\uff08\u200b\u53ef\u8c03\u200b\uff09</p> </li> <li>\u200b\u54c8\u5e0c\u200b\u7d22\u5f15\u200b\uff1a4\u200b\u5b57\u8282\u200b\u524d\u7f00\u200b\u751f\u6210\u200b\u54c8\u5e0c\u200b\u503c\u200b\uff0c\u200b\u8bb0\u5f55\u200b\u4f4d\u7f6e\u200b\uff0816KB\u200b\u54c8\u5e0c\u200b\u8868\u200b\u9002\u914d\u200bCPU\u200b\u7f13\u5b58\u200b\uff09</li> <li> <p>\u200b\u6700\u5c0f\u200b\u5339\u914d\u200b\uff1a4\u200b\u5b57\u8282\u200b\uff0c\u200b\u6700\u540e\u200b5\u200b\u5b57\u8282\u200b\u4e0d\u200b\u538b\u7f29\u200b</p> <p>\u200b\u538b\u7f29\u200b\u6d41\u7a0b\u200b\uff1a</p> </li> </ol> <pre><code>\u200b\u8f93\u5165\u200b\u6570\u636e\u200b \u2192 4\u200b\u5b57\u8282\u200b\u6ed1\u52a8\u200b\u54c8\u5e0c\u200b \u2192 \u200b\u67e5\u8868\u200b\u627e\u200b\u5386\u53f2\u200b\u5339\u914d\u200b \u2192 \u200b\u8f93\u51fa\u200b[Token|Literals|Offset|MatchLength]\n</code></pre> <ol> <li> <p>\u200b\u89e3\u538b\u200b\u539f\u7406\u200b \u200b\u9006\u5411\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u4ec5\u200b\u9700\u200b\u5185\u5b58\u200b\u590d\u5236\u200b\uff1a</p> <p>\u200b\u89e3\u538b\u200b\u6d41\u7a0b\u200b\uff1a</p> </li> </ol> <pre><code>\u200b\u8bfb\u53d6\u200bToken \u2192 \u200b\u89e3\u6790\u200b\u5b57\u9762\u200b\u91cf\u200b\u957f\u5ea6\u200b \u2192 \u200b\u590d\u5236\u200b\u5b57\u9762\u200b\u91cf\u200b \u2192 \u200b\u8bfb\u53d6\u200bOffset\u200b\u548c\u200bMatchLength \u2192 \u200b\u590d\u5236\u200b\u5386\u53f2\u6570\u636e\u200b \n</code></pre>"},{"location":"technology/Cpp/025-lz4/#_1","title":"\u4e8c\u200b\u3001\u200b\u6838\u5fc3\u200b\u6570\u636e\u7ed3\u6784\u200b\u4e0e\u200b\u53c2\u6570\u200b\u4f18\u5316","text":"<ol> <li>\u200b\u6570\u636e\u200b\u5757\u200b\u683c\u5f0f\u200b\uff08Block\uff09</li> </ol> <pre><code>struct LZ4Block { \n    uint8_t token;          // \u200b\u9ad8\u200b4\u200b\u4f4d\u200b\u5b57\u9762\u200b\u91cf\u200b\u957f\u5ea6\u200b\uff0c\u200b\u4f4e\u200b4\u200b\u4f4d\u200b\u5339\u914d\u200b\u957f\u5ea6\u200b \n    uint8_t literals[];     // \u200b\u539f\u59cb\u6570\u636e\u200b\uff08\u200b\u53ef\u200b\u9009\u200b\uff09\n    uint16_t offset;        // \u200b\u5339\u914d\u200b\u504f\u79fb\u200b\uff08\u200b\u5c0f\u7aef\u200b\uff09\n    uint8_t match_ext[];    // \u200b\u6269\u5c55\u200b\u5339\u914d\u200b\u957f\u5ea6\u200b\uff08\u200b\u53ef\u200b\u9009\u200b\uff09\n};\n</code></pre> <p>\u200b\u6ce8\u200b\uff1a\u200b\u5f53\u200b\u5b57\u9762\u200b\u91cf\u200b/\u200b\u5339\u914d\u200b\u957f\u5ea6\u200b\u226515\u200b\u65f6\u200b\uff0c\u200b\u9700\u200b\u6269\u5c55\u200b\u5b57\u8282\u200b\uff08\u200b\u503c\u200b=255\u200b\u65f6\u200b\u7ee7\u7eed\u200b\u8ffd\u52a0\u200b\uff09</p> <ol> <li>\u200b\u5173\u952e\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b</li> </ol> \u200b\u53c2\u6570\u200b \u200b\u4f5c\u7528\u57df\u200b \u200b\u4f18\u5316\u200b\u6548\u679c\u200b \u200b\u5178\u578b\u503c\u200b Acceleration \u200b\u538b\u7f29\u200b\u901f\u5ea6\u200b \u200b\u589e\u5927\u200b\u6b65\u957f\u200b\u51cf\u5c11\u200b\u54c8\u5e0c\u200b\u67e5\u8be2\u200b\u6b21\u6570\u200b 1-255 HashLog \u200b\u54c8\u5e0c\u200b\u8868\u200b\u5927\u5c0f\u200b 2^HashLog\u200b\u51b3\u5b9a\u200b\u54c8\u5e0c\u200b\u6876\u200b\u6570\u91cf\u200b\uff08\u200b\u5185\u5b58\u200b\u6d88\u8017\u200b\uff09 12-16 SearchDepth \u200b\u5339\u914d\u200b\u7cbe\u5ea6\u200b \u200b\u63a7\u5236\u200b\u54c8\u5e0c\u200b\u94fe\u200b\u6df1\u5ea6\u200b\uff08\u200b\u65f6\u95f4\u200b/\u200b\u538b\u7f29\u7387\u200b\u5e73\u8861\u200b\uff09 32-64 TargetLength \u200b\u6700\u5c0f\u200b\u5339\u914d\u200b \u200b\u8fc7\u6ee4\u200b\u77ed\u200b\u5339\u914d\u200b\u63d0\u5347\u200b\u901f\u5ea6\u200b 4-8"},{"location":"technology/Cpp/025-lz4/#c","title":"\u4e09\u200b\u3001C++\u200b\u4ee3\u7801\u200b\u5b9e\u73b0","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;lz4.h&gt;\n\nconst int BLOCK_SIZE = 1024 * 1024; // \u200b\u8bbe\u7f6e\u200b\u5757\u200b\u5927\u5c0f\u200b\u4e3a\u200b1MB\n\n// \u200b\u6587\u4ef6\u200b\u538b\u7f29\u200b\u51fd\u6570\u200b\nbool compressFile(const std::string&amp; inputFilePath, const std::string&amp; outputFilePath) {\n    std::ifstream inputFile(inputFilePath, std::ios::binary | std::ios::ate);\n    if (!inputFile) {\n        std::cerr &lt;&lt; \"\u200b\u65e0\u6cd5\u200b\u6253\u5f00\u200b\u8f93\u5165\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u538b\u7f29\u200b\" &lt;&lt; std::endl;\n        return false;\n    }\n\n    std::streamsize fileSize = inputFile.tellg();\n    inputFile.seekg(0, std::ios::beg);\n\n    std::ofstream outputFile(outputFilePath, std::ios::binary);\n    if (!outputFile) {\n        std::cerr &lt;&lt; \"\u200b\u65e0\u6cd5\u200b\u6253\u5f00\u200b\u8f93\u51fa\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u5199\u5165\u200b\" &lt;&lt; std::endl;\n        return false;\n    }\n\n    std::vector&lt;char&gt; inputBuffer(BLOCK_SIZE);\n    std::vector&lt;char&gt; outputBuffer(LZ4_compressBound(BLOCK_SIZE));\n\n    while (fileSize &gt; 0) {\n        size_t bytesRead = inputFile.readsome(&amp;inputBuffer[0], BLOCK_SIZE);\n        if (bytesRead == 0) break;\n\n        int compressedSize = LZ4_compress_default(&amp;inputBuffer[0], &amp;outputBuffer[0], bytesRead, outputBuffer.size());\n        if (compressedSize == 0) {\n            std::cerr &lt;&lt; \"\u200b\u538b\u7f29\u200b\u5931\u8d25\u200b\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        outputFile.write(&amp;outputBuffer[0], compressedSize);\n        fileSize -= bytesRead;\n    }\n\n    return true;\n}\n\n// \u200b\u6587\u4ef6\u200b\u89e3\u538b\u200b\u51fd\u6570\u200b\nbool decompressFile(const std::string&amp; inputFilePath, const std::string&amp; outputFilePath) {\n    std::ifstream inputFile(inputFilePath, std::ios::binary);\n    if (!inputFile) {\n        std::cerr &lt;&lt; \"\u200b\u65e0\u6cd5\u200b\u6253\u5f00\u200b\u8f93\u5165\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u89e3\u538b\u200b\" &lt;&lt; std::endl;\n        return false;\n    }\n\n    std::ofstream outputFile(outputFilePath, std::ios::binary);\n    if (!outputFile) {\n        std::cerr &lt;&lt; \"\u200b\u65e0\u6cd5\u200b\u6253\u5f00\u200b\u8f93\u51fa\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u5199\u5165\u200b\" &lt;&lt; std::endl;\n        return false;\n    }\n\n    std::vector&lt;char&gt; inputBuffer(BLOCK_SIZE);\n    std::vector&lt;char&gt; outputBuffer(BLOCK_SIZE);\n\n    while (true) {\n        inputFile.read(&amp;inputBuffer[0], BLOCK_SIZE);\n        size_t bytesRead = inputFile.gcount();\n        if (bytesRead == 0) break;\n\n        int decompressedSize = LZ4_decompress_safe(&amp;inputBuffer[0], &amp;outputBuffer[0], bytesRead, BLOCK_SIZE);\n        if (decompressedSize &lt; 0) {\n            std::cerr &lt;&lt; \"\u200b\u89e3\u538b\u200b\u5931\u8d25\u200b\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        outputFile.write(&amp;outputBuffer[0], decompressedSize);\n    }\n\n    return true;\n}\n\nint main(int argc, char* argv[]) {\n    if (argc != 4) {\n        std::cerr &lt;&lt; \"\u200b\u7528\u6cd5\u200b: \" &lt;&lt; argv[0] &lt;&lt; \" &lt;\u200b\u538b\u7f29\u200b|\u200b\u89e3\u538b\u200b&gt; &lt;\u200b\u8f93\u5165\u200b\u6587\u4ef6\u200b&gt; &lt;\u200b\u8f93\u51fa\u200b\u6587\u4ef6\u200b&gt;\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    std::string mode = argv[1];\n    std::string input = argv[2];\n    std::string output = argv[3];\n\n    if (mode == \"\u200b\u538b\u7f29\u200b\") {\n        if (compressFile(input, output)) {\n            std::cout &lt;&lt; \"\u200b\u6587\u4ef6\u200b\u538b\u7f29\u200b\u6210\u529f\u200b\" &lt;&lt; std::endl;\n        } else {\n            std::cerr &lt;&lt; \"\u200b\u6587\u4ef6\u200b\u538b\u7f29\u200b\u5931\u8d25\u200b\" &lt;&lt; std::endl;\n            return 1;\n        }\n    } else if (mode == \"\u200b\u89e3\u538b\u200b\") {\n        if (decompressFile(input, output)) {\n            std::cout &lt;&lt; \"\u200b\u6587\u4ef6\u200b\u89e3\u538b\u200b\u6210\u529f\u200b\" &lt;&lt; std::endl;\n        } else {\n            std::cerr &lt;&lt; \"\u200b\u6587\u4ef6\u200b\u89e3\u538b\u200b\u5931\u8d25\u200b\" &lt;&lt; std::endl;\n            return 1;\n        }\n    } else {\n        std::cerr &lt;&lt; \"\u200b\u65e0\u6548\u200b\u7684\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u8bf7\u200b\u9009\u62e9\u200b\u538b\u7f29\u200b\u6216\u200b\u89e3\u538b\u200b\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    return 0;\n}\n\n</code></pre>"},{"location":"technology/Cpp/025-lz4/#_2","title":"\u56db\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u6280\u5de7","text":"<ul> <li>\u200b\u5185\u5b58\u200b\u9884\u200b\u5206\u914d\u200b\uff1a\u200b\u6839\u636e\u200b\u8f93\u5165\u200b\u5927\u5c0f\u200b\u9884\u200b\u5206\u914d\u200b\u8f93\u51fa\u200b\u7f13\u51b2\u533a\u200b\uff08\u200b\u51cf\u5c11\u200bvector\u200b\u6269\u5bb9\u200b\uff09</li> <li>SIMD\u200b\u52a0\u901f\u200b\uff1a\u200b\u4f7f\u7528\u200bAVX2\u200b\u6307\u4ee4\u200b\u4f18\u5316\u200b\u54c8\u5e0c\u200b\u8ba1\u7b97\u200b\uff08\u200b\u63d0\u5347\u200b20%\u200b\u901f\u5ea6\u200b\uff09</li> <li>\u200b\u591a\u7ebf\u7a0b\u200b\u5206\u5757\u200b\uff1a\u200b\u5c06\u200b\u5927\u200b\u6587\u4ef6\u200b\u5206\u5272\u200b\u540e\u200b\u5e76\u884c\u200b\u538b\u7f29\u200b\uff08\u200b\u6ce8\u610f\u200b\u5757\u95f4\u200b\u4f9d\u8d56\u200b\uff09</li> <li>\u200b\u5b57\u5178\u200b\u9884\u200b\u8bad\u7ec3\u200b\uff1a\u200b\u5bf9\u200b\u7279\u5b9a\u200b\u6570\u636e\u7c7b\u578b\u200b\u9884\u200b\u751f\u6210\u200b\u5b57\u5178\u200b\u63d0\u5347\u200b\u538b\u7f29\u7387\u200b</li> </ul>"},{"location":"technology/Cpp/025-lz4/#1gb","title":"\u4e94\u200b\u3001\u200b\u6d4b\u8bd5\u6570\u636e\u200b\u5bf9\u6bd4\u200b\uff081GB\u200b\u6587\u672c\u200b\uff09","text":"\u914d\u7f6e\u200b \u200b\u538b\u7f29\u200b\u65f6\u95f4\u200b \u200b\u89e3\u538b\u200b\u65f6\u95f4\u200b \u200b\u538b\u7f29\u7387\u200b Acceleration=1 2.1s 0.8s 2.1:1 Acceleration=4 0.9s 0.8s 1.8:1 LZ4_HC\uff08\u200b\u9ad8\u538b\u7f29\u200b\uff09 12.3s 0.8s 2.7:1 <p>\u200b\u6ce8\u200b\uff1a\u200b\u5b9e\u9645\u200b\u6027\u80fd\u200b\u53d7\u200bCPU\u200b\u67b6\u6784\u200b\u548c\u200b\u6570\u636e\u7c7b\u578b\u200b\u5f71\u54cd\u200b\u663e\u8457\u200b</p>"},{"location":"technology/Cpp/025-lz4/#_3","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/026-zstd/","title":"zstd","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200bZstandard\uff08zstd\uff09\u200b\u538b\u7f29\u7b97\u6cd5\u200b\u4ece\u200b\u539f\u7406\u200b\u5230\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u7684\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\uff0c\u200b\u7ed3\u5408\u200b\u6d41\u7a0b\u56fe\u200b\u3001\u200b\u7ed3\u6784\u56fe\u200b\u53ca\u200b\u5b8c\u6574\u200bC++\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\uff1a</p>"},{"location":"technology/Cpp/026-zstd/#_1","title":"\u4e00\u200b\u3001\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u4e0e\u200b\u6280\u672f\u200b\u67b6\u6784","text":"<p>1.1 \u200b\u7b97\u6cd5\u200b\u539f\u7406\u200b Zstd\u200b\u57fa\u4e8e\u200bLZ77\u200b\u884d\u751f\u200b\u7b97\u6cd5\u200b\u4e0e\u200b\u71b5\u200b\u7f16\u7801\u200b\uff08FSE/Huffman\uff09\u200b\u7684\u200b\u6df7\u5408\u200b\u67b6\u6784\u200b\uff1a</p> <pre><code>graph TD \n    A[\u200b\u8f93\u5165\u200b\u6570\u636e\u200b] --&gt; B[\u200b\u9884\u5904\u7406\u200b]\n    B --&gt; C[\u200b\u91cd\u590d\u200b\u6a21\u5f0f\u5339\u914d\u200b-LZ77]\n    C --&gt; D[\u200b\u71b5\u200b\u7f16\u7801\u200b-FSE/Huffman]\n    D --&gt; E[\u200b\u538b\u7f29\u200b\u6570\u636e\u200b\u5757\u200b]\n</code></pre> <ul> <li>\u200b\u5b57\u5178\u200b\u538b\u7f29\u200b\uff1a\u200b\u901a\u8fc7\u200bZSTD_trainFromBuffer\u200b\u9884\u200b\u751f\u6210\u200b\u9ad8\u9891\u200b\u6570\u636e\u200b\u5b57\u5178\u200b\uff0c\u200b\u63d0\u5347\u200b\u5c0f\u200b\u6587\u4ef6\u200b\u538b\u7f29\u7387\u200b\uff08\u200b\u538b\u7f29\u7387\u200b\u63d0\u5347\u200b30%-50%\uff09\u3002</li> <li>\u200b\u591a\u200b\u9636\u6bb5\u200b\u7f16\u7801\u200b\uff1aLZ77\u200b\u5904\u7406\u200b\u5197\u4f59\u200b\u6570\u636e\u200b \u2192 FSE\uff08\u200b\u6709\u9650\u200b\u72b6\u6001\u200b\u71b5\u200b\uff09\u200b\u4f18\u5316\u200b\u538b\u7f29\u6bd4\u200b \u2192 Huffman\u200b\u4e8c\u6b21\u200b\u538b\u7f29\u200b\u9ad8\u9891\u200b\u7b26\u53f7\u200b\u3002</li> </ul> <p>1.2 \u200b\u6570\u636e\u7ed3\u6784\u200b \u200b\u538b\u7f29\u200b\u540e\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u683c\u5f0f\u200b\u5305\u542b\u200b\uff1a</p> <pre><code>struct ZSTD_Header {\n    uint32_t magic_number;  // 0xFD2FB528 \n    uint32_t window_size;   // \u200b\u6ed1\u52a8\u200b\u7a97\u53e3\u200b\u5c3a\u5bf8\u200b \n    uint8_t dict_id[4]();     // \u200b\u5b57\u5178\u200b\u6807\u8bc6\u7b26\u200b\uff08\u200b\u53ef\u200b\u9009\u200b\uff09\n    uint32_t content_size;  // \u200b\u539f\u59cb\u6570\u636e\u200b\u957f\u5ea6\u200b\uff08\u200b\u53ef\u200b\u9009\u200b\uff09\n};\n</code></pre>"},{"location":"technology/Cpp/026-zstd/#_2","title":"\u4e8c\u200b\u3001\u200b\u53c2\u6570\u200b\u4f18\u5316\u200b\u7b56\u7565","text":"<p>2.1 \u200b\u57fa\u7840\u200b\u53c2\u6570\u200b\u914d\u7f6e\u200b</p> <pre><code>// \u200b\u538b\u7f29\u200b\u7ea7\u522b\u200b\uff081-22\uff0c\u200b\u9ed8\u8ba4\u200b3\uff09\nZSTD_CCtx_setParameter(cctx, ZSTD_c_compressionLevel, 5); \n\n// \u200b\u7a97\u53e3\u200b\u5c3a\u5bf8\u200b\uff08\u200b\u5f71\u54cd\u200b\u5185\u5b58\u200b\u5360\u7528\u200b\uff09\nZSTD_CCtx_setParameter(cctx, ZSTD_c_windowLog, 22); // 4MB\u200b\u7a97\u53e3\u200b \n\n// \u200b\u542f\u7528\u200b\u957f\u8ddd\u79bb\u200b\u5339\u914d\u200b\uff08\u200b\u9002\u5408\u200b\u5927\u200b\u6587\u4ef6\u200b\uff09\nZSTD_CCtx_setParameter(cctx, ZSTD_c_enableLongDistanceMatching, 1);\n</code></pre> <p>2.2 \u200b\u9ad8\u7ea7\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b</p> <pre><code>// \u200b\u591a\u7ebf\u7a0b\u200b\u538b\u7f29\u200b\uff08\u200b\u9700\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u542f\u7528\u200bZSTD_MULTITHREAD\uff09\nZSTD_CCtx_setParameter(cctx, ZSTD_c_nbWorkers, 4); \n\n// \u200b\u5b57\u5178\u200b\u538b\u7f29\u200b\u6a21\u5f0f\u200b \nZSTD_CCtx_refCDict(cctx, cdict); \n\n// \u200b\u5b9e\u65f6\u200b\u6a21\u5f0f\u200b\uff08\u200b\u727a\u7272\u200b\u538b\u7f29\u7387\u200b\u63d0\u5347\u200b\u901f\u5ea6\u200b\uff09\nZSTD_CCtx_setParameter(cctx, ZSTD_c_strategy, ZSTD_fast); \n</code></pre> <p>\u200b\u4e09\u200b\u3001\u200b\u5b8c\u6574\u200bC++\u200b\u5b9e\u73b0\u200b\uff08\u200b\u5355\u200b\u6587\u4ef6\u200b\u538b\u7f29\u200b/\u200b\u89e3\u538b\u200b\uff09</p> <pre><code>#include &lt;zstd.h&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n\n// \u200b\u538b\u7f29\u200b\u51fd\u6570\u200b \nbool zstd_compress(const char* input_path, const char* output_path, int level=3) {\n    std::ifstream fin(input_path, std::ios::binary);\n    std::vector&lt;char&gt; input((std::istreambuf_iterator&lt;char&gt;(fin)), \n                           std::istreambuf_iterator&lt;char&gt;());\n\n    size_t bound = ZSTD_compressBound(input.size()); \n    std::vector&lt;char&gt; output(bound);\n\n    ZSTD_CCtx* cctx = ZSTD_createCCtx();\n    size_t csize = ZSTD_compressCCtx(cctx, \n        output.data(),  bound, \n        input.data(),  input.size(),  \n        level);\n\n    if (ZSTD_isError(csize)) {\n        ZSTD_freeCCtx(cctx);\n        return false;\n    }\n\n    std::ofstream fout(output_path, std::ios::binary);\n    fout.write(output.data(),  csize);\n\n    ZSTD_freeCCtx(cctx);\n    return true;\n}\n\n// \u200b\u89e3\u538b\u200b\u51fd\u6570\u200b \nbool zstd_decompress(const char* input_path, const char* output_path) {\n    std::ifstream fin(input_path, std::ios::binary);\n    std::vector&lt;char&gt; input((std::istreambuf_iterator&lt;char&gt;(fin)), \n                           std::istreambuf_iterator&lt;char&gt;());\n\n    unsigned long long rsize = ZSTD_getFrameContentSize(input.data(),  input.size()); \n    std::vector&lt;char&gt; output(rsize);\n\n    ZSTD_DCtx* dctx = ZSTD_createDCtx();\n    size_t dsize = ZSTD_decompressDCtx(dctx, \n        output.data(),  rsize, \n        input.data(),  input.size()); \n\n    if (ZSTD_isError(dsize)) {\n        ZSTD_freeDCtx(dctx);\n        return false;\n    }\n\n    std::ofstream fout(output_path, std::ios::binary);\n    fout.write(output.data(),  dsize);\n\n    ZSTD_freeDCtx(dctx);\n    return true;\n}\n</code></pre>"},{"location":"technology/Cpp/026-zstd/#_3","title":"\u56db\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u5173\u952e\u70b9","text":"<ul> <li>\u200b\u4e0a\u4e0b\u6587\u200b\u590d\u7528\u200b\uff1a\u200b\u91cd\u590d\u4f7f\u7528\u200bZSTD_CCtx\u200b\u5bf9\u8c61\u200b\u51cf\u5c11\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u5f00\u9500\u200b\u3002</li> <li>\u200b\u6d41\u5f0f\u200b\u5904\u7406\u200b\uff1a\u200b\u5bf9\u200b\u5927\u578b\u200b\u6587\u4ef6\u200b\u5206\u5757\u200b\u5904\u7406\u200b\uff0c\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\uff1a</li> </ul> <pre><code>ZSTD_inBuffer input = { src_buffer, src_size, 0 };\nZSTD_outBuffer output = { dst_buffer, dst_size, 0 };\nwhile (input.pos  &lt; input.size)  {\n    ZSTD_compressStream2(cctx, &amp;output, &amp;input, ZSTD_e_continue);\n}\n</code></pre> <ul> <li>\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\uff1a\u200b\u901a\u8fc7\u200bZSTD_c_ldmHashLog\u200b\u8c03\u6574\u200b\u54c8\u5e0c\u200b\u8868\u200b\u5c3a\u5bf8\u200b\u5e73\u8861\u200b\u901f\u5ea6\u200b\u4e0e\u200b\u5185\u5b58\u200b\u3002</li> </ul>"},{"location":"technology/Cpp/026-zstd/#_4","title":"\u4e94\u200b\u3001\u200b\u6d4b\u8bd5\u6570\u636e\u200b\u5bf9\u6bd4","text":"\u6587\u4ef6\u7c7b\u578b\u200b \u200b\u539f\u59cb\u200b\u5927\u5c0f\u200b Zstd\u200b\u538b\u7f29\u200b\u540e\u200b \u200b\u538b\u7f29\u7387\u200b \u200b\u8017\u65f6\u200b(ms) \u200b\u6587\u672c\u200b\u65e5\u5fd7\u200b 128MB 32MB 4:1 210 \u200b\u6570\u636e\u5e93\u200b\u5907\u4efd\u200b 1GB 280MB 3.57:1 8900"},{"location":"technology/Cpp/026-zstd/#_5","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/027-7zsfx/","title":"7zsfx","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4f7f\u7528\u200b7-Zip\u200b\u5236\u4f5c\u200bWindows\u200b\u81ea\u200b\u89e3\u538b\u200b\u5b89\u88c5\u5305\u200b\u7684\u200b\u5177\u4f53\u65b9\u6cd5\u200b\u548c\u200b\u5b9e\u73b0\u200b\u6b65\u9aa4\u200b\uff0c\u200b\u7efc\u5408\u200b\u4e86\u200b\u591a\u79cd\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\u548c\u200b\u6ce8\u610f\u4e8b\u9879\u200b\uff1a</p>"},{"location":"technology/Cpp/027-7zsfx/#_1","title":"\u4e00\u200b\u3001\u200b\u57fa\u7840\u200b\u5236\u4f5c\u200b\u6d41\u7a0b","text":""},{"location":"technology/Cpp/027-7zsfx/#sfx","title":"\u51c6\u5907\u200bSFX\u200b\u6a21\u5757","text":"<p>\u200b\u4ece\u200bLZMA SDK\u200b\u6216\u200b7-Zip\u200b\u5b89\u88c5\u200b\u76ee\u5f55\u200b\u83b7\u53d6\u200b7zS.sfx \u200b\u6216\u200b7zSD.sfx \u200b\u6a21\u5757\u200b\uff08\u200b\u65b0\u7248\u200b\u53ef\u80fd\u200b\u5728\u200bLZMA\u200b\u76ee\u5f55\u200b\uff0c\u200b\u65e7\u7248\u200b\u5728\u200bextra\u200b\u5305\u200b\uff09\u3002</p>"},{"location":"technology/Cpp/027-7zsfx/#_2","title":"\u6587\u4ef6\u200b\u6253\u5305","text":"<p>7z a demo.7z TestApp.exe  TestApp.config   # \u200b\u5c06\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u6253\u5305\u200b\u6210\u200b7z\u200b\u683c\u5f0f\u200b  * \u200b\u652f\u6301\u200b\u53c2\u6570\u200b\uff1a -r\uff1a\u200b\u9012\u5f52\u200b\u5b50\u76ee\u5f55\u200b -mx=9\uff1a\u200b\u6781\u9650\u200b\u538b\u7f29\u200b -m0=LZMA2\uff1a\u200b\u6307\u5b9a\u200b\u538b\u7f29\u7b97\u6cd5\u200b</p>"},{"location":"technology/Cpp/027-7zsfx/#utf-8bomconfigtxt","title":"\u7f16\u5199\u200b\u914d\u7f6e\u6587\u4ef6\u200b \u200b\u521b\u5efa\u200bUTF-8\u200b\u65e0\u200bBOM\u200b\u7f16\u7801\u200b\u7684\u200bconfig.txt \uff1a","text":"<pre><code>;!@Install@!UTF-8!\nTitle=\"My Application\"\nBeginPrompt=\"\u200b\u786e\u8ba4\u200b\u5b89\u88c5\u200b\u6b64\u200b\u7a0b\u5e8f\u200b\u5417\u200b\uff1f\"\nExecuteFile=\"TestApp.exe\" \n;!@InstallEnd@!\n</code></pre> <p>\u200b\u5173\u952e\u200b\u53c2\u6570\u200b\u8bf4\u660e\u200b\uff1a * RunProgram\uff1a\u200b\u89e3\u538b\u200b\u540e\u200b\u6267\u884c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u8def\u5f84\u200b\uff08\u200b\u652f\u6301\u200b%%T\u200b\u8868\u793a\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b\uff09 * Directory\uff1a\u200b\u89e3\u538b\u200b\u76ee\u5f55\u200b\uff08\u200b\u9ed8\u8ba4\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b\uff09 * ExecuteParameters\uff1a\u200b\u4f20\u9012\u200b\u547d\u4ee4\u884c\u200b\u53c2\u6570\u200b</p> <p>\u200b\u751f\u6210\u200bEXE\u200b\u6587\u4ef6\u200b</p> <pre><code>copy /b 7zS.sfx  + config.txt  + demo.7z MyInstaller.exe  \n</code></pre>"},{"location":"technology/Cpp/027-7zsfx/#_3","title":"\u4e8c\u200b\u3001\u200b\u8fdb\u9636\u200b\u529f\u80fd\u200b\u5b9e\u73b0","text":""},{"location":"technology/Cpp/027-7zsfx/#msi","title":"MSI\u200b\u5b89\u88c5\u5305\u200b\u96c6\u6210","text":"<pre><code>;!@Install@!UTF-8!\nTitle=\"\u200b\u4e13\u4e1a\u200b\u8f6f\u4ef6\u200b\u5b89\u88c5\u200b\"\nExecuteFile=\"msiexec.exe\" \nExecuteParameters=\"/i MyApp.msi  /qn /log install.log\" \n</code></pre> <p>\u200b\u4f18\u52bf\u200b\uff1a \u200b\u81ea\u52a8\u200b\u83b7\u53d6\u200b\u7ba1\u7406\u5458\u200b\u6743\u9650\u200b\uff08\u200b\u65e0\u9700\u200b\u624b\u52a8\u200b\u542f\u52a8\u200bCMD\uff09 \u200b\u9690\u85cf\u200bMSI\u200b\u5b89\u88c5\u200b\u754c\u9762\u200b\u63d0\u5347\u200b\u7528\u6237\u200b\u4f53\u9a8c\u200b</p>"},{"location":"technology/Cpp/027-7zsfx/#_4","title":"\u754c\u9762\u200b\u7f8e\u5316\u200b\u65b9\u6848","text":"<ul> <li>\u200b\u4f7f\u7528\u200b7zSFXBuilder\u200b\u5de5\u5177\u200b\uff08\u200b\u53ef\u89c6\u5316\u200b\u914d\u7f6e\u200b\u5bf9\u8bdd\u6846\u200b\u6837\u5f0f\u200b\uff09</li> <li>\u200b\u901a\u8fc7\u200bResource Hacker\u200b\u4fee\u6539\u200b\uff1a</li> <li>\u200b\u66ff\u6362\u200bSFX\u200b\u6a21\u5757\u200b\u56fe\u6807\u200b\uff08.ico\u200b\u6587\u4ef6\u200b\uff09</li> <li>\u200b\u4fee\u6539\u200b\u6587\u4ef6\u5c5e\u6027\u200b\uff08\u200b\u516c\u53f8\u200b\u540d\u79f0\u200b\u3001\u200b\u7248\u672c\u53f7\u200b\u7b49\u200b\uff09</li> <li>\u200b\u8c03\u6574\u200b\u89e3\u538b\u200b\u8fdb\u5ea6\u6761\u200b\u6837\u5f0f\u200b</li> </ul>"},{"location":"technology/Cpp/027-7zsfx/#_5","title":"\u9759\u9ed8\u200b\u5b89\u88c5\u200b\u6a21\u5f0f","text":"<pre><code>Progress=\"no\"\nExecuteFile=\"setup.bat\" \nRunProgram=\"hide\"\n</code></pre> <p>\u200b\u9002\u7528\u200b\u573a\u666f\u200b\uff1a\u200b\u4f01\u4e1a\u200b\u6279\u91cf\u200b\u90e8\u7f72\u200b\u65f6\u200b\u9690\u85cf\u200b\u6240\u6709\u200b\u4ea4\u4e92\u200b\u754c\u9762\u200b</p>"},{"location":"technology/Cpp/027-7zsfx/#_6","title":"\u4e09\u200b\u3001\u200b\u7279\u6b8a\u200b\u573a\u666f\u200b\u5904\u7406","text":""},{"location":"technology/Cpp/027-7zsfx/#_7","title":"\u4f9d\u8d56\u200b\u6587\u4ef6\u200b\u5b89\u88c5","text":"<pre><code>ExecuteFile=\"vcredist_x64.exe\" \nExecuteParameters=\"/install /quiet /norestart\"\n</code></pre> <p>\u200b\u652f\u6301\u200b\u94fe\u5f0f\u200b\u8c03\u7528\u200b\u591a\u4e2a\u200b\u5b89\u88c5\u7a0b\u5e8f\u200b</p>"},{"location":"technology/Cpp/027-7zsfx/#_8","title":"\u4e34\u65f6\u6587\u4ef6\u200b\u6e05\u7406","text":"<pre><code>Delete=\"%%T\\*.*\"\n</code></pre> <p>\u200b\u5b89\u88c5\u200b\u5b8c\u6210\u200b\u540e\u200b\u81ea\u52a8\u200b\u5220\u9664\u200b\u89e3\u538b\u200b\u7684\u200b\u4e34\u65f6\u6587\u4ef6\u200b</p>"},{"location":"technology/Cpp/027-7zsfx/#_9","title":"\u56db\u200b\u3001\u200b\u5e38\u89c1\u95ee\u9898\u200b\u89e3\u51b3","text":""},{"location":"technology/Cpp/027-7zsfx/#_10","title":"\u6743\u9650\u200b\u95ee\u9898","text":"<p>\u200b\u901a\u8fc7\u200bSFX\u200b\u5305\u88c5\u200b\u540e\u200b\uff0c\u200b\u53cc\u51fb\u200b\u5373\u53ef\u200b\u81ea\u52a8\u200b\u8bf7\u6c42\u200b\u7ba1\u7406\u5458\u200b\u6743\u9650\u200b\uff0c\u200b\u65e0\u9700\u200b\u624b\u52a8\u200b\u63d0\u6743\u200b</p>"},{"location":"technology/Cpp/027-7zsfx/#_11","title":"\u4e2d\u6587\u200b\u4e71\u7801\u200b\u95ee\u9898","text":"<p>\u200b\u786e\u4fdd\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4fdd\u5b58\u200b\u4e3a\u200bUTF-8\u200b\u65e0\u200bBOM\u200b\u7f16\u7801\u200b\uff0c\u200b\u63a8\u8350\u200b\u4f7f\u7528\u200bNotepad++\u200b\u7f16\u8f91\u200b</p>"},{"location":"technology/Cpp/027-7zsfx/#_12","title":"\u6740\u6bd2\u8f6f\u4ef6\u200b\u8bef\u62a5","text":"<p>\u200b\u5efa\u8bae\u200b\u5bf9\u200b\u751f\u6210\u200b\u540e\u200b\u7684\u200bEXE\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u6570\u5b57\u7b7e\u540d\u200b\uff08\u200b\u9700\u200b\u8d2d\u4e70\u200b\u4ee3\u7801\u200b\u7b7e\u540d\u200b\u8bc1\u4e66\u200b\uff09</p>"},{"location":"technology/Cpp/027-7zsfx/#sfx_1","title":"\u4e94\u200b\u3001\u200b\u4e0d\u540c\u200bSFX\u200b\u6a21\u5757\u200b\u5bf9\u6bd4","text":"\u6a21\u5757\u200b\u7c7b\u578b\u200b \u200b\u4ea4\u4e92\u65b9\u5f0f\u200b \u200b\u9002\u7528\u200b\u573a\u666f\u200b \u200b\u7279\u6027\u200b 7z.sfx GUI\u200b\u7a97\u53e3\u200b \u200b\u7b80\u5355\u200b\u89e3\u538b\u200b \u200b\u4ec5\u200b\u57fa\u7840\u200b\u89e3\u538b\u200b\u529f\u80fd\u200b 7zCon.sfx \u200b\u547d\u4ee4\u884c\u200b \u200b\u65e0\u4eba\u200b\u503c\u5b88\u200b\u5b89\u88c5\u200b \u200b\u65e0\u200b\u56fe\u5f62\u754c\u9762\u200b 7zS.sfx GUI\u200b\u5b89\u88c5\u200b\u5411\u5bfc\u200b \u200b\u6807\u51c6\u200b\u8f6f\u4ef6\u200b\u5b89\u88c5\u200b \u200b\u652f\u6301\u200b\u5b8c\u6574\u200b\u5b89\u88c5\u200b\u6d41\u7a0b\u200b 7zSD.sfx GUI\u200b\u5b89\u88c5\u200b\u5411\u5bfc\u200b \u200b\u9700\u200bMSVCRT.dll \u200b\u7684\u200b\u5b89\u88c5\u200b \u200b\u4f9d\u8d56\u200b\u7cfb\u7edf\u200b\u8fd0\u884c\u5e93\u200b <p>\u200b\u63d0\u793a\u200b\uff1a\u200b\u5efa\u8bae\u200b\u6d4b\u8bd5\u200b\u65f6\u200b\u4f7f\u7528\u200b7zSD.sfx \u200b\u4ee5\u200b\u83b7\u5f97\u6700\u4f73\u200b\u517c\u5bb9\u6027\u200b\u3002\u200b\u5982\u9700\u200b\u66f4\u200b\u590d\u6742\u200b\u7684\u200b\u5b89\u88c5\u200b\u903b\u8f91\u200b\uff0c\u200b\u53ef\u200b\u7ed3\u5408\u200b\u6279\u5904\u7406\u200b\u811a\u672c\u200b\u5b9e\u73b0\u200b\u591a\u200b\u6b65\u9aa4\u200b\u5b89\u88c5\u200b\u3002</p>"},{"location":"technology/Cpp/027-7zsfx/#_13","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/028-ImageCompress/","title":"ImageCompress","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200b\u9488\u5bf9\u200b GIFsicle\u3001Guetzli\u3001LibimageQuant \u200b\u7684\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\uff0c\u200b\u5305\u542b\u200b\u539f\u7406\u200b\u5206\u6790\u200b\u3001\u200b\u538b\u7f29\u7387\u200b\u5bf9\u6bd4\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u53ca\u200b\u53c2\u6570\u200b\u4f18\u5316\u200b\u7b56\u7565\u200b\uff1a</p>"},{"location":"technology/Cpp/028-ImageCompress/#_1","title":"\u4e00\u200b\u3001\u200b\u5de5\u5177\u200b\u529f\u80fd\u5b9a\u4f4d\u200b\u5bf9\u6bd4","text":"\u5de5\u5177\u200b\u540d\u79f0\u200b \u200b\u76ee\u6807\u200b\u683c\u5f0f\u200b \u200b\u6838\u5fc3\u200b\u573a\u666f\u200b \u200b\u538b\u7f29\u200b\u7279\u6027\u200b GIFsicle GIF \u200b\u52a8\u56fe\u200b\u4f18\u5316\u200b/\u200b\u5e27\u200b\u5904\u7406\u200b \u200b\u7a7a\u95f4\u200b\u4f18\u5316\u200b+\u200b\u8c03\u8272\u677f\u200b\u91cf\u5316\u200b Guetzli JPEG \u200b\u9ad8\u4fdd\u771f\u200b\u9759\u6001\u200b\u56fe\u200b\u538b\u7f29\u200b \u200b\u5fc3\u7406\u200b\u89c6\u89c9\u200b\u6a21\u578b\u200b+\u200b\u8272\u5f69\u200b\u7a7a\u95f4\u200b\u8f6c\u6362\u200b LibimageQuant PNG \u200b\u771f\u5f69\u200b\u8f6c\u200b\u7d22\u5f15\u200b\u8272\u200b\u4f18\u5316\u200b \u200b\u989c\u8272\u200b\u805a\u7c7b\u200b+\u200b\u6296\u52a8\u200b\u7b97\u6cd5"},{"location":"technology/Cpp/028-ImageCompress/#_2","title":"\u4e8c\u200b\u3001\u200b\u539f\u7406\u200b\u4e0e\u200b\u6280\u672f\u200b\u5b9e\u73b0\u200b\u6df1\u5ea6\u200b\u89e3\u6790","text":"<ol> <li> <p>GIFsicle \u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\uff1a</p> </li> <li> <p>\u200b\u5e27\u200b\u5dee\u5206\u200b\u7b97\u6cd5\u200b\uff1a\u200b\u901a\u8fc7\u200b\u68c0\u6d4b\u200b\u8fde\u7eed\u200b\u5e27\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5dee\u5f02\u200b\u533a\u57df\u200b\uff0c\u200b\u4ec5\u200b\u4fdd\u7559\u200b\u53d8\u5316\u200b\u50cf\u7d20\u200b\uff08\u200b\u900f\u660e\u5316\u200b\u91cd\u590d\u90e8\u5206\u200b\uff09\uff0c\u200b\u51cf\u5c11\u200b\u5197\u4f59\u200b\u6570\u636e\u200b</p> </li> <li>\u200b\u8c03\u8272\u677f\u200b\u4f18\u5316\u200b\uff1a\u200b\u5c06\u200b\u6bcf\u200b\u5e27\u200b\u989c\u8272\u200b\u6620\u5c04\u200b\u5230\u200b\u5168\u5c40\u200b/\u200b\u5c40\u90e8\u200b\u8c03\u8272\u677f\u200b\uff0c\u200b\u901a\u8fc7\u200b\u51cf\u5c11\u200b\u989c\u8272\u200b\u6570\u200b\u964d\u4f4e\u200b\u5b58\u50a8\u200b\u6210\u672c\u200b\uff08256\u200b\u8272\u200b\u219264\u200b\u8272\u200b\u53ef\u538b\u7f29\u200b50%\uff09</li> <li>LZW\u200b\u7f16\u7801\u200b\u4f18\u5316\u200b\uff1a\u200b\u91c7\u7528\u200b\u6539\u8fdb\u200b\u7684\u200bLZW\u200b\u538b\u7f29\u7b97\u6cd5\u200b\uff0c\u200b\u52a8\u6001\u200b\u8c03\u6574\u200b\u7f16\u7801\u200b\u8868\u200b\u63d0\u5347\u200b\u538b\u7f29\u7387\u200b \u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u793a\u4f8b\u200b\uff1a</li> </ol> <pre><code># \u200b\u4f18\u5316\u200b\u7ea7\u522b\u200b\u4e0e\u200b\u8c03\u8272\u677f\u200b\u63a7\u5236\u200b \ngifsicle -O3 --colors 128 input.gif  -o output.gif  \n# \u200b\u5e27\u200b\u5dee\u5206\u200b\u9608\u503c\u200b\u8bbe\u7f6e\u200b\uff08\u200b\u4ec5\u200b\u5904\u7406\u200b\u5dee\u5f02\u200b&gt;5%\u200b\u7684\u200b\u50cf\u7d20\u200b\uff09\ngifsicle --delta-threshold 0.05 input.gif  -o optimized.gif  \n</code></pre> <p>\u200b\u538b\u7f29\u7387\u200b\u5b9e\u6d4b\u200b\uff1a</p> \u200b\u539f\u56fe\u200b\u5c3a\u5bf8\u200b \u200b\u53c2\u6570\u8bbe\u7f6e\u200b \u200b\u8f93\u51fa\u200b\u5c3a\u5bf8\u200b \u200b\u538b\u7f29\u7387\u200b 12.6MB -O3 --colors 256 6.2MB 12.6MB -O3 --colors 128 3.4MB 12.6MB --lossy=30 1.8MB 85.7% <ol> <li> <p>Guetzli \u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\uff1a</p> </li> <li> <p>Butteraugli\u200b\u6a21\u578b\u200b\uff1a\u200b\u6a21\u62df\u200b\u4eba\u773c\u200b\u611f\u77e5\u200b\u7279\u6027\u200b\uff0c\u200b\u4f18\u5148\u200b\u4fdd\u7559\u200b\u9ad8\u9891\u200b\u7ec6\u8282\u200b\uff0c\u200b\u5bf9\u200b\u4f4e\u9891\u200b\u533a\u57df\u200b\u8fdb\u884c\u200b\u9ad8\u538b\u7f29\u200b</p> </li> <li>\u200b\u8272\u5f69\u200b\u7a7a\u95f4\u200b\u8f6c\u6362\u200b\uff1a\u200b\u5c06\u200bRGB\u200b\u8f6c\u6362\u200b\u4e3a\u200bXYB\u200b\u8272\u5f69\u200b\u7a7a\u95f4\u200b\uff08Y\u200b\u8868\u793a\u200b\u4eae\u5ea6\u200b\uff0cX/B\u200b\u8868\u793a\u200b\u8272\u5ea6\u200b\uff09\uff0c\u200b\u5206\u79bb\u200b\u53ef\u538b\u7f29\u200b\u7ef4\u5ea6\u200b</li> <li>\u200b\u91cf\u5316\u200b\u8868\u200b\u4f18\u5316\u200b\uff1a\u200b\u52a8\u6001\u200b\u751f\u6210\u200bJPEG\u200b\u91cf\u5316\u200b\u8868\u200b\uff0c\u200b\u9488\u5bf9\u200b\u56fe\u50cf\u200b\u5185\u5bb9\u200b\u4f18\u5316\u200bDCT\u200b\u7cfb\u6570\u200b\u53d6\u820d\u200b</li> </ol> <p>\u200b\u5904\u7406\u200b\u6d41\u7a0b\u200b\uff1a</p> <pre><code>graph TD \n    A[RGB\u200b\u8f93\u5165\u200b] --&gt; B{\u200b\u8272\u5f69\u200b\u7a7a\u95f4\u200b\u8f6c\u6362\u200b}\n    B --&gt; C[XYB\u200b\u7a7a\u95f4\u200b\u5206\u89e3\u200b]\n    C --&gt; D[Butteraugli\u200b\u6a21\u578b\u200b\u5206\u6790\u200b]\n    D --&gt; E[\u200b\u52a8\u6001\u200b\u91cf\u5316\u200b\u8868\u200b\u751f\u6210\u200b]\n    E --&gt; F[DCT\u200b\u7cfb\u6570\u200b\u538b\u7f29\u200b]\n    F --&gt; G[JPEG\u200b\u7f16\u7801\u200b\u8f93\u51fa\u200b]\n</code></pre> <p>\u200b\u538b\u7f29\u7387\u200b\u5b9e\u6d4b\u200b\uff1a</p> \u200b\u6d4b\u8bd5\u200b\u96c6\u200b \u200b\u539f\u56fe\u200b\u5e73\u5747\u200b\u5927\u5c0f\u200b Guetzli\u200b\u8f93\u51fa\u200b \u200b\u538b\u7f29\u7387\u200b \u200b\u8017\u65f6\u200b/\u200b\u5f20\u200b 1292\u200b\u5f20\u200b\u6d4b\u8bd5\u200b\u56fe\u200b 33KB 23.4KB 29% 8\u200b\u79d2\u200b 3.76MB\u200b\u5927\u56fe\u200b 3.76MB 2.55MB 31.5% 16\u200b\u5206\u949f\u200b <ol> <li> <p>LibimageQuant \u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\uff1a</p> </li> <li> <p>\u200b\u4e2d\u4f4d\u200b\u5207\u5272\u200b\u7b97\u6cd5\u200b\uff1a\u200b\u901a\u8fc7\u200b\u9012\u5f52\u200b\u5212\u5206\u200b\u989c\u8272\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u751f\u6210\u200b\u6700\u4f18\u200b256\u200b\u8272\u200b\u8c03\u8272\u677f\u200b</p> </li> <li>\u200b\u8bef\u5dee\u200b\u6269\u6563\u200b\u6296\u52a8\u200b\uff1a\u200b\u4f7f\u7528\u200bFloyd-Steinberg\u200b\u7b97\u6cd5\u200b\u6a21\u62df\u200b\u989c\u8272\u200b\u8fc7\u6e21\u200b\uff0c\u200b\u51cf\u5c11\u200b\u8272\u5e26\u200b\u6548\u5e94\u200b</li> <li>\u03b1\u200b\u901a\u9053\u200b\u4f18\u5316\u200b\uff1a\u200b\u5355\u72ec\u200b\u5904\u7406\u200b\u900f\u660e\u200b\u901a\u9053\u200b\uff0c\u200b\u907f\u514d\u200b\u989c\u8272\u6df7\u5408\u200b\u5931\u771f\u200b</li> </ol> <p>\u200b\u4ee3\u7801\u200b\u96c6\u6210\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>liq_image *img = liq_image_create_rgba(attr, pixels, width, height, 0);\nliq_set_quality(attr, 70, 90); // \u200b\u8bbe\u7f6e\u200b\u8d28\u91cf\u8303\u56f4\u200b \nliq_result *res = liq_quantize_image(attr, img);\nliq_write_remapped_image(res, img, buffer, buffer_size);\n</code></pre> <p>\u200b\u538b\u7f29\u7387\u200b\u5b9e\u6d4b\u200b\uff1a</p> \u200b\u8f93\u5165\u200b\u7c7b\u578b\u200b \u200b\u539f\u56fe\u200b\u5927\u5c0f\u200b \u200b\u8f93\u51fa\u200b\u5927\u5c0f\u200b \u200b\u538b\u7f29\u7387\u200b 24\u200b\u4f4d\u200bPNG 4.2MB 820KB 80.5% \u200b\u5e26\u200b\u03b1\u200b\u901a\u9053\u200bPNG 3.7MB 1.1MB 70.3%"},{"location":"technology/Cpp/028-ImageCompress/#_3","title":"\u4e09\u200b\u3001\u200b\u53c2\u6570\u200b\u4f18\u5316\u200b\u7b56\u7565\u200b\u5bf9\u7167\u8868","text":"\u5de5\u5177\u200b \u200b\u5173\u952e\u200b\u53c2\u6570\u200b \u200b\u4f18\u5316\u200b\u5efa\u8bae\u200b GIFsicle --colors --lossy 128\u200b\u8272\u200b+lossy=20\u200b\u5e73\u8861\u200b\u8d28\u91cf\u200b\u4e0e\u200b\u538b\u7f29\u7387\u200b Guetzli --quality \u200b\u8d28\u91cf\u200b&gt;90\u200b\u65f6\u200b\u6027\u4ef7\u6bd4\u200b\u4f4e\u200b\uff0c\u200b\u5efa\u8bae\u200b85-90\u200b\u533a\u95f4\u200b LibimageQuant liq_set_speed() speed=1\uff08\u200b\u6700\u9ad8\u200b\u8d28\u91cf\u200b\uff09 vs speed=5\uff08\u200b\u6700\u5feb\u200b\uff09"},{"location":"technology/Cpp/028-ImageCompress/#_4","title":"\u56db\u200b\u3001\u200b\u6280\u672f\u200b\u9009\u578b\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u52a8\u6001\u200b\u5185\u5bb9\u200b\u538b\u7f29\u200b\uff1a\u200b\u4f18\u5148\u200b\u4f7f\u7528\u200bGIFsicle\u200b\u8fdb\u884c\u200b\u5e27\u200b\u5dee\u5206\u200b\u4f18\u5316\u200b\uff0clossy\u200b\u6a21\u5f0f\u200b\u538b\u7f29\u7387\u200b\u53ef\u200b\u8fbe\u200b85%</li> <li>\u200b\u9ad8\u4fdd\u771f\u200bJPEG\u200b\u538b\u7f29\u200b\uff1aGuetzli\u200b\u5728\u200b\u8d28\u91cf\u200b&gt;90\u200b\u65f6\u200b\u4f18\u4e8e\u200bmozjpeg\uff0c\u200b\u4f46\u200b\u9700\u200b\u63a5\u53d7\u200b20\u200b\u500d\u200b\u8017\u65f6\u200b\u589e\u957f\u200b</li> <li>\u200b\u7d22\u5f15\u200b\u8272\u200b\u8f6c\u6362\u200b\u573a\u666f\u200b\uff1aLibimageQuant\u200b\u5728\u200b\u751f\u6210\u200b8\u200b\u4f4d\u200bPNG\u200b\u65f6\u200b\uff0c\u200b\u6bd4\u200bpngquant\u200b\u5feb\u200b3\u200b\u500d\u4e14\u200b\u8d28\u91cf\u200b\u66f4\u9ad8\u200b</li> </ul>"},{"location":"technology/Cpp/028-ImageCompress/#_5","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/029-gperftools/","title":"gperftools","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200b\u9488\u5bf9\u200bgperftools\u200b\u7684\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u7ed3\u679c\u200b\uff0c\u200b\u6db5\u76d6\u200b\u539f\u7406\u200b\u3001\u200b\u6838\u5fc3\u200b\u6a21\u5757\u200b\u3001\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u53ca\u200b\u53ef\u89c6\u5316\u200b\u5206\u6790\u200b\u5de5\u5177\u200b\u4f7f\u7528\u200b\uff1a</p>"},{"location":"technology/Cpp/029-gperftools/#gperftools_1","title":"\u4e00\u200b\u3001gperftools\u200b\u6838\u5fc3\u200b\u539f\u7406","text":""},{"location":"technology/Cpp/029-gperftools/#_1","title":"\u7cfb\u7edf\u200b\u67b6\u6784","text":"<p>gperftools\u200b\u7531\u200b\u4e09\u4e2a\u200b\u6838\u5fc3\u200b\u6a21\u5757\u200b\u6784\u6210\u200b\uff1a</p> <ul> <li>CPU Profiler\uff1a\u200b\u57fa\u4e8e\u200b\u91c7\u6837\u200b\u7684\u200b\u6027\u80fd\u200b\u5206\u6790\u5668\u200b\uff0c\u200b\u901a\u8fc7\u200b\u5b9a\u65f6\u200b\u4e2d\u65ad\u200b\u8bb0\u5f55\u200b\u8c03\u7528\u200b\u6808\u200b</li> <li>tcmalloc\uff1a\u200b\u7ebf\u7a0b\u200b\u7f13\u5b58\u200b\u5185\u5b58\u200b\u5206\u914d\u5668\u200b\uff0c\u200b\u91c7\u7528\u200b\u5206\u5c42\u200b\u7ed3\u6784\u200b\u7ba1\u7406\u200b\u5185\u5b58\u200b</li> <li>Heap Profiler\uff1a\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u68c0\u6d4b\u5de5\u5177\u200b\uff0c\u200b\u8ddf\u8e2a\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u8def\u5f84\u200b</li> </ul>"},{"location":"technology/Cpp/029-gperftools/#cpu-profiler","title":"CPU Profiler\u200b\u5b9e\u73b0\u200b\u539f\u7406","text":"<pre><code>// \u200b\u4f2a\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u91c7\u6837\u200b\u903b\u8f91\u200b\nvoid SamplerThread() {\n    while (running) {\n        sleep(sampling_interval); // \u200b\u9ed8\u8ba4\u200b10ms\n        for (thread in all_threads) {\n            CaptureCallStack(thread); // \u200b\u83b7\u53d6\u200b\u8c03\u7528\u200b\u6808\u200b\n            UpdateProfileStats(stack); // \u200b\u7edf\u8ba1\u200b\u70ed\u70b9\u200b\u8def\u5f84\u200b\n        }\n    }\n}\n</code></pre> <p>\u200b\u6d41\u7a0b\u56fe\u200b\uff1a</p> <pre><code>[\u200b\u542f\u52a8\u200bProfiler] \u2192 [\u200b\u6ce8\u518c\u200b\u4fe1\u53f7\u5904\u7406\u5668\u200b] \u2192 [\u200b\u5b9a\u65f6\u5668\u200b\u4e2d\u65ad\u200b] \u2192 [\u200b\u6355\u83b7\u200b\u8c03\u7528\u200b\u6808\u200b] \u2192 [\u200b\u805a\u5408\u200b\u7edf\u8ba1\u200b] \u2192 [\u200b\u751f\u6210\u200b.prof\u200b\u6587\u4ef6\u200b]\n</code></pre>"},{"location":"technology/Cpp/029-gperftools/#tcmalloc","title":"tcmalloc\u200b\u5185\u5b58\u200b\u7ba1\u7406","text":"<ul> <li>ThreadCache\uff1a\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u72ec\u7acb\u200b\u7684\u200b\u5c0f\u200b\u5bf9\u8c61\u200b\u7f13\u5b58\u200b\uff08\u2264256KB\uff09</li> <li>CentralFreeList\uff1a\u200b\u5168\u5c40\u200b\u4e2d\u200b\u5927\u578b\u200b\u5bf9\u8c61\u200b\u5185\u5b58\u200b\u6c60\u200b</li> <li>PageHeap\uff1a\u200b\u6309\u9875\u200b\u7ba1\u7406\u200b\u7684\u200b\u5185\u5b58\u200b\u5206\u914d\u5668\u200b\uff081MB\u200b\u4e3a\u200b\u5355\u4f4d\u200b\uff09</li> </ul>"},{"location":"technology/Cpp/029-gperftools/#_2","title":"\u4e8c\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u4e0e\u200b\u96c6\u6210","text":""},{"location":"technology/Cpp/029-gperftools/#_3","title":"\u57fa\u7840\u200b\u6027\u80fd\u200b\u5206\u6790\u200b\u4ee3\u7801","text":"<pre><code>#include &lt;gperftools/profiler.h&gt;\n\nvoid HeavyCalculation() { /* \u200b\u8017\u65f6\u200b\u51fd\u6570\u200b */ }\n\nint main() {\n    ProfilerStart(\"output.prof\");  // \u200b\u542f\u52a8\u200b\u5206\u6790\u200b\n    HeavyCalculation();\n    ProfilerStop(); // \u200b\u505c\u6b62\u200b\u5206\u6790\u200b\n    return 0;\n}\n</code></pre> <p>\u200b\u7f16\u8bd1\u200b\u6307\u4ee4\u200b\uff1a</p> <pre><code>g++ -o demo demo.cpp  -lprofiler -fno-omit-frame-pointer\n</code></pre>"},{"location":"technology/Cpp/029-gperftools/#_4","title":"\u9ad8\u7ea7\u200b\u4f7f\u7528\u200b\uff08\u200b\u52a8\u6001\u63a7\u5236\u200b\uff09","text":"<pre><code>#include &lt;gperftools/profiler.h&gt;\n#include &lt;signal.h&gt;\n\nvoid SignalHandler(int sig) {\n    static bool is_profiling = false;\n    if (!is_profiling) {\n        ProfilerStart(\"dynamic.prof\"); \n    } else {\n        ProfilerStop();\n    }\n    is_profiling = !is_profiling;\n}\n\nint main() {\n    signal(SIGUSR1, SignalHandler); // \u200b\u901a\u8fc7\u200bkill -USR1\u200b\u89e6\u53d1\u200b\n    while(true) { /* \u200b\u4e1a\u52a1\u200b\u903b\u8f91\u200b */ }\n}\n</code></pre>"},{"location":"technology/Cpp/029-gperftools/#_5","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u4f18\u5316\u200b\u53c2\u6570","text":""},{"location":"technology/Cpp/029-gperftools/#_6","title":"\u7f16\u8bd1\u200b\u671f\u200b\u53c2\u6570","text":"\u53c2\u6570\u200b \u200b\u4f5c\u7528\u200b \u200b\u793a\u4f8b\u200b -fno-omit-frame-pointer \u200b\u4fdd\u7559\u200b\u6808\u5e27\u200b\u6307\u9488\u200b g++ -fno-omit-frame-pointer --enable-frame-pointers \u200b\u914d\u7f6e\u200bgperftools\u200b\u65f6\u200b\u542f\u7528\u200b ./configure --enable-frame-pointers"},{"location":"technology/Cpp/029-gperftools/#_7","title":"\u8fd0\u884c\u200b\u65f6\u200b\u53c2\u6570","text":"\u73af\u5883\u53d8\u91cf\u200b \u200b\u4f5c\u7528\u200b \u200b\u793a\u4f8b\u200b CPUPROFILE \u200b\u6307\u5b9a\u200b\u8f93\u51fa\u200b\u6587\u4ef6\u200b CPUPROFILE=output.prof  ./demo CPUPROFILE_FREQUENCY \u200b\u91c7\u6837\u200b\u9891\u7387\u200b(Hz) CPUPROFILE_FREQUENCY=100 HEAPPROFILE \u200b\u5185\u5b58\u200b\u5206\u6790\u200b\u6587\u4ef6\u200b HEAPPROFILE=heap.prof  ./demo ### \u200b\u56db\u200b\u3001\u200b\u53ef\u89c6\u5316\u200b\u5206\u6790\u200b\u6d41\u7a0b\u200b #### \u200b\u751f\u6210\u200b\u5206\u6790\u200b\u62a5\u544a\u200b <pre><code>pprof --callgrind ./demo output.prof  &gt; output.callgrind \nkcachegrind output.callgrind \n</code></pre>"},{"location":"technology/Cpp/029-gperftools/#kcachegrind","title":"kcachegrind\u200b\u754c\u9762\u200b\u89e3\u6790","text":"<ul> <li>\u200b\u51fd\u6570\u8c03\u7528\u200b\u56fe\u200b\uff1a\u200b\u663e\u793a\u200b\u70ed\u70b9\u200b\u8def\u5f84\u200b\u53ca\u200b\u8017\u65f6\u200b\u5360\u200b\u6bd4\u200b</li> <li>\u200b\u6e90\u7801\u200b\u5173\u8054\u200b\uff1a\u200b\u76f4\u63a5\u200b\u5b9a\u4f4d\u200b\u9ad8\u200b\u6d88\u8017\u200b\u4ee3\u7801\u200b\u884c\u200b</li> </ul>"},{"location":"technology/Cpp/029-gperftools/#_8","title":"\u4e94\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u70ed\u70b9\u200b\u51fd\u6570\u200b\u4f18\u5316\u200b\uff1a\u200b\u4f18\u5148\u200b\u5904\u7406\u200b\u91c7\u6837\u200b\u6b21\u6570\u200b\u6700\u591a\u200b\u7684\u200b\u51fd\u6570\u200b</li> <li>\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u4f18\u5316\u200b\uff1a</li> </ul> <pre><code>// \u200b\u4f7f\u7528\u200btcmalloc\u200b\u66ff\u4ee3\u200b\u6807\u51c6\u200bmalloc\n#include &lt;gperftools/tcmalloc.h&gt;\nvoid* ptr = tc_malloc(1024);\ntc_free(ptr);\n</code></pre> <ul> <li>\u200b\u591a\u7ebf\u7a0b\u200b\u4f18\u5316\u200b\uff1a\u200b\u7ed3\u5408\u200bHEAP_CHECK_MAX_LEAKS\u200b\u68c0\u6d4b\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b</li> </ul>"},{"location":"technology/Cpp/029-gperftools/#_9","title":"\u516d\u200b\u3001\u200b\u6838\u5fc3\u200b\u6570\u636e\u7ed3\u6784\u200b\uff08\u200b\u90e8\u5206\u200b\u6e90\u7801\u200b\u89e3\u6790\u200b\uff09","text":"<pre><code>tcmalloc\u200b\u7684\u200bCentralFreeList\nclass CentralFreeList {\n    SpinLock lock_;\n    SpanList free_spans_; // \u200b\u7a7a\u95f2\u200b\u5185\u5b58\u200b\u5757\u200b\u94fe\u8868\u200b\n    size_t size_class_;   // \u200b\u5185\u5b58\u200b\u89c4\u683c\u200b\u5206\u7c7b\u200b\n    // \u200b\u4ece\u200bPageHeap\u200b\u7533\u8bf7\u200b\u65b0\u200b\u5185\u5b58\u200b\u9875\u200b\n    Span* NewSpan(size_t n);\n};\n</code></pre> <p>\u200b\u53c2\u8003\u8d44\u6599\u200b\uff1a</p> <ul> <li>CPU Profiler\u200b\u5b9e\u73b0\u200b\u7ec6\u8282\u200b</li> <li>tcmalloc\u200b\u5185\u5b58\u200b\u7ba1\u7406\u7b56\u7565\u200b</li> <li>\u200b\u53ef\u89c6\u5316\u200b\u5de5\u5177\u200b\u96c6\u6210\u200b\u65b9\u6cd5\u200b</li> </ul> <p>\u200b\u4ee5\u4e0a\u200b\u5185\u5bb9\u200b\u53ef\u200b\u901a\u8fc7\u200b\u6269\u5c55\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200bHeavyCalculation()\u200b\u51fd\u6570\u200b\u8fdb\u884c\u200b\u5b9e\u9645\u200b\u9a8c\u8bc1\u200b\uff0c\u200b\u5efa\u8bae\u200b\u7ed3\u5408\u200b\u5177\u4f53\u200b\u4e1a\u52a1\u200b\u573a\u666f\u200b\u8c03\u6574\u200b\u91c7\u6837\u200b\u9891\u7387\u200b\u548c\u200b\u5206\u6790\u200b\u7c92\u5ea6\u200b\u3002</p>"},{"location":"technology/Cpp/029-gperftools/#_10","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/030-gprof/","title":"gprof","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u4ece\u200b\u539f\u7406\u200b\u5230\u200b\u5b9e\u73b0\u200b\u3001\u200b\u4ece\u200b\u5168\u5c40\u200b\u5230\u200b\u7ec6\u8282\u200b\u7684\u200bgprof\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\uff0c\u200b\u5305\u542b\u200b\u6838\u5fc3\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u548c\u200b\u53ef\u89c6\u5316\u200b\u5206\u6790\u200b\u65b9\u6848\u200b\uff1a</p>"},{"location":"technology/Cpp/030-gprof/#gprof_1","title":"\u4e00\u200b\u3001gprof\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u4e0e\u200b\u5b9e\u73b0\u200b\u67b6\u6784","text":"<p>1.1 \u200b\u7cfb\u7edf\u200b\u67b6\u6784\u56fe\u200b</p> <pre><code>graph TD \n    A[\u200b\u6e90\u4ee3\u7801\u200b] --&gt; B[\u200b\u5e26\u200b-pg\u200b\u7f16\u8bd1\u200b]\n    B --&gt; C[\u200b\u63d2\u5165\u200bmcount\u200b\u51fd\u6570\u200b]\n    C --&gt; D[\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6570\u636e\u200b\u91c7\u96c6\u200b]\n    D --&gt; E[\u200b\u751f\u6210\u200bgmon.out] \n    E --&gt; F[gprof\u200b\u5206\u6790\u200b]\n    F --&gt; G[Flat Profile]\n    F --&gt; H[Call Graph]\n</code></pre> <p>1.2 \u200b\u6838\u5fc3\u200b\u5de5\u4f5c\u200b\u539f\u7406\u200b\uff08\u200b\u53c2\u8003\u200b\uff09 \u200b\u4ee3\u7801\u200b\u63d2\u6869\u200b\uff1a\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u901a\u8fc7\u200b-pg\u200b\u53c2\u6570\u200b\u5728\u200b\u51fd\u6570\u200b\u5165\u53e3\u200b\u63d2\u5165\u200bmcount\u200b\u8c03\u7528\u200b \u200b\u8c03\u7528\u200b\u6808\u200b\u8ffd\u8e2a\u200b\uff1a</p> <pre><code>void __mcount (void *self_pc){\n    // \u200b\u83b7\u53d6\u200b\u8c03\u7528\u8005\u200b\u5730\u5740\u200b\uff08\u200b\u901a\u8fc7\u200b\u5bc4\u5b58\u5668\u200b\u6216\u6808\u200b\u6307\u9488\u200b\uff09\n    void *from_pc = __builtin_return_address(0);\n    // \u200b\u8bb0\u5f55\u200b\u8c03\u7528\u200b\u5173\u7cfb\u200b\u56fe\u200b\n    record_call_graph(from_pc, self_pc);\n}\n</code></pre> <p>\u200b\u6570\u636e\u200b\u91c7\u96c6\u200b\uff1a * \u200b\u65f6\u95f4\u200b\u91c7\u6837\u200b\uff1a\u200b\u6bcf\u200b10ms\u200b\u4e2d\u65ad\u200b\u8bb0\u5f55\u200b\u5f53\u524d\u200bPC\u200b\u503c\u200b\uff08\u200b\u53c2\u8003\u200b\uff09 * \u200b\u8c03\u7528\u200b\u8ba1\u6570\u200b\uff1a\u200b\u7ef4\u62a4\u200b\u54c8\u5e0c\u200b\u8868\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u8c03\u7528\u200b\u6b21\u6570\u200b * \u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u200b\u7ed3\u6784\u200b\uff1a</p> <pre><code>struct profile_data {\n    unsigned long calls;  // \u200b\u8c03\u7528\u200b\u6b21\u6570\u200b \n    double total_time;    // \u200b\u603b\u200b\u8017\u65f6\u200b \n    struct child *children; // \u200b\u5b50\u200b\u8c03\u7528\u200b\u8282\u70b9\u200b \n};\n</code></pre>"},{"location":"technology/Cpp/030-gprof/#c","title":"\u4e8c\u200b\u3001\u200b\u5b8c\u6574\u200bC++\u200b\u793a\u4f8b\u200b\u4ee3\u7801","text":"<p>2.1 \u200b\u6d4b\u8bd5\u7a0b\u5e8f\u200b\uff08\u200b\u53c2\u8003\u200b\uff09</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid func3(int depth) {\n    for(int i=0; i&lt;10000*(depth+1); i++); // \u200b\u8017\u65f6\u200b\u64cd\u4f5c\u200b \n}\n\nvoid func2() {\n    for(int i=0; i&lt;50000; i++);\n    func3(1);\n}\n\nvoid func1() {\n    for(int i=0; i&lt;100000; i++);\n    func3(0);\n    func2();\n}\n\nint main() {\n    for(int i=0; i&lt;5; i++){\n        func1();\n        func2();\n    }\n    return 0;\n}\n</code></pre> <p>2.2 \u200b\u7f16\u8bd1\u200b\u4e0e\u200b\u8fd0\u884c\u200b</p> <pre><code>g++ -pg -O2 test_gprof.cpp  -o test_gprof  # \u200b\u5e26\u200b\u4f18\u5316\u200b\u7f16\u8bd1\u200b[8]()\n./test_gprof  # \u200b\u751f\u6210\u200bgmon.out  \n</code></pre>"},{"location":"technology/Cpp/030-gprof/#_1","title":"\u4e09\u200b\u3001\u200b\u6027\u80fd\u200b\u5206\u6790\u200b\u8fdb\u9636\u200b\u914d\u7f6e","text":"<p>3.1 \u200b\u5173\u952e\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\uff08\u200b\u53c2\u8003\u200b\uff09</p> \u200b\u53c2\u6570\u200b\u7ec4\u5408\u200b \u200b\u4f5c\u7528\u200b \u200b\u6ce8\u610f\u4e8b\u9879\u200b -pg -O2 \u200b\u57fa\u7840\u200b\u6027\u80fd\u200b\u5206\u6790\u200b \u200b\u907f\u514d\u200b-O3\u200b\u5bfc\u81f4\u200b\u63d2\u6869\u200b\u5931\u6548\u200b -lc_p -pg \u200b\u5206\u6790\u200bC\u200b\u5e93\u51fd\u6570\u200b \u200b\u9700\u200b\u5b89\u88c5\u200blibc-profile -fno-inline \u200b\u7981\u7528\u200b\u5185\u8054\u200b \u200b\u786e\u4fdd\u200b\u51fd\u6570\u200b\u53ef\u89c1\u200b -static-libgcc \u200b\u9759\u6001\u200b\u94fe\u63a5\u200b \u200b\u907f\u514d\u200b\u52a8\u6001\u200b\u5e93\u200b\u95ee\u9898\u200b <p>3.2 \u200b\u591a\u7ebf\u7a0b\u200b\u652f\u6301\u200b\u65b9\u6848\u200b</p> <pre><code>// \u200b\u4f7f\u7528\u200bgprof-helper.c[1]()\ngcc -shared -fPIC gprof-helper.c -o gprof-helper.so  -lpthread -ldl\nexport LD_PRELOAD=./gprof-helper.so  \n</code></pre>"},{"location":"technology/Cpp/030-gprof/#_2","title":"\u56db\u200b\u3001\u200b\u53ef\u89c6\u5316\u200b\u5206\u6790\u200b\u6d41\u7a0b","text":"<p>4.1 Kcachegrind\u200b\u53ef\u89c6\u5316\u200b\uff08\u200b\u53c2\u8003\u200b\uff09</p> <pre><code>sequenceDiagram \n    \u200b\u7a0b\u5e8f\u8fd0\u884c\u200b-&gt;&gt;gmon.out:  \u200b\u751f\u6210\u200b\u539f\u59cb\u6570\u636e\u200b \n    gprof-&gt;&gt;callgrind.out:  \u200b\u8f6c\u6362\u200b\u683c\u5f0f\u200b: gprof -b ./test_gprof | gprof2dot | dot -Tcallgrind -o callgrind.out  \n    kcachegrind-&gt;&gt;\u200b\u53ef\u89c6\u5316\u200b: \u200b\u52a0\u8f7d\u200bcallgrind.out  \n</code></pre> <p>4.2 \u200b\u5173\u952e\u200b\u5206\u6790\u200b\u89c6\u56fe\u200b \u200b\u8c03\u7528\u200b\u5173\u7cfb\u200b\u706b\u7130\u200b\u56fe\u200b\uff1a</p> <pre><code>gprof2dot -f pstats gmon.out  | dot -Tsvg -o flame.svg  \n</code></pre>"},{"location":"technology/Cpp/030-gprof/#_3","title":"\u4e94\u200b\u3001\u200b\u6280\u672f\u200b\u5c40\u9650\u200b\u4e0e\u200b\u4f18\u5316\u200b\u5efa\u8bae","text":"<p>5.1 \u200b\u5df2\u77e5\u200b\u7f3a\u9677\u200b\uff08\u200b\u53c2\u8003\u200b\uff09 * \u200b\u65f6\u95f4\u200b\u91c7\u6837\u200b\u7cbe\u5ea6\u200b\u8bef\u5dee\u200b\uff08\u00b110%\uff09 * \u200b\u65e0\u6cd5\u200b\u5206\u6790\u200b\u5185\u6838\u200b\u6001\u200b\u8017\u65f6\u200b\uff08\u200b\u9700\u200b\u7ed3\u5408\u200bperf\u200b\u5de5\u5177\u200b\uff09 * \u200b\u9012\u5f52\u51fd\u6570\u200b\u5904\u7406\u200b\u4e0d\u200b\u5b8c\u5584\u200b\uff08\u200b\u5f3a\u200b\u8fde\u901a\u200b\u5206\u91cf\u200b\u538b\u7f29\u200b\uff09 5.2 \u200b\u66ff\u4ee3\u200b\u65b9\u6848\u200b\u5bf9\u6bd4\u200b</p> \u200b\u5de5\u5177\u200b \u200b\u4f18\u52bf\u200b \u200b\u5c40\u9650\u200b gprof \u200b\u65e0\u9700\u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u200b\u5185\u6838\u200b \u200b\u591a\u7ebf\u7a0b\u200b\u652f\u6301\u200b\u5dee\u200b perf \u200b\u652f\u6301\u200b\u786c\u4ef6\u200b\u8ba1\u6570\u5668\u200b \u200b\u5b66\u4e60\u66f2\u7ebf\u200b\u9661\u5ced\u200b Valgrind \u200b\u5185\u5b58\u200b+\u200b\u6027\u80fd\u200b\u7efc\u5408\u200b\u5206\u6790\u200b \u200b\u8fd0\u884c\u200b\u901f\u5ea6\u6162\u200b10\u200b\u500d\u200b\u4ee5\u4e0a"},{"location":"technology/Cpp/030-gprof/#_4","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/031-valgrind/","title":"valgrind","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u4ece\u200b\u539f\u7406\u200b\u5230\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u3001\u200b\u53c2\u6570\u200b\u4f18\u5316\u200b\u53ca\u200b\u7ed3\u679c\u200b\u5206\u6790\u200b\u7684\u200bValgrind\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b\uff0c\u200b\u7ed3\u5408\u200bC++\u200b\u793a\u4f8b\u200b\u548c\u200b\u53ef\u89c6\u5316\u200b\u5de5\u5177\u200b\u4f7f\u7528\u200b\u8bf4\u660e\u200b\uff1a</p>"},{"location":"technology/Cpp/031-valgrind/#valgrind_1","title":"\u4e00\u200b\u3001Valgrind\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u4e0e\u200b\u67b6\u6784","text":"<p>1.1 \u200b\u7cfb\u7edf\u200b\u67b6\u6784\u200b</p> <pre><code>graph TD\n    A[Valgrind Core] --&gt; B[Memcheck]\n    A --&gt; C[Callgrind]\n    A --&gt; D[Cachegrind]\n    A --&gt; E[Helgrind]\n    A --&gt; F[Massif]\n</code></pre> <p>\u200b\u6838\u5fc3\u200b\u6a21\u62df\u200bCPU\u200b\u73af\u5883\u200b\uff0c\u200b\u5de5\u5177\u200b\u4f5c\u4e3a\u200b\u63d2\u4ef6\u200b\u8fd0\u884c\u200b\u5728\u200b\u865a\u62df\u673a\u200b\u4e0a\u200b 1.2 Memcheck\u200b\u68c0\u6d4b\u200b\u539f\u7406\u200b</p> <pre><code>sequenceDiagram\n    Program-&gt;&gt;+Valgrind: \u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u8bf7\u6c42\u200b\n    Valgrind-&gt;&gt;Valid-Address\u200b\u8868\u200b: \u200b\u68c0\u67e5\u200b\u5730\u5740\u200b\u5408\u6cd5\u6027\u200b\n    Valgrind-&gt;&gt;Valid-Value\u200b\u8868\u200b: \u200b\u68c0\u67e5\u200b\u503c\u200b\u521d\u59cb\u5316\u200b\u72b6\u6001\u200b\n    alt \u200b\u5730\u5740\u200b\u975e\u6cd5\u200b\n        Valgrind--&gt;&gt;Program: \u200b\u62a5\u544a\u200b\u975e\u6cd5\u200b\u8bbf\u95ee\u200b\n    else \u200b\u503c\u672a\u200b\u521d\u59cb\u5316\u200b\n        Valgrind--&gt;&gt;Program: \u200b\u62a5\u544a\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u9519\u8bef\u200b\n    end\n</code></pre> <p>\u200b\u57fa\u4e8e\u200b\u865a\u62df\u200bCPU\u200b\u73af\u5883\u200b\u7ef4\u62a4\u200b\u4e24\u4e2a\u200b\u5168\u5c40\u200b\u8868\u200b\uff1aValid-Address\uff08\u200b\u5730\u5740\u200b\u5408\u6cd5\u6027\u200b\uff09\u3001Valid-Value\uff08\u200b\u503c\u200b\u521d\u59cb\u5316\u200b\u72b6\u6001\u200b\uff09</p>"},{"location":"technology/Cpp/031-valgrind/#_1","title":"\u4e8c\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u793a\u4f8b\u200b\u4e0e\u200b\u5206\u6790","text":"<p>2.1 \u200b\u6d4b\u8bd5\u7528\u4f8b\u200b\uff08demo.cpp \uff09</p> <pre><code>#include &lt;stdlib.h&gt;\n\nvoid leak() {\n    int* ptr = new int[10](); // \u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\n}\n\nvoid uninit() {\n    int x;\n    if(x &gt; 0) { // \u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u4f7f\u7528\u200b\n        //...\n    }\n}\n\nint main() {\n    int* arr = (int*)malloc(sizeof(int)*20);\n    arr[20]()  = 0; // \u200b\u8d8a\u754c\u200b\u8bbf\u95ee\u200b\n    leak();\n    uninit();\n    free(arr);\n    return 0;\n}\n</code></pre> <p>2.2 \u200b\u7f16\u8bd1\u200b\u4e0e\u200b\u68c0\u6d4b\u200b</p> <pre><code>g++ -g -O0 demo.cpp  -o demo  # \u200b\u5fc5\u987b\u200b\u5305\u542b\u200b\u8c03\u8bd5\u4fe1\u606f\u200b\nvalgrind --tool=memcheck --leak-check=full ./demo\n</code></pre>"},{"location":"technology/Cpp/031-valgrind/#_2","title":"\u4e09\u200b\u3001\u200b\u5173\u952e\u200b\u4f18\u5316\u200b\u53c2\u6570\u8bbe\u7f6e","text":"\u53c2\u6570\u200b\u7c7b\u578b\u200b \u200b\u793a\u4f8b\u200b\u547d\u4ee4\u200b \u200b\u4f5c\u7528\u200b\u8bf4\u660e\u200b \u200b\u5185\u5b58\u200b\u68c0\u6d4b\u200b   --track-origins=yes \u200b\u8ffd\u8e2a\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u503c\u200b\u7684\u200b\u6765\u6e90\u200b \u200b\u6cc4\u6f0f\u200b\u68c0\u6d4b\u200b   --leak-check=full \u200b\u663e\u793a\u200b\u6cc4\u6f0f\u200b\u7684\u200b\u5b8c\u6574\u200b\u5806\u6808\u200b \u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u8ddf\u8e2a\u200b  --trace-children=yes \u200b\u76d1\u63a7\u200bfork\u200b\u4ea7\u751f\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b \u200b\u9519\u8bef\u200b\u6291\u5236\u200b   --suppressions=suppress.txt \u200b\u5ffd\u7565\u200b\u6307\u5b9a\u200b\u6a21\u5f0f\u200b\u7684\u200b\u8bef\u62a5\u200b \u200b\u6027\u80fd\u200b\u5206\u6790\u200b   --tool=callgrind --separate-threads=yes \u200b\u591a\u7ebf\u7a0b\u200b\u6027\u80fd\u200b\u5206\u6790"},{"location":"technology/Cpp/031-valgrind/#kcachegrind","title":"\u56db\u200b\u3001KCachegrind\u200b\u7ed3\u679c\u200b\u5206\u6790","text":"<p>4.1 \u200b\u751f\u6210\u200b\u6027\u80fd\u200b\u6570\u636e\u200b</p> <pre><code>valgrind --tool=callgrind --callgrind-out-file=profile.out  ./demo\n</code></pre> <p>4.2 \u200b\u53ef\u89c6\u5316\u200b\u5206\u6790\u200b</p> <pre><code>kcachegrind profile.out \n</code></pre> <p>\u200b\u5173\u952e\u200b\u529f\u80fd\u200b\uff1a</p> <ul> <li>\u200b\u51fd\u6570\u8c03\u7528\u200b\u56fe\u200b\u53ef\u89c6\u5316\u200b</li> <li>CPU\u200b\u5468\u671f\u200b\u5360\u200b\u6bd4\u200b\u5206\u6790\u200b</li> <li>\u200b\u7f13\u5b58\u200b\u547d\u4e2d\u7387\u200b\u7edf\u8ba1\u200b</li> <li>\u200b\u591a\u7ebf\u7a0b\u200b\u6267\u884c\u200b\u8def\u5f84\u200b\u8ffd\u8e2a\u200b</li> </ul>"},{"location":"technology/Cpp/031-valgrind/#_3","title":"\u4e94\u200b\u3001\u200b\u9ad8\u7ea7\u200b\u8c03\u8bd5\u200b\u6280\u5de7","text":"<p>5.1 \u200b\u6df7\u5408\u200b\u8c03\u8bd5\u6a21\u5f0f\u200b</p> <pre><code>valgrind --vgdb=yes --vgdb-error=0 ./demo\ngdb ./demo\n(gdb) target remote | vgdb\n</code></pre> <p>\u200b\u5b9e\u73b0\u200bValgrind\u200b\u4e0e\u200bGDB\u200b\u8054\u5408\u200b\u8c03\u8bd5\u200b</p> <p>5.2 \u200b\u81ea\u5b9a\u4e49\u200b\u68c0\u6d4b\u200b\u89c4\u5219\u200b</p> <pre><code>&lt;!-- suppress.xml  --&gt;\n&lt;suppressions&gt;\n    &lt;suppress&gt;\n        &lt;sname&gt;MyLibraryLeak&lt;/sname&gt;\n        &lt;frame&gt;my_malloc&lt;/frame&gt;\n    &lt;/suppress&gt;\n&lt;/suppressions&gt;\n</code></pre> <p>\u200b\u901a\u8fc7\u200b\u6291\u5236\u200b\u6587\u4ef6\u200b\u5ffd\u7565\u200b\u7279\u5b9a\u200b\u5185\u5b58\u200b\u64cd\u4f5c\u200b</p>"},{"location":"technology/Cpp/031-valgrind/#_4","title":"\u516d\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u7f16\u8bd1\u200b\u4f18\u5316\u200b\uff1a\u200b\u68c0\u6d4b\u200b\u65f6\u200b\u4f7f\u7528\u200b-O1\u200b\u4f18\u5316\u200b\u7ea7\u522b\u200b\uff0c\u200b\u907f\u514d\u200b-O2\u200b\u5bfc\u81f4\u200b\u884c\u53f7\u200b\u504f\u79fb\u200b</li> <li>\u200b\u7f13\u5b58\u200b\u9884\u70ed\u200b\uff1a\u200b\u901a\u8fc7\u200b--cache-sim=yes\u200b\u53c2\u6570\u200b\u6536\u96c6\u200b\u7f13\u5b58\u6570\u636e\u200b</li> <li>\u200b\u591a\u7ebf\u7a0b\u200b\u4f18\u5316\u200b\uff1a\u200b\u7ed3\u5408\u200bHelgrind\u200b\u68c0\u6d4b\u200b\u7ade\u6001\u200b\u6761\u4ef6\u200b</li> </ul> <pre><code>valgrind --tool=helgrind ./multi_thread_demo\n</code></pre> <p>\u200b\u5185\u5b58\u200b\u5bf9\u9f50\u200b\u4f18\u5316\u200b\uff1a\u200b\u901a\u8fc7\u200bMassif\u200b\u5206\u6790\u200b\u5806\u200b\u5185\u5b58\u200b\u5206\u5e03\u200b</p> <pre><code>valgrind --tool=massif --stacks=yes ./demo\n</code></pre>"},{"location":"technology/Cpp/031-valgrind/#_5","title":"\u4e03\u200b\u3001\u200b\u5b8c\u6574\u200b\u68c0\u6d4b\u200b\u6d41\u7a0b","text":"<pre><code>flowchart TB\n    A[\u200b\u7f16\u5199\u200b\u6d4b\u8bd5\u7a0b\u5e8f\u200b] --&gt; B[\u200b\u5e26\u200b\u8c03\u8bd5\u4fe1\u606f\u200b\u7f16\u8bd1\u200b]\n    B --&gt; C[\u200b\u9009\u62e9\u200b\u68c0\u6d4b\u5de5\u5177\u200b]\n    C --&gt; D{\u200b\u5185\u5b58\u200b\u68c0\u6d4b\u200b?}\n    D --&gt;|Yes| E[Memcheck\u200b\u53c2\u6570\u200b\u914d\u7f6e\u200b]\n    D --&gt;|No| F[\u200b\u5176\u4ed6\u200b\u5de5\u5177\u200b\u53c2\u6570\u200b\u914d\u7f6e\u200b]\n    E/F --&gt; G[\u200b\u751f\u6210\u200b\u68c0\u6d4b\u200b\u62a5\u544a\u200b]\n    G --&gt; H[KCachegrind\u200b\u53ef\u89c6\u5316\u200b]\n    H --&gt; I[\u200b\u95ee\u9898\u200b\u5b9a\u4f4d\u200b]\n    I --&gt; J[\u200b\u4ee3\u7801\u200b\u4fee\u590d\u200b]\n</code></pre>"},{"location":"technology/Cpp/031-valgrind/#_6","title":"\u516b\u200b\u3001\u200b\u6280\u672f\u200b\u5c40\u9650\u200b\u4e0e\u200b\u6539\u8fdb","text":"<ul> <li>\u200b\u5047\u200b\u9633\u6027\u200b\u95ee\u9898\u200b\uff1a\u200b\u7ea6\u200b5%\u200b\u7684\u200b\u8bef\u62a5\u7387\u200b\uff0c\u200b\u9700\u200b\u4eba\u5de5\u200b\u9a8c\u8bc1\u200b</li> <li>\u200b\u6027\u80fd\u200b\u635f\u8017\u200b\uff1a\u200b\u6267\u884c\u200b\u901f\u5ea6\u200b\u964d\u4f4e\u200b10-50\u200b\u500d\u200b</li> <li>SIMD\u200b\u6307\u4ee4\u200b\u652f\u6301\u200b\uff1a\u200b\u90e8\u5206\u200bAVX\u200b\u6307\u4ee4\u96c6\u200b\u68c0\u6d4b\u200b\u4e0d\u200b\u5b8c\u5584\u200b</li> <li>\u200b\u5b9e\u65f6\u200b\u7cfb\u7edf\u200b\u9650\u5236\u200b\uff1a\u200b\u4e0d\u200b\u9002\u5408\u200b\u65f6\u95f4\u200b\u654f\u611f\u200b\u578b\u200b\u5e94\u7528\u200b</li> <li>\u200b\u6539\u8fdb\u200b\u65b9\u6848\u200b\u5efa\u8bae\u200b\uff1a</li> </ul> <pre><code>// \u200b\u81ea\u5b9a\u4e49\u200b\u5206\u914d\u5668\u200b\u793a\u4f8b\u200b\nclass ValgrindAwareAllocator {\npublic:\n    void* allocate(size_t size) {\n        VALGRIND_MALLOCLIKE_BLOCK(ptr, size, 0, 0);\n        return malloc(size);\n    }\n    //... \u200b\u5176\u4ed6\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\u51fd\u6570\u200b\n};\n</code></pre> <p>\u200b\u4ee5\u4e0a\u200b\u5185\u5bb9\u200b\u6574\u5408\u200b\u4e86\u200bValgrind\u200b\u7684\u200b\u6838\u5fc3\u200b\u5de5\u4f5c\u200b\u673a\u5236\u200b\u548c\u200b\u5b9e\u9645\u200b\u5e94\u7528\u200b\u8981\u70b9\u200b\uff0c\u200b\u53ef\u200b\u901a\u8fc7\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u548c\u200b\u53ef\u89c6\u5316\u200b\u5de5\u5177\u200b\u5feb\u901f\u200b\u5b9a\u4f4d\u200b\u5185\u5b58\u200b\u95ee\u9898\u200b\u3002\u200b\u5efa\u8bae\u200b\u7ed3\u5408\u200b\u5177\u4f53\u200b\u9879\u76ee\u200b\u9700\u6c42\u200b\u9009\u62e9\u200b\u9002\u5408\u200b\u7684\u200b\u68c0\u6d4b\u5de5\u5177\u200b\u7ec4\u5408\u200b\uff0c\u200b\u5e76\u200b\u5efa\u7acb\u200b\u81ea\u52a8\u5316\u200b\u68c0\u6d4b\u200b\u6d41\u7a0b\u200b\u3002</p>"},{"location":"technology/Cpp/031-valgrind/#_7","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/033-QtShadowDialog/","title":"QtShadowDialog","text":"<p>QWidget\u200b\u5b9e\u73b0\u200b\u65e0\u200b\u8fb9\u6846\u200b\u5e26\u200b\u9634\u5f71\u200b\u7a97\u4f53\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b</p>"},{"location":"technology/Cpp/033-QtShadowDialog/#_1","title":"\u4e00\u200b\u3001\u200b\u5b9e\u73b0\u200b\u539f\u7406","text":"<ol> <li>\u200b\u6838\u5fc3\u200b\u673a\u5236\u200b \u200b\u65e0\u200b\u8fb9\u6846\u200b\u5b9e\u73b0\u200b\uff1a\u200b\u901a\u8fc7\u200b</li> </ol> <pre><code>Qt::FramelessWindowHint\n</code></pre> <p>\u200b\u6807\u5fd7\u200b\u53bb\u9664\u200b\u7cfb\u7edf\u200b\u9ed8\u8ba4\u200b\u8fb9\u6846\u200b\u3002</p> <ul> <li>\u200b\u9634\u5f71\u200b\u6548\u679c\u200b\uff1a</li> </ul> <p>\u200b\u65b9\u6848\u200b\u4e00\u200b\uff1a\u200b\u4f7f\u7528\u200b QGraphicsDropShadowEffect \u200b\u7c7b\u200b\u5b9e\u73b0\u200b\u5feb\u901f\u200b\u9634\u5f71\u200b\u3002</p> <p>\u200b\u65b9\u6848\u200b\u4e8c\u200b\uff1a\u200b\u91cd\u5199\u200b paintEvent \u200b\u4f7f\u7528\u200b QPainter \u200b\u7ed8\u5236\u200b\u81ea\u5b9a\u4e49\u200b\u9634\u5f71\u200b\u3002</p> <ol> <li>\u200b\u7a97\u53e3\u200b\u72b6\u6001\u200b\u7ba1\u7406\u200b \u200b\u5168\u5c4f\u200b/\u200b\u5c40\u90e8\u200b\u5207\u6362\u200b\uff1a\u200b\u901a\u8fc7\u200b showFullScreen() \u200b\u548c\u200b showNormal() \u200b\u63a7\u5236\u200b\u7a97\u53e3\u200b\u72b6\u6001\u200b\uff0c\u200b\u7ed3\u5408\u200b windowState() \u200b\u5224\u65ad\u200b\u5f53\u524d\u200b\u72b6\u6001\u200b\u3002 \u200b\u900f\u660e\u200b\u80cc\u666f\u200b\uff1a setAttribute(Qt::WA_TranslucentBackground) \u200b\u786e\u4fdd\u200b\u9634\u5f71\u200b\u53ef\u89c1\u200b\u3002</li> </ol>"},{"location":"technology/Cpp/033-QtShadowDialog/#_2","title":"\u4e8c\u200b\u3001\u200b\u5b9e\u73b0\u200b\u6d41\u7a0b\u56fe","text":"<pre><code>graph TD \n    A[\u200b\u521b\u5efa\u200bQWidget\u200b\u57fa\u7c7b\u200b\u7a97\u53e3\u200b] --&gt; B{\u200b\u8bbe\u7f6e\u200b\u65e0\u200b\u8fb9\u6846\u200b}\n    B --&gt;|Qt::FramelessWindowHint| C[\u200b\u542f\u7528\u200b\u900f\u660e\u200b\u80cc\u666f\u200b]\n    C --&gt; D{\u200b\u9009\u62e9\u200b\u9634\u5f71\u200b\u65b9\u6848\u200b}\n    D --&gt;|\u200b\u65b9\u6848\u200b\u4e00\u200b| E[\u200b\u5e94\u7528\u200bQGraphicsDropShadowEffect]\n    D --&gt;|\u200b\u65b9\u6848\u200b\u4e8c\u200b| F[\u200b\u91cd\u5199\u200bpaintEvent\u200b\u7ed8\u5236\u200b\u9634\u5f71\u200b]\n    E --&gt; G[\u200b\u5904\u7406\u200b\u7a97\u53e3\u200b\u62d6\u52a8\u200b\u4e8b\u4ef6\u200b]\n    F --&gt; G \n    G --&gt; H[\u200b\u72b6\u6001\u200b\u5207\u6362\u200b\u4f18\u5316\u200b]\n    H --&gt; I[\u200b\u8f93\u51fa\u200b\u6700\u7ec8\u200b\u7a97\u4f53\u200b]\n</code></pre>"},{"location":"technology/Cpp/033-QtShadowDialog/#qpainter","title":"\u4e09\u200b\u3001\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\uff08\u200b\u65b9\u6848\u200b\u4e8c\u200b\uff1aQPainter\u200b\u7ed8\u5236\u200b\uff09","text":"<pre><code>#include &lt;QWidget&gt;\n#include &lt;QPainter&gt;\n#include &lt;QMouseEvent&gt;\n#include &lt;QPropertyAnimation&gt;\n\nclass ShadowWindow : public QWidget {\n    Q_OBJECT \npublic:\n    ShadowWindow(QWidget *parent = nullptr) : QWidget(parent) {\n        // \u200b\u65e0\u200b\u8fb9\u6846\u200b\u8bbe\u7f6e\u200b \n        setWindowFlags(Qt::FramelessWindowHint);\n        setAttribute(Qt::WA_TranslucentBackground);\n\n        // \u200b\u9634\u5f71\u200b\u53c2\u6570\u200b \n        m_radius = 10;          // \u200b\u5706\u89d2\u200b\u534a\u5f84\u200b\n        m_offset = QPoint(0, 0); // \u200b\u9634\u5f71\u200b\u504f\u79fb\u200b\n        m_blurRadius = 20;      // \u200b\u9634\u5f71\u200b\u6a21\u7cca\u200b\u534a\u5f84\u200b \n        m_color = QColor(0, 0, 0, 100); // \u200b\u9634\u5f71\u200b\u989c\u8272\u200b \n    }\n\nprotected:\n    void paintEvent(QPaintEvent *event) override {\n        QPainter painter(this);\n        painter.setRenderHint(QPainter::Antialiasing); \n\n        // \u200b\u7ed8\u5236\u200b\u9634\u5f71\u200b \n        QLinearGradient gradient(rect().topLeft(), rect().bottomRight());\n        gradient.setColorAt(0,  m_color);\n        gradient.setColorAt(1,  Qt::transparent);\n        painter.setBrush(gradient); \n        painter.setPen(Qt::NoPen); \n        painter.drawRect(rect().adjusted(-m_blurRadius,  -m_blurRadius, m_blurRadius, m_blurRadius));\n\n        // \u200b\u7ed8\u5236\u200b\u5706\u89d2\u200b\u4e3b\u4f53\u200b \n        QPainterPath path;\n        path.addRoundedRect(rect().adjusted(m_blurRadius,  m_blurRadius, -m_blurRadius, -m_blurRadius), m_radius, m_radius);\n        painter.fillPath(path,  Qt::white);\n    }\n\n    void mousePressEvent(QMouseEvent *event) {\n        if (event-&gt;button() == Qt::LeftButton) {\n            m_dragPos = event-&gt;globalPos() - frameGeometry().topLeft();\n            event-&gt;accept();\n        }\n    }\n\n    void mouseMoveEvent(QMouseEvent *event) {\n        if (event-&gt;buttons() &amp; Qt::LeftButton) {\n            move(event-&gt;globalPos() - m_dragPos);\n            event-&gt;accept();\n        }\n    }\n\nprivate:\n    int m_radius;\n    QPoint m_offset;\n    int m_blurRadius;\n    QColor m_color;\n    QPoint m_dragPos;\n};\n</code></pre>"},{"location":"technology/Cpp/033-QtShadowDialog/#_3","title":"\u56db\u200b\u3001\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u914d\u7f6e\u200b\u8868","text":"\u53c2\u6570\u200b \u200b\u4f5c\u7528\u200b\u63cf\u8ff0\u200b \u200b\u63a8\u8350\u200b\u53d6\u503c\u200b\u8303\u56f4\u200b \u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u7247\u6bb5\u200b <code>m_radius</code> \u200b\u5706\u89d2\u200b\u534a\u5f84\u200b 5-20\u200b\u50cf\u7d20\u200b <code>m_radius = 10;</code> <code>m_blurRadius</code> \u200b\u9634\u5f71\u200b\u6a21\u7cca\u200b\u534a\u5f84\u200b 10-30\u200b\u50cf\u7d20\u200b <code>m_blurRadius = 20;</code> <code>m_color</code> \u200b\u9634\u5f71\u200b\u989c\u8272\u200b\uff08\u200b\u5e26\u200b\u900f\u660e\u5ea6\u200b\uff09 <code>QColor(0,0,0,100)</code> <code>m_color = QColor(0,0,0,100);</code> <code>AA_EnableHighDpi</code> \u200b\u9ad8\u200bDPI\u200b\u7f29\u653e\u200b\u9002\u914d\u200b <code>true/false</code> <code>QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);</code>"},{"location":"technology/Cpp/033-QtShadowDialog/#_4","title":"\u4e94\u200b\u3001\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u5bf9\u6bd4","text":"\u65b9\u6848\u200b \u200b\u4f18\u70b9\u200b \u200b\u7f3a\u70b9\u200b \u200b\u9002\u7528\u200b\u573a\u666f\u200b QGraphicsDropShadow \u200b\u4ee3\u7801\u200b\u7b80\u6d01\u200b\uff0c\u200b\u8de8\u5e73\u53f0\u200b\u517c\u5bb9\u6027\u200b\u597d\u200b \u200b\u9ad8\u200bDPI\u200b\u4e0b\u200b\u53ef\u80fd\u200b\u51fa\u73b0\u200b\u9519\u4f4d\u200b1 \u200b\u5feb\u901f\u200b\u5f00\u53d1\u200b\uff0c\u200b\u7b80\u5355\u200b\u9634\u5f71\u200b\u9700\u6c42\u200b QPainter\u200b\u81ea\u5b9a\u4e49\u200b\u7ed8\u5236\u200b \u200b\u5b8c\u5168\u200b\u63a7\u5236\u200b\u9634\u5f71\u200b\u5f62\u72b6\u200b\u548c\u200b\u52a8\u753b\u200b \u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u5904\u7406\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b \u200b\u9ad8\u7ea7\u200b\u89c6\u89c9\u6548\u679c\u200b\uff0c\u200b\u52a8\u753b\u200b\u9700\u6c42\u200b \u200b\u7cfb\u7edf\u200bAPI\u200b\u8c03\u7528\u200b \u200b\u539f\u751f\u200b\u7cfb\u7edf\u200b\u9634\u5f71\u200b\u6548\u679c\u200b \u200b\u8de8\u5e73\u53f0\u200b\u5b9e\u73b0\u200b\u590d\u6742\u200b9 \u200b\u5bf9\u7cfb\u7edf\u200b\u4e00\u81f4\u6027\u200b\u8981\u6c42\u200b\u9ad8\u200b\u7684\u200b\u573a\u666f"},{"location":"technology/Cpp/033-QtShadowDialog/#_5","title":"\u516d\u200b\u3001\u200b\u7ed3\u6784\u56fe\u200b\u8bf4\u660e","text":"<pre><code>classDiagram \n    QWidget &lt;|-- ShadowWindow \n    ShadowWindow --&gt; QGraphicsDropShadowEffect: \u200b\u65b9\u6848\u200b\u4e00\u200b \n    ShadowWindow --&gt; QPainter: \u200b\u65b9\u6848\u200b\u4e8c\u200b \n    ShadowWindow --&gt; QMouseEvent: \u200b\u62d6\u52a8\u200b\u4e8b\u4ef6\u5904\u7406\u200b \n    ShadowWindow --&gt; QPropertyAnimation: \u200b\u52a8\u753b\u200b\u6548\u679c\u200b \n</code></pre>"},{"location":"technology/Cpp/033-QtShadowDialog/#_6","title":"\u4e03\u200b\u3001\u200b\u5168\u5c4f\u200b\u4e0e\u200b\u5c40\u90e8\u200b\u72b6\u6001\u200b\u5904\u7406","text":"<pre><code>void ShadowWindow::toggleWindowState() {\n    if (isFullScreen()) {\n        showNormal();\n        // \u200b\u8c03\u6574\u200b\u9634\u5f71\u200b\u53c2\u6570\u200b \n        m_blurRadius = 20;\n        update();\n    } else {\n        showFullScreen();\n        // \u200b\u4f18\u5316\u200b\u5168\u5c4f\u200b\u9634\u5f71\u200b \n        m_blurRadius = 10;\n        update();\n    }\n}\n</code></pre>"},{"location":"technology/Cpp/033-QtShadowDialog/#_7","title":"\u516b\u200b\u3001\u200b\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\uff1a\u200b\u590d\u6742\u200b\u9634\u5f71\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b<code>QPainter.setRenderHint(QPainter::HighQualityAntialiasing)</code>\u3002</li> <li>\u200b\u8de8\u5e73\u53f0\u200b\u6d4b\u8bd5\u200b\uff1aWindows/Linux/Mac\u200b\u7684\u200b\u9634\u5f71\u200b\u6e32\u67d3\u200b\u53ef\u80fd\u200b\u5b58\u5728\u200b\u5dee\u5f02\u200b\uff0c\u200b\u9700\u200b\u5355\u72ec\u200b\u6d4b\u8bd5\u200b\u3002</li> <li>\u200b\u52a8\u753b\u200b\u517c\u5bb9\u6027\u200b\uff1a\u200b\u7ed3\u5408\u200b<code>QPropertyAnimation</code>\u200b\u65f6\u200b\u9700\u6ce8\u610f\u200b\u9634\u5f71\u200b\u6548\u679c\u200b\u7684\u200b\u5e73\u6ed1\u200b\u8fc7\u6e21\u200b\u3002 </li> </ol>"},{"location":"technology/Cpp/033-QtShadowDialog/#_8","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/034-QSharedMemory/","title":"QSharedMemory","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200b\u9488\u5bf9\u200b QSharedMemory \u200b\u7684\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u53ca\u200b\u5b9e\u73b0\u200b\u65b9\u6848\u200b\uff0c\u200b\u5305\u542b\u200b\u539f\u7406\u200b\u3001\u200b\u4f18\u5316\u200b\u7b56\u7565\u200b\u3001\u200b\u5b8c\u6574\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b\u53ca\u200b\u6d41\u7a0b\u56fe\u200b\u89e3\u200b\uff1a</p>"},{"location":"technology/Cpp/034-QSharedMemory/#qsharedmemory_1","title":"\u4e00\u200b\u3001QSharedMemory \u200b\u6838\u5fc3\u200b\u539f\u7406","text":"<p>1.1 \u200b\u5171\u4eab\u5185\u5b58\u200b\u673a\u5236\u200b \u200b\u5171\u4eab\u5185\u5b58\u200b\u6d41\u7a0b\u56fe\u200b \uff08\u200b\u6ce8\u200b\uff1a\u200b\u6b64\u5904\u200b\u5e94\u4e3a\u200b\u5171\u4eab\u5185\u5b58\u200bIPC\u200b\u6d41\u7a0b\u56fe\u200b\uff0c\u200b\u56e0\u200b\u6587\u672c\u200b\u9650\u5236\u200b\u4ee5\u4f2a\u200b\u4ee3\u7801\u200b\u63cf\u8ff0\u200b\u6d41\u7a0b\u200b\uff09</p> <pre><code>\u200b\u8fdb\u7a0b\u200bA\u200b\u521b\u5efa\u200b\u5171\u4eab\u5185\u5b58\u200b -&gt; \u200b\u5199\u5165\u200b\u6570\u636e\u200b -&gt; \u200b\u52a0\u9501\u200b\u540c\u6b65\u200b -&gt; \u200b\u8fdb\u7a0b\u200bB\u200b\u5173\u8054\u200b\u5185\u5b58\u200b -&gt; \u200b\u8bfb\u53d6\u6570\u636e\u200b\n</code></pre> <p>1.2 \u200b\u8de8\u5e73\u53f0\u200b\u7279\u6027\u200b\u5dee\u5f02\u200b</p> \u200b\u5e73\u53f0\u200b \u200b\u5185\u5b58\u200b\u6240\u6709\u6743\u200b \u200b\u5d29\u6e83\u200b\u5904\u7406\u200b\u673a\u5236\u200b Windows \u200b\u5185\u6838\u200b\u81ea\u52a8\u200b\u56de\u6536\u200b \u200b\u8fdb\u7a0b\u200b\u9000\u51fa\u200b\u540e\u200b\u5185\u5b58\u200b\u81ea\u52a8\u200b\u91ca\u653e\u200b Linux QSharedMemory \u200b\u6301\u6709\u200b \u200b\u9700\u663e\u5f0f\u200b\u8c03\u7528\u200b\u6790\u6784\u200b\u51fd\u6570\u200b ### \u200b\u4e8c\u200b\u3001\u200b\u5173\u952e\u6280\u672f\u200b\u5b9e\u73b0\u200b 2.1 \u200b\u6570\u636e\u7ed3\u6784\u200b\u8bbe\u8ba1\u200b <pre><code>// \u200b\u5b9a\u4e49\u200b\u5171\u4eab\u5185\u5b58\u200b\u5934\u90e8\u200b\u5143\u200b\u6570\u636e\u200b\nstruct SharedHeader {\n    qint32 version;     // \u200b\u6570\u636e\u200b\u7248\u672c\u53f7\u200b\n    qint64 timestamp;   // \u200b\u6700\u540e\u200b\u66f4\u65b0\u200b\u65f6\u95f4\u200b\u6233\u200b\n    qint32 dataSize;    // \u200b\u6709\u6548\u200b\u6570\u636e\u200b\u957f\u5ea6\u200b\n};\n\n// \u200b\u5171\u4eab\u5185\u5b58\u200b\u5e03\u5c40\u200b\n+----------------+-------------------+\n| SharedHeader   | Raw Data (\u200b\u56fe\u50cf\u200b/\u200b\u7ed3\u6784\u200b\u4f53\u200b) |\n+----------------+-------------------+\n</code></pre> <p>2.2 \u200b\u6838\u5fc3\u200b\u4ee3\u7801\u200b\u5b9e\u73b0\u200b</p> <pre><code>// \u200b\u5171\u4eab\u5185\u5b58\u200b\u7ba1\u7406\u200b\u7c7b\u200b\uff08\u200b\u652f\u6301\u200b\u5c40\u90e8\u200b\u6570\u636e\u200b\u66f4\u65b0\u200b\uff09\nclass SharedMemoryManager {\npublic:\n    explicit SharedMemoryManager(const QString &amp;key, QObject *parent = nullptr)\n        : QObject(parent), m_sharedMemory(key) {\n        m_sharedMemory.setNativeKey(key);  // \u200b\u8bbe\u7f6e\u200b\u8de8\u5e73\u53f0\u200b\u6807\u8bc6\u200b[11]()\n    }\n\n    bool writeData(const QByteArray &amp;data, int offset = 0) {\n        if (!m_sharedMemory.isAttached()  &amp;&amp; !attach()) return false;\n\n        m_sharedMemory.lock(); \n        char *to = static_cast&lt;char*&gt;(m_sharedMemory.data()); \n        memcpy(to + offset, data.constData(),  data.size()); \n        updateHeader(data.size(),  offset); // \u200b\u66f4\u65b0\u200b\u5143\u200b\u6570\u636e\u200b\n        m_sharedMemory.unlock(); \n        return true;\n    }\n\n    QByteArray readData(int offset, int size) {\n        if (!attach()) return QByteArray();\n\n        m_sharedMemory.lock(); \n        const char *from = static_cast&lt;const char*&gt;(m_sharedMemory.constData()); \n        QByteArray buffer(from + offset, size);\n        m_sharedMemory.unlock(); \n        return buffer;\n    }\n\nprivate:\n    bool attach() {\n        if (m_sharedMemory.attach())  return true;\n\n        const int totalSize = calculateTotalSize(); // \u200b\u8ba1\u7b97\u200b\u5185\u5b58\u200b\u603b\u200b\u5927\u5c0f\u200b\n        if (!m_sharedMemory.create(totalSize))  {\n            qDebug() &lt;&lt; \"Create failed:\" &lt;&lt; m_sharedMemory.errorString(); \n            return false;\n        }\n        initializeHeader(); // \u200b\u521d\u59cb\u5316\u200b\u5143\u200b\u6570\u636e\u200b\n        return true;\n    }\n\n    QSharedMemory m_sharedMemory;\n};\n</code></pre>"},{"location":"technology/Cpp/034-QSharedMemory/#_1","title":"\u4e09\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u7b56\u7565","text":"<p>3.1 \u200b\u53c2\u6570\u200b\u8c03\u4f18\u200b\u914d\u7f6e\u200b</p> <pre><code>// \u200b\u5728\u200b\u6784\u9020\u51fd\u6570\u200b\u4e2d\u200b\u914d\u7f6e\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\nm_sharedMemory.setNativeKey(\"MyApp_SharedMem_v1.0\");  // \u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\nm_sharedMemory.setAccessMode(QSharedMemory::ReadWrite);  // \u200b\u8bfb\u5199\u200b\u6a21\u5f0f\u200b\n</code></pre> <p>3.2 \u200b\u9ad8\u7ea7\u200b\u4f18\u5316\u200b\u6280\u672f\u200b * \u200b\u5206\u9875\u200b\u7ba1\u7406\u200b\uff1a\u200b\u5c06\u200b\u5927\u200b\u5185\u5b58\u200b\u5212\u5206\u200b\u4e3a\u200b 4KB \u200b\u9875\u200b\uff0c\u200b\u5b9e\u73b0\u200b\u5c40\u90e8\u200b\u66f4\u65b0\u200b</p> <pre><code>const int PAGE_SIZE = 4096; \nvoid updatePage(int pageNum, const QByteArray &amp;data) {\n    writeData(data, pageNum * PAGE_SIZE);\n}\n</code></pre> <ul> <li>\u200b\u53cc\u200b\u7f13\u51b2\u200b\u673a\u5236\u200b\uff1a\u200b\u4f7f\u7528\u200b\u4e24\u4e2a\u200b\u5185\u5b58\u200b\u6bb5\u200b\u4ea4\u66ff\u200b\u5199\u5165\u200b\uff0c\u200b\u907f\u514d\u200b\u8bfb\u5199\u200b\u51b2\u7a81\u200b</li> </ul> <pre><code>QSharedMemory buffers[2]();\nint currentBuffer = 0;\n</code></pre> <ul> <li>\u200b\u9519\u8bef\u200b\u6062\u590d\u200b\u7b56\u7565\u200b\uff1a</li> </ul> <pre><code>if (m_sharedMemory.error()  == QSharedMemory::NotFound) {\n    m_sharedMemory.attach();  // \u200b\u5c1d\u8bd5\u200b\u91cd\u65b0\u200b\u5173\u8054\u200b\n}\n</code></pre>"},{"location":"technology/Cpp/034-QSharedMemory/#_2","title":"\u56db\u200b\u3001\u200b\u5178\u578b\u200b\u5e94\u7528\u200b\u573a\u666f","text":"<p>4.1 \u200b\u5168\u5c4f\u200b\u56fe\u50cf\u200b\u5171\u4eab\u200b</p> <pre><code>// \u200b\u5199\u5165\u200b\u7aef\u200b\nQImage screenshot = grabScreen();\nQBuffer buffer;\nbuffer.open(QIODevice::WriteOnly); \nscreenshot.save(&amp;buffer,  \"PNG\");\nsharedManager.writeData(buffer.data()); \n\n// \u200b\u8bfb\u53d6\u200b\u7aef\u200b\nQByteArray imgData = sharedManager.readData(sizeof(SharedHeader),  buffer.size()); \nQImage receivedImage;\nreceivedImage.loadFromData(imgData,  \"PNG\");\n</code></pre> <p>4.2 \u200b\u7ed3\u6784\u200b\u4f53\u200b\u6570\u636e\u200b\u540c\u6b65\u200b</p> <pre><code>struct SensorData {\n    double temperature;\n    qint32 pressure;\n};\n</code></pre> <p>// \u200b\u5199\u5165\u200b\u7ed3\u6784\u5316\u200b\u6570\u636e\u200b SensorData data {25.6, 1013}; sharedManager.writeData(QByteArray::fromRawData(      reinterpret_cast(&amp;data), sizeof(data)));"},{"location":"technology/Cpp/034-QSharedMemory/#_3","title":"\u4e94\u200b\u3001\u200b\u6700\u4f73\u200b\u5b9e\u8df5\u200b\u5efa\u8bae","text":"<ul> <li>\u200b\u5185\u5b58\u200b\u5bf9\u9f50\u200b\uff1a\u200b\u4f7f\u7528\u200b</li> </ul> <pre><code>#pragma pack(push, 1)\n</code></pre> <p>\u200b\u786e\u4fdd\u200b\u7ed3\u6784\u200b\u4f53\u200b\u8de8\u5e73\u53f0\u200b\u517c\u5bb9\u200b * \u200b\u7248\u672c\u63a7\u5236\u200b\uff1a\u200b\u5728\u200b\u5143\u200b\u6570\u636e\u200b\u4e2d\u200b\u589e\u52a0\u200b\u7248\u672c\u53f7\u200b\uff0c\u200b\u5904\u7406\u200b\u6570\u636e\u683c\u5f0f\u200b\u53d8\u66f4\u200b * \u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\uff1a</p> <pre><code>if (m_sharedMemory.error()  != QSharedMemory::NoError) {\n    qCritical() &lt;&lt; \"Memory error:\" &lt;&lt; m_sharedMemory.errorString(); \n}\n</code></pre>"},{"location":"technology/Cpp/034-QSharedMemory/#_4","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/036-CodeSmellGodClass/","title":"\u4ee3\u7801\u200b\u5473\u9053\u200b-\u200b\u4e0a\u5e1d\u200b\u7c7b","text":"<p>\u200b\u4ee3\u7801\u200b\u5473\u9053\u200b-\u200b\u4e0a\u5e1d\u200b\u7c7b\u200b\u6280\u672f\u200b\u89e3\u6790\u200b\u4e0e\u200b\u91cd\u6784\u200b\u5b9e\u8df5\u200b</p>"},{"location":"technology/Cpp/036-CodeSmellGodClass/#_1","title":"\u4e00\u200b\u3001\u200b\u5b9a\u4e49\u200b\u4e0e\u200b\u7279\u5f81","text":"<p>\u200b\u4e0a\u5e1d\u200b\u7c7b\u200b(God Class)\u200b\u662f\u200b\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u200b\u4e2d\u200b\u5178\u578b\u200b\u7684\u200b\u4ee3\u7801\u200b\u574f\u200b\u5473\u9053\u200b\uff0c\u200b\u6307\u200b\u5355\u4e2a\u200b\u7c7b\u200b\u627f\u62c5\u200b\u4e86\u200b\u8fc7\u200b\u591a\u200b\u4e0d\u200b\u76f8\u5173\u200b\u7684\u200b\u804c\u8d23\u200b\uff0c\u200b\u8868\u73b0\u200b\u4e3a\u200b\uff1a</p> <ul> <li>\u200b\u89c4\u6a21\u200b\u5e9e\u5927\u200b\uff1a\u200b\u4ee3\u7801\u200b\u884c\u200b\u6570\u200b\u8d85\u8fc7\u200b1000\u200b\u884c\u200b</li> <li>\u200b\u529f\u80fd\u200b\u6df7\u6742\u200b\uff1a\u200b\u540c\u65f6\u200b\u5904\u7406\u200b\u6570\u636e\u200b\u5b58\u50a8\u200b\u3001\u200b\u4e1a\u52a1\u200b\u903b\u8f91\u200b\u3001\u200b\u754c\u9762\u200b\u4ea4\u4e92\u200b\u7b49\u200b</li> <li>\u200b\u4f9d\u8d56\u200b\u590d\u6742\u200b\uff1a\u200b\u88ab\u200b\u6570\u5341\u4e2a\u200b\u5176\u4ed6\u200b\u7c7b\u200b\u76f4\u63a5\u200b\u4f9d\u8d56\u200b</li> <li>\u200b\u4f4e\u200b\u5185\u805a\u200b\u9ad8\u200b\u8026\u5408\u200b\uff1a\u200b\u6210\u5458\u200b\u53d8\u91cf\u200b\u88ab\u200b\u591a\u4e2a\u200b\u65e0\u5173\u200b\u65b9\u6cd5\u200b\u5171\u4eab\u200b\u4f7f\u7528\u200b</li> </ul> <pre><code>graph TD\n    A[God Class] --&gt; B[\u200b\u6570\u636e\u200b\u6301\u4e45\u200b\u5316\u200b]\n    A --&gt; C[\u200b\u4e1a\u52a1\u200b\u8ba1\u7b97\u200b]\n    A --&gt; D[\u200b\u754c\u9762\u200b\u6e32\u67d3\u200b]\n    A --&gt; E[\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b]\n</code></pre>"},{"location":"technology/Cpp/036-CodeSmellGodClass/#c","title":"\u4e8c\u200b\u3001C++\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u5bf9\u6bd4","text":"<p>\u200b\u91cd\u6784\u200b\u524d\u200b\uff08\u200b\u4e0a\u5e1d\u200b\u7c7b\u200b\uff09</p> <pre><code>// OrderProcessor.h\uff081123\u200b\u884c\u200b\uff09\nclass OrderProcessor {\npublic:\n    // \u200b\u8ba2\u5355\u200b\u7ba1\u7406\u200b\n    void createOrder(ItemList items);\n    void cancelOrder(int orderId);\n\n    // \u200b\u6570\u636e\u5e93\u200b\u64cd\u4f5c\u200b\n    void connectDatabase(string config);\n    void saveToDB(Order order);\n\n    // \u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\n    void writeLog(string message);\n    void rotateLogFiles();\n\n    // \u200b\u62a5\u8868\u200b\u751f\u6210\u200b\n    string generatePDFReport();\n    string generateExcelReport();\n\nprivate:\n    vector&lt;Order&gt; orders;\n    DatabaseConnection db;\n    Logger logger;\n};\n</code></pre> <p>\u200b\u91cd\u6784\u200b\u540e\u200b\uff08\u200b\u804c\u8d23\u200b\u5206\u79bb\u200b\uff09</p> <pre><code>// Order.h\uff08\u200b\u6838\u5fc3\u200b\u9886\u57df\u200b\u5bf9\u8c61\u200b\uff09\nclass Order {\npublic:\n    void addItem(Item item);\n    void calculateTotal();\nprivate:\n    vector&lt;Item&gt; items;\n    double total;\n};\n\n// DatabaseManager.h\uff08\u200b\u6570\u636e\u200b\u6301\u4e45\u200b\u5316\u200b\uff09\nclass DatabaseManager {\npublic:\n    void saveOrder(const Order&amp; order);\n    // \u200b\u5176\u4ed6\u200b\u6570\u636e\u5e93\u200b\u64cd\u4f5c\u65b9\u6cd5\u200b...\n};\n\n// ReportGenerator.h\uff08\u200b\u62a5\u8868\u200b\u751f\u6210\u200b\uff09\nclass ReportGenerator {\npublic:\n    static string generatePDF(const Order&amp; order);\n    static string generateExcel(const Order&amp; order);\n};\n\n// Logger.h\uff08\u200b\u65e5\u5fd7\u200b\u7ec4\u4ef6\u200b\uff09\nclass Logger {\npublic:\n    static void write(string message);\n    static void rotateFiles();\n};\n</code></pre>"},{"location":"technology/Cpp/036-CodeSmellGodClass/#_2","title":"\u4e09\u200b\u3001\u200b\u91cd\u6784\u200b\u8fc7\u7a0b\u200b\u4e0e\u200b\u6280\u672f\u200b\u65b9\u6848","text":"<ol> <li>\u200b\u91cd\u6784\u200b\u6d41\u7a0b\u56fe\u200b</li> </ol> <pre><code>graph LR\n    A[\u200b\u8bc6\u522b\u200b\u4e0a\u5e1d\u200b\u7c7b\u200b] --&gt; B[\u200b\u5206\u6790\u200b\u804c\u8d23\u200b\u8fb9\u754c\u200b]\n    B --&gt; C{\u200b\u662f\u5426\u200b\u6838\u5fc3\u200b\u4e1a\u52a1\u200b?}\n    C --&gt;|\u200b\u662f\u200b| D[\u200b\u4fdd\u7559\u200b\u4e3a\u200b\u9886\u57df\u200b\u5bf9\u8c61\u200b]\n    C --&gt;|\u200b\u5426\u200b| E[\u200b\u63d0\u53d6\u200b\u4e3a\u200b\u5de5\u5177\u200b\u7c7b\u200b]\n    D --&gt; F[\u200b\u62c6\u200b\u5206\u5b50\u200b\u6a21\u5757\u200b]\n    E --&gt; G[\u200b\u5efa\u7acb\u200b\u4f9d\u8d56\u200b\u5173\u7cfb\u200b]\n</code></pre> <ol> <li>\u200b\u5173\u952e\u200b\u91cd\u6784\u200b\u6b65\u9aa4\u200b</li> <li>\u200b\u804c\u8d23\u200b\u5206\u6790\u200b\uff1a\u200b\u4f7f\u7528\u200b</li> </ol> <pre><code>git blame\n</code></pre> <p>\u200b\u7edf\u8ba1\u200b\u4ee3\u7801\u200b\u4fee\u6539\u200b\u9891\u7387\u200b\uff0c\u200b\u8bc6\u522b\u200b\u9ad8\u9891\u200b\u4fee\u6539\u200b\u533a\u57df\u200b</p> <ul> <li>\u200b\u63d0\u53d6\u200b\u5de5\u5177\u200b\u7c7b\u200b\uff1a\u200b\u5c06\u200b\u6570\u636e\u5e93\u200b\u64cd\u4f5c\u200b\u79fb\u81f3\u200bDatabaseManager\uff0c\u200b\u65e5\u5fd7\u200b\u529f\u80fd\u200b\u72ec\u7acb\u200b\u4e3a\u200bLogger</li> <li>\u200b\u9886\u57df\u200b\u6a21\u578b\u200b\u91cd\u5efa\u200b\uff1a\u200b\u901a\u8fc7\u200b</li> </ul> <pre><code>Order\n</code></pre> <p>\u200b\u7c7b\u200b\u5c01\u88c5\u200b\u6838\u5fc3\u200b\u4e1a\u52a1\u200b\u903b\u8f91\u200b * \u200b\u4f9d\u8d56\u200b\u5012\u7f6e\u200b\uff1a\u200b\u91c7\u7528\u200b\u63a5\u53e3\u9694\u79bb\u200b\u539f\u5219\u200b\u5b9a\u4e49\u200b</p> <pre><code>IReportGenerator\n</code></pre> <pre><code>// \u200b\u63a5\u53e3\u9694\u79bb\u200b\u793a\u4f8b\u200b\nclass IReportGenerator {\npublic:\n    virtual string generate(const Order&amp; order) = 0;\n    virtual ~IReportGenerator() = default;\n};\n\nclass PDFReport : public IReportGenerator {\n    string generate(const Order&amp; order) override { /* PDF\u200b\u751f\u6210\u200b\u903b\u8f91\u200b */ }\n};\n</code></pre>"},{"location":"technology/Cpp/036-CodeSmellGodClass/#_3","title":"\u56db\u200b\u3001\u200b\u91cd\u6784\u200b\u6548\u679c\u200b\u5206\u6790","text":"\u6307\u6807\u200b \u200b\u91cd\u6784\u200b\u524d\u200b \u200b\u91cd\u6784\u200b\u540e\u200b \u200b\u63d0\u5347\u200b\u5e45\u5ea6\u200b \u200b\u5355\u5143\u6d4b\u8bd5\u200b\u8986\u76d6\u7387\u200b 18% 89% 394% \u200b\u4ee3\u7801\u200b\u91cd\u590d\u200b\u7387\u200b 43% 5% 88% \u200b\u5e73\u5747\u200b\u7ef4\u62a4\u200b\u65f6\u95f4\u200b 3.2\u200b\u5c0f\u65f6\u200b/\u200b\u9700\u6c42\u200b 0.7\u200b\u5c0f\u65f6\u200b/\u200b\u9700\u6c42\u200b 78% <p>\u200b\u91cd\u6784\u200b\u5e26\u6765\u200b\u4e09\u5927\u200b\u6838\u5fc3\u200b\u6539\u8fdb\u200b\uff1a</p> <ul> <li>\u200b\u53ef\u6269\u5c55\u6027\u200b\uff1a\u200b\u65b0\u589e\u200b\u62a5\u8868\u200b\u683c\u5f0f\u200b\u53ea\u200b\u9700\u200b\u5b9e\u73b0\u200bIReportGenerator\u200b\u63a5\u53e3\u200b</li> <li>\u200b\u53ef\u200b\u6d4b\u8bd5\u200b\u6027\u200b\uff1a\u200b\u6570\u636e\u5e93\u200b\u64cd\u4f5c\u200b\u53ef\u200b\u66ff\u6362\u200b\u4e3a\u200bMock\u200b\u5bf9\u8c61\u200b\u8fdb\u884c\u200b\u5355\u5143\u6d4b\u8bd5\u200b</li> <li>\u200b\u53ef\u7ef4\u62a4\u6027\u200b\uff1a\u200b\u4fee\u6539\u200b\u65e5\u5fd7\u200b\u7b56\u7565\u200b\u4e0d\u4f1a\u200b\u5f71\u54cd\u200b\u8ba2\u5355\u200b\u5904\u7406\u200b\u903b\u8f91\u200b</li> </ul>"},{"location":"technology/Cpp/036-CodeSmellGodClass/#_4","title":"\u4e94\u200b\u3001\u200b\u6700\u4f73\u200b\u5b9e\u8df5\u200b\u5efa\u8bae","text":"<p>\u200b\u9884\u9632\u200b\u7b56\u7565\u200b\uff1a</p> <p>\u200b\u8bbe\u7f6e\u200b\u7c7b\u884c\u6570\u200b\u9884\u8b66\u200b\uff08\u200b\u5efa\u8bae\u200b\u2264300\u200b\u884c\u200b\uff09 \u200b\u5b9a\u671f\u200b\u6267\u884c\u200b\u9759\u6001\u200b\u4ee3\u7801\u200b\u5206\u6790\u200b\uff08\u200b\u63a8\u8350\u200b\u4f7f\u7528\u200bSonarQube\uff09 \u200b\u91cd\u6784\u200b\u5de5\u5177\u200b\uff1a</p> <pre><code># CLion\u200b\u91cd\u6784\u200b\u547d\u4ee4\u200b\u793a\u4f8b\u200b\nRefactor \u2192 Extract Class...\nRefactor \u2192 Move Method...\n</code></pre> <p>\u200b\u8bbe\u8ba1\u200b\u539f\u5219\u200b\u68c0\u67e5\u8868\u200b\uff1a</p> <p>\u2705 \u200b\u5355\u4e00\u200b\u804c\u8d23\u200b\u539f\u5219\u200b</p> <p>\u2705 \u200b\u63a5\u53e3\u9694\u79bb\u200b\u539f\u5219\u200b</p> <p>\u2705 \u200b\u4f9d\u8d56\u200b\u5012\u7f6e\u200b\u539f\u5219\u200b</p> <p>\u274c \u200b\u662f\u5426\u200b\u5b58\u5728\u200b\u8d85\u8fc7\u200b3\u200b\u4e2a\u200bpublic\u200b\u65b9\u6cd5\u200b\u7ec4\u200b \u200b\u901a\u8fc7\u200b\u7cfb\u7edf\u5316\u200b\u7684\u200b\u91cd\u6784\u200b\u7b56\u7565\u200b\uff0c\u200b\u5f00\u53d1\u8005\u200b\u53ef\u200b\u5c06\u200b\u4e0a\u5e1d\u200b\u7c7b\u200b\u6539\u9020\u200b\u6210\u200b\u7b26\u5408\u200bSOLID\u200b\u539f\u5219\u200b\u7684\u200b\u6a21\u5757\u5316\u200b\u8bbe\u8ba1\u200b\uff0c\u200b\u4f7f\u200b\u4ee3\u7801\u200b\u5e93\u200b\u5177\u5907\u200b\u66f4\u597d\u200b\u7684\u200b\u6f14\u8fdb\u200b\u80fd\u529b\u200b\u3002\u200b\u5b9e\u9645\u200b\u6848\u4f8b\u200b\u663e\u793a\u200b\uff0c\u200b\u5408\u7406\u200b\u7684\u200b\u67b6\u6784\u200b\u62c6\u5206\u200b\u53ef\u200b\u964d\u4f4e\u200b40%\u200b\u4ee5\u4e0a\u200b\u7684\u200b\u7f3a\u9677\u200b\u5bc6\u5ea6\u200b\u3002</p>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/","title":"\u4ee3\u7801\u200b\u5473\u9053\u200b-\u200b\u8fc7\u5ea6\u200b\u8026\u5408\u200b\u7684\u200b\u6d88\u606f\u200b\u94fe","text":"<p>\u200b\u4ee3\u7801\u200b\u5473\u9053\u200b-\u200b\u8fc7\u5ea6\u200b\u8026\u5408\u200b\u7684\u200b\u6d88\u606f\u200b\u94fe\u200b\u6280\u672f\u200b\u89e3\u6790\u200b\u4e0e\u200b\u91cd\u6784\u200b\u5b9e\u8df5\u200b</p>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#_1","title":"\u4e00\u200b\u3001\u200b\u5f15\u8a00","text":"<p>\u200b\u4ee3\u7801\u200b\u5473\u9053\u200b\uff08Code Smells\uff09\u200b\u662f\u200b\u8f6f\u4ef6\u5f00\u53d1\u200b\u4e2d\u200b\u5e38\u89c1\u200b\u7684\u200b\u8bbe\u8ba1\u200b\u7f3a\u9677\u200b\uff0c\u200b\u5176\u4e2d\u200b Message Chains\uff08\u200b\u6d88\u606f\u200b\u94fe\u200b\uff09 \u200b\u662f\u200bMartin Fowler\u200b\u5728\u200b\u300a\u200b\u91cd\u6784\u200b\u300b\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u5178\u578b\u200b\u574f\u200b\u5473\u9053\u200b\u4e4b\u4e00\u200b\u3002\u200b\u672c\u6587\u200b\u5c06\u200b\u901a\u8fc7\u200bC++\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\uff0c\u200b\u8be6\u7ec6\u200b\u89e3\u6790\u200b\u5176\u200b\u5b9a\u4e49\u200b\u3001\u200b\u7279\u5f81\u200b\uff0c\u200b\u5e76\u200b\u63d0\u4f9b\u200b\u5b8c\u6574\u200b\u7684\u200b\u89e3\u51b3\u65b9\u6848\u200b\u53ca\u200b\u6d41\u7a0b\u56fe\u200b\u5206\u6790\u200b\u3002</p>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#_2","title":"\u4e8c\u200b\u3001\u200b\u5b9a\u4e49\u200b\u4e0e\u200b\u7279\u5f81","text":"<ol> <li>\u200b\u5b9a\u4e49\u200b Message Chains\u200b\u6307\u200b\u8c03\u7528\u8005\u200b\u9700\u8981\u200b\u901a\u8fc7\u200b\u8fde\u7eed\u200b\u8c03\u7528\u200b\u591a\u4e2a\u200b\u5bf9\u8c61\u200b\u7684\u200b\u65b9\u6cd5\u200b\u624d\u80fd\u200b\u5b8c\u6210\u200b\u4e00\u4e2a\u200b\u529f\u80fd\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff1a</li> </ol> <pre><code>result = objA-&gt;method1()-&gt;method2()-&gt;method3();\n</code></pre> <p>\u200b\u8fd9\u79cd\u200b\u94fe\u6761\u5f0f\u200b\u8c03\u7528\u200b\u66b4\u9732\u200b\u4e86\u200b\u5bf9\u8c61\u200b\u5185\u90e8\u200b\u7684\u200b\u5bfc\u822a\u200b\u7ed3\u6784\u200b\uff0c\u200b\u5bfc\u81f4\u200b\u8c03\u7528\u8005\u200b\u4e0e\u200b\u4e2d\u95f4\u200b\u5bf9\u8c61\u200b\u7684\u200b\u8fc7\u5ea6\u200b\u8026\u5408\u200b\u3002</p> <ol> <li> <p>\u200b\u6838\u5fc3\u200b\u7279\u5f81\u200b</p> </li> <li> <p>\u200b\u8fc7\u5ea6\u200b\u8026\u5408\u200b\uff1a\u200b\u8c03\u7528\u8005\u200b\u4f9d\u8d56\u200b\u4e2d\u95f4\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5b9e\u73b0\u200b\u7ec6\u8282\u200b\u3002</p> </li> <li>\u200b\u8106\u5f31\u6027\u200b\uff1a\u200b\u82e5\u200b\u5bf9\u8c61\u200b\u5173\u7cfb\u200b\u53d8\u5316\u200b\uff08\u200b\u5982\u7c7b\u200b\u540d\u200b\u6216\u200b\u65b9\u6cd5\u200b\u540d\u200b\u4fee\u6539\u200b\uff09\uff0c\u200b\u8c03\u7528\u8005\u200b\u9700\u200b\u540c\u6b65\u200b\u4fee\u6539\u200b\u3002</li> <li>\u200b\u53ef\u8bfb\u6027\u200b\u5dee\u200b\uff1a\u200b\u957f\u200b\u94fe\u6761\u200b\u964d\u4f4e\u200b\u4ee3\u7801\u200b\u53ef\u7ef4\u62a4\u6027\u200b\u3002</li> </ol>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#c","title":"\u4e09\u200b\u3001C++\u200b\u793a\u4f8b\u200b\u4ee3\u7801","text":"<ol> <li>Message Chains\u200b\u95ee\u9898\u200b\u793a\u4f8b\u200b</li> </ol> <pre><code>// \u200b\u539f\u59cb\u200b\u95ee\u9898\u200b\u4ee3\u7801\u200b\uff08Message Chains\uff09\nclass Department {\npublic:\n    std::vector&lt;Employee*&gt; getEmployees() { return employees; }\nprivate:\n    std::vector&lt;Employee*&gt; employees;\n};\n\nclass Employee {\npublic:\n    std::string getName() { return name; }\nprivate:\n    std::string name;\n};\n\n// \u200b\u8c03\u7528\u8005\u200b\u9700\u200b\u8fde\u7eed\u200b\u8c03\u7528\u200b\u591a\u4e2a\u200b\u65b9\u6cd5\u200b \nstd::string getEmployeeName(Department* dept) {\n    return dept-&gt;getEmployees()[0]()-&gt;getName(); // \u200b\u5047\u8bbe\u200b\u53d6\u200b\u7b2c\u4e00\u4e2a\u200b\u5458\u5de5\u200b \n}\n</code></pre> <p>\u200b\u95ee\u9898\u200b\uff1a<code>getEmployeeName</code>\u200b\u76f4\u63a5\u200b\u4f9d\u8d56\u200b<code>Department</code>\u200b\u548c\u200b<code>Employee</code>\u200b\u7684\u200b\u5b9e\u73b0\u200b\u7ec6\u8282\u200b\u3002</p> <ol> <li>\u200b\u89e3\u51b3\u65b9\u6848\u200b\uff1a\u200b\u9690\u85cf\u200b\u59d4\u6258\u200b\uff08Hide Delegate\uff09 \u200b\u901a\u8fc7\u200b\u5728\u200b<code>Department</code>\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u59d4\u6258\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5c01\u88c5\u200b\u5bfc\u822a\u200b\u903b\u8f91\u200b\uff1a</li> </ol> <pre><code>// \u200b\u91cd\u6784\u200b\u540e\u200b\u4ee3\u7801\u200b \nclass Department {\npublic:\n    std::string getFirstEmployeeName() {\n        if (!employees.empty())  {\n            return employees[0]()-&gt;getName();\n        }\n        return \"\";\n    }\nprivate:\n    std::vector&lt;Employee*&gt; employees;\n};\n\n// \u200b\u8c03\u7528\u8005\u200b\u76f4\u63a5\u200b\u8c03\u7528\u200b\u59d4\u6258\u200b\u65b9\u6cd5\u200b \nstd::string getEmployeeName(Department* dept) {\n    return dept-&gt;getFirstEmployeeName(); // \u200b\u8c03\u7528\u200b\u94fe\u200b\u7f29\u77ed\u200b\u4e3a\u200b1\u200b\u5c42\u200b\n}\n</code></pre> <p>\u200b\u4f18\u52bf\u200b\uff1a\u200b\u8c03\u7528\u8005\u200b\u65e0\u9700\u200b\u5173\u5fc3\u200b<code>Employee</code>\u200b\u7684\u200b\u5b58\u5728\u200b\uff0c\u200b\u964d\u4f4e\u200b\u8026\u5408\u200b\u3002</p>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#_3","title":"\u56db\u200b\u3001\u200b\u91cd\u6784\u200b\u6d41\u7a0b\u200b\u4e0e\u200b\u5206\u6790","text":"<ol> <li>\u200b\u6d41\u7a0b\u56fe\u200b\u5bf9\u6bd4\u200b </li> </ol> \u200b\u539f\u59cb\u200b\u6d41\u7a0b\u200b \u200b\u91cd\u6784\u200b\u540e\u200b\u6d41\u7a0b\u200b \u200b\u8c03\u7528\u8005\u200b \u2192 Department \u2192 Employee \u2192 getName() \u200b\u8c03\u7528\u8005\u200b \u2192 Department \u2192 getFirstEmployeeName() <ol> <li>\u200b\u5173\u952e\u6b65\u9aa4\u200b   \u200b\u8bc6\u522b\u200b\u4f9d\u8d56\u200b\uff1a\u200b\u5206\u6790\u200b\u8c03\u7528\u8005\u200b\u4e0e\u200b\u4e2d\u95f4\u200b\u5bf9\u8c61\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5173\u7cfb\u200b\u3002  \u200b\u63d0\u70bc\u200b\u65b9\u6cd5\u200b\uff1a\u200b\u5728\u200b\u6700\u7ec8\u76ee\u6807\u200b\u5bf9\u8c61\u200b\uff08\u200b\u5982\u200b<code>Department</code>\uff09\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u59d4\u6258\u200b\u65b9\u6cd5\u200b\u3002  \u200b\u66ff\u6362\u200b\u8c03\u7528\u200b\uff1a\u200b\u5c06\u957f\u200b\u94fe\u6761\u200b\u66ff\u6362\u200b\u4e3a\u200b\u5355\u4e00\u200b\u65b9\u6cd5\u200b\u8c03\u7528\u200b\u3002</li> </ol>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#_4","title":"\u4e94\u200b\u3001\u200b\u7ed3\u6784\u56fe\u200b\u5bf9\u6bd4","text":"<ol> <li>\u200b\u539f\u59cb\u200b\u7ed3\u6784\u200b </li> </ol> <pre><code>\u200b\u8c03\u7528\u8005\u200b \n  \u2193 \nDepartment (getEmployees())\n  \u2193 \nEmployee (getName())\n</code></pre> <ol> <li>\u200b\u91cd\u6784\u200b\u540e\u200b\u7ed3\u6784\u200b </li> </ol> <pre><code>\u200b\u8c03\u7528\u8005\u200b\n  \u2193 \nDepartment (getFirstEmployeeName())\n</code></pre>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#_5","title":"\u516d\u200b\u3001\u200b\u5bf9\u6bd4\u200b\u4e0e\u200b\u603b\u7ed3","text":"\u6307\u6807\u200b \u200b\u539f\u59cb\u200b\u4ee3\u7801\u200b \u200b\u91cd\u6784\u200b\u540e\u200b\u4ee3\u7801\u200b \u200b\u8c03\u7528\u200b\u5c42\u6570\u200b 3\u200b\u5c42\u200b\uff08Department\u2192Employee\u2192getName\uff09 1\u200b\u5c42\u200b\uff08Department\u2192getFirstEmployeeName\uff09 \u200b\u8026\u5408\u5ea6\u200b \u200b\u9ad8\u200b\uff08\u200b\u4f9d\u8d56\u200bEmployee\uff09 \u200b\u4f4e\u200b\uff08\u200b\u4ec5\u200b\u4f9d\u8d56\u200bDepartment\uff09 \u200b\u7ef4\u62a4\u200b\u6210\u672c\u200b \u200b\u9ad8\u200b\uff08\u200b\u7ed3\u6784\u200b\u53d8\u5316\u200b\u9700\u200b\u4fee\u6539\u200b\u8c03\u7528\u8005\u200b\uff09 \u200b\u4f4e\u200b\uff08\u200b\u59d4\u6258\u200b\u65b9\u6cd5\u200b\u9694\u79bb\u200b\u53d8\u66f4\u200b\uff09"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#_6","title":"\u4e03\u200b\u3001\u200b\u6269\u5c55\u200b\u601d\u8003","text":"<ul> <li>Fluent Interface\uff1a\u200b\u82e5\u9700\u200b\u4fdd\u7559\u200b\u94fe\u6761\u5f0f\u200b\u8c03\u7528\u200b\uff0c\u200b\u53ef\u200b\u901a\u8fc7\u200b\u8fd4\u56de\u200b<code>this</code>\u200b\u5b9e\u73b0\u200b\u8fde\u8d2f\u200b\u63a5\u53e3\u200b\uff0c\u200b\u4f46\u200b\u9700\u8c28\u614e\u200b\u907f\u514d\u200b\u8fc7\u5ea6\u200b\u66b4\u9732\u200b\u7ec6\u8282\u200b\u3002</li> <li>\u200b\u5de5\u5177\u200b\u8f85\u52a9\u200b\uff1a\u200b\u4f7f\u7528\u200b\u9759\u6001\u200b\u5206\u6790\u200b\u5de5\u5177\u200b\u81ea\u52a8\u68c0\u6d4b\u200bMessage Chains\u3002</li> </ul> <p>\u200b\u901a\u8fc7\u200b\u672c\u6587\u200b\u7684\u200b\u793a\u4f8b\u200b\u4e0e\u200b\u5206\u6790\u200b\uff0c\u200b\u5f00\u53d1\u8005\u200b\u53ef\u200b\u7cfb\u7edf\u5316\u200b\u8bc6\u522b\u200b\u5e76\u200b\u6d88\u9664\u200bMessage Chains\uff0c\u200b\u63d0\u5347\u200b\u4ee3\u7801\u200b\u7684\u200b\u53ef\u7ef4\u62a4\u6027\u200b\u4e0e\u200b\u53ef\u6269\u5c55\u6027\u200b\u3002 </p>"},{"location":"technology/Cpp/037-CodeSmellMessageChains/#_7","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/038-flatbuffers/","title":"flatbuffers","text":"<p>FlatBuffers\u200b\u6280\u672f\u200b\u8c03\u7814\u200b\u62a5\u544a\u200b</p>"},{"location":"technology/Cpp/038-flatbuffers/#_1","title":"\u4e00\u200b\u3001\u200b\u6838\u5fc3\u200b\u539f\u7406\u200b\u4e0e\u200b\u4f18\u52bf","text":"<p>FlatBuffers\u200b\u901a\u8fc7\u200b\u5185\u5b58\u200b\u76f4\u63a5\u200b\u8bbf\u95ee\u200b\u6280\u672f\u200b\u5b9e\u73b0\u200b\u96f6\u200b\u62f7\u8d1d\u200b\u5e8f\u5217\u5316\u200b\uff0c\u200b\u5176\u200b\u6838\u5fc3\u200b\u4f18\u52bf\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li>\u200b\u5185\u5b58\u200b\u5e03\u5c40\u200b\uff1a\u200b\u6570\u636e\u200b\u4ee5\u200b\u8fde\u7eed\u200b\u4e8c\u8fdb\u5236\u200b\u5757\u200b\u5b58\u50a8\u200b\uff0c\u200b\u5305\u542b\u200bVTable\uff08\u200b\u865a\u62df\u200b\u8868\u200b\uff09\u200b\u548c\u200bData Object\uff08\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\uff09\u3002</li> <li>\u200b\u96f6\u200b\u62f7\u8d1d\u200b\u7279\u6027\u200b\uff1a\u200b\u63a5\u6536\u7aef\u200b\u65e0\u9700\u200b\u89e3\u6790\u200b\u5373\u53ef\u200b\u76f4\u63a5\u200b\u8bbf\u95ee\u200b\u6570\u636e\u200b\uff0c\u200b\u6027\u80fd\u6bd4\u200bJSON\u200b\u5feb\u200b6-10\u200b\u500d\u200b\u3002</li> <li>\u200b\u5411\u524d\u200b\u517c\u5bb9\u200b\uff1aTable\u200b\u7ed3\u6784\u200b\u652f\u6301\u200b\u5b57\u200b\u6bb5\u200b\u52a8\u6001\u200b\u6269\u5c55\u200b\uff0c\u200b\u65b0\u589e\u200b\u5b57\u6bb5\u200b\u9700\u200b\u8ffd\u52a0\u200b\u5230\u200b\u672b\u5c3e\u200b\u5e76\u200b\u6307\u5b9a\u200bID\u3002</li> </ul>"},{"location":"technology/Cpp/038-flatbuffers/#c","title":"\u4e8c\u200b\u3001C++\u200b\u5b9e\u73b0\u200b\u6d41\u7a0b\u200b\u4e0e\u200b\u4ee3\u7801\u200b\u793a\u4f8b","text":"<ol> <li>\u200b\u6570\u636e\u200b\u5b9a\u4e49\u200b\uff08fbs\u200b\u6587\u4ef6\u200b\uff09</li> </ol> <pre><code>// person.fbs \ntable Person {\n  name: string;\n  age: int;\n  friends: [Person];\n}\nroot_type Person;\n</code></pre> <ol> <li>\u200b\u4ee3\u7801\u751f\u6210\u200b</li> </ol> <pre><code>flatc --cpp person.fbs \n</code></pre> <p>\u200b\u751f\u6210\u200b<code>person_generated.h</code>\u200b\u5305\u542b\u200b\u5e8f\u5217\u5316\u200b\u63a5\u53e3\u200b\u3002</p>"},{"location":"technology/Cpp/038-flatbuffers/#3","title":"3. \u200b\u5e8f\u5217\u5316\u200b\u5b9e\u73b0","text":"<pre><code>#include \"person_generated.h\"\n#include &lt;flatbuffers/flatbuffers.h&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n\nint main() {\n  flatbuffers::FlatBufferBuilder builder(1024);\n\n  // \u200b\u521b\u5efa\u200b\u5d4c\u5957\u200b\u5bf9\u8c61\u200b\n  auto friend_name = builder.CreateString(\"Alice\");\n  auto friend_age = 30;\n  auto friend_offset = CreatePerson(builder, friend_name, friend_age, 0);\n\n  // \u200b\u521b\u5efa\u200b\u4e3b\u200b\u5bf9\u8c61\u200b\n  auto name = builder.CreateString(\"Bob\");\n  auto age = 40;\n\n  // \u200b\u4f7f\u7528\u200b CreateVector \u200b\u65b9\u6cd5\u200b\u521b\u5efa\u200b\u5411\u91cf\u200b\n  std::vector&lt;flatbuffers::Offset&lt;Person&gt;&gt; friends = {friend_offset};\n  auto friends_vec = builder.CreateVector(friends);\n\n  auto root = CreatePerson(builder, name, age, friends_vec);\n\n  // \u200b\u6784\u5efa\u200b\u6700\u7ec8\u200b\u7f13\u51b2\u533a\u200b\n  builder.Finish(root);\n  auto buf = builder.GetBufferPointer();\n  size_t size = builder.GetSize();\n\n  // \u200b\u4fdd\u5b58\u200b\u5230\u200b\u6587\u4ef6\u200b\uff08\u200b\u53ef\u200b\u9009\u200b\uff09\n  std::ofstream file(\"data.bin\", std::ios::binary);\n  file.write(reinterpret_cast&lt;const char*&gt;(buf), size);\n  file.close(); \n\n  return 0;\n}\n}\n</code></pre>"},{"location":"technology/Cpp/038-flatbuffers/#4","title":"4. \u200b\u53cd\u200b\u5e8f\u5217\u5316\u200b\u5b9e\u73b0","text":"<pre><code>#include \"person_generated.h\"\n#include &lt;fstream&gt;\n#include &lt;cstdio&gt;\n\nint main() {\n  // \u200b\u8bfb\u53d6\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b\n  std::ifstream file(\"data.bin\", std::ios::binary | std::ios::ate);\n  if (!file.is_open()) {\n    printf(\"Failed to open file.\\n\");\n    return -1;\n  }\n\n  size_t size = file.tellg();\n  char* buf = new char[size];\n  file.seekg(0, std::ios::beg);\n  file.read(buf, size);\n  file.close();\n\n  // \u200b\u9a8c\u8bc1\u200b\u7f13\u51b2\u533a\u200b\n  flatbuffers::Verifier verifier(reinterpret_cast&lt;const uint8_t*&gt;(buf), size);\n  if (!verifier.VerifyBuffer&lt;Person&gt;()) {\n    delete[] buf;\n    printf(\"Verification failed.\\n\");\n    return -1;\n  }\n\n  // \u200b\u76f4\u63a5\u200b\u8bbf\u95ee\u200b\u6570\u636e\u200b\n  const Person* person = GetPerson(buf);\n  printf(\"Name: %s, Age: %d\\n\", person-&gt;name()-&gt;c_str(), person-&gt;age());\n\n  // \u200b\u904d\u5386\u200b\u5d4c\u5957\u200b\u6570\u636e\u200b\n  if (person-&gt;friends() != nullptr) {\n    for (int i = 0; i &lt; person-&gt;friends()-&gt;size(); ++i) {\n      const Person* friend_person = person-&gt;friends()-&gt;Get(i);\n      printf(\"Friend: %s\\n\", friend_person-&gt;name()-&gt;c_str());\n    }\n  }\n\n  delete[] buf;\n  return 0;\n}\n</code></pre>"},{"location":"technology/Cpp/038-flatbuffers/#_2","title":"\u4e09\u200b\u3001\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\u53c2\u6570","text":""},{"location":"technology/Cpp/038-flatbuffers/#1","title":"1. \u200b\u7f13\u51b2\u533a\u200b\u7ba1\u7406","text":"<ul> <li>\u200b\u521d\u59cb\u200b\u5bb9\u91cf\u200b\uff1a<code>FlatBufferBuilder(size_t)</code>\u200b\u8bbe\u7f6e\u200b\u521d\u59cb\u200b\u7f13\u51b2\u533a\u200b\u5927\u5c0f\u200b\uff0c\u200b\u51cf\u5c11\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u6b21\u6570\u200b7</li> <li>\u200b\u5185\u5b58\u200b\u5bf9\u9f50\u200b\uff1a\u200b\u901a\u8fc7\u200b<code>FLATBUFFERS_MAX_BUFFER_SIZE</code>\u200b\u63a7\u5236\u200b\u5bf9\u9f50\u200b\u7c92\u5ea6\u200b</li> </ul>"},{"location":"technology/Cpp/038-flatbuffers/#2","title":"2. \u200b\u6570\u636e\u7ed3\u6784\u200b\u4f18\u5316","text":"<ul> <li>\u200b\u5b57\u200b\u6bb5\u200bID\uff1a\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\u5206\u914d\u200b\u552f\u4e00\u200bID\uff08\u200b\u5982\u200b<code>id: 1</code>\uff09\u200b\u786e\u4fdd\u200b\u517c\u5bb9\u6027\u200b4</li> <li>\u200b\u5411\u200b\u91cf\u5316\u200b\u5904\u7406\u200b\uff1a\u200b\u4f7f\u7528\u200b<code>CreateVector</code>\u200b\u66ff\u4ee3\u200b\u52a8\u6001\u200b\u6570\u7ec4\u200b\uff0c\u200b\u9884\u200b\u5206\u914d\u200b\u7a7a\u95f4\u200b</li> </ul>"},{"location":"technology/Cpp/038-flatbuffers/#3_1","title":"3. \u200b\u7f16\u8bd1\u200b\u9009\u9879","text":"<pre><code>flatc --gen-name-strings --gen-mutable --cpp person.fbs \n</code></pre> <ul> <li><code>--gen-name-strings</code>\uff1a\u200b\u751f\u6210\u200b\u5b57\u6bb5\u540d\u200b\u79f0\u200b\u5b57\u7b26\u4e32\u200b\uff08\u200b\u8c03\u8bd5\u200b\u7528\u200b\uff09</li> <li><code>--gen-mutable</code>\uff1a\u200b\u5141\u8bb8\u200b\u4fee\u6539\u200b\u5df2\u200b\u751f\u6210\u200b\u5bf9\u8c61\u200b\uff08\u200b\u8c28\u614e\u200b\u4f7f\u7528\u200b\uff09</li> </ul>"},{"location":"technology/Cpp/038-flatbuffers/#_3","title":"\u56db\u200b\u3001\u200b\u5178\u578b\u200b\u5e94\u7528\u200b\u573a\u666f","text":"\u573a\u666f\u200b \u200b\u4f18\u52bf\u200b\u4f53\u73b0\u200b \u200b\u4ee3\u7801\u200b\u793a\u4f8b\u200b\u7247\u6bb5\u200b \u200b\u7f51\u7edc\u901a\u4fe1\u200b \u200b\u51cf\u5c11\u200b\u5e26\u5bbd\u200b\u6d88\u8017\u200b\uff08\u200b\u6bd4\u200bJSON\u200b\u5c0f\u200b30%\uff09 <code>SendBuffer(builder.GetBufferPointer())</code> \u200b\u672c\u5730\u200b\u7f13\u5b58\u200b \u200b\u52a0\u8f7d\u200b\u901f\u5ea6\u200b\u63d0\u5347\u200b6-10\u200b\u500d\u200b <code>FileCache::Load(\"config.bin\")</code> \u200b\u591a\u7ebf\u7a0b\u200b\u6570\u636e\u5171\u4eab\u200b \u200b\u907f\u514d\u200b\u62f7\u8d1d\u200b\u63d0\u5347\u200b\u7ebf\u7a0b\u200b\u95f4\u901a\u4fe1\u200b\u6548\u7387\u200b <code>std::shared_ptr&lt;void&gt; data = builder.Release();</code>"},{"location":"technology/Cpp/038-flatbuffers/#_4","title":"\u4e94\u200b\u3001\u200b\u67b6\u6784\u8bbe\u8ba1\u200b\u5efa\u8bae","text":""},{"location":"technology/Cpp/038-flatbuffers/#1_1","title":"1. \u200b\u5206\u5c42\u200b\u8bbe\u8ba1","text":"<pre><code>+-------------------+\n| \u200b\u4e1a\u52a1\u200b\u903b\u8f91\u200b\u5c42\u200b         |\n+-------------------+\n          \u2193\n+-------------------+\n| FlatBuffers\u200b\u5c01\u88c5\u200b\u5c42\u200b |\n| - \u200b\u5e8f\u5217\u200b\u5316\u5de5\u5382\u200b      |\n| - \u200b\u53cd\u200b\u5e8f\u5217\u5316\u200b\u89e3\u6790\u5668\u200b  |\n+-------------------+\n          \u2193\n+-------------------+\n| \u200b\u7f51\u7edc\u200b/\u200b\u6587\u4ef6\u200bIO\u200b\u5c42\u200b     |\n+-------------------+\n</code></pre>"},{"location":"technology/Cpp/038-flatbuffers/#2_1","title":"2. \u200b\u5bb9\u9519\u200b\u673a\u5236","text":"<pre><code>// \u200b\u6570\u636e\u200b\u6821\u9a8c\u200b\nif (!person-&gt;Verify(verifier)) {\n  LOG(ERROR) &lt;&lt; \"Invalid buffer format\";\n  return;\n}\n\n// \u200b\u7248\u672c\u200b\u517c\u5bb9\u200b\nif (person-&gt;has_deprecated_field()) {\n  LOG(WARNING) &lt;&lt; \"Deprecated field detected\";\n}\n</code></pre>"},{"location":"technology/Cpp/038-flatbuffers/#_5","title":"\u516d\u200b\u3001\u200b\u6027\u80fd\u200b\u5bf9\u6bd4\u200b\u6d4b\u8bd5","text":"\u683c\u5f0f\u200b \u200b\u5e8f\u5217\u5316\u200b\u65f6\u95f4\u200b(ms) \u200b\u53cd\u200b\u5e8f\u5217\u5316\u200b\u65f6\u95f4\u200b(ms) \u200b\u6587\u4ef6\u5927\u5c0f\u200b(KB) FlatBuffers 0.23 0.18 15.7 JSON 1.25 0.98 42.3 ProtocolBuf 0.45 0.35 28.1 <p>\u200b\u6d4b\u8bd5\u73af\u5883\u200b\uff1aIntel i7-10700K, 16GB RAM, \u200b\u6570\u636e\u200b\u96c6\u200b\u5305\u542b\u200b1000\u200b\u4e2a\u200b\u5d4c\u5957\u200b\u5bf9\u8c61\u200b</p>"},{"location":"technology/Cpp/038-flatbuffers/#_6","title":"\u5b8c\u6574\u200b\u4ee3\u7801","text":"<p>Github</p>"},{"location":"technology/Cpp/DynamicAnalysis/","title":"\u52a8\u6001\u5206\u6790","text":""},{"location":"technology/Cpp/QtQuick/","title":"QtQuick","text":""},{"location":"technology/Cpp/QtWidgets/","title":"QtWidgets","text":""},{"location":"technology/Cpp/StaticAnalysis/","title":"\u9759\u6001\u200b\u5206\u6790","text":""},{"location":"technology/Cpp/wxWidgets/","title":"wxWidgets","text":""},{"location":"en/","title":"Home","text":"I am zhengtianzuo, currently focusing on remote desktop development, primarily using C++. I enjoy researching high performance and code architecture. Vision: Technology Sharing, Creating Brilliance Together Mission: Creating Value, Empowering Clients, Serving the Industry Values: Exploring Functionality, Integrating Excellence, Delivering Precision Personal Projects: Logo Project Github Gitee Description Technologies tianzuo.Pangu Instant Messaging Platform tianzuo.Kunlun Local Build Tool tianzuo.Fuxi In development Personal Modules: Logo Module Github Gitee Description Technologies tianzuo.Kongtong Crash Detection &amp; Analysis tianzuo.Qiankun NoSQL Database tianzuo.Zhuiri Reliable UDP Data Transfer tianzuo.Hundun Software Licensing tianzuo.LianYao Memory Pool tianzuo.Shennong In development tianzuo.Linglong In development tianzuo.Fengtian In development          Add QQ Friend                 Add WeChat Friend                 WeChat Official Account                 AliPay sponsor                 WeChat sponsor        Author zhengtianzuo QQ 278969898 Email zhengtianzuo06@163.com Homepage http://www.zhengtianzuo.com Blog http://blog.csdn.net/zhengtianzuo06 github https://github.com/zhengtianzuo gitee https://gitee.com/zhengtianzuo QQ Group 199672080"},{"location":"en/component/tianzuo.Hundun/","title":"tianzuo.Hundun","text":""},{"location":"en/component/tianzuo.Hundun/#tianzuohundun_1","title":"tianzuo.Hundun","text":"operating system compiler programming language"},{"location":"en/component/tianzuo.Hundun/#introduction","title":"introduction","text":"<p>tianzuo.Hundun Protect the software you develop from unauthorized copies, limit the usage in time, to a specific machines.</p> <p>legend: is the first of the ten ancient artifacts, known as the most powerful artifact. East Emperor bell is called East Emperor bell, its owner is East Emperor Taiyi, East Emperor Taiyi is ancient mythology, ranked among the top five god, as its magic weapon East Emperor bell, strength is not bad. According to legend, East Emperor Bell is the gate of heaven, controllable sun and moon, can change Yin and Yang, East Emperor Bell is a kind of strong defense, weak attack, but amazing explosive power, once the outbreak of real strength, basically can destroy heaven and earth, devour the heavens.</p>"},{"location":"en/component/tianzuo.Hundun/#motivation","title":"motivation","text":"<p>Protect the software you develop from unauthorized copies, limit the usage in time, to a specific machines.</p> <p></p>"},{"location":"en/component/tianzuo.Hundun/#features","title":"features","text":"<ul> <li>\ud83e\udde9 simple integration</li> <li>\ud83e\udea2 data is encrypted algorithmically</li> <li>\ud83d\udd12 it can be limited by time, by device ID, or both</li> </ul>"},{"location":"en/component/tianzuo.Hundun/#workflow","title":"workflow","text":"<p>In the client software, the get_machineid interface can be called to obtain the machine code (registration code), and then enter the registration code/cut-off time through the maker program to create the license file. The maker needs to read the private key file when generating the license file, and the corresponding public key information is input in the client software. After the license is issued to the client locally, the client invokes the check interface for verification.</p> <ol> <li>Generate a public and private key pairing information file.</li> </ol> <pre><code>// Create a private key file\n(1) openssl genrsa -out privatekey.pem 2048\n\n// Create a public key file based on the private key file\n(2) openssl rsa -in privatekey.pem -pubout -out publickey.pem\n</code></pre> <ol> <li>Create a license file from the maker command line:</li> </ol> <pre><code>// Generate only time-limited license files\nmaker.exe --type=1 --date=\"2024-04-30\" --keyfile=\"privatekey.pem\"\n\n// Only license files with machine code restrictions are generated\nmaker.exe --type=2 --id=\"9ea03801651cd3d93add9d42a07d3c4b\" --keyfile=\"privatekey.pem\"\n\n// Generate license files that have both time and machine code limits\nmaker.exe --type=3 --date=\"2024-04-30\" --id=\"9ea03801651cd3d93add9d42a07d3c4b\" --keyfile=\"privatekey.pem\"\n</code></pre>"},{"location":"en/component/tianzuo.Hundun/#example","title":"example","text":"cpp <pre><code>#include &lt;iostream&gt;\n#include \"../../include/tianzuo.HundunInterface.h\" // \u200b\u63a5\u53e3\u200b\u5934\u6587\u4ef6\u200b interface heaher file\n\n#define Get_Machineid 0\n\nint main() {\n    std::string public_key = \"-----BEGIN PUBLIC KEY-----\\n\"\n        \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\"\n        \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\"\n        \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\"\n        \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\"\n        \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\"\n        \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\"\n        \"lQIDAQAB\\n\"\n        \"-----END PUBLIC KEY-----\\n\";\n\n    tianzuo_HundunInt hundun;\n#if Get_Machineid\n    const char* id = hundun.get_machineid();\n    if (id == nullptr) {\n        std::cerr &lt;&lt; \"hundun.get_machineid error\" &lt;&lt; std::endl;\n        return -1;\n    }\n    std::cout &lt;&lt; \"id: \" &lt;&lt; id &lt;&lt; std::endl;\n#else\n    int days = 0;\n    int error_code = tianzuo_Hundun_check(public_key.c_str(), \"license.dat\", &amp;days);\n    if (error_code != Hundun_error_code_success) {\n        std::cout &lt;&lt; \"hundun.check error_code: \" &lt;&lt; error_code &lt;&lt; \" error_string: \" &lt;&lt; Hundun_error_code_strings[error_code] &lt;&lt; std::endl;\n        return -1;\n    }\n    std::cout &lt;&lt; \"hundun.check days: \" &lt;&lt; days &lt;&lt; std::endl;\n#endif\n    return 0;\n}\n\n</code></pre> python <pre><code>from ctypes import *\nfrom enum import Enum\nimport ctypes\n\n\ntianzuo_HundunLib = cdll.LoadLibrary('./tianzuo.Hundun.dll')\n\n\nclass Hundun_error_code(Enum):\n    Hundun_error_code_success       = 0 # \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter     = 1 # \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse         = 2 # \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile   = 3 # \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate     = 4 # \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched     = 5 # \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n\n\ndef tianzuo_Hundun_check(public_key_string, license_file, days):\n    tianzuo_HundunLib.tianzuo_Hundun_check.argtypes = [c_char_p, c_char_p, ctypes.POINTER(ctypes.c_int)]\n    return tianzuo_HundunLib.tianzuo_Hundun_check(public_key_string, license_file, days)\n\n\ndef main():\n    public_key = (b\"-----BEGIN PUBLIC KEY-----\\n\"\n                  b\"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\"\n                  b\"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\"\n                  b\"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\"\n                  b\"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\"\n                  b\"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\"\n                  b\"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\"\n                  b\"lQIDAQAB\\n\"\n                  b\"-----END PUBLIC KEY-----\\n\")\n\n    Hundun_error_code_strings_cn = (\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\")\n\n    Hundun_error_code_strings = (\n        \"success\",\n        \"parameter error\",\n        \"parse error\",\n        \"license filename error\",\n        \"out of date\",\n        \"machine id unmatched\")\n\n    days = ctypes.c_int()\n    license_file = b\"license.dat\"\n    error_code = tianzuo_Hundun_check(public_key, license_file, days)\n    if error_code != Hundun_error_code.Hundun_error_code_success.value:\n        print(\"hundun.check error_code: {} error_string: {}\".format(error_code, Hundun_error_code_strings[error_code]))\n        return\n\n    int_days = days.value\n    print(\"hundun.check days: {}\".format(int_days))\n\n\nif __name__ == '__main__':\n    main()\n\n</code></pre> java <pre><code>package cn.camelsoft;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\n\nenum Hundun_error_code {\n    Hundun_error_code_success       (0),            ///&lt;  \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter     (1),            ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse         (2),            ///&lt;  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile   (3),            ///&lt;  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate     (4),            ///&lt;  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched     (5);            ///&lt;  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n\n    private int value;\n\n    Hundun_error_code(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\n\npublic class Main {\n    public interface tianzuo_HundunLib extends Library {\n        tianzuo_HundunLib instance = (tianzuo_HundunLib) Native.load(\"./tianzuo.Hundun.dll\", tianzuo_HundunLib.class);\n        int tianzuo_Hundun_check(String public_key_string, String license_file, int[] days);\n    }\n\n    public static void main(String[] args) {\n        System.setProperty(\"jna.encoding\",\"UTF-8\");\n\n        String public_key = \"-----BEGIN PUBLIC KEY-----\\n\" +\n        \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n        \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n        \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n        \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n        \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n        \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n        \"lQIDAQAB\\n\" +\n        \"-----END PUBLIC KEY-----\\n\";\n\n        String[] Hundun_error_code_strings_cn = {\"\u200b\u6210\u529f\u200b\",\n                \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n                \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n                \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n                \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n                \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"};\n\n        String[] Hundun_error_code_strings = {\n                \"success\",\n                \"parameter error\",\n                \"parse error\",\n                \"license filename error\",\n                \"out of date\",\n                \"machine id unmatched\"\n        };\n\n        int[] days = {0};\n        int error_code = tianzuo_HundunLib.instance.tianzuo_Hundun_check(public_key, \"license.dat\", days);\n        if (error_code != Hundun_error_code.Hundun_error_code_success.getValue()) {\n            System.out.printf(\"hundun.check error_code: %d error_string: %s\\n\", error_code, Hundun_error_code_strings[error_code]);\n            return;\n        }\n        System.out.printf(\"hundun.check days: : %d\\n\", days[0]);\n    }\n}\n\n</code></pre> csharp <pre><code>\n\nusing System.Runtime.InteropServices;\n\nclass Program {\n    [DllImport(\"tianzuo.Hundun.dll\")]\n    public static extern int tianzuo_Hundun_check(string public_key_string, string license_file, ref int days);\n\n    public enum Hundun_error_code\n    {\n        Hundun_error_code_success,                ///&lt;  \u200b\u6210\u529f\u200b\n        Hundun_error_code_parameter,              ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n        Hundun_error_code_parse,                  ///&lt;  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n        Hundun_error_code_licensefile,            ///&lt;  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n        Hundun_error_code_outofdate,              ///&lt;  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n        Hundun_error_code_unmatched               ///&lt;  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n    }\n\n    public string[] Hundun_error_code_strings_cn = {\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"\n    };\n\n    public string[] Hundun_error_code_strings = {\n        \"success\",\n        \"parameter error\",\n        \"parse error\",\n        \"license filename error\",\n        \"out of date\",\n        \"machine id unmatched\"\n    };\n\n    static void Main(string[] args) {\n        string public_key = \"-----BEGIN PUBLIC KEY-----\\n\" +\n            \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n            \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n            \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n            \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n            \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n            \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n            \"lQIDAQAB\\n\" +\n            \"-----END PUBLIC KEY-----\\n\";\n\n        int days = 0;\n        int error_code = tianzuo_Hundun_check(public_key, \"license.dat\", ref days);\n        if (error_code != (int)Hundun_error_code.Hundun_error_code_success)\n        {\n            Program myProgram = new Program();\n            Console.WriteLine(\"hundun.check error_code: \" + error_code + \" error_string: \" + myProgram.Hundun_error_code_strings[error_code]);\n            return;\n        }\n        Console.WriteLine(\"hundun.check days: \" + days);\n\n    }\n\n}\n</code></pre> javascript <pre><code>\nHundun_error_code_success     = 0 //  \u200b\u6210\u529f\u200b\nHundun_error_code_parameter   = 1 //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\nHundun_error_code_parse       = 2 //  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\nHundun_error_code_licensefile = 3 //  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\nHundun_error_code_outofdate   = 4 //  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\nHundun_error_code_unmatched   = 5 //  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n\nlet ffi = require('ffi-napi')\nconst ref = require('ref-napi');\n\nlet tianzuo_HundunLib = ffi.Library(\"tianzuo.Hundun.dll\", {\n    'tianzuo_Hundun_check':['int',['string','string','pointer']],\n})\n\nlet public_key = \"-----BEGIN PUBLIC KEY-----\\n\" +\n\"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n\"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n\"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n\"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n\"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n\"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n\"lQIDAQAB\\n\" +\n\"-----END PUBLIC KEY-----\\n\";\n\nconst Hundun_error_code_strings_cn = [\n    \"\u200b\u6210\u529f\u200b\",\n    \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n    \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"];\n\nconst Hundun_error_code_strings = [\n    \"success\",\n    \"parameter error\",\n    \"parse error\",\n    \"license filename error\",\n    \"out of date\",\n    \"machine id unmatched\"];\n\ndays = Buffer.alloc(1 * ref.sizeof.int);\nlet error_code = tianzuo_HundunLib.tianzuo_Hundun_check(public_key, \"license.dat\", days);\nif (error_code !== Hundun_error_code_success) {\n    console.log(\"hundun.check error_code: %d error_string: %s\\n\", error_code, Hundun_error_code_strings[error_code]);\n    return -1;\n}\ndays_data = ref.get(days, 0, ref.types.int);\nconsole.log(\"hundun.check days: %d\\n\", days_data);\n\n</code></pre> php <pre><code>&lt;?php\n\n// \u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u52a0\u8f7d\u200b\u4e86\u200b FFI \u200b\u6269\u5c55\u200b\nif (extension_loaded('ffi')) {\n    echo(\"\u200b\u5df2\u200b\u542f\u7528\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n} else {\n    die(\"\u200b\u672a\u200b\u542f\u52a8\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n}\n\nenum Hundun_error_code\n{\n    const Hundun_error_code_success = 0;        //  \u200b\u6210\u529f\u200b\n    const Hundun_error_code_parameter = 1;      //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    const Hundun_error_code_parse = 2;          //  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    const Hundun_error_code_licensefile = 3;    //  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    const Hundun_error_code_outofdate = 4;      //  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    const Hundun_error_code_unmatched = 5;      //  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n}\n\n$ffi = FFI::cdef(\"\n    int tianzuo_Hundun_check(const char* public_key_string, const char* license_file, int* days);\n\", \"tianzuo.Hundun.dll\");\n\n$public_key = \"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\np1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\nLrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\nENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\nz1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\nouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\nlQIDAQAB\n-----END PUBLIC KEY-----\\n\";\n\ndefine('Hundun_error_code_strings_cn', [\n    \"\u200b\u6210\u529f\u200b\",\n    \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n    \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"]);\n\ndefine('Hundun_error_code_strings', [\n    \"success\",\n    \"parameter error\",\n    \"parse error\",\n    \"license filename error\",\n    \"out of date\",\n    \"machine id unmatched\"\n]);\n\n$days = FFI::new(\"int\");\n$error_code = $ffi-&gt;tianzuo_Hundun_check($public_key, \"license.dat\", FFI::addr($days));\nif ($error_code != Hundun_error_code::Hundun_error_code_success) {\n    echo \"hundun.check error_code: \" . $error_code . \" error_string: \" . Hundun_error_code_strings[$error_code] . \"\\n\";\n    return;\n}\necho \"hundun.check days: \" . $days-&gt;cdata . \"\\n\";\n\n?&gt;\n</code></pre> vb <pre><code>\nImports System.Runtime.InteropServices\n\nEnum Hundun_error_code\n    Hundun_error_code_success = 0 '  \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter = 1 '  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse = 2 '  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile = 3 '  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate = 4 '  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched = 5 '  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\nEnd Enum\n\nModule Program\n    &lt;DllImport(\"tianzuo.Hundun.dll\")&gt;\n    Public Function tianzuo_Hundun_check(public_key_string As String, license_file As String, ByRef days As Integer) As Integer\n    End Function\n\n    ReadOnly Hundun_error_code_strings_cn() As String = {\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"}\n\n    ReadOnly Hundun_error_code_strings() As String = {\n        \"success\",\n        \"parameter error\",\n        \"parse error\",\n        \"license filename error\",\n        \"out of date\",\n        \"machine id unmatched\"}\n\n    Sub Main(args As String())\n        Dim public_key As String = \"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\np1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\nLrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\nENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\nz1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\nouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\nlQIDAQAB\n-----END PUBLIC KEY-----\"\n\n        Dim license_file As String = \"license.dat\"\n        Dim days As Integer = 0\n        Dim error_code As Integer = tianzuo_Hundun_check(public_key, license_file, days)\n        If (error_code &lt;&gt; Hundun_error_code.Hundun_error_code_success) Then\n            Console.WriteLine(\"hundun.check error_code: \" + error_code.ToString + \" error_string: \" + Hundun_error_code_strings(error_code))\n            Return\n        End If\n\n        Console.WriteLine(\"hundun.check days:\" + days.ToString)\n    End Sub\nEnd Module\n\n</code></pre> go <pre><code>package main\n\n/*\n#include \"tianzuo.HundunInterface.h\"\n*/\nimport \"C\"\nimport (\n    \"fmt\"\n    \"syscall\"\n    \"unsafe\"\n)\n\nconst (\n    Hundun_error_code_success     = 0 //  \u200b\u6210\u529f\u200b\n    Hundun_error_code_parameter   = 1 //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\n    Hundun_error_code_parse       = 2 //  \u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\n    Hundun_error_code_licensefile = 3 //  \u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\n    Hundun_error_code_outofdate   = 4 //  \u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\n    Hundun_error_code_unmatched   = 5 //  \u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\n)\n\nfunc main() {\n    const public_key string = \"-----BEGIN PUBLIC KEY-----\\n\" +\n        \"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\" +\n        \"p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\" +\n        \"LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\" +\n        \"ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\" +\n        \"z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\" +\n        \"ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\" +\n        \"lQIDAQAB\\n\" +\n        \"-----END PUBLIC KEY-----\\n\"\n\n    Hundun_error_code_strings_cn := [6]string{\n        \"\u200b\u6210\u529f\u200b\",\n        \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n        \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n        \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"}\n\n    //Hundun_error_code_strings := [6]string{\n    //  \"success\",\n    //  \"parameter error\",\n    //  \"parse error\",\n    //  \"license filename error\",\n    //  \"out of date\",\n    //  \"machine id unmatched\"}\n\n    dll := syscall.MustLoadDLL(\"tianzuo.Hundun.dll\")\n    tianzuo_Hundun_check := dll.MustFindProc(\"tianzuo_Hundun_check\")\n    days := C.int(0)\n    pub_key := C.CString(public_key)\n    license_file := C.CString(\"license.dat\")\n    error_code, _, _ := tianzuo_Hundun_check.Call(uintptr(unsafe.Pointer(pub_key)), uintptr(unsafe.Pointer(license_file)), uintptr(unsafe.Pointer(&amp;days)))\n    if error_code != Hundun_error_code_success {\n        fmt.Println(\"hundun.check error_code: \", error_code, \" error_string: \", Hundun_error_code_strings[error_code])\n        return\n    }\n    fmt.Println(\"hundun.check days: \", days)\n}\n\n</code></pre> rust <pre><code>\nuse std::os::raw::c_char;\nuse std::ffi::{c_int};\nuse std::ffi::CString;\n\n#[link(name = \"tianzuo.Hundun\")]\nextern {\n    fn tianzuo_Hundun_check(public_key_string: *const c_char, license_file: *const c_char, days: *const c_int) -&gt; c_int;\n}\n\nconst Hundun_error_code_strings_cn: [&amp;str; 6] = [\n    \"\u200b\u6210\u529f\u200b\",\n    \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n    \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n    \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"];\n\nconst Hundun_error_code_strings: [&amp;str; 6] = [\n    \"success\",\n    \"parameter error\",\n    \"parse error\",\n    \"license filename error\",\n    \"out of date\",\n    \"machine id unmatched\"];\n\nfn main() {\n    unsafe {\n        let public_key = CString::new(String::from(\"-----BEGIN PUBLIC KEY-----\\n\\\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\\n\\\n        p1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\\n\\\n        LrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\\n\\\n        ENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\\n\\\n        z1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\\n\\\n        ouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\\n\\\n        lQIDAQAB\\n\\\n        -----END PUBLIC KEY-----\\n\")).expect(\"Failed to create CString\");\n\n\n\n        let license_file = CString::new(String::from(\"license.dat\")).expect(\"Failed to create CString\");\n        let mut days: c_int = 0;\n        let error_code = tianzuo_Hundun_check(public_key.as_ptr(), license_file.as_ptr(), &amp;mut days);\n        if 0 != error_code {\n            let errorc: usize =  error_code as usize;\n            println!(\"hundun.check error_code: {:?} error_string: {:?}\", error_code, Hundun_error_code_strings[errorc]);\n        }\n\n        println!(\"hundun.check days: {:?}\", days);\n    }\n}\n\n</code></pre> ruby <pre><code>require 'fiddle'\n\nlib = Fiddle::dlopen('C:/Users/zhengtianzuo/RubymineProjects/tianzuo.HundunTest/tianzuo.Hundun.dll')\ntianzuo_Hundun_check = Fiddle::Function.new(lib['tianzuo_Hundun_check'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\n\npublic_key = \"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3I4g6QtToZuQopoS7Myf\np1QPSBdC0PWNzG0Ii+oMeEp+aqiiVDU33aIrHgyXcBsDNFyPi3R3USNI9WbyO0cw\nLrlYS8YRjP6ckz90lZph2VSXCFWXQm7nOqD4P9GC3QMvV3U9XLyLufRiZs0BcYVF\nENbm+jt3Z8/ikkFaLh0Mw8Y3ksjJN+Kd2DyEgpj5taLXHShHRyLjWAd102M2J4Id\nz1hZg3CxyQNN7hQPmsFvZBsOejqAKeSO57/hRgo6IgZHh7iFbIpNyYjj1fxL0T5o\nouJ5yHODq8fWQ9ZHmk3po9QtbQJIYXO/ShfladQiZrz74vg6VFjleVyPp9m9gAUn\nlQIDAQAB\n-----END PUBLIC KEY-----\"\n\nHundun_error_code_strings_cn = [\n  \"\u200b\u6210\u529f\u200b\",\n  \"\u200b\u53c2\u6570\u200b\u9519\u8bef\u200b\",\n  \"\u200b\u89e3\u6790\u200b\u9519\u8bef\u200b\",\n  \"\u200b\u8bb8\u53ef\u8bc1\u200b\u6587\u4ef6\u200b\u6216\u200b\u8def\u5f84\u200b\u9519\u8bef\u200b\",\n  \"\u200b\u65e5\u671f\u200b\u5df2\u8fc7\u200b\",\n  \"\u200b\u673a\u5668\u7801\u200b\u4e0d\u200b\u5339\u914d\u200b\"]\n\nHundun_error_code_strings = [\n  \"success\",\n  \"parameter error\",\n  \"parse error\",\n  \"license filename error\",\n  \"out of date\",\n  \"machine id unmatched\"]\n\nlicense_file = \"license.dat\"\ndays = Fiddle::Pointer.malloc(Fiddle::SIZEOF_INT)\nerror_code = tianzuo_Hundun_check.call(public_key, license_file, days)\nif error_code != 0\n  print(\"hundun.check error_code: \", error_code, \" error_string:\", Hundun_error_code_strings[error_code] ,\" \\n\")\n  return\nend\n\nint_days = days[0, Fiddle::SIZEOF_INT].unpack('I')[0]\nprint(\"hundun.check days: \", int_days, \"\\n\")\n\n</code></pre>"},{"location":"en/component/tianzuo.Hundun/#download","title":"download","text":""},{"location":"en/component/tianzuo.Kongtong/","title":"tianzuo.Kongtong","text":""},{"location":"en/component/tianzuo.Kongtong/#tianzuokongtong_1","title":"tianzuo.Kongtong","text":"operating system compiler programming language"},{"location":"en/component/tianzuo.Kongtong/#introduction","title":"introduction","text":"<p>tianzuo.Kongtong When an application crashes on a Windows platform, a crash dump file is generated to analyze the lines of the crashed code and generate information about the system environment.</p> <p>legend: The protective artifact of the undead dragon clan in Kongtong Sea is carved with the shape of the five heavenly emperors and surrounded by a jade dragon. According to ancient legend, those who get it can own the world, and some people say that it can make people not old and immortal.</p>"},{"location":"en/component/tianzuo.Kongtong/#motivation","title":"motivation","text":"<p>In the process of development, occasionally encounter the situation of program crash, need to analyze the cause of crash and locate the code line, and need to analyze environmental factors.</p> <p></p>"},{"location":"en/component/tianzuo.Kongtong/#features","title":"features","text":"<ul> <li>\ud83e\udde9 simple integration</li> <li>\ud83d\udcdd optionally generate dmp and logs</li> <li>\ud83e\ude90 log in multiple languages (simplified chinese / english)</li> <li>\u26d3  support for in-thread detection</li> </ul>"},{"location":"en/component/tianzuo.Kongtong/#screenshot","title":"screenshot","text":"<p>locate crashed lines of code through dmp file analysis:</p> <p>Visual Studio analyze the dmp file</p> <p></p> <p>WinDbg analyze the dmp file</p> <p></p> <p>environment log:</p> <p></p>"},{"location":"en/component/tianzuo.Kongtong/#install","title":"install","text":"<p>enable exception detection in project</p>"},{"location":"en/component/tianzuo.Kongtong/#visual-studio","title":"Visual Studio","text":"<p>enable c++ exception detection in Visual Studio</p> <p></p> <p>enable generation pdb files in Visual Studio</p>"},{"location":"en/component/tianzuo.Kongtong/#qt-creator","title":"Qt Creator","text":"<p>enable generation pdb files in Qt Creator</p> <pre><code>CONFIG += force_debug_info\nCONFIG += senarate_debug_info\n</code></pre>"},{"location":"en/component/tianzuo.Kongtong/#example","title":"example","text":"<pre><code>#include \"tianzuo.KongtongTest.h\"\n#include \"../../include/tianzuo.Kongtong.h\"\n#include &lt;Windows.h&gt;\n\nvoid init(int argc, char* argv[]) {\n    tianzuo_KongtongTest test;\n    test.doSomething();\n}\n\nint main(int argc, char* argv[]) {\n    HINSTANCE hKongtong = LoadLibrary(L\"tianzuo.Kongtong.dll\");\n    if (!hKongtong) {\n        init(argc, argv);\n        return(0);\n    }\n\n    tianzuo_Kongtong_get_exception getException = (tianzuo_Kongtong_get_exception)GetProcAddress(hKongtong, \"Kongtong_get_exception\");\n    if (!getException) return -1;\n    __try {\n        init(argc, argv);\n    }\n    __except (getException(GetExceptionInformation(), Kongtong_create_normal, 0)) {\n    }\n\n    if (hKongtong != nullptr) {\n        getException = nullptr;\n        FreeLibrary(hKongtong);\n        hKongtong = nullptr;\n    }\n    return(0);\n}\n</code></pre>"},{"location":"en/component/tianzuo.Kongtong/#download","title":"download","text":""},{"location":"en/component/tianzuo.LianYao/","title":"tianzuo.LianYao","text":""},{"location":"en/component/tianzuo.LianYao/#tianzuolianyao_1","title":"tianzuo.LianYao","text":"operating system compiler programming language"},{"location":"en/component/tianzuo.LianYao/#introduction","title":"introduction","text":"<p>tianzuo.LianYao A simple memory pool that initializes some memory for recycling, dynamically expands when insufficient, and has memory leak detection function.</p> <p>legend: It represents fusion and evolution. The demon pot can contain all things, and refine the demon beasts and spirit beasts into the vitality of the pot. This power symbolizes integration and evolution, and implies the tolerance and harmony of Taoist culture.</p>"},{"location":"en/component/tianzuo.LianYao/#motivation","title":"motivation","text":"<p>A memory pool is designed to use memory in cycles, improve memory usage efficiency, and provide memory leak detection function.</p> <p></p>"},{"location":"en/component/tianzuo.LianYao/#features","title":"features","text":"<ul> <li>\ud83e\udde9 simple integration</li> <li>\ud83d\udcdd optionally generate memory leak log</li> <li>\ud83e\ude90 log in multiple languages (simplified chinese / english)</li> </ul>"},{"location":"en/component/tianzuo.LianYao/#screenshot","title":"screenshot","text":"<p>locate memory leak lines of code through log file analysis:</p> <p></p>"},{"location":"en/component/tianzuo.LianYao/#example","title":"example","text":"<pre><code>\n#include &lt;iostream&gt;\n#include \"../../include/tianzuo.LianYaoInterface.h\"\n\nvoid* operator new(size_t size) {\n    return tianzuo_LianYaoInt::mem_get(size);\n}\nvoid* operator new[](size_t size) {\n    return operator new(size);\n}\n\nvoid operator delete(void* ptr) noexcept {\n    tianzuo_LianYaoInt::mem_del(ptr);\n}\nvoid operator delete[](void* ptr) noexcept {\n    operator delete(ptr);\n}\n\nclass cpp {\n public:\n    cpp() {}\n    ~cpp() {}\n private:\n     int m_a;\n     long m_l;\n     float m_f;\n};\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; \"start tianzuo.LianYaoTest ...\\n\";\n#ifdef WIN32\n    tianzuo_LianYaoInt::initialize(3, \"memory_leaks.log\", nullptr, 0);\n#else\n    tianzuo_LianYaoInt::initialize(3, \"memory_leaks.log\", \"./tianzuo.LianYaoTest\", 0);\n#endif\n\n    int* new_int = new int(10); // leak 4\n    int* new_int2 = new int(10);\n    *new_int2 = 12;\n\n    for (size_t i = 0; i &lt; 10; i++) {\n        int* new_int3 = new int(10);\n        *new_int3 = 12;\n        delete new_int3;\n    }\n\n    char* new_buf = new char[1555]; // leak 1555\n    char* new_buf2 = new char[123];\n\n    cpp* new_class = new cpp(); // leak 12\n    cpp* new_class2 = new cpp();\n\n    class1* cls1 = new class1();\n    delete cls1;\n\n    delete new_class2;\n    delete new_int2;\n    delete[] new_buf2;\n\n    tianzuo_LianYaoInt::terminate();\n\n    return 0;\n}\n\n</code></pre>"},{"location":"en/component/tianzuo.LianYao/#download","title":"download","text":""},{"location":"en/component/tianzuo.Qiankun/","title":"tianzuo.Qiankun","text":""},{"location":"en/component/tianzuo.Qiankun/#tianzuoqiankun_1","title":"tianzuo.Qiankun","text":"operating system compiler programming language"},{"location":"en/component/tianzuo.Qiankun/#introduction","title":"introduction","text":"<p>tianzuo.Qiankun NoSql database based on drawer file storage can be used for file packaging, data integration, encryption storage and other purposes. The storage system can be easily and quickly built and deployed.</p> <p>legend: It's owned by Maitreya. It's for storage purposes. With incredible power, there is a strange space inside, a space so large that it seems to contain heaven and earth. There's more in the bag. There's more than enough.</p>"},{"location":"en/component/tianzuo.Qiankun/#motivation","title":"motivation","text":"<p>Build a NoSql database that can manage data with simple interface calls.</p> <p></p>"},{"location":"en/component/tianzuo.Qiankun/#features","title":"features","text":"<ul> <li>\ud83e\udde9 simple integration</li> <li>\ud83d\udce6 integrated simple storage files can be compressed freely</li> <li>\ud83e\udea2 the data is encrypted by 256-bit AES algorithm</li> <li>\ud83d\udcd2 data can be added, deleted, modified, or queried in batches</li> <li>\ud83d\udcc3 supports direct access to raw data streams</li> </ul>"},{"location":"en/component/tianzuo.Qiankun/#screenshot","title":"screenshot","text":"<p>tianzuo.Qiankun Test:</p> <p></p>"},{"location":"en/component/tianzuo.Qiankun/#example","title":"example","text":"cpp <pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include \"tianzuo.QiankunInterface.h\" // \u200b\u63a5\u53e3\u200b\u5934\u6587\u4ef6\u200b interface heaher file\n\nint main() {\n    // \u200b\u51c6\u5907\u200b\u6570\u636e\u200b prepare data\n    Qiankun_db_verify_struct db_verify(\"qiankunDataBase.Ztz\", \"password\");\n    int integer = 12345678;\n    Qiankun_data_type_struct data_type(Qiankun_data_type_integer, -1, \"integer\");\n    Qiankun_user_data_struct user_data(&amp;integer, 0);\n    int data_size = 0;\n    Qiankun_get_user_data_struct get_user_data(reinterpret_cast&lt;void*&amp;&gt;(integer), &amp;data_size);\n\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    std::unique_ptr&lt;tianzuo_QiankunInterface&gt; qiankun_interface(new tianzuo_QiankunInterface());\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_QiankunInt* qiankun = qiankun_interface-&gt;initialize();\n\n    // \u200b\u521d\u59cb\u5316\u200b\u5b9e\u4f8b\u200b initialize the instance\n    int error_code = qiankun-&gt;initialize();\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"initialize error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n    error_code = qiankun-&gt;db_create_database(&amp;db_verify, \"qiankunDataBase\", true);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"db_create_database error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n    error_code = qiankun-&gt;db_open_database(&amp;db_verify);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"db_open_database error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n    error_code = qiankun-&gt;data_combine(&amp;db_verify, &amp;data_type, nullptr, &amp;user_data, false, -1);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"data_combine error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n\n    // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n    integer = -1;\n    error_code = qiankun-&gt;data_extract(&amp;db_verify, &amp;data_type, nullptr, &amp;get_user_data);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"data_extract error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\n    std::cout &lt;&lt; \"get integer data: \" &lt;&lt; integer;\n\n    // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n    error_code = qiankun-&gt;db_close_database(&amp;db_verify);\n    if (error_code != Qiankun_errorcode_success) {\n        std::cout &lt;&lt; \"db_close_database error: \" &lt;&lt; error_code;\n        goto return_error;\n        return -1;\n    }\n\nreturn_error:\n\n    // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n    if (qiankun_interface != nullptr &amp;&amp; qiankun != nullptr) {\n        qiankun_interface-&gt;terminate(&amp;qiankun);\n    }\n\n    std::cout &lt;&lt; \"test done -------------------\";\n\n    return 0;\n}\n</code></pre> python <pre><code>from ctypes import *\nfrom enum import Enum\nimport ctypes\n\ntianzuo_QiankunLib = cdll.LoadLibrary('./tianzuo.Qiankun.dll')\n\nclass Qiankun_error_code(Enum):\n    Qiankun_errorcode_success           = 1 # \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal            = 2 # \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ            = 3 # \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\n    Qiankun_errorcode_no_rights         = 4 # \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist      = 5 # \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\n    Qiankun_errorcode_exist             = 6 # \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist         = 7 # \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\n    Qiankun_errorcode_out_of_range      = 8 # \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\n    Qiankun_errorcode_type              = 9 # \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param             = 10 # \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\n    Qiankun_errorcode_compress          = 11 # \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\n    Qiankun_errorcode_get_array         = 12 # \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\n    Qiankun_errorcode_out_of_memory     = 13 # \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle            = 14 # \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\n    Qiankun_errorcode_io                = 15 # IO\u200b\u9519\u8bef\u200b (io error)\n\nclass tianzuo_QiankunInt:\n    def __init__(self):\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize.restype = c_void_p\n        self.obj = tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize()\n\n    def __del__(self):\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_terminate.argtypes = [c_void_p]\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_terminate(self.obj)\n\n    def initialize(self):\n        tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize.restype = c_int\n        tianzuo_QiankunLib.tianzuo_QiankunInt_initialize.argtypes = [c_void_p]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_initialize(self.obj)\n\n    def db_create_database(self, db_file_name, db_password, db_name, over_write):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, c_int]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database(self.obj, db_file_name, db_password, db_name, over_write)\n\n    def db_open_database(self, db_file_name, db_password):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database.argtypes = [c_void_p, c_char_p, c_char_p]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database(self.obj, db_file_name, db_password)\n\n    def db_close_database(self, db_file_name, db_password):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database.argtypes = [c_void_p, c_char_p, c_char_p]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database(self.obj, db_file_name, db_password)\n\n    def data_int_combine(self, db_file_name, db_password, data_name, remark, data):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, c_char_p, c_int]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine(self.obj, db_file_name, db_password, data_name, remark, data)\n\n    def data_int_extract(self, db_file_name, db_password, data_name, data):\n        tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract.argtypes = [c_void_p, c_char_p, c_char_p, c_char_p, ctypes.POINTER(ctypes.c_int)]\n        return tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract(self.obj, db_file_name, db_password, data_name, data)\n\ndef main():\n\n    # \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    print(\"initialize the interface\")\n\n    # \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    qiankun = tianzuo_QiankunInt()\n    error_code = qiankun.initialize()\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"initialize error:\", error_code)\n        return\n\n    # \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n    db_file_name = b\"qiankunDataBase.Ztz\"\n    db_password = b\"password\"\n    error_code = qiankun.db_create_database(db_file_name, db_password, b\"qiankunDataBase\", True)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"db_create_database error:\", error_code)\n        return\n\n    # \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n    error_code = qiankun.db_open_database(db_file_name, db_password)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"db_open_database error:\", error_code)\n        return\n\n    # \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n    intInt = 12345678\n    error_code = qiankun.data_int_combine(db_file_name, db_password, b\"integer\", None, intInt)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"data_combine error:\", error_code)\n        return\n\n    # \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n    return_data = ctypes.c_int()\n    error_code = qiankun.data_int_extract(db_file_name, db_password, b\"integer\", ctypes.byref(return_data))\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"data_extract error:\", error_code)\n        return\n\n    integer = return_data.value\n    print(\"get integer data: {}\".format(integer))\n\n    # \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n    error_code = qiankun.db_close_database(db_file_name, db_password)\n    if error_code != Qiankun_error_code.Qiankun_errorcode_success.value:\n        print(\"db_close_database error:\", error_code)\n        return\n\n    print(\"test done -------------------\")\n\nif __name__ == '__main__':\n    main()\n\n</code></pre> java <pre><code>package cn.camelsoft;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\n\nenum Qiankun_error_code {\n    Qiankun_errorcode_success           (0x00000001),   ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal            (0x00000002),   ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ            (0x00000003),   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\n    Qiankun_errorcode_no_rights         (0x00000004),   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist      (0x00000005),   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\n    Qiankun_errorcode_exist             (0x00000006),   ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist         (0x00000007),   ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\n    Qiankun_errorcode_out_of_range      (0x00000008),   ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\n    Qiankun_errorcode_type              (0x00000009),   ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param             (0x0000000A),   ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\n    Qiankun_errorcode_compress          (0x0000000B),   ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\n    Qiankun_errorcode_get_array         (0x0000000C),   ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\n    Qiankun_errorcode_out_of_memory     (0x0000000D),   ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle            (0x0000000E),   ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\n    Qiankun_errorcode_io                (0x0000000F);   ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n\n    private int value;\n\n    Qiankun_error_code(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\n\npublic class Main {\n\n    public interface tianzuo_QiankunLib extends Library {\n        tianzuo_QiankunLib instance = (tianzuo_QiankunLib) Native.load(\"./tianzuo.Qiankun.dll\", tianzuo_QiankunLib.class);\n        Pointer tianzuo_QiankunInterface_initialize();\n        void tianzuo_QiankunInterface_terminate(Pointer qiankun);\n        int tianzuo_QiankunInt_initialize(Pointer qiankun);\n\n        int tianzuo_QiankunInt_db_create_database(Pointer qiankun, String db_file_name, String db_password, String db_name, Boolean over_write);\n        int tianzuo_QiankunInt_db_open_database(Pointer qiankun, String db_file_name, String db_password);\n        int tianzuo_QiankunInt_db_close_database(Pointer qiankun, String db_file_name, String db_password);\n        int tianzuo_QiankunInt_data_int_combine(Pointer qiankun, String db_file_name, String db_password, String data_name, String remark, int data);\n        int tianzuo_QiankunInt_data_int_extract(Pointer qiankun, String db_file_name, String db_password, String data_name, int[] data);\n    }\n\n    public static void main(String[] args) {\n        System.setProperty(\"jna.encoding\",\"UTF-8\");\n\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        System.out.printf(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Pointer qiankun = tianzuo_QiankunLib.instance.tianzuo_QiankunInterface_initialize();\n        int error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_initialize(qiankun);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_initialize error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        String db_file_name = \"qiankunDataBase.Ztz\";\n        String db_password = \"password\";\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", true);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_db_create_database error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_db_open_database error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        int intInt = 12345678;\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_data_int_combine error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        int[] return_data = {0};\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", return_data);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_data_int_extract error: %d\\n\", error_code);\n            return;\n        }\n\n        System.out.printf(\"get int: %d\\n\", return_data[0]);\n\n        // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        error_code = tianzuo_QiankunLib.instance.tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);\n        if (error_code != Qiankun_error_code.Qiankun_errorcode_success.getValue()) {\n            System.out.printf(\"tianzuo_QiankunInt_db_close_database error: %d\\n\", error_code);\n            return;\n        }\n\n        System.out.printf(\"test done -------------------\\n\");\n\n        tianzuo_QiankunLib.instance.tianzuo_QiankunInterface_terminate(qiankun);\n    }\n}\n</code></pre> csharp <pre><code>\n\nusing System.Runtime.InteropServices;\n\npublic enum Qiankun_error_code\n{\n    Qiankun_errorcode_success       = 0x00000001,              ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal        = 0x00000002,              ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ        = 0x00000003,              ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\n    Qiankun_errorcode_no_rights     = 0x00000004,              ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist  = 0x00000005,              ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\n    Qiankun_errorcode_exist         = 0x00000006,              ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist     = 0x00000007,              ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\n    Qiankun_errorcode_out_of_range  = 0x00000008,              ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\n    Qiankun_errorcode_type          = 0x00000009,              ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param         = 0x0000000A,              ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\n    Qiankun_errorcode_compress      = 0x0000000B,              ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\n    Qiankun_errorcode_get_array     = 0x0000000C,              ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\n    Qiankun_errorcode_out_of_memory = 0x0000000D,              ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle        = 0x0000000E,              ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\n    Qiankun_errorcode_io            = 0x0000000F,              ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n}\n\nclass Program {\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern IntPtr tianzuo_QiankunInterface_initialize();\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern void tianzuo_QiankunInterface_terminate(IntPtr qiankun);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_initialize(IntPtr qiankun);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_db_create_database(IntPtr qiankun, string db_file_name, string db_password, string db_name, bool over_write);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_db_open_database(IntPtr qiankun, string db_file_name, string db_password);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_db_close_database(IntPtr qiankun, string db_file_name, string db_password);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_data_int_combine(IntPtr qiankun, string db_file_name, string db_password, string data_name, string remark, int data);\n    [DllImport(\"tianzuo.Qiankun.dll\")]\n    public static extern int tianzuo_QiankunInt_data_int_extract(IntPtr qiankun, string db_file_name, string db_password, string data_name, ref int data);\n\n    static void Main(string[] args) {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        IntPtr qiankun = tianzuo_QiankunInterface_initialize();\n        int error_code = tianzuo_QiankunInt_initialize(qiankun);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_initialize error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        string db_file_name = \"qiankunDataBase.Ztz\";\n        string db_password = \"password\";\n        error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", true);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_db_create_database error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success)) {\n            Console.WriteLine(\"tianzuo_QiankunInt_db_open_database error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        int intInt = 12345678;\n        error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_combine error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        int return_data = 0;\n        error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", ref return_data);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_extract error:\" + error_code);\n            return;\n        }\n\n        Console.WriteLine(\"get int: \" + return_data);\n\n        // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);\n        if (error_code != ((int)Qiankun_error_code.Qiankun_errorcode_success))\n        {\n            Console.WriteLine(\"tianzuo_QiankunInt_db_close_database error:\" + error_code);\n            return;\n        }\n\n        Console.WriteLine(\"test done -------------------\\n\");\n\n        tianzuo_QiankunInterface_terminate(qiankun);\n\n    }\n\n}\n</code></pre> javascript <pre><code>\nQiankun_errorcode_success           = 0x00000001;   ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\nQiankun_errorcode_normal            = 0x00000002;   ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\nQiankun_errorcode_differ            = 0x00000003;   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\nQiankun_errorcode_no_rights         = 0x00000004;   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\nQiankun_errorcode_db_not_exist      = 0x00000005;   ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\nQiankun_errorcode_exist             = 0x00000006;   ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\nQiankun_errorcode_not_exist         = 0x00000007;   ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\nQiankun_errorcode_out_of_range      = 0x00000008;   ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\nQiankun_errorcode_type              = 0x00000009;   ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\nQiankun_errorcode_param             = 0x0000000A;   ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\nQiankun_errorcode_compress          = 0x0000000B;   ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\nQiankun_errorcode_get_array         = 0x0000000C;   ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\nQiankun_errorcode_out_of_memory     = 0x0000000D;   ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\nQiankun_errorcode_handle            = 0x0000000E;   ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\nQiankun_errorcode_io                = 0x0000000F;   ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n\nlet ffi = require('ffi-napi')\nconst ref = require('ref-napi');\n\nlet tianzuo_QiankunLib = ffi.Library(\"tianzuo.Qiankun.dll\", {\n    'tianzuo_QiankunInterface_initialize': ['pointer', []],\n    'tianzuo_QiankunInterface_terminate':['void',['pointer']],\n    'tianzuo_QiankunInt_initialize':['int',['pointer']],\n    'tianzuo_QiankunInt_db_create_database':['int',['pointer','string','string','string', 'bool']],\n    'tianzuo_QiankunInt_db_open_database':['int',['pointer', 'string', 'string']],\n    'tianzuo_QiankunInt_db_close_database':['int',['pointer', 'string', 'string']],\n    'tianzuo_QiankunInt_data_int_combine':['int',['pointer','string','string','string', 'string', 'int']],\n    'tianzuo_QiankunInt_data_int_extract':['int',['pointer','string','string','string', 'pointer']],\n})\n\n\n// \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\nconsole.log(\"initialize the interface\\n\");\n\n// \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\nlet qiankun = tianzuo_QiankunLib.tianzuo_QiankunInterface_initialize();\nlet error_code = tianzuo_QiankunLib.tianzuo_QiankunInt_initialize(qiankun);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_initialize error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\nlet db_file_name = \"qiankunDataBase.Ztz\";\nlet db_password = \"password\";\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", true);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_db_create_database error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_db_open_database error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\nlet intInt = 12345678;\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_data_int_combine error: %d\\n\", error_code);\n    return;\n}\n\n// \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\nreturn_buf = Buffer.alloc(1 * ref.sizeof.int);\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", return_buf);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_data_int_extract error: %d\\n\", error_code);\n    return;\n}\n\nreturn_data = ref.get(return_buf, 0, ref.types.int);\nconsole.log(\"get int: %d\\n\", return_data);\n\n// \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\nerror_code = tianzuo_QiankunLib.tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password);\nif (error_code !== Qiankun_errorcode_success) {\n    console.log(\"tianzuo_QiankunInt_db_close_database error: %d\\n\", error_code);\n   return;\n}\n\nconsole.log(\"test done -------------------\\n\");\n\ntianzuo_QiankunLib.tianzuo_QiankunInterface_terminate(qiankun);\n\n</code></pre> php <pre><code>&lt;?php\n\n// \u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u52a0\u8f7d\u200b\u4e86\u200b FFI \u200b\u6269\u5c55\u200b\nif (extension_loaded('ffi')) {\n    echo(\"\u200b\u5df2\u200b\u542f\u7528\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n} else {\n    die(\"\u200b\u672a\u200b\u542f\u52a8\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n}\n\nenum Qiankun_error_code\n{\nconst Qiankun_errorcode_success       = 0x00000001;            ///&lt;  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\nconst Qiankun_errorcode_normal        = 0x00000002;            ///&lt;  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\nconst Qiankun_errorcode_differ        = 0x00000003;            ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number of database files fails to be verified)\nconst Qiankun_errorcode_no_rights     = 0x00000004;            ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\nconst Qiankun_errorcode_db_not_exist  = 0x00000005;            ///&lt;  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does not exist)\nconst Qiankun_errorcode_exist         = 0x00000006;            ///&lt;  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\nconst Qiankun_errorcode_not_exist     = 0x00000007;            ///&lt;  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does not exist)\nconst Qiankun_errorcode_out_of_range  = 0x00000008;            ///&lt;  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out of range)\nconst Qiankun_errorcode_type          = 0x00000009;            ///&lt;  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\nconst Qiankun_errorcode_param         = 0x0000000A;            ///&lt;  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter error)\nconst Qiankun_errorcode_compress      = 0x0000000B;            ///&lt;  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression error)\nconst Qiankun_errorcode_get_array     = 0x0000000C;            ///&lt;  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary error)\nconst Qiankun_errorcode_out_of_memory = 0x0000000D;            ///&lt;  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\nconst Qiankun_errorcode_handle        = 0x0000000E;            ///&lt;  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (error handle)\nconst Qiankun_errorcode_io            = 0x0000000F;            ///&lt;  IO\u200b\u9519\u8bef\u200b (io error)\n}\n\n$ffi = FFI::cdef(\"\n    void* tianzuo_QiankunInterface_initialize();\n    void tianzuo_QiankunInterface_terminate(void* *QiankunInt_pointer);\n    int tianzuo_QiankunInt_initialize(void* QiankunInt_pointer);\n    int tianzuo_QiankunInt_db_create_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* db_name, bool const over_write);\n    int tianzuo_QiankunInt_db_open_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password);\n    int tianzuo_QiankunInt_db_close_database(void* QiankunInt_pointer, const char* db_file_name, const char* db_password);\n    int tianzuo_QiankunInt_data_int_combine(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* data_name, const char* remark, int data);\n    int tianzuo_QiankunInt_data_int_extract(void* QiankunInt_pointer, const char* db_file_name, const char* db_password, const char* data_name, int* data);\n\", \"tianzuo.Qiankun.dll\");\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\necho \"initialize the interface\" . \"\\n\";\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n$qiankun = $ffi-&gt;tianzuo_QiankunInterface_initialize();\n\n$error_code = $ffi-&gt;tianzuo_QiankunInt_initialize($qiankun);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"initialize error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n$db_file_name = \"qiankunDataBase.Ztz\";\n$db_password = \"password\";\n$error_code = $ffi-&gt;tianzuo_QiankunInt_db_create_database($qiankun, $db_file_name, $db_password, \"qiankunDataBase\", true);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_db_create_database error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n$error_code = $ffi-&gt;tianzuo_QiankunInt_db_open_database($qiankun, $db_file_name, $db_password);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_db_open_database error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n$intInt = 12345678;\n$error_code = $ffi-&gt;tianzuo_QiankunInt_data_int_combine($qiankun, $db_file_name, $db_password, \"integer\", \"\", $intInt);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_data_int_combine error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n$return_data = FFI::new(\"int\");\n$error_code = $ffi-&gt;tianzuo_QiankunInt_data_int_extract($qiankun, $db_file_name, $db_password, \"integer\", FFI::addr($return_data));\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_data_int_extract error: \" . $error_code . \"\\n\";\n    return;\n}\n\necho \"get integer data: \" . $return_data-&gt;cdata . \"\\n\";\n\n# \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n$error_code = $ffi-&gt;tianzuo_QiankunInt_db_close_database($qiankun, $db_file_name, $db_password);\nif ($error_code != Qiankun_error_code::Qiankun_errorcode_success) {\n    echo \"tianzuo_QiankunInt_db_close_database error: \" . $error_code . \"\\n\";\n    return;\n}\n\necho \"test done -------------------\" . \"\\n\";\n\n?&gt;\n</code></pre> vb <pre><code>\nImports System.Runtime.InteropServices\n\nEnum Qiankun_error_code\n    Qiankun_errorcode_success = 1                     '  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal = 2                      '  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ = 3                      '  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number Of database files fails To be verified)\n    Qiankun_errorcode_no_rights = 4                   '  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist = 5                '  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does Not exist)\n    Qiankun_errorcode_exist = 6                       '  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist = 7                   '  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does Not exist)\n    Qiankun_errorcode_out_of_range = 8                '  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out Of range)\n    Qiankun_errorcode_type = 9                        '  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param = 10                      '  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter Error)\n    Qiankun_errorcode_compress = 11                   '  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression Error)\n    Qiankun_errorcode_get_array = 12                  '  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary Error)\n    Qiankun_errorcode_out_of_memory = 13              '  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle = 14                     '  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (Error handle)\n    Qiankun_errorcode_io = 15                         '  IO\u200b\u9519\u8bef\u200b (io Error)\nEnd Enum\n\nModule Program\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInterface_initialize() As IntPtr\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInterface_terminate(ByRef QiankunInt_pointer As IntPtr)\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_initialize(QiankunInt_pointer As IntPtr) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_db_create_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, db_name As String, over_write As Boolean) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_db_open_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_db_close_database(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_data_int_combine(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, data_name As String, remark As String, data As Integer) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Qiankun.dll\")&gt;\n    Public Function tianzuo_QiankunInt_data_int_extract(QiankunInt_pointer As IntPtr, db_file_name As String, db_password As String, data_name As String, ByRef data As Integer) As Integer\n    End Function\n\n    Sub Main(args As String())\n        ' \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\")\n\n        ' \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Dim qiankun As IntPtr = tianzuo_QiankunInterface_initialize()\n        Dim error_code As Integer = tianzuo_QiankunInt_initialize(qiankun)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_initialize error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        Dim db_file_name As String = \"qiankunDataBase.Ztz\"\n        Dim db_password As String = \"password\"\n        error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name, db_password, \"qiankunDataBase\", True)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_db_create_database error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name, db_password)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_db_open_database error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        Dim intInt As Integer = 12345678\n        error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name, db_password, \"integer\", \"\", intInt)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_combine error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        Dim return_data As Integer = 0\n        error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name, db_password, \"integer\", return_data)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_data_int_extract error:\" + error_code.ToString)\n            Return\n        End If\n\n        Console.WriteLine(\"get int: \" + return_data.ToString)\n\n        ' \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name, db_password)\n        If (error_code &lt;&gt; Qiankun_error_code.Qiankun_errorcode_success) Then\n            Console.WriteLine(\"tianzuo_QiankunInt_db_close_database error:\" + error_code.ToString)\n            Return\n        End If\n\n        Console.WriteLine(\"test done -------------------\")\n\n    End Sub\nEnd Module\n\n</code></pre> go <pre><code>package main\n\n/*\n#include \"tianzuo.QiankunInterface.h\"\n*/\nimport \"C\"\nimport (\n    \"fmt\"\n    \"syscall\"\n    \"unsafe\"\n)\n\nconst (\n    Qiankun_errorcode_success       = 1  //  \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_normal        = 2  //  \u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\n    Qiankun_errorcode_differ        = 3  //  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u6570\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The number Of database files fails To be verified)\n    Qiankun_errorcode_no_rights     = 4  //  \u200b\u6570\u636e\u5e93\u200b\u5bc6\u7801\u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (The database password verification failed)\n    Qiankun_errorcode_db_not_exist  = 5  //  \u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b (The database file does Not exist)\n    Qiankun_errorcode_exist         = 6  //  \u200b\u6570\u636e\u200b\u5df2\u200b\u5b58\u5728\u200b (Data already exists)\n    Qiankun_errorcode_not_exist     = 7  //  \u200b\u6570\u636e\u200b\u4e0d\u200b\u5b58\u5728\u200b (Data does Not exist)\n    Qiankun_errorcode_out_of_range  = 8  //  \u200b\u8d85\u51fa\u8303\u56f4\u200b (out Of range)\n    Qiankun_errorcode_type          = 9  //  \u200b\u7c7b\u578b\u200b\u4e0d\u7b26\u200b (wrong type)\n    Qiankun_errorcode_param         = 10 //  \u200b\u53c2\u6570\u200b\u9519\u8bef\u200b (parameter Error)\n    Qiankun_errorcode_compress      = 11 //  \u200b\u538b\u7f29\u200b\u9519\u8bef\u200b (compression Error)\n    Qiankun_errorcode_get_array     = 12 //  \u200b\u6570\u7ec4\u200b\u9519\u8bef\u200b (arrary Error)\n    Qiankun_errorcode_out_of_memory = 13 //  \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (memory overflow)\n    Qiankun_errorcode_handle        = 14 //  \u200b\u53e5\u67c4\u200b\u9519\u8bef\u200b (Error handle)\n    Qiankun_errorcode_io            = 15 //  IO\u200b\u9519\u8bef\u200b (io Error)\n)\n\nfunc main() {\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    dll := syscall.MustLoadDLL(\"tianzuo.Qiankun.dll\")\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_QiankunInterface_initialize := dll.MustFindProc(\"tianzuo_QiankunInterface_initialize\")\n    qiankun, _, _ := tianzuo_QiankunInterface_initialize.Call()\n\n    tianzuo_QiankunInt_initialize := dll.MustFindProc(\"tianzuo_QiankunInt_initialize\")\n    error_code, _, _ := tianzuo_QiankunInt_initialize.Call(qiankun)\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_initialize error: \", error_code)\n    }\n\n    // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n    db_file_name := C.CString(\"qiankunDataBase.Ztz\")\n    db_password := C.CString(\"password\")\n    tianzuo_QiankunInt_db_create_database := dll.MustFindProc(\"tianzuo_QiankunInt_db_create_database\")\n    error_code, _, _ = tianzuo_QiankunInt_db_create_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(\"qiankunDataBase\"))), 1)\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_db_create_database error: \", error_code)\n    }\n\n    // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n    tianzuo_QiankunInt_db_open_database := dll.MustFindProc(\"tianzuo_QiankunInt_db_open_database\")\n    error_code, _, _ = tianzuo_QiankunInt_db_open_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_db_open_database error: \", error_code)\n    }\n\n    // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n    intInt := C.int(12345678)\n    tianzuo_QiankunInt_data_int_combine := dll.MustFindProc(\"tianzuo_QiankunInt_data_int_combine\")\n    error_code, _, _ = tianzuo_QiankunInt_data_int_combine.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(\"integer\"))), uintptr(unsafe.Pointer(C.CString(\"\"))), uintptr(intInt))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_data_int_combine error: \", error_code)\n    }\n\n    // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n    return_int := C.int(0)\n    tianzuo_QiankunInt_data_int_extract := dll.MustFindProc(\"tianzuo_QiankunInt_data_int_extract\")\n    error_code, _, _ = tianzuo_QiankunInt_data_int_extract.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)), uintptr(unsafe.Pointer(C.CString(\"integer\"))), uintptr(unsafe.Pointer(&amp;return_int)))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_data_int_extract error: \", error_code)\n    }\n\n    fmt.Println(\"get integer data: \", return_int)\n\n    // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n    tianzuo_QiankunInt_db_close_database := dll.MustFindProc(\"tianzuo_QiankunInt_db_close_database\")\n    error_code, _, _ = tianzuo_QiankunInt_db_close_database.Call(qiankun, uintptr(unsafe.Pointer(db_file_name)), uintptr(unsafe.Pointer(db_password)))\n    if error_code != Qiankun_errorcode_success {\n        fmt.Println(\"tianzuo_QiankunInt_db_close_database error: \", error_code)\n    }\n\n    fmt.Println(\"test done -------------------\")\n}\n\n</code></pre> rust <pre><code>\nuse std::os::raw::c_char;\nuse std::ffi::{c_int};\nuse std::ffi::CString;\nuse std::ptr::null;\n\n#[link(name = \"tianzuo.Qiankun\")]\nextern {\n    fn tianzuo_QiankunInterface_initialize() -&gt; *mut std::ffi::c_void;\n    fn tianzuo_QiankunInterface_terminate(obj: *mut std::ffi::c_void);\n    fn tianzuo_QiankunInt_initialize(obj: *mut std::ffi::c_void) -&gt; c_int;\n    fn tianzuo_QiankunInt_db_create_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, db_name: *const c_char, over_write: c_int) -&gt; c_int;\n    fn tianzuo_QiankunInt_db_open_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char) -&gt; c_int;\n    fn tianzuo_QiankunInt_db_close_database(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char) -&gt; c_int;\n    fn tianzuo_QiankunInt_data_int_combine(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, data_name: *const c_char, remark: *const c_char, data: c_int) -&gt; c_int;\n    fn tianzuo_QiankunInt_data_int_extract(obj: *mut std::ffi::c_void, db_file_name: *const c_char, db_password: *const c_char, data_name: *const c_char, data: *const c_int) -&gt; c_int;\n}\n\nfn main() {\n    unsafe {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        println!(\"initialize the interface\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        let qiankun = tianzuo_QiankunInterface_initialize();\n        let error_code = tianzuo_QiankunInt_initialize(qiankun);\n        if 1 != error_code {\n            println!(\"initialize error: {:?}\", error_code);\n        }\n\n        // \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\n        let db_file_name = CString::new(String::from(\"qiankunDataBase.Ztz\")).expect(\"Failed to create CString\");\n        let db_password = CString::new(String::from(\"password\")).expect(\"Failed to create CString\");\n        let db_name = CString::new(String::from(\"qiankunDataBase\")).expect(\"Failed to create CString\");\n        let error_code = tianzuo_QiankunInt_db_create_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), db_name.as_ptr(), 1);\n        if 1 != error_code {\n            println!(\"db_create_database error: {:?}\", error_code);\n        }\n\n        // \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\n        let error_code = tianzuo_QiankunInt_db_open_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr());\n        if 1 != error_code {\n            println!(\"db_open_database error: {:?}\", error_code);\n        }\n\n        // \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\n        let int = 12345678;\n        let data_name = CString::new(String::from(\"integer\")).expect(\"Failed to create CString\");\n        let error_code = tianzuo_QiankunInt_data_int_combine(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), data_name.as_ptr(), null(), int);\n        if 1 != error_code {\n            println!(\"data_combine error: {:?}\", error_code);\n        }\n\n        // \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\n        let mut return_data: c_int = 0;\n        let error_code = tianzuo_QiankunInt_data_int_extract(qiankun, db_file_name.as_ptr(), db_password.as_ptr(), data_name.as_ptr(), &amp;mut return_data);\n        if 1 != error_code {\n            println!(\"data_extract error: {:?}\", error_code);\n        }\n\n        println!(\"get integer data: {:?}\", return_data);\n\n        // \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\n        let error_code = tianzuo_QiankunInt_db_close_database(qiankun, db_file_name.as_ptr(), db_password.as_ptr());\n        if 1 != error_code {\n            println!(\"db_close_database error: {:?}\", error_code);\n        }\n\n        println!(\"test done -------------------\")\n    }\n}\n\n</code></pre> ruby <pre><code>require 'fiddle'\n\nlib = Fiddle::dlopen('C:/Users/zhengtianzuo/RubymineProjects/tianzuo.QiankunTest/tianzuo.Qiankun.dll')\ntianzuo_QiankunInterface_initialize = Fiddle::Function.new(lib['tianzuo_QiankunInterface_initialize'], [], Fiddle::TYPE_VOIDP)\ntianzuo_QiankunInterface_terminate = Fiddle::Function.new(lib['tianzuo_QiankunInterface_terminate'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_VOID)\ntianzuo_QiankunInt_initialize = Fiddle::Function.new(lib['tianzuo_QiankunInt_initialize'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_db_create_database = Fiddle::Function.new(lib['tianzuo_QiankunInt_db_create_database'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_db_open_database = Fiddle::Function.new(lib['tianzuo_QiankunInt_db_open_database'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_data_int_combine = Fiddle::Function.new(lib['tianzuo_QiankunInt_data_int_combine'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_data_int_extract = Fiddle::Function.new(lib['tianzuo_QiankunInt_data_int_extract'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_QiankunInt_db_close_database = Fiddle::Function.new(lib['tianzuo_QiankunInt_db_close_database'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\nprint(\"initialize the interface\\n\")\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\nqiankun = tianzuo_QiankunInterface_initialize.call()\nerror_code = tianzuo_QiankunInt_initialize.call(qiankun)\nif error_code != 1\n  print(\"initialize error:\", error_code, \"\\n\")\n  return\nend\n\n# \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b create database\ndb_file_name = \"qiankunDataBase.Ztz\"\ndb_password = \"password\"\nerror_code = tianzuo_QiankunInt_db_create_database.call(qiankun, db_file_name, db_password, \"qiankunDataBase\", 1)\nif error_code != 1\n  print(\"db_create_database error:\", error_code, \"\\n\")\n  return\nend\n\n# \u200b\u6253\u5f00\u200b\u6570\u636e\u5e93\u200b open database\nerror_code = tianzuo_QiankunInt_db_open_database.call(qiankun, db_file_name, db_password)\nif error_code != 1\n  print(\"db_open_database error:\", error_code, \"\\n\")\nreturn\nend\n\n# \u200b\u5411\u200b\u6570\u636e\u5e93\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u6574\u578b\u200b\u6570\u636e\u200b writes an integer to the database\nintInt = 12345678\nerror_code = tianzuo_QiankunInt_data_int_combine.call(qiankun, db_file_name, db_password, \"integer\", \"\", intInt)\nif error_code != 1\n  print(\"data_combine error:\", error_code, \"\\n\")\nreturn\nend\n\n# \u200b\u8bfb\u53d6\u200b\u521a\u200b\u5199\u5165\u200b\u7684\u200b\u6570\u636e\u200b read the data just written\nreturn_data = Fiddle::Pointer.malloc(Fiddle::SIZEOF_INT)\nerror_code = tianzuo_QiankunInt_data_int_extract.call(qiankun, db_file_name, db_password, \"integer\", return_data)\nif error_code != 1\n  print(\"data_extract error:\", error_code, \"\\n\")\nreturn\nend\n\ninteger = return_data[0, Fiddle::SIZEOF_INT].unpack('I')[0]\nprint(\"get integer data: \", integer, \"\\n\")\n\n# \u200b\u5173\u95ed\u200b\u6570\u636e\u5e93\u200b close database\nerror_code = tianzuo_QiankunInt_db_close_database.call(qiankun, db_file_name, db_password)\nif error_code != 1\n  print(\"db_close_database error:\", error_code)\nreturn\nend\n\nprint(\"test done -------------------\")\n\n</code></pre>"},{"location":"en/component/tianzuo.Qiankun/#download","title":"download","text":""},{"location":"en/component/tianzuo.Zhuiri/","title":"tianzuo.Zhuiri","text":""},{"location":"en/component/tianzuo.Zhuiri/#tianzuozhuiri_1","title":"tianzuo.Zhuiri","text":"operating system compiler programming language"},{"location":"en/component/tianzuo.Zhuiri/#introduction","title":"introduction","text":"<p>tianzuo.Zhuiri High performance reliable UDP data transmission P2P communication framework, can be used to establish P2P environment, file transfer, data communication. UDP protocol based Intranet penetration solution, easy to achieve audio and video conference center, live broadcast, remote desktop/document presentation and other functions.</p> <p>legend: With these boots, you can walk a thousand miles a day and eight hundred miles a night, like wings. Thirst to drink, drink in the river Wei, river Wei insufficient, north drink Daze. Before he arrived, Tao died of thirst. Give up his staff, become Deng Lin.</p>"},{"location":"en/component/tianzuo.Zhuiri/#motivation","title":"motivation","text":"<p>Build reliable UDP data transmission, dynamically adjust the packet loss rate and transmission performance according to the policy, which can facilitate the establishment of P2P communication.</p> <p></p>"},{"location":"en/component/tianzuo.Zhuiri/#features","title":"features","text":"<ul> <li>\ud83e\udde9 simple integration</li> <li>\ud83d\udcca The high level protocol realizes the stability and reliability of data communication, and can dynamically modify the parameters to adjust the communication strategy.</li> <li>\ud83e\udea1 Multiple components can be initialized with the same socket for multithreaded data communication.</li> <li>\ud83d\udd22 Solution to packet loss: using self-developed parallel sliding window protocol to ensure stable and reliable data transmission.</li> <li>\ud83e\ude9f Dynamic adjustment: The feasible efficiency of data communication is dynamically evaluated and calculated to obtain the best communication performance in the current environment.</li> <li>\ud83d\udc5c Data group frame: communication packet sending subcontract, receiving group packet, to ensure the integrity of the data order.</li> </ul>"},{"location":"en/component/tianzuo.Zhuiri/#screenshot","title":"screenshot","text":"<p>tianzuo.Zhuiri Test:</p> <p></p>"},{"location":"en/component/tianzuo.Zhuiri/#example","title":"example","text":"cpp <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include \"tianzuo.ZhuiriInterface.h\" // \u200b\u63a5\u53e3\u200b\u5934\u6587\u4ef6\u200b interface heaher file\n\n#include &lt;winsock.h&gt;\n#pragma comment(lib, \"ws2_32.lib\")\n\n// \u200b\u6570\u636e\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\nvoid msg_recv_callback(void* context, Zhuiri_data_pkg_pointer data_pkg) {\n    Zhuiri_data_pkg_struct data_new;\n    memcpy(&amp;data_new, data_pkg, sizeof(Zhuiri_data_pkg_struct));\n    int send_size = data_pkg-&gt;m_data.get_send_size();\n    if (send_size &gt; Zhuiri_content_size) {\n        char* send_data = new char[static_cast&lt;unsigned int&gt;(send_size)];\n        memcpy(send_data, data_pkg-&gt;get_send_data(), static_cast&lt;unsigned int&gt;(send_size));\n        data_new.set_send_data(send_data);\n    } else {\n        data_new.set_send_data(data_new.m_data.m_data);\n    }\n    tianzuo_DataQueue* const dataQueue = reinterpret_cast&lt;tianzuo_DataQueue*&gt;(context);\n    dataQueue-&gt;push_back(&amp;data_new);\n}\n\n// \u200b\u63a5\u6536\u200b\u7ebf\u7a0b\u200b\nvoid recv_thread(tianzuo_DataQueue* data_queue_recv) {\n    while (1) {\n        Zhuiri_data_pkg_struct recv_msg;\n        if (data_queue_recv-&gt;pop_up(&amp;recv_msg) != Zhuiri_queue_error_code_success) {\n            //std::cout &lt;&lt; \"pop_up no data\" &lt;&lt; std::endl;\n            std::this_thread::sleep_for(std::chrono::milliseconds(200));\n            continue;\n        }\n\n        std::cout &lt;&lt; \"recv data: \" &lt;&lt; recv_msg.m_data.m_data &lt;&lt; std::endl;\n        if (strcmp(recv_msg.m_data.m_data, \"send data 99\") == 0) {\n            std::cout &lt;&lt; \"recv done\" &lt;&lt; std::endl;\n            return;\n        }\n    }\n}\n\nint main() {\n\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    std::unique_ptr&lt;tianzuo_ZhuiriInterface&gt; zhuiri_interface(new tianzuo_ZhuiriInterface());\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_ZhuiriInt* zhuiri = zhuiri_interface-&gt;initialize();\n\n    // \u200b\u521d\u59cb\u5316\u200b\u6570\u636e\u200b\u961f\u5217\u200b\u63a5\u53e3\u200b initialize the data queue interface\n    std::unique_ptr&lt;tianzuo_DataQueueInterface&gt; data_queue_interface(new tianzuo_DataQueueInterface());\n\n    // \u200b\u521b\u5efa\u200b\u6570\u636e\u200b\u961f\u5217\u200b\u5b9e\u4f8b\u200b create an data queue instance\n    tianzuo_DataQueue* data_queue_recv = data_queue_interface-&gt;initialize();\n\n    // \u200b\u521d\u59cb\u5316\u200b\u5b9e\u4f8b\u200b initialize the instance\n    int port = 6666;\n    int error_code = zhuiri-&gt;initialize(\n        nullptr, port, reinterpret_cast&lt;void*&gt;(msg_recv_callback),\n        data_queue_recv, 6000, false);\n    if (error_code != Zhuiri_error_code_success) {\n        std::cout &lt;&lt; \"initialize error: \" &lt;&lt; error_code;\n\n        // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n        if (data_queue_interface != nullptr &amp;&amp; data_queue_recv != nullptr) {\n            data_queue_interface-&gt;terminate(&amp;data_queue_recv);\n        }\n        if (zhuiri_interface != nullptr &amp;&amp; zhuiri != nullptr) {\n            zhuiri_interface-&gt;terminate(&amp;zhuiri);\n        }\n        return -1;\n    }\n\n    // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    Zhuiri_param_struct param(0, 5168, 1024, 2280, 3, 5, 600);\n    zhuiri-&gt;set_param(&amp;param);\n\n    // \u200b\u542f\u52a8\u200b\u63a5\u6536\u200b\u7ebf\u7a0b\u200b start receiving thread\n    std::thread recv_th(recv_thread, data_queue_recv);\n\n    // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    int data_size = 1024;\n    char data[1024];\n    memset(data, 0, data_size);\n    int ip = ntohl(inet_addr(\"127.0.0.1\"));\n    for (size_t i = 0; i &lt; 100; i++) {\n        //std::cout &lt;&lt; \"start send index: \" &lt;&lt; i &lt;&lt; std::endl;\n        sprintf_s(data, data_size, \"send data %d\", i);\n        int data_len = strlen(data);\n        Zhuiri_send_param_struct send_param(0, ip, port, Zhuiri_data_sign_reliable, 7788, data, data_len);\n        error_code = zhuiri-&gt;send(&amp;send_param);\n        if (error_code != Zhuiri_error_code_success) {\n            std::cout &lt;&lt; \"send error: \" &lt;&lt; error_code;\n\n            // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n            if (data_queue_interface != nullptr &amp;&amp; data_queue_recv != nullptr) {\n                data_queue_interface-&gt;terminate(&amp;data_queue_recv);\n            }\n            if (zhuiri_interface != nullptr &amp;&amp; zhuiri != nullptr) {\n                zhuiri_interface-&gt;terminate(&amp;zhuiri);\n            }\n            return -1;\n        }\n        //std::this_thread::sleep_for(std::chrono::milliseconds(10));\n    }\n    std::cout &lt;&lt; \"send done\" &lt;&lt; std::endl;\n    recv_th.join();\n\n    // \u200b\u91ca\u653e\u200b\u63a5\u53e3\u200b terminate the interface\n    if (data_queue_interface != nullptr &amp;&amp; data_queue_recv != nullptr) {\n        data_queue_interface-&gt;terminate(&amp;data_queue_recv);\n    }\n    if (zhuiri_interface != nullptr &amp;&amp; zhuiri != nullptr) {\n        zhuiri_interface-&gt;terminate(&amp;zhuiri);\n    }\n\n    return 0;\n}\n</code></pre> python <pre><code>from ctypes import *\nfrom enum import Enum\nimport ctypes\nimport ipaddress\n\ntianzuo_ZhuiriLib = cdll.LoadLibrary('./tianzuo.Zhuiri.dll')\n\n\nclass Zhuiri_error_code(Enum):\n    Zhuiri_error_code_success       = 0x00000001                                     # \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     = 0x00000002                                     # \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        = 0x0000000D                                     # \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  = 0x00000021                                     # \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        = 0x00000022                                     # \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  = 0x00000023                                     # \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 0x00000024                                     # \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      = 0x00000025                                     # \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   = 0x00000098                                     # \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     = 0x00000099                                     # \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n\n\nclass Zhuiri_queue_error_code(Enum):\n    Zhuiri_queue_error_code_success       = 0x00000001                               # \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_queue_error_code_invalid_value = 0x00000002                               # \u200b\u65e0\u6548\u200b\u7684\u200b\u503c\u200b (invalid value)\n    Zhuiri_queue_error_code_out_of_cache  = 0x00000003                               # \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b (out f cache)\n    Zhuiri_queue_error_code_out_of_memory = 0x00000004                               # \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_queue_error_code_no_data       = 0x00000005                               # \u200b\u65e0\u200b\u6570\u636e\u200b (no data)\n\n\nclass Zhuiri_data_sign(Enum):\n    Zhuiri_data_sign_none       = 0x00000000                                         # \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   = 0x00000001                                         # \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 0x00000002                                         # \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   = 0x00000003                                         # \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      = 0x00000004                                         # \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n\n\nclass tianzuo_ZhuiriInt:\n    def __init__(self):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_initialize.restype = c_void_p\n        self.obj = tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_initialize()\n\n    def __del__(self):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_terminate.argtypes = [c_void_p]\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_terminate(self.obj)\n\n    def initialize(self, ip_addr, port, callback, context, heart_check_time, log_trace, iocp):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize.restype = c_int\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize.argtypes = [c_void_p, c_char_p, ctypes.c_int, c_void_p, c_void_p, ctypes.c_int, ctypes.c_int, c_void_p]\n        return tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize(self.obj, ip_addr, port, callback, context, heart_check_time, log_trace, iocp)\n\n    def set_param(self, sender_index, init_server_port, msg_init_size, recv_ex_data_max, retry_max, retry_all_number, init_retry_time):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param.restype = c_int\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param.argtypes = [c_void_p, c_int, c_int, c_int, c_int, c_int, c_int, c_int]\n        return tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param(self.obj, sender_index, init_server_port, msg_init_size, recv_ex_data_max, retry_max, retry_all_number, init_retry_time)\n\n    def send(self, sender_index, ip, port, sign, function, send_data, send_size):\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send.restype = c_int\n        tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send.argtypes = [c_void_p, c_int, c_int, c_int, c_int, c_int, c_char_p, c_int]\n        return tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send(self.obj, sender_index, ip, port, sign, function, send_data, send_size)\n\n\nclass tianzuo_DataQueueInt:\n    def __init__(self):\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_initialize.restype = c_void_p\n        self.obj = tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_initialize()\n\n    def __del__(self):\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_terminate.argtypes = [c_void_p]\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_terminate(self.obj)\n\n    def initialize(self):\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInt_initialize.restype = c_void_p\n        tianzuo_ZhuiriLib.tianzuo_DataQueueInt_initialize.argtypes = [c_void_p]\n        return tianzuo_ZhuiriLib.tianzuo_DataQueueInt_initialize(self.obj)\n\n\ncallback_type = ctypes.CFUNCTYPE(c_void_p, c_void_p, c_void_p)\n\n\nclass Zhuiri_data_struct(ctypes.Structure):\n    _fields_ = [(\"m_ip_adrs\", ctypes.c_int),\n                (\"m_port\", ctypes.c_int),\n                (\"m_function\", ctypes.c_int),\n                (\"m_sign\", ctypes.c_int),\n                (\"m_index\", ctypes.c_int),\n                (\"m_send_time\", ctypes.c_int),\n                (\"m_send_size\", ctypes.c_int),\n                (\"m_data\", ctypes.c_char * 492)]\n\n\nclass Zhuiri_data_pkg_struct(ctypes.Structure):\n    _fields_ = [(\"m_data\", Zhuiri_data_struct),\n                (\"m_send_data\", ctypes.c_char_p),\n                (\"m_Zhuiri\", ctypes.c_void_p),\n                (\"m_user_data\", ctypes.c_void_p)]\n\n\ndef msg_recv_callback(context, pData):\n    data = ctypes.cast(pData, ctypes.POINTER(Zhuiri_data_pkg_struct)).contents\n    print(\"recv data:\", data.m_data.m_data)\n\n\ndef main():\n    # \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    print(\"initialize the interface\")\n\n    # \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    data_queue_recv = tianzuo_DataQueueInt()\n    pdata_queue_recv = ctypes.pointer(ctypes.py_object(data_queue_recv))\n\n    pmsg_recv_callback = callback_type(msg_recv_callback)\n\n    Zhuiri = tianzuo_ZhuiriInt()\n    port = 6666\n    error_code = Zhuiri.initialize(None, port, pmsg_recv_callback, pdata_queue_recv, 6000, False, None)\n    if error_code != Zhuiri_error_code.Zhuiri_error_code_success.value:\n        print(\"initialize error:\", error_code)\n        return\n\n    # \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    Zhuiri.set_param(0, 5168, 1024, 2280, 3, 5, 600)\n\n    # \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    ip = int(ipaddress.IPv4Address(\"127.0.0.1\"))\n    for i in range(100):\n        data = \"send data {}\".format(i)\n        data_len = len(data)\n        bytes_string = data.encode('utf-8')\n        error_code = Zhuiri.send(0, ip, port, Zhuiri_data_sign.Zhuiri_data_sign_reliable.value, 7788, bytes_string, data_len)\n        if error_code != Zhuiri_error_code.Zhuiri_error_code_success.value:\n            print(\"send error:\", error_code)\n            return\n\n    print(\"test done\")\n\n\nif __name__ == '__main__':\n    main()\n\n</code></pre> java <pre><code>package cn.camelsoft;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\nimport com.sun.jna.Callback;\nimport com.sun.jna.CallbackReference;\nimport com.sun.jna.ptr.IntByReference;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\nenum Zhuiri_error_code {\n    Zhuiri_error_code_success       (0x00000001),                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     (0x00000002),                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        (0x0000000D),                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  (0x00000021),                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        (0x00000022),                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  (0x00000023),                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory (0x00000024),                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      (0x00000025),                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   (0x00000098),                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     (0x00000099);                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n    private int value;\n    Zhuiri_error_code(int value) {\n        this.value = value;\n    }\n    public int getValue() {\n        return value;\n    }\n};\n\nenum Zhuiri_data_sign {\n    Zhuiri_data_sign_none       (0x00000000),                                         ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   (0x00000001),                                         ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing (0x00000002),                                         ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   (0x00000003),                                         ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      (0x00000004);                                         ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n    private int value;\n    Zhuiri_data_sign(int value) {\n        this.value = value;\n    }\n    public int getValue() {\n        return value;\n    }\n};\n\ninterface tianzuo_ZhuiriLib extends Library {\n    tianzuo_ZhuiriLib instance = (tianzuo_ZhuiriLib) Native.load(\"./tianzuo.Zhuiri.dll\", tianzuo_ZhuiriLib.class);\n    Pointer tianzuo_ZhuiriInterface_initialize();\n    void tianzuo_ZhuiriInterface_terminate(Pointer zhuiri);\n    int tianzuo_ZhuiriInt_initialize(Pointer zhuiri, String ip_addr, int port, Pointer callback, Pointer context, int heart_check_time, Boolean log_trace, Pointer iocp);\n    int tianzuo_ZhuiriInt_set_param(Pointer zhuiri, int sender_index, int init_server_port, int msg_init_size, int recv_ex_data_max, int retry_max, int retry_all_number, int init_retry_time);\n    int tianzuo_ZhuiriInt_send(Pointer zhuiri, int sender_index, int ip, int port, int sign, int function, String send_data, int send_size);\n}\n\ninterface tianzuo_DataQueueLib extends Library {\n    tianzuo_DataQueueLib instance = (tianzuo_DataQueueLib) Native.load(\"./tianzuo.Zhuiri.dll\", tianzuo_DataQueueLib.class);\n    Pointer tianzuo_DataQueueInterface_initialize();\n    void tianzuo_DataQueueInterface_terminate(Pointer DataQueue);\n    int tianzuo_DataQueueInt_initialize(Pointer DataQueue);\n}\n\ninterface MyCallback extends Callback {\n    void callbackFunction(Pointer context, Pointer pData);\n}\nclass MyCallbackImpl implements MyCallback {\n\n    @Override\n    public void callbackFunction(Pointer context, Pointer pData) {\n        Zhuiri_data_pkg_struct data_pkg = new Zhuiri_data_pkg_struct(pData);\n        String str = new String(data_pkg.m_data.m_data).trim();\n        System.out.printf(\"recv data: %s\\n\", str);\n    }\n}\n\npublic class Main {\n    public static int ipToInt(String ipAddress) {\n        try {\n            InetAddress inetAddress = InetAddress.getByName(ipAddress);\n            byte[] bytes = inetAddress.getAddress();\n\n            int result = 0;\n            for (byte b : bytes) {\n                result = result &lt;&lt; 8 | (b &amp; 0xFF);\n            }\n\n            return result;\n        } catch (UnknownHostException e) {\n            System.err.println(\"Invalid IP address: \" + ipAddress);\n            return 0;\n        }\n    }\n\n    public static void main(String[] args) {\n\n        System.setProperty(\"jna.encoding\",\"UTF-8\");\n\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        System.out.printf(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Pointer data_queue_recv = tianzuo_DataQueueLib.instance.tianzuo_DataQueueInterface_initialize();\n\n        MyCallback callback = new MyCallbackImpl();\n        Pointer pcallback = CallbackReference.getFunctionPointer(callback);\n\n        Pointer zhuiri = tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInterface_initialize();\n        int port = 6666;\n        int error_code = tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInt_initialize(zhuiri, null, port, pcallback, data_queue_recv, 6000, false, null);\n        if (error_code != Zhuiri_error_code.Zhuiri_error_code_success.getValue()) {\n            System.out.printf(\"tianzuo_ZhuiriInt_initialize error: %d\\n\", error_code);\n            return;\n        }\n\n        // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n        tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInt_set_param(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n        // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        String ipAddress = \"127.0.0.1\";\n        int ip = ipToInt(ipAddress);\n        int sport = 6666;\n        for (int i = 0; i &lt; 100; i++) {\n            String data = String.format(\"send data %d \", i);\n            int data_len = data.length();\n            int error_code2 = tianzuo_ZhuiriLib.instance.tianzuo_ZhuiriInt_send(zhuiri, 0, ip, sport, Zhuiri_data_sign.Zhuiri_data_sign_reliable.getValue(), 7788, data, data_len);\n            if (error_code2 != Zhuiri_error_code.Zhuiri_error_code_success.getValue()) {\n                System.out.printf(\"tianzuo_ZhuiriInt_send error: %d\\n\", error_code2);\n                return;\n            }\n        }\n\n        System.out.printf(\"test done\\n\");\n    }\n}\n</code></pre> csharp <pre><code>\n\nusing System.Collections;\nusing System.Net;\nusing System.Runtime.InteropServices;\nusing System.Text;\n\npublic enum Zhuiri_error_code\n{\n    Zhuiri_error_code_success       = 0x00000001,                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     = 0x00000002,                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        = 0x0000000D,                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  = 0x00000021,                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        = 0x00000022,                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  = 0x00000023,                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 0x00000024,                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      = 0x00000025,                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   = 0x00000098,                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     = 0x00000099,                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n}\n\npublic enum Zhuiri_data_sign\n{\n    Zhuiri_data_sign_none       = 0x00000000,                                         ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   = 0x00000001,                                         ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 0x00000002,                                         ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   = 0x00000003,                                         ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      = 0x00000004,                                         ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n};\n\npublic struct Zhuiri_data_struct\n{\n    public Zhuiri_data_struct()\n    {\n    }\n    public int m_ip_adrs;\n    public int m_port;\n    public int m_function;\n    public int m_sign;\n    public int m_index;\n    public int m_send_time;\n    public int m_send_size;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 492)]\n    public byte[] m_data;\n}\n\npublic struct Zhuiri_data_pkg_struct\n{\n    public Zhuiri_data_pkg_struct()\n    {\n    }\n    public Zhuiri_data_struct m_data;\n    public IntPtr m_send_data;\n    public IntPtr m_Zhuiri;\n    public IntPtr m_user_data;\n}\n\npublic delegate void CallbackDelegate(IntPtr context, IntPtr pData);\n\nclass Program\n{\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern IntPtr tianzuo_ZhuiriInterface_initialize();\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern void tianzuo_ZhuiriInterface_terminate(IntPtr Zhuiri);\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern int tianzuo_ZhuiriInt_initialize(IntPtr Zhuiri, string ip_addr, int port, IntPtr callback, IntPtr context, int heart_check_time, bool log_trace, IntPtr iocp);\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern IntPtr tianzuo_DataQueueInterface_initialize();\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern int tianzuo_ZhuiriInt_set_param(IntPtr Zhuiri, int sender_index, int init_server_port, int msg_init_size, int recv_ex_data_max, int retry_max, int retry_all_number, int init_retry_time);\n    [DllImport(\"tianzuo.Zhuiri.dll\")]\n    public static extern int tianzuo_ZhuiriInt_send(IntPtr Zhuiri, int sender_index, int ip, int port, int sign, int function, string send_data, int send_size);\n\n    static void MyCallback(IntPtr context, IntPtr pData)\n    {\n        Zhuiri_data_pkg_struct data = Marshal.PtrToStructure&lt;Zhuiri_data_pkg_struct&gt;(pData);\n        string str = Encoding.ASCII.GetString(data.m_data.m_data);\n        Console.WriteLine(\"recv data:\" + str);\n    }\n\n    static void Main(string[] args)\n    {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\\n\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        IntPtr data_queue_recv = tianzuo_DataQueueInterface_initialize();\n\n        CallbackDelegate callback = new CallbackDelegate(MyCallback);\n        IntPtr callbackPtr = Marshal.GetFunctionPointerForDelegate(callback);\n\n        IntPtr zhuiri = tianzuo_ZhuiriInterface_initialize();\n        int port = 6666;\n        int error_code = tianzuo_ZhuiriInt_initialize(zhuiri, null, port, callbackPtr, data_queue_recv, 6000, false, 0);\n        if (error_code != ((int)Zhuiri_error_code.Zhuiri_error_code_success))\n        {\n            Console.WriteLine(\"tianzuo_ZhuiriInt_initialize error:\" + error_code);\n            return;\n        }\n\n        // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n        tianzuo_ZhuiriInt_set_param(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n        // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        string ipAddressString = \"127.0.1.1\";\n        IPAddress ipAddress = IPAddress.Parse(ipAddressString);\n        byte[] bytes = ipAddress.GetAddressBytes();\n        if (BitConverter.IsLittleEndian)\n        {\n            Array.Reverse(bytes);\n        }\n        int ip = BitConverter.ToInt32(bytes, 0);\n        int sport = 6666;\n        for (int i = 0; i &lt; 100; i++)\n        {\n            string data = String.Format(\"send data {0}\", i);\n            int data_len = data.Length;\n            error_code = tianzuo_ZhuiriInt_send(zhuiri, 0, ip, sport, (int)Zhuiri_data_sign.Zhuiri_data_sign_reliable, 7788, data, data_len);\n            if (error_code != ((int)Zhuiri_error_code.Zhuiri_error_code_success))\n            {\n                Console.WriteLine(\"tianzuo_ZhuiriInt_send error:\" + error_code);\n                return;\n            }\n        }\n\n        Console.WriteLine(\"test done\");\n    }\n}\n\n</code></pre> javascript <pre><code>\n\nZhuiri_error_code_success       = 0x00000001;                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\nZhuiri_error_code_no_rights     = 0x00000002;                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\nZhuiri_error_code_socket        = 0x0000000D;                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\nZhuiri_error_code_thread_error  = 0x00000021;                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\nZhuiri_error_code_handle        = 0x00000022;                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\nZhuiri_error_code_out_of_cache  = 0x00000023;                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\nZhuiri_error_code_out_of_memory = 0x00000024;                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\nZhuiri_error_code_time_out      = 0x00000025;                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\nZhuiri_error_code_user_reject   = 0x00000098;                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\nZhuiri_error_code_user_exit     = 0x00000099;                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n\nZhuiri_data_sign_none           = 0x00000000;                                     ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\nZhuiri_data_sign_reliable       = 0x00000001;                                     ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\nZhuiri_data_sign_processing     = 0x00000002;                                     ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\nZhuiri_data_sign_response       = 0x00000003;                                     ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\nZhuiri_data_sign_heart          = 0x00000004;                                     ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n\nlet ffi = require('ffi-napi')\nconst ref = require('ref-napi');\n\nlet tianzuo_ZhuiriLib = ffi.Library(\"tianzuo.Zhuiri.dll\", {\n    'tianzuo_ZhuiriInterface_initialize': ['pointer', []],\n    'tianzuo_ZhuiriInterface_terminate':['void',['pointer']],\n    'tianzuo_ZhuiriInt_initialize':['int',['pointer','pointer','int','pointer','pointer','int', 'bool','pointer']],\n    'tianzuo_ZhuiriInt_set_param':['int',['pointer','int','int','int','int','int','int','int']],\n    'tianzuo_ZhuiriInt_send':['int',['pointer','int','int','int','int','int','string','int']],\n    'tianzuo_DataQueueInterface_initialize': ['pointer', []],\n    'tianzuo_DataQueueInterface_terminate':['void',['pointer']],\n})\n\nfunction ipToInt(ip) {\n    let parts = ip.split('.').map(Number);\n    return (parts[0] &lt;&lt; 24) + (parts[1] &lt;&lt; 16) + (parts[2] &lt;&lt; 8) + parts[3];\n}\n\nfunction sleep(ms) {\n    return new Promise(resolve =&gt; setTimeout(resolve, ms));\n}\n\nasync function main() {\n\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    console.log(\"initialize the interface\\n\");\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    let data_queue_recv = tianzuo_ZhuiriLib.tianzuo_DataQueueInterface_initialize();\n\n    const callback = ffi.Callback('void', ['pointer', 'pointer'], function(context, pData) {\n        const data = pData.readCString(4*7);\n        console.log(`recv data: ${data}`);\n    });\n\n    let port = 5555;\n    let zhuiri = tianzuo_ZhuiriLib.tianzuo_ZhuiriInterface_initialize();\n    let error_code = tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_initialize(zhuiri, null, port, callback, data_queue_recv, 6000, false, null);\n    if (error_code !== Zhuiri_error_code_success) {\n        console.log(\"tianzuo_ZhuiriInt_initialize error: %d\\n\", error_code);\n        return;\n    }\n\n    // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_set_param(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n    // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    const ipString = '127.0.0.1';\n    const ip = ipToInt(ipString);\n    let sport = 6666;\n\n    for (let i = 0; i &lt; 10; i++) {\n        const data = `send data ${i}`;\n        const data_len = data.length;\n        error_code = tianzuo_ZhuiriLib.tianzuo_ZhuiriInt_send(zhuiri, 0, ip, sport, Zhuiri_data_sign_reliable, 7788, data, data_len);\n        if (error_code !== Zhuiri_error_code_success) {\n            console.log(\"tianzuo_ZhuiriInt_send error: %d\\n\", error_code);\n            return;\n        }\n    }\n    await sleep(20000);\n}\n\nmain();\n\nconsole.log(\"test done\\n\");\n\n\n</code></pre> php <pre><code>&lt;?php\n\n// \u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u52a0\u8f7d\u200b\u4e86\u200b FFI \u200b\u6269\u5c55\u200b\nif (extension_loaded('ffi')) {\n    echo(\"\u200b\u5df2\u200b\u542f\u7528\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n} else {\n    die(\"\u200b\u672a\u200b\u542f\u52a8\u200b FFI \u200b\u6269\u5c55\u200b\\n\");\n}\n\nenum Zhuiri_error_code\n{\nconst Zhuiri_error_code_success       = 0x00000001;                                     ///&lt; \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\nconst Zhuiri_error_code_no_rights     = 0x00000002;                                     ///&lt; \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\nconst Zhuiri_error_code_socket        = 0x0000000D;                                     ///&lt; \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\nconst Zhuiri_error_code_thread_error  = 0x00000021;                                     ///&lt; \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\nconst Zhuiri_error_code_handle        = 0x00000022;                                     ///&lt; \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\nconst Zhuiri_error_code_out_of_cache  = 0x00000023;                                     ///&lt; \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\nconst Zhuiri_error_code_out_of_memory = 0x00000024;                                     ///&lt; \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\nconst Zhuiri_error_code_time_out      = 0x00000025;                                     ///&lt; \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\nconst Zhuiri_error_code_user_reject   = 0x00000098;                                     ///&lt; \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\nconst Zhuiri_error_code_user_exit     = 0x00000099;                                     ///&lt; \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n};\n\nenum Zhuiri_data_sign\n{\nconst Zhuiri_data_sign_none           = 0x00000000;                                     ///&lt; \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\nconst Zhuiri_data_sign_reliable       = 0x00000001;                                     ///&lt; \u200b\u53ef\u9760\u200b    (reliable)\nconst Zhuiri_data_sign_processing     = 0x00000002;                                     ///&lt; \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\nconst Zhuiri_data_sign_response       = 0x00000003;                                     ///&lt; \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\nconst Zhuiri_data_sign_heart          = 0x00000004;                                     ///&lt; \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n};\n\n$ffi = FFI::cdef(\"\n    void* tianzuo_ZhuiriInterface_initialize();\n    void tianzuo_ZhuiriInterface_terminate(void* *ZhuiriInt_pointer);\n    int tianzuo_ZhuiriInt_initialize(void* ZhuiriInt_pointer, const char* ip_addr, int port, const void* callback, const void* context, int const heart_check_time, bool log_trace, void* iocp);\n    int tianzuo_ZhuiriInt_set_param(void* ZhuiriInt_pointer, int sender_index, int init_server_port, int msg_init_size, int recv_ex_data_max, int retry_max, int retry_all_number, int init_retry_time);\n    int tianzuo_ZhuiriInt_send(void* ZhuiriInt_pointer, int sender_index, int ip, int port, int sign, int function, char* send_data, int send_size);\n    void* tianzuo_DataQueueInterface_initialize();\n    void tianzuo_DataQueueInterface_terminate(void* *DataQueue_pointer);\n    typedef unsigned(*Zhuiri_callback)(const void *context, const void *pData);\n\", \"tianzuo.Zhuiri.dll\");\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\necho \"initialize the interface\" . \"\\n\";\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n$data_queue_recv = $ffi-&gt;tianzuo_DataQueueInterface_initialize();\n\n\n//function myCallback($context, $pData) {\n//    echo \"phpCallback\" . \"\\n\";\n//}\n//\n//// Define the callback function signature\n//$callback = function($context, $pData) {\n//    myCallback($context, $pData);\n//};\n//\n//$callableCallback = FFI::addr($callback);\n\n\n//$phpCallback = function($context, $pData): void {\n//    echo \"phpCallback\" . \"\\n\";\n//};\n//$callback= FFI::new(\"Zhuiri_callback\", $phpCallback);\n\n\n$callback = $ffi-&gt;callback(\"void(const char*)\", function($message) {\n    echo \"Callback message: $message\\n\";\n});\n\n\n\n$port = 6666;\n$zhuiri = $ffi-&gt;tianzuo_ZhuiriInterface_initialize();\n$error_code = $ffi-&gt;tianzuo_ZhuiriInt_initialize($zhuiri, null, $port, $callback, $data_queue_recv, 6000, False, null);\nif ($error_code != Zhuiri_error_code::Zhuiri_error_code_success) {\n    echo \"initialize error: \" . $error_code . \"\\n\";\n    return;\n}\n\n# \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n$ffi-&gt;tianzuo_ZhuiriInt_set_param($zhuiri, 0, 5168, 1024, 2280, 3, 5, 600);\n\n# \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n$ip = ip2long(\"127.0.0.1\");\nfor ($i = 0; $i &lt; 10; $i++) {\n    $data = sprintf(\"send data %d\", $i);\n    $data_len = strlen($data);\n    echo \"ip: \" . $ip . \"\\n\";\n    echo \"port: \" . $port . \"\\n\";\n    echo \"send data: \" . $data . \"\\n\";\n    echo \"data_len: \" . $data_len . \"\\n\";\n    $error_code = $ffi-&gt;tianzuo_ZhuiriInt_send($zhuiri, 0, $ip, $port, Zhuiri_data_sign::Zhuiri_data_sign_reliable, 7788, $data, $data_len);\n    if ($error_code != Zhuiri_error_code::Zhuiri_error_code_success) {\n        echo \"send error: \" . $error_code . \"\\n\";\n        return;\n    }\n}\n\necho \"test done\" . \"\\n\";\n\n\n?&gt;\n</code></pre> vb <pre><code>\nImports System.IO\nImports System.Net\nImports System.Runtime.InteropServices\nImports System.Runtime.InteropServices.JavaScript.JSType\nImports System.Text\n\nEnum Zhuiri_error_code\n    Zhuiri_error_code_success = 1                                            ' \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights = 2                                          ' \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket = 13                                            ' \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket Error)\n    Zhuiri_error_code_thread_error = 21                                      ' \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread Error)\n    Zhuiri_error_code_handle = 22                                            ' \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle Error)\n    Zhuiri_error_code_out_of_cache = 23                                      ' \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 24                                     ' \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out Of memory)\n    Zhuiri_error_code_time_out = 25                                          ' \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject = 98                                       ' \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit = 99                                         ' \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user Exit)\nEnd Enum\n\nEnum Zhuiri_data_sign\n    Zhuiri_data_sign_none = 0                                               ' \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable = 1                                           ' \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 2                                         ' \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response = 3                                           ' \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart = 4                                              ' \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\nEnd Enum\n\nStructure Zhuiri_data_struct\n    Public m_ip_adrs As Integer\n    Public m_port As Integer\n    Public m_function As Integer\n    Public m_sign As Integer\n    Public m_index As Integer\n    Public m_send_time As Integer\n    Public m_send_size As Integer\n    &lt;MarshalAs(UnmanagedType.ByValArray, SizeConst:=492)&gt;\n    Public m_data As Byte()\nEnd Structure\n\nStructure Zhuiri_data_pkg_struct\n    Public m_data As Zhuiri_data_struct\n    Public m_send_data As IntPtr\n    Public m_Zhuiri As IntPtr\n    Public m_user_data As IntPtr\nEnd Structure\n\nModule Program\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInterface_initialize() As IntPtr\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInterface_terminate(ByRef ZhuiriInt_pointer As IntPtr)\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInt_initialize(ZhuiriInt_pointer As IntPtr, ip_addr As String, port As Integer,\n        callback As IntPtr, context As IntPtr, heart_check_time As Integer, log_trace As Boolean, iocp As IntPtr) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInt_set_param(ZhuiriInt_pointer As IntPtr,\n        sender_index As Integer, init_server_port As Integer, msg_init_size As Integer,\n        recv_ex_data_max As Integer, retry_max As Integer, retry_all_number As Integer,\n        init_retry_time As Integer) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_ZhuiriInt_send(ZhuiriInt_pointer As IntPtr,\n        sender_index As Integer, ip As Integer, port As Integer, sign As Integer, func As Integer, send_data As String, send_size As Integer) As Integer\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_DataQueueInterface_initialize() As IntPtr\n    End Function\n    &lt;DllImport(\"tianzuo.Zhuiri.dll\")&gt;\n    Public Function tianzuo_DataQueueInterface_terminate(ByRef DataQueue_pointer As IntPtr)\n    End Function\n\n    Public Delegate Sub CallbackFunc(context As IntPtr, pData As IntPtr)\n\n    Public Sub msg_recv_callback(context As IntPtr, pData As IntPtr)\n        Dim data As Zhuiri_data_pkg_struct = Marshal.PtrToStructure(Of Zhuiri_data_pkg_struct)(pData)\n        Dim Str As String = Encoding.ASCII.GetString(data.m_data.m_data)\n        Console.WriteLine(\"recv data:\" + Str)\n    End Sub\n\n    Sub Main(args As String())\n\n        ' \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        Console.WriteLine(\"initialize the interface\")\n\n        ' \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        Dim data_queue_recv As IntPtr = tianzuo_DataQueueInterface_initialize()\n        Dim callbackDelegate As CallbackFunc = AddressOf msg_recv_callback\n        Dim callbackPtr As IntPtr = Marshal.GetFunctionPointerForDelegate(callbackDelegate)\n\n        Dim port As Integer = 6666\n        Dim Zhuiri As IntPtr = tianzuo_ZhuiriInterface_initialize()\n        Dim error_code As Integer = tianzuo_ZhuiriInt_initialize(Zhuiri, IntPtr.Zero, port, callbackPtr, data_queue_recv, 6000, False, IntPtr.Zero)\n        If (error_code &lt;&gt; Zhuiri_error_code.Zhuiri_error_code_success) Then\n            Console.WriteLine(\"tianzuo_ZhuiriInt_initialize error:\" + error_code.ToString)\n            Return\n        End If\n\n        ' \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b Set Default parameters\n        tianzuo_ZhuiriInt_set_param(Zhuiri, 0, 5168, 1024, 2280, 3, 5, 600)\n\n        ' \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        Dim ipAddressString As String = \"127.0.1.1\"\n        Dim ipAddress As IPAddress = IPAddress.Parse(ipAddressString)\n        Dim bytes As Byte() = ipAddress.GetAddressBytes()\n        If (BitConverter.IsLittleEndian) Then\n            Array.Reverse(bytes)\n        End If\n        Dim ip As Integer = BitConverter.ToInt32(bytes, 0)\n        Dim sport As Integer = 6666\n        For i As Integer = 0 To 99\n            Dim data As String = String.Format(\"send data {0}\", i)\n            Dim data_len As Integer = data.Length\n            error_code = tianzuo_ZhuiriInt_send(Zhuiri, 0, ip, sport, Zhuiri_data_sign.Zhuiri_data_sign_reliable, 7788, data, data_len)\n            If (error_code &lt;&gt; Zhuiri_error_code.Zhuiri_error_code_success) Then\n                Console.WriteLine(\"tianzuo_ZhuiriInt_send error:\" + error_code.ToString)\n                Return\n            End If\n        Next\n\n        Console.WriteLine(\"test done -------------------\")\n\n    End Sub\nEnd Module\n\n</code></pre> go <pre><code>package main\n\n/*\n#include \"tianzuo.ZhuiriInterface.h\"\nvoid msg_recv_callback_cgo(const void *context, const void *pData);\n*/\nimport \"C\"\nimport (\n    \"fmt\"\n    \"net\"\n    \"syscall\"\n    \"unsafe\"\n)\n\nconst (\n    Zhuiri_error_code_success       = 1  // \u200b\u6b63\u786e\u200b\u7684\u200b\u503c\u200b (success)\n    Zhuiri_error_code_no_rights     = 2  // \u200b\u6548\u9a8c\u200b\u672a\u200b\u901a\u8fc7\u200b (no rights)\n    Zhuiri_error_code_socket        = 13 // \u200b\u5957\u200b\u63a5\u5b57\u200b\u9519\u8bef\u200b (socket error)\n    Zhuiri_error_code_thread_error  = 21 // \u200b\u7ebf\u7a0b\u200b\u5931\u8d25\u200b (thread error)\n    Zhuiri_error_code_handle        = 22 // \u200b\u521b\u5efa\u200b\u53e5\u67c4\u200b\u5931\u8d25\u200b (handle error)\n    Zhuiri_error_code_out_of_cache  = 23 // \u200b\u8d85\u51fa\u200b\u7f13\u51b2\u200b\u6700\u5927\u503c\u200b (out f cache)\n    Zhuiri_error_code_out_of_memory = 24 // \u200b\u5185\u5b58\u200b\u6ea2\u51fa\u200b (out of memory)\n    Zhuiri_error_code_time_out      = 25 // \u200b\u64cd\u4f5c\u200b\u8d85\u65f6\u200b (time out)\n    Zhuiri_error_code_user_reject   = 98 // \u200b\u5bf9\u65b9\u200b\u51b3\u7edd\u200b (user reject)\n    Zhuiri_error_code_user_exit     = 99 // \u200b\u81ea\u884c\u200b\u9000\u51fa\u200b (user exit)\n)\n\nconst (\n    Zhuiri_data_sign_none       = 0 // \u200b\u65e0\u200b\u6807\u8bc6\u200b  (no sign)\n    Zhuiri_data_sign_reliable   = 1 // \u200b\u53ef\u9760\u200b    (reliable)\n    Zhuiri_data_sign_processing = 2 // \u200b\u5904\u7406\u200b\u4e2d\u200b  (processing)\n    Zhuiri_data_sign_response   = 3 // \u200b\u56de\u5e94\u200b\u6d88\u606f\u200b (response)\n    Zhuiri_data_sign_heart      = 4 // \u200b\u5fc3\u8df3\u200b\u5305\u200b  (heart)\n)\n\nfunc ipToInt(ip net.IP) uint32 {\n    ip = ip.To4()\n    if ip == nil {\n        return 0\n    }\n\n    ipInt := uint32(ip[0])&lt;&lt;24 | uint32(ip[1])&lt;&lt;16 | uint32(ip[2])&lt;&lt;8 | uint32(ip[3])\n    return ipInt\n}\n\ntype Zhuiri_data_pkg_struct C.Zhuiri_data_pkg_struct\n\n//export msg_recv_callback\nfunc msg_recv_callback(context unsafe.Pointer, pData unsafe.Pointer) {\n    data := *(*Zhuiri_data_pkg_struct)(unsafe.Pointer(pData))\n    charArray := data.m_data.m_data\n    goStr := C.GoString((*C.char)(unsafe.Pointer(&amp;charArray[0])))\n    fmt.Println(\"recv data:\", goStr)\n}\n\nfunc main() {\n    // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n    dll := syscall.MustLoadDLL(\"tianzuo.Zhuiri.dll\")\n\n    // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n    tianzuo_DataQueueInterface_initialize := dll.MustFindProc(\"tianzuo_DataQueueInterface_initialize\")\n    data_queue_recv, _, _ := tianzuo_DataQueueInterface_initialize.Call()\n\n    tianzuo_ZhuiriInterface_initialize := dll.MustFindProc(\"tianzuo_ZhuiriInterface_initialize\")\n    Zhuiri, _, _ := tianzuo_ZhuiriInterface_initialize.Call()\n\n    var ip uintptr\n    port := 6666\n    var iocp uintptr\n    tianzuo_ZhuiriInt_initialize := dll.MustFindProc(\"tianzuo_ZhuiriInt_initialize\")\n    msg_recv_callback_ptr := uintptr(unsafe.Pointer(C.msg_recv_callback_cgo))\n    error_code, _, _ := tianzuo_ZhuiriInt_initialize.Call(Zhuiri, ip, uintptr(C.int(port)), msg_recv_callback_ptr, data_queue_recv, 6000, uintptr(C.int(0)), iocp)\n    if error_code != Zhuiri_error_code_success {\n        fmt.Println(\"tianzuo_ZhuiriInt_initialize error: \", error_code)\n    }\n\n    // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n    tianzuo_ZhuiriInt_set_param := dll.MustFindProc(\"tianzuo_ZhuiriInt_set_param\")\n    tianzuo_ZhuiriInt_set_param.Call(Zhuiri, 0, 5168, 1024, 2280, 3, 5, 600)\n\n    // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n    ipStr := \"127.0.0.1\"\n    ipint := net.ParseIP(ipStr)\n    nip := ipToInt(ipint)\n    tianzuo_ZhuiriInt_send := dll.MustFindProc(\"tianzuo_ZhuiriInt_send\")\n    for i := 0; i &lt; 100; i++ {\n        data := \"send data %d\"\n        gdata := fmt.Sprintf(data, i)\n        cdata := C.CString(gdata)\n        gdata_len := len(gdata)\n        data_len := C.int(gdata_len)\n        error_code, _, _ = tianzuo_ZhuiriInt_send.Call(Zhuiri, 0, uintptr(C.int(nip)), uintptr(C.int(port)), Zhuiri_data_sign_reliable, 7788, uintptr(unsafe.Pointer(cdata)), uintptr(data_len))\n        if error_code != Zhuiri_error_code_success {\n            fmt.Println(\"tianzuo_ZhuiriInt_send error: \", error_code)\n            return\n        }\n    }\n\n    fmt.Println(\"test done -------------------\")\n}\n\n</code></pre> rust <pre><code>\nuse std::os::raw::c_char;\nuse std::ffi::{c_int};\nuse std::ffi::CString;\nuse std::ptr::null;\nuse std::mem;\n\ntype CallbackFunc = extern \"C\" fn(context: *mut std::ffi::c_void, pData: *mut std::ffi::c_void);\n\nstruct Zhuiri_data_struct {\n    m_ip_adrs: i32,\n    m_port: i32,\n    m_function: i32,\n    m_sign: i32,\n    m_index: i32,\n    m_send_time: i32,\n    m_send_size: i32,\n    m_data: [u8; 492],\n}\n\nstruct Zhuiri_data_pkg_struct {\n    m_data: Zhuiri_data_struct,\n    m_send_data: *const c_char,\n    m_Zhuiri: *mut std::ffi::c_void,\n    m_user_data: *mut std::ffi::c_void,\n}\n\n#[link(name = \"tianzuo.Zhuiri\")]\nextern {\n    fn tianzuo_ZhuiriInterface_initialize() -&gt; *mut std::ffi::c_void;\n    fn tianzuo_ZhuiriInterface_terminate(obj: *mut std::ffi::c_void);\n    fn tianzuo_ZhuiriInt_initialize(obj: *mut std::ffi::c_void, ip_addr: *const c_char, port: c_int, callback: *mut std::ffi::c_void, context: *mut std::ffi::c_void, heart_check_time: c_int, log_trace: c_int, iocp: *const std::ffi::c_void) -&gt; c_int;\n    fn tianzuo_ZhuiriInt_set_param(obj: *mut std::ffi::c_void, sender_index: c_int, init_server_port: c_int, msg_init_size: c_int, recv_ex_data_max: c_int, retry_max: c_int, retry_all_number: c_int, init_retry_time: c_int);\n    fn tianzuo_ZhuiriInt_send(obj: *mut std::ffi::c_void, sender_index: c_int, ip: c_int, port: c_int, sign: c_int, function: c_int, send_data: *const c_char, send_size: c_int) -&gt; c_int;\n    fn tianzuo_DataQueueInterface_initialize() -&gt; *mut std::ffi::c_void;\n    fn tianzuo_DataQueueInterface_terminate(obj: *mut std::ffi::c_void);\n    fn tianzuo_DataQueueInt_initializee(obj: *mut std::ffi::c_void);\n}\n\nextern \"C\" fn msg_recv_callback(context: *mut std::ffi::c_void, pData: *mut std::ffi::c_void) {\n    unsafe {\n        //println!(\"Rust callback function called\");\n        let data: &amp;mut Zhuiri_data_pkg_struct = unsafe { mem::transmute(pData) };\n        let string = std::str::from_utf8(&amp;data.m_data.m_data).unwrap();\n        println!(\"recv data: {}\", string);\n    }\n}\n\nfn ip_to_int(ip: &amp;str) -&gt; i32 {\n    let parts: Vec&lt;i32&gt; = ip.split('.').map(|part| part.parse().unwrap()).collect();\n    (parts[0] &lt;&lt; 24) + (parts[1] &lt;&lt; 16) + (parts[2] &lt;&lt; 8) + parts[3]\n}\n\nfn main() {\n    unsafe {\n        // \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\n        println!(\"initialize the interface\");\n\n        // \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\n        let data_queue_recv = tianzuo_DataQueueInterface_initialize();\n\n        let pdata_queue_recv= data_queue_recv as *mut std::ffi::c_void;\n\n        let pmsg_recv_callback = msg_recv_callback as *mut std::ffi::c_void;\n\n        let zhuiri = tianzuo_ZhuiriInterface_initialize();\n        let port = 6666;\n        let error_code = tianzuo_ZhuiriInt_initialize(zhuiri, null(), port, pmsg_recv_callback, pdata_queue_recv, 6000, 0, null());\n        if 1 != error_code {\n            println!(\"tianzuo_ZhuiriInt_initialize error: {:?}\", error_code);\n        }\n\n        // \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\n        tianzuo_ZhuiriInt_set_param(zhuiri,0, 5168, 1024, 2280, 3, 5, 600);\n\n        // \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\n        let ip = ip_to_int(\"127.0.0.1\");\n        for i in 0..=99 {\n            let data = format!(\"send data {}\", i);\n            let data_str = CString::new(String::from(data.clone())).expect(\"Failed to create CString\");\n            let data_len = data.len() as i32;\n            let error_code = tianzuo_ZhuiriInt_send(zhuiri, 0, ip, port, 1, 7788, data_str.as_ptr(), data_len);\n            if 1 != error_code {\n                println!(\"tianzuo_ZhuiriInt_send error: {:?}\", error_code);\n            }\n        }\n\n        println!(\"test done -------------------\")\n    }\n}\n\n</code></pre> ruby <pre><code>require 'fiddle'\nrequire 'ipaddr'\n\nlib = Fiddle::dlopen('C:/Users/zhengtianzuo/RubymineProjects/tianzuo.ZhuiriTest/tianzuo.Zhuiri.dll')\ntianzuo_ZhuiriInterface_initialize = Fiddle::Function.new(lib['tianzuo_ZhuiriInterface_initialize'], [], Fiddle::TYPE_VOIDP)\ntianzuo_ZhuiriInterface_terminate = Fiddle::Function.new(lib['tianzuo_ZhuiriInterface_terminate'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_VOID)\ntianzuo_ZhuiriInt_initialize = Fiddle::Function.new(lib['tianzuo_ZhuiriInt_initialize'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_VOIDP], Fiddle::TYPE_INT)\ntianzuo_ZhuiriInt_set_param = Fiddle::Function.new(lib['tianzuo_ZhuiriInt_set_param'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_ZhuiriInt_send = Fiddle::Function.new(lib['tianzuo_ZhuiriInt_send'], [Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_INT, Fiddle::TYPE_VOIDP, Fiddle::TYPE_INT], Fiddle::TYPE_INT)\ntianzuo_DataQueueInterface_initialize = Fiddle::Function.new(lib['tianzuo_DataQueueInterface_initialize'], [], Fiddle::TYPE_VOIDP)\ntianzuo_DataQueueInterface_terminate = Fiddle::Function.new(lib['tianzuo_DataQueueInterface_terminate'], [Fiddle::TYPE_VOIDP], Fiddle::TYPE_VOID)\n\ndef string_to_char_pointer(str)\n  ptr = Fiddle::Pointer[str]\n  ptr.to_s\nend\n\n# \u200b\u521d\u59cb\u5316\u200b\u63a5\u53e3\u200b initialize the interface\nprint(\"initialize the interface\\n\")\n\n# \u200b\u521b\u5efa\u200b\u5b9e\u4f8b\u200b create an instance\ndata_queue_recv = tianzuo_DataQueueInterface_initialize.call()\n\ncallback = Fiddle::Closure::BlockCaller.new(Fiddle::TYPE_INT, [Fiddle::TYPE_VOIDP, Fiddle::TYPE_VOIDP]) do |context, pData|\n  puts \"callback function called\"\nend\n\nport = 6666\nzhuiri = tianzuo_ZhuiriInterface_initialize.call()\nerror_code = tianzuo_ZhuiriInt_initialize.call(zhuiri, nil, port, callback.to_i, data_queue_recv, 6000, 0, nil)\nif error_code != 1\n  print(\"initialize error:\", error_code, \"\\n\")\n  return\nend\n\n# \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b set default parameters\ntianzuo_ZhuiriInt_set_param.call(zhuiri, 0, 5168, 1024, 2280, 3, 5, 600)\n\n# \u200b\u5f00\u59cb\u200b\u53d1\u9001\u6570\u636e\u200b start sending data\nip = IPAddr.new(\"127.0.0.1\").to_i\nfor i in 1..10\n  data = \"send data %d\" % [i]\n  data_len = data.length\n  error_code = tianzuo_ZhuiriInt_send.call(zhuiri, 0, ip, port, 1, 7788, data, data_len)\n  if error_code != 1\n    print(\"tianzuo_ZhuiriInt_send error:\", error_code, \"\\n\")\n    return\n  end\nend\n\n</code></pre>"},{"location":"en/component/tianzuo.Zhuiri/#download","title":"download","text":""},{"location":"en/other/","title":"other","text":""},{"location":"en/other/AllArticles/","title":"All Articles","text":""},{"location":"en/product/tianzuo.Fuxi/","title":"tianzuo.Fuxi","text":""},{"location":"en/product/tianzuo.Fuxi/#tianzuofuxi_1","title":"tianzuo.Fuxi","text":"operating system compiler programming language"},{"location":"en/product/tianzuo.Fuxi/#introduction","title":"introduction","text":"<p>tianzuo.Fuxi </p> <p>legend: The instrument made by Fuxi with jade and tencel has a gentle white light, and its sound can make people feel peaceful and peaceful. It is said to have a mysterious power that can dominate the hearts of all things.</p>"},{"location":"en/product/tianzuo.Fuxi/#motivation","title":"motivation","text":""},{"location":"en/product/tianzuo.Fuxi/#features","title":"features","text":""},{"location":"en/product/tianzuo.Fuxi/#screenshot","title":"screenshot","text":""},{"location":"en/product/tianzuo.Fuxi/#download","title":"download","text":""},{"location":"en/product/tianzuo.Kunlun/","title":"tianzuo.Kunlun","text":""},{"location":"en/product/tianzuo.Kunlun/#tianzuokunlun_1","title":"tianzuo.Kunlun","text":"operating system compiler programming language"},{"location":"en/product/tianzuo.Kunlun/#introduction","title":"introduction","text":"<p>tianzuo.Kunlun powerful local construction tools, provides all-round static detection, dynamic detection, code tools and various convenient plug-in tools for the project. Scan the program code through lexical analysis, syntax analysis, control flow, data flow analysis, memory detection, code coverage, hot function detection and other technologies to verify whether the code meets the standardization Safety, reliability, maintainability and other indicators. Deeply optimize the code according to the analysis results, improve the code quality and enhance the robustness of the product.</p> <p>legend: In the Kunlun Sky Palace in the Kunlun Mountain, the hometown of immortals, there is a legend that there is a god mirror, which has the power to travel freely through time and space. However, in a fairy pageant, the mirror was stolen by someone, and has been missing ever since.</p>"},{"location":"en/product/tianzuo.Kunlun/#motivation","title":"motivation","text":"<p>Build a local build tool that is easy to run and integrates various code inspections.</p> <p></p>"},{"location":"en/product/tianzuo.Kunlun/#features","title":"features","text":"<ul> <li>Workbench project indicators Collect various indicators of the project as part of the standard to measure the complexity of the project</li> <li>Workbench compilation run can compile projects manually or automatically</li> <li>Workbench Static detection scans the program code through lexical analysis, syntax analysis, control flow, data flow analysis and other technologies to check the consistency of code and design, code compliance with standards, readability, the correctness of the logical expression of the code, the rationality of the code structure and other aspects</li> <li>Workbench Dynamic detection By memory detection, code coverage, hot spot function detection and other technologies according to the analysis results of the code is deeply optimized. Improve code quality and product robustness</li> <li>Workbench Code tool automates code formatting and generates project documentation</li> <li>Toolkit covers all aspects of communication/graphics/design/conversion/generation/miscellaneous gadgets</li> <li>Data bag can record usually used code to the data bag, at any time to browse and copy</li> </ul>"},{"location":"en/product/tianzuo.Kunlun/#screenshot","title":"screenshot","text":""},{"location":"en/product/tianzuo.Kunlun/#support","title":"support","text":""},{"location":"en/product/tianzuo.Kunlun/#support-content","title":"support content","text":"name support developing operating system programming language project type"},{"location":"en/product/tianzuo.Kunlun/#download","title":"download","text":""},{"location":"en/product/tianzuo.Pangu/","title":"tianzuo.Pangu","text":""},{"location":"en/product/tianzuo.Pangu/#tianzuopangu_1","title":"tianzuo.Pangu","text":"operating system compiler programming language"},{"location":"en/product/tianzuo.Pangu/#introduction","title":"introduction","text":"<p>tianzuo.Pangu Instant messaging platform, using self-developed distributed storage and UDP reliable P2P network transmission technology, self-developed IM communication protocol, covering mainstream platforms, plug-in high scalability, OpenGL rendering high smooth UI, supporting integrated web applications, can be deployed privately or in the public cloud.</p> <p>legend: According to legend, at the beginning of the chaos of heaven and earth, Pangu woke up from his sleep and saw the darkness of heaven and earth, so he reached out and took out a huge axe to split the earth and earth, and since then there is our world. This axe has the power to separate heaven and earth and shuttle too empty, and the power is not the Xuanyuan sword. Rumor has it that whoever controls the Pangu axe controls the Law of power.</p>"},{"location":"en/product/tianzuo.Pangu/#motivation","title":"motivation","text":"<p>Build CS architecture IM communication system, support text/expression/picture/voice/video/remote desktop/remote control/whiteboard and other functions.</p>"},{"location":"en/product/tianzuo.Pangu/#features","title":"features","text":"<ul> <li>\ud83e\udde9 simple integration</li> <li>\ud83d\udce6 private deployment is supported</li> <li>\ud83e\udea2 chat data point-to-point encryption, independently developed IM protocol, network library using 'Tenzo. Day Boot 'software development kit</li> <li>\ud83d\udcd2 save chat logs locally, use 'Tenzo' database. Qiankun Bag 'software development kit</li> </ul>"},{"location":"en/product/tianzuo.Pangu/#screenshot","title":"screenshot","text":"<p>tianzuo.Pangu Demo:</p> <p> </p>"},{"location":"en/product/tianzuo.Pangu/#download","title":"download","text":""},{"location":"en/technology/C%2B%2B/#introduction","title":"introduction","text":"<p>C++ is an object-oriented computer programming language invented and implemented in the early 80s of the 20th century by Dr. Benjani Strausstrup of AT&amp;T Bell Laboratories in the United States (originally this language was called \"C with Classes\"). It is a general-purpose programming language that supports multiple programming paradigms with static data type checking. It supports a variety of programming styles such as procedural programming, data abstraction, object-oriented programming, and generic programming. C++ is the inheritance of the C language, which further expands and improves the C language and becomes an object-oriented programming language. The word C++ is usually pronounced as \"C plus plus\" in Chinese mainland programmer circles, while Western programmers usually pronounce it as \"C plus plus\", \"CPP\".</p> Chinese name C++ language Founder BjarneStroustrup Foreign name The C++ Programming Language Founding Company Bell Labs Category Computer Programming Languages Basic Contents Classes, Encapsulation, Overloading, Inheritance, Templates First use December 1983 Founder Benjani Strausstrup"},{"location":"en/technology/C%2B%2B/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/CSharp/#introduction","title":"introduction","text":"<p>CSharp is an object-oriented, user-oriented, and . A high-level programming language on top of the .NET Framework. It is scheduled to appear on the Microsoft Professional Developer Forum (PDC). CSharp is the latest work of Microsoft researcher Anders Hejlsberg. CSharp looks strikingly similar to Java; It includes things like single inheritance, interfaces, almost the same syntax as Java, and the process of compiling into intermediate code and running it. But CSharp is distinctly different from Java in that it borrows from Delphi in that it integrates directly with COM (Component Object Model) and is the protagonist of Microsoft's .NET windows web framework.</p> Foreign name CSharp aliases CSHARP Category Object-Oriented Programming Languages Release time June 2000 Publisher Microsoft Developer Anders Halesberg"},{"location":"en/technology/CSharp/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/DevelopmentTools/","title":"DevelopmentTools","text":""},{"location":"en/technology/Go/#introduction","title":"introduction","text":"<p>The Go language is a statically typed, compiled, and concurrent programming language developed by Google, featuring garbage collection. It critically assimilates the strengths of languages such as C and Java, embodying simplicity and efficiency to the fullest extent.</p> <p>The Go language originated in 2007 when Google's technical experts were increasingly troubled by the growing bloat of C++. They resolved to develop a new language to replace C++. They believed that rather than continually adding new features to a bloated language, it would be better to simplify programming languages. Thus, the new language Golang was born.</p>"},{"location":"en/technology/Go/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/Java/#introduction","title":"introduction","text":"<p>Java is an object-oriented programming language that not only incorporates various advantages of C++ but also discards concepts such as complex multiple inheritance and pointers found in C++. As a result, the Java language possesses two key characteristics: powerful functionality and ease of use. Representing static object-oriented programming languages, Java effectively realizes object-oriented theory, allowing programmers to engage in complex programming with an elegant mindset. Java is characterized by simplicity, object orientation, distribution, robustness, security, platform independence and portability, multithreading, and dynamism. Java can be used to develop desktop applications, web applications, distributed systems, and embedded system applications.</p>"},{"location":"en/technology/Java/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/JavaScript/#introduction","title":"introduction","text":"<p>JavaScript is a dynamic programming language that is widely used in web development, primarily to enhance the interactivity and dynamism of web pages. As one of the core technologies of web development, it collaborates with HTML and CSS, where HTML defines the content structure of web pages, CSS handles styling and layout, and JavaScript controls the behavior and interaction of web pages. Users can utilize JavaScript for various functions such as event handling, form validation, and animation creation. Furthermore, the application of JavaScript has expanded to server-side (such as Node.js), mobile application development, and game development, making it an indispensable part of modern programming environments. Its cross-platform and high adaptability characteristics have made JavaScript one of the most popular and widely used scripting languages globally.</p>"},{"location":"en/technology/JavaScript/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/NetWork/","title":"NetWork","text":""},{"location":"en/technology/OperatingSystem/","title":"OperatingSystem","text":""},{"location":"en/technology/PHP/#introduction","title":"introduction","text":"<p>PHP (PHP: Hypertext Preprocessor, Chinese: Hypertext Preprocessor) is a general-purpose open-source scripting language. The syntax absorbs the characteristics of C language, Java and Perl, which is easy to learn and widely used, mainly applicable to the field of web development. PHP's unique syntax is a mix of C, Java, Perl, and PHP's own syntax. It can execute dynamic web pages much faster than CGI or Perl. Compared with other programming languages, PHP embeds the program into HTML (an application under the standard Universal Markup Language) document to execute, which is much more efficient than CGI that fully generates HTML markup. PHP can also execute compiled code, which can be encrypted and optimized to run, making the code run faster.</p> Chinese name hypertext preprocessor Foreign name Hyper Text Preprocessor Programming paradigms object-oriented, imperative programming Designer Rasmus Lerdorf Maintenance The PHP Group Foreign language abbreviation PHP"},{"location":"en/technology/PHP/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/Python/#introduction","title":"introduction","text":"<p>Python, pronounced /\u02c8pa\u026a\u03b8\u0259n/ in British English and /\u02c8pa\u026a\u03b8\u0251\u02d0n/ in American English, is a computer programming language developed by Dutch scientist Guido van Rossum during the year 1989. In the Python language, everything is an object, including functions, which also possess their own attributes. Python is an interpreted programming language, and when running Python programs, it is necessary to have the interpreter translate the Python code.</p> <p>Python is an unrestricted, cross-platform open-source programming language known for its fast data processing speed, powerful features, and ease of learning, making it widely used in data analysis and processing. Furthermore, Python operates in an interpreted manner, allowing code to be executed directly through the interpreter without the need for compilation, which is characteristic of dynamic languages and results in high programming efficiency. Python is a fully object-oriented language, where numbers, modules, strings, and data structures are all objects, and it supports common class concepts such as inheritance, overloading, derivation, and multiple inheritance.</p> <p>On July 20, 2017, IEEE released the 2017 programming language rankings, with Python ranking first. In March 2018, the language's author announced on a mailing list that support for Python 2.7 would end on January 1, 2020. Users wishing to continue receiving support related to Python 2.7 after this date would need to pay commercial vendors for assistance.</p>"},{"location":"en/technology/Python/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/Ruby/#introduction","title":"introduction","text":"<p>Ruby, a scripting language created for simple and efficient object-oriented programming, was developed in the 1990s by Yukihiro Matsumoto in Japan, adhering to the GPL and Ruby License. Ruby is a programming language that is fully object-oriented with syntax similar to Smalltalk, script execution capabilities, and powerful text processing features akin to Perl. Its inspiration and characteristics are derived from Perl, Smalltalk, Eiffel, Ada, and Lisp languages. The Ruby language itself has also led to the development of alternatives such as JRuby (for the Java platform) and IronRuby (for the .NET platform). Ruby began development on February 24, 1993, and was officially released to the public in December 1995 on fj (newsgroup). The name Ruby was chosen because the pronunciation of Perl is similar to that of the birthstone for June, pearl, while Ruby is named after the birthstone for July, ruby.</p>"},{"location":"en/technology/Ruby/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/Rust/#introduction","title":"introduction","text":"<p>Rust is a systems programming language that emphasizes high performance, reliability, and productivity, supporting various programming paradigms such as structured programming, functional programming, and object-oriented programming. </p> <p>Rust is a compiled language that does not have a runtime or garbage collector. It employs an ownership mechanism to achieve automatic memory management, thereby ensuring memory safety. Rust is an open-source project currently hosted on GitHub, and both Rust and all other official projects are dual-licensed under the Apache License 2.0 and the MIT License. The official package manager for Rust is Cargo.</p>"},{"location":"en/technology/Rust/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/VisualBasic/#introduction","title":"introduction","text":"<p>Visual Basic (abbreviated as VB) is a general-purpose object-based programming language developed by Microsoft, designed for structured, modular, object-oriented programming, featuring an event-driven mechanism with an integrated development environment. It is a language that can be used for the development of Microsoft's own products. \"Visual\" refers to the method of developing graphical user interfaces (GUIs) without the need to write extensive code to describe the appearance and position of interface elements, but rather by simply adding pre-established objects to a point on the screen. \"Basic\" refers to the BASIC (Beginners All-Purpose Symbolic Instruction Code) language, which is one of the most widely used languages in the history of computing technology development. Visual Basic is derived from the BASIC programming language. VB features a graphical user interface (GUI) and a rapid application development (RAD) system, allowing for easy use of DAO, RDO, and ADO to connect to databases, or to effortlessly create ActiveX controls for efficiently generating type-safe and object-oriented applications. Programmers can quickly build an application using the components provided by VB.</p>"},{"location":"en/technology/VisualBasic/#roadmap","title":"roadmap:","text":""},{"location":"en/technology/Cpp/Building/","title":"Building","text":""},{"location":"en/technology/Cpp/CodeSmell/","title":"Code Smell","text":""},{"location":"en/technology/Cpp/Debugging/","title":"Debugging","text":""},{"location":"en/technology/Cpp/DynamicAnalysis/","title":"Dynamic Analysis","text":""},{"location":"en/technology/Cpp/Performance/","title":"Performance","text":""},{"location":"en/technology/Cpp/StaticAnalysis/","title":"Static Analysis","text":""}]}